var DE=n=>{throw TypeError(n)};var _y=(n,t,e)=>t.has(n)||DE("Cannot "+e);var Dn=(n,t,e)=>(_y(n,t,"read from private field"),e?e.call(n):t.get(n)),lo=(n,t,e)=>t.has(n)?DE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),La=(n,t,e,i)=>(_y(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),co=(n,t,e)=>(_y(n,t,"access private method"),e);var OE=(n,t,e,i)=>({set _(a){La(n,t,a,e)},get _(){return Dn(n,t,i)}});function MM(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ay={exports:{}},Rp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function DM(){if(NE)return Rp;NE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var c in a)c!=="key"&&(s[c]=a[c])}else s=a;return a=s.ref,{$$typeof:n,type:i,key:o,ref:a!==void 0?a:null,props:s}}return Rp.Fragment=t,Rp.jsx=e,Rp.jsxs=e,Rp}var LE;function OM(){return LE||(LE=1,Ay.exports=DM()),Ay.exports}var J=OM(),Ey={exports:{}},_e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function NM(){if(PE)return _e;PE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function v(H){return H===null||typeof H!="object"?null:(H=m&&H[m]||H["@@iterator"],typeof H=="function"?H:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function C(H,V,at){this.props=H,this.context=V,this.refs=_,this.updater=at||x}C.prototype.isReactComponent={},C.prototype.setState=function(H,V){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,V,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function D(){}D.prototype=C.prototype;function T(H,V,at){this.props=H,this.context=V,this.refs=_,this.updater=at||x}var w=T.prototype=new D;w.constructor=T,S(w,C.prototype),w.isPureReactComponent=!0;var R=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function I(H,V,at,K,ut,xt){return at=xt.ref,{$$typeof:n,type:H,key:V,ref:at!==void 0?at:null,props:xt}}function B(H,V){return I(H.type,V,void 0,void 0,void 0,H.props)}function F(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function z(H){var V={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(at){return V[at]})}var j=/\/+/g;function Z(H,V){return typeof H=="object"&&H!==null&&H.key!=null?z(""+H.key):V.toString(36)}function nt(){}function it(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(nt,nt):(H.status="pending",H.then(function(V){H.status==="pending"&&(H.status="fulfilled",H.value=V)},function(V){H.status==="pending"&&(H.status="rejected",H.reason=V)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function et(H,V,at,K,ut){var xt=typeof H;(xt==="undefined"||xt==="boolean")&&(H=null);var ot=!1;if(H===null)ot=!0;else switch(xt){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(H.$$typeof){case n:case t:ot=!0;break;case g:return ot=H._init,et(ot(H._payload),V,at,K,ut)}}if(ot)return ut=ut(H),ot=K===""?"."+Z(H,0):K,R(ut)?(at="",ot!=null&&(at=ot.replace(j,"$&/")+"/"),et(ut,V,at,"",function(At){return At})):ut!=null&&(F(ut)&&(ut=B(ut,at+(ut.key==null||H&&H.key===ut.key?"":(""+ut.key).replace(j,"$&/")+"/")+ot)),V.push(ut)),1;ot=0;var tt=K===""?".":K+":";if(R(H))for(var ct=0;ct<H.length;ct++)K=H[ct],xt=tt+Z(K,ct),ot+=et(K,V,at,xt,ut);else if(ct=v(H),typeof ct=="function")for(H=ct.call(H),ct=0;!(K=H.next()).done;)K=K.value,xt=tt+Z(K,ct++),ot+=et(K,V,at,xt,ut);else if(xt==="object"){if(typeof H.then=="function")return et(it(H),V,at,K,ut);throw V=String(H),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ot}function Q(H,V,at){if(H==null)return H;var K=[],ut=0;return et(H,K,"","",function(xt){return V.call(at,xt,ut++)}),K}function k(H){if(H._status===-1){var V=H._result;V=V(),V.then(function(at){(H._status===0||H._status===-1)&&(H._status=1,H._result=at)},function(at){(H._status===0||H._status===-1)&&(H._status=2,H._result=at)}),H._status===-1&&(H._status=0,H._result=V)}if(H._status===1)return H._result.default;throw H._result}var U=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function $(){}return _e.Children={map:Q,forEach:function(H,V,at){Q(H,function(){V.apply(this,arguments)},at)},count:function(H){var V=0;return Q(H,function(){V++}),V},toArray:function(H){return Q(H,function(V){return V})||[]},only:function(H){if(!F(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},_e.Component=C,_e.Fragment=e,_e.Profiler=a,_e.PureComponent=T,_e.StrictMode=i,_e.Suspense=d,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,_e.__COMPILER_RUNTIME={__proto__:null,c:function(H){return O.H.useMemoCache(H)}},_e.cache=function(H){return function(){return H.apply(null,arguments)}},_e.cloneElement=function(H,V,at){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var K=S({},H.props),ut=H.key,xt=void 0;if(V!=null)for(ot in V.ref!==void 0&&(xt=void 0),V.key!==void 0&&(ut=""+V.key),V)!L.call(V,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&V.ref===void 0||(K[ot]=V[ot]);var ot=arguments.length-2;if(ot===1)K.children=at;else if(1<ot){for(var tt=Array(ot),ct=0;ct<ot;ct++)tt[ct]=arguments[ct+2];K.children=tt}return I(H.type,ut,void 0,void 0,xt,K)},_e.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:s,_context:H},H},_e.createElement=function(H,V,at){var K,ut={},xt=null;if(V!=null)for(K in V.key!==void 0&&(xt=""+V.key),V)L.call(V,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ut[K]=V[K]);var ot=arguments.length-2;if(ot===1)ut.children=at;else if(1<ot){for(var tt=Array(ot),ct=0;ct<ot;ct++)tt[ct]=arguments[ct+2];ut.children=tt}if(H&&H.defaultProps)for(K in ot=H.defaultProps,ot)ut[K]===void 0&&(ut[K]=ot[K]);return I(H,xt,void 0,void 0,null,ut)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(H){return{$$typeof:c,render:H}},_e.isValidElement=F,_e.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:k}},_e.memo=function(H,V){return{$$typeof:f,type:H,compare:V===void 0?null:V}},_e.startTransition=function(H){var V=O.T,at={};O.T=at;try{var K=H(),ut=O.S;ut!==null&&ut(at,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then($,U)}catch(xt){U(xt)}finally{O.T=V}},_e.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},_e.use=function(H){return O.H.use(H)},_e.useActionState=function(H,V,at){return O.H.useActionState(H,V,at)},_e.useCallback=function(H,V){return O.H.useCallback(H,V)},_e.useContext=function(H){return O.H.useContext(H)},_e.useDebugValue=function(){},_e.useDeferredValue=function(H,V){return O.H.useDeferredValue(H,V)},_e.useEffect=function(H,V,at){var K=O.H;if(typeof at=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(H,V)},_e.useId=function(){return O.H.useId()},_e.useImperativeHandle=function(H,V,at){return O.H.useImperativeHandle(H,V,at)},_e.useInsertionEffect=function(H,V){return O.H.useInsertionEffect(H,V)},_e.useLayoutEffect=function(H,V){return O.H.useLayoutEffect(H,V)},_e.useMemo=function(H,V){return O.H.useMemo(H,V)},_e.useOptimistic=function(H,V){return O.H.useOptimistic(H,V)},_e.useReducer=function(H,V,at){return O.H.useReducer(H,V,at)},_e.useRef=function(H){return O.H.useRef(H)},_e.useState=function(H){return O.H.useState(H)},_e.useSyncExternalStore=function(H,V,at){return O.H.useSyncExternalStore(H,V,at)},_e.useTransition=function(){return O.H.useTransition()},_e.version="19.1.0",_e}var kE;function bo(){return kE||(kE=1,Ey.exports=NM()),Ey.exports}var X=bo();const q=rr(X),BE=MM({__proto__:null,default:q},[X]);var wy={exports:{}},Mp={},Cy={exports:{}},Ty={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function LM(){return zE||(zE=1,function(n){function t(Q,k){var U=Q.length;Q.push(k);t:for(;0<U;){var $=U-1>>>1,H=Q[$];if(0<a(H,k))Q[$]=k,Q[U]=H,U=$;else break t}}function e(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var k=Q[0],U=Q.pop();if(U!==k){Q[0]=U;t:for(var $=0,H=Q.length,V=H>>>1;$<V;){var at=2*($+1)-1,K=Q[at],ut=at+1,xt=Q[ut];if(0>a(K,U))ut<H&&0>a(xt,K)?(Q[$]=xt,Q[ut]=U,$=ut):(Q[$]=K,Q[at]=U,$=at);else if(ut<H&&0>a(xt,U))Q[$]=xt,Q[ut]=U,$=ut;else break t}}return k}function a(Q,k){var U=Q.sortIndex-k.sortIndex;return U!==0?U:Q.id-k.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var d=[],f=[],g=1,m=null,v=3,x=!1,S=!1,_=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function R(Q){for(var k=e(f);k!==null;){if(k.callback===null)i(f);else if(k.startTime<=Q)i(f),k.sortIndex=k.expirationTime,t(d,k);else break;k=e(f)}}function O(Q){if(_=!1,R(Q),!S)if(e(d)!==null)S=!0,L||(L=!0,Z());else{var k=e(f);k!==null&&et(O,k.startTime-Q)}}var L=!1,I=-1,B=5,F=-1;function z(){return C?!0:!(n.unstable_now()-F<B)}function j(){if(C=!1,L){var Q=n.unstable_now();F=Q;var k=!0;try{t:{S=!1,_&&(_=!1,T(I),I=-1),x=!0;var U=v;try{e:{for(R(Q),m=e(d);m!==null&&!(m.expirationTime>Q&&z());){var $=m.callback;if(typeof $=="function"){m.callback=null,v=m.priorityLevel;var H=$(m.expirationTime<=Q);if(Q=n.unstable_now(),typeof H=="function"){m.callback=H,R(Q),k=!0;break e}m===e(d)&&i(d),R(Q)}else i(d);m=e(d)}if(m!==null)k=!0;else{var V=e(f);V!==null&&et(O,V.startTime-Q),k=!1}}break t}finally{m=null,v=U,x=!1}k=void 0}}finally{k?Z():L=!1}}}var Z;if(typeof w=="function")Z=function(){w(j)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,it=nt.port2;nt.port1.onmessage=j,Z=function(){it.postMessage(null)}}else Z=function(){D(j,0)};function et(Q,k){I=D(function(){Q(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var k=3;break;default:k=v}var U=v;v=k;try{return Q()}finally{v=U}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(Q,k){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var U=v;v=Q;try{return k()}finally{v=U}},n.unstable_scheduleCallback=function(Q,k,U){var $=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?$+U:$):U=$,Q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=U+H,Q={id:g++,callback:k,priorityLevel:Q,startTime:U,expirationTime:H,sortIndex:-1},U>$?(Q.sortIndex=U,t(f,Q),e(d)===null&&Q===e(f)&&(_?(T(I),I=-1):_=!0,et(O,U-$))):(Q.sortIndex=H,t(d,Q),S||x||(S=!0,L||(L=!0,Z()))),Q},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(Q){var k=v;return function(){var U=v;v=k;try{return Q.apply(this,arguments)}finally{v=U}}}}(Ty)),Ty}var FE;function a_(){return FE||(FE=1,Cy.exports=LM()),Cy.exports}var Ry={exports:{}},ta={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function PM(){if(IE)return ta;IE=1;var n=bo();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(d,f,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:f,implementation:g}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ta.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ta.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(d,f,null,g)},ta.flushSync=function(d){var f=o.T,g=i.p;try{if(o.T=null,i.p=2,d)return d()}finally{o.T=f,i.p=g,i.d.f()}},ta.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ta.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ta.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,m=c(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:x}):g==="script"&&i.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ta.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ta.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,m=c(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ta.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ta.requestFormReset=function(d){i.d.r(d)},ta.unstable_batchedUpdates=function(d,f){return d(f)},ta.useFormState=function(d,f,g){return o.H.useFormState(d,f,g)},ta.useFormStatus=function(){return o.H.useHostTransitionStatus()},ta.version="19.1.0",ta}var HE;function FT(){if(HE)return Ry.exports;HE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ry.exports=PM(),Ry.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function kM(){if(GE)return Mp;GE=1;var n=a_(),t=bo(),e=FT();function i(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var l=r,p=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(p=l.return),r=l.return;while(r)}return l.tag===3?p:null}function o(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function c(r){if(s(r)!==r)throw Error(i(188))}function d(r){var l=r.alternate;if(!l){if(l=s(r),l===null)throw Error(i(188));return l!==r?null:r}for(var p=r,y=l;;){var A=p.return;if(A===null)break;var M=A.alternate;if(M===null){if(y=A.return,y!==null){p=y;continue}break}if(A.child===M.child){for(M=A.child;M;){if(M===p)return c(A),r;if(M===y)return c(A),l;M=M.sibling}throw Error(i(188))}if(p.return!==y.return)p=A,y=M;else{for(var G=!1,Y=A.child;Y;){if(Y===p){G=!0,p=A,y=M;break}if(Y===y){G=!0,y=A,p=M;break}Y=Y.sibling}if(!G){for(Y=M.child;Y;){if(Y===p){G=!0,p=M,y=A;break}if(Y===y){G=!0,y=M,p=A;break}Y=Y.sibling}if(!G)throw Error(i(189))}}if(p.alternate!==y)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?r:l}function f(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=f(r),l!==null)return l;r=r.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),w=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function Z(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var nt=Symbol.for("react.client.reference");function it(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===nt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case C:return"Profiler";case _:return"StrictMode";case O:return"Suspense";case L:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case w:return(r.displayName||"Context")+".Provider";case T:return(r._context.displayName||"Context")+".Consumer";case R:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return l=r.displayName||null,l!==null?l:it(r.type)||"Memo";case B:l=r._payload,r=r._init;try{return it(r(l))}catch{}}return null}var et=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},$=[],H=-1;function V(r){return{current:r}}function at(r){0>H||(r.current=$[H],$[H]=null,H--)}function K(r,l){H++,$[H]=r.current,r.current=l}var ut=V(null),xt=V(null),ot=V(null),tt=V(null);function ct(r,l){switch(K(ot,l),K(xt,r),K(ut,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?aE(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=aE(l),r=rE(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}at(ut),K(ut,r)}function At(){at(ut),at(xt),at(ot)}function Mt(r){r.memoizedState!==null&&K(tt,r);var l=ut.current,p=rE(l,r.type);l!==p&&(K(xt,r),K(ut,p))}function Pt(r){xt.current===r&&(at(ut),at(xt)),tt.current===r&&(at(tt),Ap._currentValue=U)}var Bt=Object.prototype.hasOwnProperty,Gt=n.unstable_scheduleCallback,de=n.unstable_cancelCallback,Nt=n.unstable_shouldYield,we=n.unstable_requestPaint,kt=n.unstable_now,Ae=n.unstable_getCurrentPriorityLevel,rn=n.unstable_ImmediatePriority,sn=n.unstable_UserBlockingPriority,vn=n.unstable_NormalPriority,$t=n.unstable_LowPriority,Ce=n.unstable_IdlePriority,Dt=n.log,Ht=n.unstable_setDisableYieldValue,ee=null,Xt=null;function ie(r){if(typeof Dt=="function"&&Ht(r),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(ee,r)}catch{}}var Me=Math.clz32?Math.clz32:si,Ze=Math.log,yn=Math.LN2;function si(r){return r>>>=0,r===0?32:31-(Ze(r)/yn|0)|0}var En=256,Rt=4194304;function qt(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function $e(r,l,p){var y=r.pendingLanes;if(y===0)return 0;var A=0,M=r.suspendedLanes,G=r.pingedLanes;r=r.warmLanes;var Y=y&134217727;return Y!==0?(y=Y&~M,y!==0?A=qt(y):(G&=Y,G!==0?A=qt(G):p||(p=Y&~r,p!==0&&(A=qt(p))))):(Y=y&~M,Y!==0?A=qt(Y):G!==0?A=qt(G):p||(p=y&~r,p!==0&&(A=qt(p)))),A===0?0:l!==0&&l!==A&&(l&M)===0&&(M=A&-A,p=l&-l,M>=p||M===32&&(p&4194048)!==0)?l:A}function Sn(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function sr(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(){var r=En;return En<<=1,(En&4194048)===0&&(En=256),r}function Ci(){var r=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),r}function or(r){for(var l=[],p=0;31>p;p++)l.push(r);return l}function Ti(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function jr(r,l,p,y,A,M){var G=r.pendingLanes;r.pendingLanes=p,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=p,r.entangledLanes&=p,r.errorRecoveryDisabledLanes&=p,r.shellSuspendCounter=0;var Y=r.entanglements,rt=r.expirationTimes,gt=r.hiddenUpdates;for(p=G&~p;0<p;){var _t=31-Me(p),wt=1<<_t;Y[_t]=0,rt[_t]=-1;var vt=gt[_t];if(vt!==null)for(gt[_t]=null,_t=0;_t<vt.length;_t++){var yt=vt[_t];yt!==null&&(yt.lane&=-536870913)}p&=~wt}y!==0&&_a(r,y,0),M!==0&&A===0&&r.tag!==0&&(r.suspendedLanes|=M&~(G&~l))}function _a(r,l,p){r.pendingLanes|=l,r.suspendedLanes&=~l;var y=31-Me(l);r.entangledLanes|=l,r.entanglements[y]=r.entanglements[y]|1073741824|p&4194090}function Ur(r,l){var p=r.entangledLanes|=l;for(r=r.entanglements;p;){var y=31-Me(p),A=1<<y;A&l|r[y]&l&&(r[y]|=l),p&=~A}}function ml(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function vl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function _o(){var r=k.p;return r!==0?r:(r=window.event,r===void 0?32:EE(r.type))}function yl(r,l){var p=k.p;try{return k.p=r,l()}finally{k.p=p}}var qn=Math.random().toString(36).slice(2),on="__reactFiber$"+qn,Ri="__reactProps$"+qn,qr="__reactContainer$"+qn,Rc="__reactEvents$"+qn,nf="__reactListeners$"+qn,ws="__reactHandles$"+qn,Vr="__reactResources$"+qn,Yr="__reactMarker$"+qn;function Mc(r){delete r[on],delete r[Ri],delete r[Rc],delete r[nf],delete r[ws]}function lr(r){var l=r[on];if(l)return l;for(var p=r.parentNode;p;){if(l=p[qr]||p[on]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(r=cE(r);r!==null;){if(p=r[on])return p;r=cE(r)}return l}r=p,p=r.parentNode}return null}function cr(r){if(r=r[on]||r[qr]){var l=r.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return r}return null}function bl(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(i(33))}function Ao(r){var l=r[Vr];return l||(l=r[Vr]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Vn(r){r[Yr]=!0}var td=new Set,ed={};function ln(r,l){Cs(r,l),Cs(r+"Capture",l)}function Cs(r,l){for(ed[r]=l,r=0;r<l.length;r++)td.add(l[r])}var af=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rf={},sf={};function I1(r){return Bt.call(sf,r)?!0:Bt.call(rf,r)?!1:af.test(r)?sf[r]=!0:(rf[r]=!0,!1)}function xl(r,l,p){if(I1(l))if(p===null)r.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var y=l.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+p)}}function Sl(r,l,p){if(p===null)r.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+p)}}function ja(r,l,p,y){if(y===null)r.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(p);return}r.setAttributeNS(l,p,""+y)}}var hi,Ln;function Ts(r){if(hi===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);hi=l&&l[1]||"",Ln=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hi+r+Ln}var Eo=!1;function _l(r,l){if(!r||Eo)return"";Eo=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(yt){var vt=yt}Reflect.construct(r,[],wt)}else{try{wt.call()}catch(yt){vt=yt}r.call(wt.prototype)}}else{try{throw Error()}catch(yt){vt=yt}(wt=r())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(yt){if(yt&&vt&&typeof yt.stack=="string")return[yt.stack,vt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=y.DetermineComponentFrameRoot(),G=M[0],Y=M[1];if(G&&Y){var rt=G.split(`
`),gt=Y.split(`
`);for(A=y=0;y<rt.length&&!rt[y].includes("DetermineComponentFrameRoot");)y++;for(;A<gt.length&&!gt[A].includes("DetermineComponentFrameRoot");)A++;if(y===rt.length||A===gt.length)for(y=rt.length-1,A=gt.length-1;1<=y&&0<=A&&rt[y]!==gt[A];)A--;for(;1<=y&&0<=A;y--,A--)if(rt[y]!==gt[A]){if(y!==1||A!==1)do if(y--,A--,0>A||rt[y]!==gt[A]){var _t=`
`+rt[y].replace(" at new "," at ");return r.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",r.displayName)),_t}while(1<=y&&0<=A);break}}}finally{Eo=!1,Error.prepareStackTrace=p}return(p=r?r.displayName||r.name:"")?Ts(p):""}function of(r){switch(r.tag){case 26:case 27:case 5:return Ts(r.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 15:return _l(r.type,!1);case 11:return _l(r.type.render,!1);case 1:return _l(r.type,!0);case 31:return Ts("Activity");default:return""}}function ur(r){try{var l="";do l+=of(r),r=r.return;while(r);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Mi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function nd(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function lf(r){var l=nd(r)?"checked":"value",p=Object.getOwnPropertyDescriptor(r.constructor.prototype,l),y=""+r[l];if(!r.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,M=p.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return A.call(this)},set:function(G){y=""+G,M.call(this,G)}}),Object.defineProperty(r,l,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(G){y=""+G},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function Dc(r){r._valueTracker||(r._valueTracker=lf(r))}function cf(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var p=l.getValue(),y="";return r&&(y=nd(r)?r.checked?"true":"false":r.value),r=y,r!==p?(l.setValue(r),!0):!1}function Oc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var bm=/[\n"\\]/g;function ia(r){return r.replace(bm,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function id(r,l,p,y,A,M,G,Y){r.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?r.type=G:r.removeAttribute("type"),l!=null?G==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+Mi(l)):r.value!==""+Mi(l)&&(r.value=""+Mi(l)):G!=="submit"&&G!=="reset"||r.removeAttribute("value"),l!=null?rd(r,G,Mi(l)):p!=null?rd(r,G,Mi(p)):y!=null&&r.removeAttribute("value"),A==null&&M!=null&&(r.defaultChecked=!!M),A!=null&&(r.checked=A&&typeof A!="function"&&typeof A!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?r.name=""+Mi(Y):r.removeAttribute("name")}function ad(r,l,p,y,A,M,G,Y){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(r.type=M),l!=null||p!=null){if(!(M!=="submit"&&M!=="reset"||l!=null))return;p=p!=null?""+Mi(p):"",l=l!=null?""+Mi(l):p,Y||l===r.value||(r.value=l),r.defaultValue=l}y=y??A,y=typeof y!="function"&&typeof y!="symbol"&&!!y,r.checked=Y?r.checked:!!y,r.defaultChecked=!!y,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(r.name=G)}function rd(r,l,p){l==="number"&&Oc(r.ownerDocument)===r||r.defaultValue===""+p||(r.defaultValue=""+p)}function Al(r,l,p,y){if(r=r.options,l){l={};for(var A=0;A<p.length;A++)l["$"+p[A]]=!0;for(p=0;p<r.length;p++)A=l.hasOwnProperty("$"+r[p].value),r[p].selected!==A&&(r[p].selected=A),A&&y&&(r[p].defaultSelected=!0)}else{for(p=""+Mi(p),l=null,A=0;A<r.length;A++){if(r[A].value===p){r[A].selected=!0,y&&(r[A].defaultSelected=!0);return}l!==null||r[A].disabled||(l=r[A])}l!==null&&(l.selected=!0)}}function uf(r,l,p){if(l!=null&&(l=""+Mi(l),l!==r.value&&(r.value=l),p==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=p!=null?""+Mi(p):""}function df(r,l,p,y){if(l==null){if(y!=null){if(p!=null)throw Error(i(92));if(et(y)){if(1<y.length)throw Error(i(93));y=y[0]}p=y}p==null&&(p=""),l=p}p=Mi(l),r.defaultValue=p,y=r.textContent,y===p&&y!==""&&y!==null&&(r.value=y)}function wo(r,l){if(l){var p=r.firstChild;if(p&&p===r.lastChild&&p.nodeType===3){p.nodeValue=l;return}}r.textContent=l}var hf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ff(r,l,p){var y=l.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":y?r.setProperty(l,p):typeof p!="number"||p===0||hf.has(l)?l==="float"?r.cssFloat=p:r[l]=(""+p).trim():r[l]=p+"px"}function pf(r,l,p){if(l!=null&&typeof l!="object")throw Error(i(62));if(r=r.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||l!=null&&l.hasOwnProperty(y)||(y.indexOf("--")===0?r.setProperty(y,""):y==="float"?r.cssFloat="":r[y]="");for(var A in l)y=l[A],l.hasOwnProperty(A)&&p[A]!==y&&ff(r,A,y)}else for(var M in l)l.hasOwnProperty(M)&&ff(r,M,l[M])}function sd(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function od(r){return Sm.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ld=null;function Rs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Xr=null,Co=null;function Nc(r){var l=cr(r);if(l&&(r=l.stateNode)){var p=r[Ri]||null;t:switch(r=l.stateNode,l.type){case"input":if(id(r,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),l=p.name,p.type==="radio"&&l!=null){for(p=r;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ia(""+l)+'"][type="radio"]'),l=0;l<p.length;l++){var y=p[l];if(y!==r&&y.form===r.form){var A=y[Ri]||null;if(!A)throw Error(i(90));id(y,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(l=0;l<p.length;l++)y=p[l],y.form===r.form&&cf(y)}break t;case"textarea":uf(r,p.value,p.defaultValue);break t;case"select":l=p.value,l!=null&&Al(r,!!p.multiple,l,!1)}}}var To=!1;function gf(r,l,p){if(To)return r(l,p);To=!0;try{var y=r(l);return y}finally{if(To=!1,(Xr!==null||Co!==null)&&(io(),Xr&&(l=Xr,r=Co,Co=Xr=null,Nc(l),r)))for(l=0;l<r.length;l++)Nc(r[l])}}function El(r,l){var p=r.stateNode;if(p===null)return null;var y=p[Ri]||null;if(y===null)return null;p=y[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break t;default:r=!1}if(r)return null;if(p&&typeof p!="function")throw Error(i(231,l,typeof p));return p}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cd=!1;if(dr)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){cd=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{cd=!1}var Kr=null,Lc=null,Pc=null;function mf(){if(Pc)return Pc;var r,l=Lc,p=l.length,y,A="value"in Kr?Kr.value:Kr.textContent,M=A.length;for(r=0;r<p&&l[r]===A[r];r++);var G=p-r;for(y=1;y<=G&&l[p-y]===A[M-y];y++);return Pc=A.slice(r,1<y?1-y:void 0)}function Cl(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function kc(){return!0}function vf(){return!1}function Di(r){function l(p,y,A,M,G){this._reactName=p,this._targetInst=A,this.type=y,this.nativeEvent=M,this.target=G,this.currentTarget=null;for(var Y in r)r.hasOwnProperty(Y)&&(p=r[Y],this[Y]=p?p(M):M[Y]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?kc:vf,this.isPropagationStopped=vf,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),l}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=Di(Wr),Tl=g({},Wr,{view:0,detail:0}),H1=Di(Tl),yf,ud,$r,Rl=g({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==$r&&($r&&r.type==="mousemove"?(yf=r.screenX-$r.screenX,ud=r.screenY-$r.screenY):ud=yf=0,$r=r),yf)},movementY:function(r){return"movementY"in r?r.movementY:ud}}),zc=Di(Rl),_m=g({},Rl,{dataTransfer:0}),Am=Di(_m),dd=g({},Tl,{relatedTarget:0}),Ro=Di(dd),hd=g({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Em=Di(hd),wm=g({},Wr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ms=Di(wm),Cm=g({},Wr,{data:0}),Qr=Di(Cm),Zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tm(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=bf[r])?!!l[r]:!1}function pd(){return Tm}var Mo=g({},Tl,{key:function(r){if(r.key){var l=Zr[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=Cl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?fd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pd,charCode:function(r){return r.type==="keypress"?Cl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),gd=Di(Mo),Rm=g({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=Di(Rm),Mm=g({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pd}),Dm=Di(Mm),G1=g({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),oi=Di(G1),Om=g({},Rl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Nm=Di(Om),Lm=g({},Wr,{newState:0,oldState:0}),Pm=Di(Lm),km=[9,13,27,32],Ml=dr&&"CompositionEvent"in window,Do=null;dr&&"documentMode"in document&&(Do=document.documentMode);var Bm=dr&&"TextEvent"in window&&!Do,xf=dr&&(!Ml||Do&&8<Do&&11>=Do),Sf=" ",vd=!1;function yd(r,l){switch(r){case"keyup":return km.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _f(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ds=!1;function bd(r,l){switch(r){case"compositionend":return _f(l);case"keypress":return l.which!==32?null:(vd=!0,Sf);case"textInput":return r=l.data,r===Sf&&vd?null:r;default:return null}}function Af(r,l){if(Ds)return r==="compositionend"||!Ml&&yd(r,l)?(r=mf(),Pc=Lc=Kr=null,Ds=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return xf&&l.locale!=="ko"?null:l.data;default:return null}}var zm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xd(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!zm[r.type]:l==="textarea"}function Ef(r,l,p,y){Xr?Co?Co.push(y):Co=[y]:Xr=y,l=P0(l,"onChange"),0<l.length&&(p=new Bc("onChange","change",null,p,y),r.push({event:p,listeners:l}))}var aa=null,Oo=null;function j1(r){JA(r,0)}function Fc(r){var l=bl(r);if(cf(l))return r}function qi(r,l){if(r==="change")return l}var wf=!1;if(dr){var Ic;if(dr){var Sd="oninput"in document;if(!Sd){var Cf=document.createElement("div");Cf.setAttribute("oninput","return;"),Sd=typeof Cf.oninput=="function"}Ic=Sd}else Ic=!1;wf=Ic&&(!document.documentMode||9<document.documentMode)}function _d(){aa&&(aa.detachEvent("onpropertychange",Ad),Oo=aa=null)}function Ad(r){if(r.propertyName==="value"&&Fc(Oo)){var l=[];Ef(l,Oo,r,Rs(r)),gf(j1,l)}}function Fm(r,l,p){r==="focusin"?(_d(),aa=l,Oo=p,aa.attachEvent("onpropertychange",Ad)):r==="focusout"&&_d()}function Ed(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Fc(Oo)}function Hc(r,l){if(r==="click")return Fc(l)}function wn(r,l){if(r==="input"||r==="change")return Fc(l)}function U1(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var ra=typeof Object.is=="function"?Object.is:U1;function Dl(r,l){if(ra(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var p=Object.keys(r),y=Object.keys(l);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var A=p[y];if(!Bt.call(l,A)||!ra(r[A],l[A]))return!1}return!0}function Ol(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Jr(r,l){var p=Ol(r);r=0;for(var y;p;){if(p.nodeType===3){if(y=r+p.textContent.length,r<=l&&y>=l)return{node:p,offset:l-r};r=y}t:{for(;p;){if(p.nextSibling){p=p.nextSibling;break t}p=p.parentNode}p=void 0}p=Ol(p)}}function Tf(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?Tf(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function Rf(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=Oc(r.document);l instanceof r.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)r=l.contentWindow;else break;l=Oc(r.document)}return l}function No(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var hr=dr&&"documentMode"in document&&11>=document.documentMode,Lo=null,Gc=null,Nl=null,jc=!1;function wd(r,l,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;jc||Lo==null||Lo!==Oc(y)||(y=Lo,"selectionStart"in y&&No(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Nl&&Dl(Nl,y)||(Nl=y,y=P0(Gc,"onSelect"),0<y.length&&(l=new Bc("onSelect","select",null,l,p),r.push({event:l,listeners:y}),l.target=Lo)))}function fr(r,l){var p={};return p[r.toLowerCase()]=l.toLowerCase(),p["Webkit"+r]="webkit"+l,p["Moz"+r]="moz"+l,p}var Po={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionrun:fr("Transition","TransitionRun"),transitionstart:fr("Transition","TransitionStart"),transitioncancel:fr("Transition","TransitionCancel"),transitionend:fr("Transition","TransitionEnd")},Cd={},Im={};dr&&(Im=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Os(r){if(Cd[r])return Cd[r];if(!Po[r])return r;var l=Po[r],p;for(p in l)if(l.hasOwnProperty(p)&&p in Im)return Cd[r]=l[p];return r}var Mf=Os("animationend"),Aa=Os("animationiteration"),Td=Os("animationstart"),Hm=Os("transitionrun"),q1=Os("transitionstart"),Df=Os("transitioncancel"),fi=Os("transitionend"),Of=new Map,pi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pi.push("scrollEnd");function Ea(r,l){Of.set(r,l),ln(l,[r])}var ts=new WeakMap;function Zn(r,l){if(typeof r=="object"&&r!==null){var p=ts.get(r);return p!==void 0?p:(l={value:r,source:l,stack:ur(l)},ts.set(r,l),l)}return{value:r,source:l,stack:ur(l)}}var Yn=[],Ns=0,Uc=0;function sa(){for(var r=Ns,l=Uc=Ns=0;l<r;){var p=Yn[l];Yn[l++]=null;var y=Yn[l];Yn[l++]=null;var A=Yn[l];Yn[l++]=null;var M=Yn[l];if(Yn[l++]=null,y!==null&&A!==null){var G=y.pending;G===null?A.next=A:(A.next=G.next,G.next=A),y.pending=A}M!==0&&Ps(p,A,M)}}function qc(r,l,p,y){Yn[Ns++]=r,Yn[Ns++]=l,Yn[Ns++]=p,Yn[Ns++]=y,Uc|=y,r.lanes|=y,r=r.alternate,r!==null&&(r.lanes|=y)}function Ls(r,l,p,y){return qc(r,l,p,y),Vc(r)}function pr(r,l){return qc(r,null,null,l),Vc(r)}function Ps(r,l,p){r.lanes|=p;var y=r.alternate;y!==null&&(y.lanes|=p);for(var A=!1,M=r.return;M!==null;)M.childLanes|=p,y=M.alternate,y!==null&&(y.childLanes|=p),M.tag===22&&(r=M.stateNode,r===null||r._visibility&1||(A=!0)),r=M,M=M.return;return r.tag===3?(M=r.stateNode,A&&l!==null&&(A=31-Me(p),r=M.hiddenUpdates,y=r[A],y===null?r[A]=[l]:y.push(l),l.lane=p|536870912),M):null}function Vc(r){if(50<Dr)throw Dr=0,Au=null,Error(i(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var ko={};function Yc(r,l,p,y){this.tag=r,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(r,l,p,y){return new Yc(r,l,p,y)}function Ll(r){return r=r.prototype,!(!r||!r.isReactComponent)}function gr(r,l){var p=r.alternate;return p===null?(p=Vi(r.tag,l,r.key,r.mode),p.elementType=r.elementType,p.type=r.type,p.stateNode=r.stateNode,p.alternate=r,r.alternate=p):(p.pendingProps=l,p.type=r.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=r.flags&65011712,p.childLanes=r.childLanes,p.lanes=r.lanes,p.child=r.child,p.memoizedProps=r.memoizedProps,p.memoizedState=r.memoizedState,p.updateQueue=r.updateQueue,l=r.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=r.sibling,p.index=r.index,p.ref=r.ref,p.refCleanup=r.refCleanup,p}function Rd(r,l){r.flags&=65011714;var p=r.alternate;return p===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=p.childLanes,r.lanes=p.lanes,r.child=p.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=p.memoizedProps,r.memoizedState=p.memoizedState,r.updateQueue=p.updateQueue,r.type=p.type,l=p.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function Pl(r,l,p,y,A,M){var G=0;if(y=r,typeof r=="function")Ll(r)&&(G=1);else if(typeof r=="string")G=mM(r,p,ut.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case F:return r=Vi(31,p,l,A),r.elementType=F,r.lanes=M,r;case S:return es(p.children,A,M,l);case _:G=8,A|=24;break;case C:return r=Vi(12,p,l,A|2),r.elementType=C,r.lanes=M,r;case O:return r=Vi(13,p,l,A),r.elementType=O,r.lanes=M,r;case L:return r=Vi(19,p,l,A),r.elementType=L,r.lanes=M,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:case w:G=10;break t;case T:G=9;break t;case R:G=11;break t;case I:G=14;break t;case B:G=16,y=null;break t}G=29,p=Error(i(130,r===null?"null":typeof r,"")),y=null}return l=Vi(G,p,l,A),l.elementType=r,l.type=y,l.lanes=M,l}function es(r,l,p,y){return r=Vi(7,r,y,l),r.lanes=p,r}function Md(r,l,p){return r=Vi(6,r,null,l),r.lanes=p,r}function Xc(r,l,p){return l=Vi(4,r.children!==null?r.children:[],r.key,l),l.lanes=p,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var Jn=[],Bo=0,gi=null,Kc=0,oa=[],wa=0,Yi=null,mr=1,Ua="";function Ca(r,l){Jn[Bo++]=Kc,Jn[Bo++]=gi,gi=r,Kc=l}function Nf(r,l,p){oa[wa++]=mr,oa[wa++]=Ua,oa[wa++]=Yi,Yi=r;var y=mr;r=Ua;var A=32-Me(y)-1;y&=~(1<<A),p+=1;var M=32-Me(l)+A;if(30<M){var G=A-A%5;M=(y&(1<<G)-1).toString(32),y>>=G,A-=G,mr=1<<32-Me(l)+A|p<<A|y,Ua=M+r}else mr=1<<M|p<<A|y,Ua=r}function Dd(r){r.return!==null&&(Ca(r,1),Nf(r,1,0))}function Od(r){for(;r===gi;)gi=Jn[--Bo],Jn[Bo]=null,Kc=Jn[--Bo],Jn[Bo]=null;for(;r===Yi;)Yi=oa[--wa],oa[wa]=null,Ua=oa[--wa],oa[wa]=null,mr=oa[--wa],oa[wa]=null}var mi=null,_n=null,Ie=!1,zo=null,vr=!1,Lf=Error(i(519));function ks(r){var l=Error(i(418,""));throw Bl(Zn(l,r)),Lf}function Pf(r){var l=r.stateNode,p=r.type,y=r.memoizedProps;switch(l[on]=r,l[Ri]=y,p){case"dialog":Pe("cancel",l),Pe("close",l);break;case"iframe":case"object":case"embed":Pe("load",l);break;case"video":case"audio":for(p=0;p<vp.length;p++)Pe(vp[p],l);break;case"source":Pe("error",l);break;case"img":case"image":case"link":Pe("error",l),Pe("load",l);break;case"details":Pe("toggle",l);break;case"input":Pe("invalid",l),ad(l,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Dc(l);break;case"select":Pe("invalid",l);break;case"textarea":Pe("invalid",l),df(l,y.value,y.defaultValue,y.children),Dc(l)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||l.textContent===""+p||y.suppressHydrationWarning===!0||iE(l.textContent,p)?(y.popover!=null&&(Pe("beforetoggle",l),Pe("toggle",l)),y.onScroll!=null&&Pe("scroll",l),y.onScrollEnd!=null&&Pe("scrollend",l),y.onClick!=null&&(l.onclick=k0),l=!0):l=!1,l||ks(r)}function Fo(r){for(mi=r.return;mi;)switch(mi.tag){case 5:case 13:vr=!1;return;case 27:case 3:vr=!0;return;default:mi=mi.return}}function Bs(r){if(r!==mi)return!1;if(!Ie)return Fo(r),Ie=!0,!1;var l=r.tag,p;if((p=l!==3&&l!==27)&&((p=l===5)&&(p=r.type,p=!(p!=="form"&&p!=="button")||ly(r.type,r.memoizedProps)),p=!p),p&&_n&&ks(r),Fo(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,l=0;r;){if(r.nodeType===8)if(p=r.data,p==="/$"){if(l===0){_n=ms(r.nextSibling);break t}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++;r=r.nextSibling}_n=null}}else l===27?(l=_n,rc(r.type)?(r=hy,hy=null,_n=r):_n=l):_n=mi?ms(r.stateNode.nextSibling):null;return!0}function kl(){_n=mi=null,Ie=!1}function kf(){var r=zo;return r!==null&&(ui===null?ui=r:ui.push.apply(ui,r),zo=null),r}function Bl(r){zo===null?zo=[r]:zo.push(r)}var Nd=V(null),zs=null,yr=null;function Ta(r,l,p){K(Nd,l._currentValue),l._currentValue=p}function br(r){r._currentValue=Nd.current,at(Nd)}function Ld(r,l,p){for(;r!==null;){var y=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),r===p)break;r=r.return}}function Xe(r,l,p,y){var A=r.child;for(A!==null&&(A.return=r);A!==null;){var M=A.dependencies;if(M!==null){var G=A.child;M=M.firstContext;t:for(;M!==null;){var Y=M;M=A;for(var rt=0;rt<l.length;rt++)if(Y.context===l[rt]){M.lanes|=p,Y=M.alternate,Y!==null&&(Y.lanes|=p),Ld(M.return,p,r),y||(G=null);break t}M=Y.next}}else if(A.tag===18){if(G=A.return,G===null)throw Error(i(341));G.lanes|=p,M=G.alternate,M!==null&&(M.lanes|=p),Ld(G,p,r),G=null}else G=A.child;if(G!==null)G.return=A;else for(G=A;G!==null;){if(G===r){G=null;break}if(A=G.sibling,A!==null){A.return=G.return,G=A;break}G=G.return}A=G}}function Io(r,l,p,y){r=null;for(var A=l,M=!1;A!==null;){if(!M){if((A.flags&524288)!==0)M=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var G=A.alternate;if(G===null)throw Error(i(387));if(G=G.memoizedProps,G!==null){var Y=A.type;ra(A.pendingProps.value,G.value)||(r!==null?r.push(Y):r=[Y])}}else if(A===tt.current){if(G=A.alternate,G===null)throw Error(i(387));G.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(r!==null?r.push(Ap):r=[Ap])}A=A.return}r!==null&&Xe(l,r,p,y),l.flags|=262144}function Pd(r){for(r=r.firstContext;r!==null;){if(!ra(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Fs(r){zs=r,yr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function vi(r){return Gm(zs,r)}function kd(r,l){return zs===null&&Fs(r),Gm(r,l)}function Gm(r,l){var p=l._currentValue;if(l={context:l,memoizedValue:p,next:null},yr===null){if(r===null)throw Error(i(308));yr=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else yr=yr.next=l;return p}var V1=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(p,y){r.push(y)}};this.abort=function(){l.aborted=!0,r.forEach(function(p){return p()})}},Bf=n.unstable_scheduleCallback,ns=n.unstable_NormalPriority,zn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zl(){return{controller:new V1,data:new Map,refCount:0}}function qa(r){r.refCount--,r.refCount===0&&Bf(ns,function(){r.controller.abort()})}var Ho=null,Wc=0,Fl=0,Go=null;function jm(r,l){if(Ho===null){var p=Ho=[];Wc=0,Fl=J1(),Go={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Wc++,l.then(zf,zf),l}function zf(){if(--Wc===0&&Ho!==null){Go!==null&&(Go.status="fulfilled");var r=Ho;Ho=null,Fl=0,Go=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function Um(r,l){var p=[],y={status:"pending",value:null,reason:null,then:function(A){p.push(A)}};return r.then(function(){y.status="fulfilled",y.value=l;for(var A=0;A<p.length;A++)(0,p[A])(l)},function(A){for(y.status="rejected",y.reason=A,A=0;A<p.length;A++)(0,p[A])(void 0)}),y}var Ff=Q.S;Q.S=function(r,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&jm(r,l),Ff!==null&&Ff(r,l)};var is=V(null);function ye(){var r=is.current;return r!==null?r:nn.pooledCache}function Bd(r,l){l===null?K(is,is.current):K(is,l.pool)}function Xi(){var r=ye();return r===null?null:{parent:zn._currentValue,pool:r}}var jo=Error(i(460)),qm=Error(i(474)),Uo=Error(i(542)),Is={then:function(){}};function qo(r){return r=r.status,r==="fulfilled"||r==="rejected"}function $c(){}function zd(r,l,p){switch(p=r[p],p===void 0?r.push(l):p!==l&&(l.then($c,$c),l=p),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,as(r),r;default:if(typeof l.status=="string")l.then($c,$c);else{if(r=nn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=l,r.status="pending",r.then(function(y){if(l.status==="pending"){var A=l;A.status="fulfilled",A.value=y}},function(y){if(l.status==="pending"){var A=l;A.status="rejected",A.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,as(r),r}throw Qc=l,jo}}var Qc=null;function If(){if(Qc===null)throw Error(i(459));var r=Qc;return Qc=null,r}function as(r){if(r===jo||r===Uo)throw Error(i(483))}var xr=!1;function Zc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jc(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Sr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Oi(r,l,p){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(oe&2)!==0){var A=y.pending;return A===null?l.next=l:(l.next=A.next,A.next=l),y.pending=l,l=Vc(r),Ps(r,null,p),l}return qc(r,y,l,p),Vc(r)}function Vo(r,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194048)!==0)){var y=l.lanes;y&=r.pendingLanes,p|=y,l.lanes=p,Ur(r,p)}}function Hf(r,l){var p=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var A=null,M=null;if(p=p.firstBaseUpdate,p!==null){do{var G={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};M===null?A=M=G:M=M.next=G,p=p.next}while(p!==null);M===null?A=M=l:M=M.next=l}else A=M=l;p={baseState:y.baseState,firstBaseUpdate:A,lastBaseUpdate:M,shared:y.shared,callbacks:y.callbacks},r.updateQueue=p;return}r=p.lastBaseUpdate,r===null?p.firstBaseUpdate=l:r.next=l,p.lastBaseUpdate=l}var Fd=!1;function tu(){if(Fd){var r=Go;if(r!==null)throw r}}function Hs(r,l,p,y){Fd=!1;var A=r.updateQueue;xr=!1;var M=A.firstBaseUpdate,G=A.lastBaseUpdate,Y=A.shared.pending;if(Y!==null){A.shared.pending=null;var rt=Y,gt=rt.next;rt.next=null,G===null?M=gt:G.next=gt,G=rt;var _t=r.alternate;_t!==null&&(_t=_t.updateQueue,Y=_t.lastBaseUpdate,Y!==G&&(Y===null?_t.firstBaseUpdate=gt:Y.next=gt,_t.lastBaseUpdate=rt))}if(M!==null){var wt=A.baseState;G=0,_t=gt=rt=null,Y=M;do{var vt=Y.lane&-536870913,yt=vt!==Y.lane;if(yt?(Le&vt)===vt:(y&vt)===vt){vt!==0&&vt===Fl&&(Fd=!0),_t!==null&&(_t=_t.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});t:{var ce=r,ne=Y;vt=l;var gn=p;switch(ne.tag){case 1:if(ce=ne.payload,typeof ce=="function"){wt=ce.call(gn,wt,vt);break t}wt=ce;break t;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=ne.payload,vt=typeof ce=="function"?ce.call(gn,wt,vt):ce,vt==null)break t;wt=g({},wt,vt);break t;case 2:xr=!0}}vt=Y.callback,vt!==null&&(r.flags|=64,yt&&(r.flags|=8192),yt=A.callbacks,yt===null?A.callbacks=[vt]:yt.push(vt))}else yt={lane:vt,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},_t===null?(gt=_t=yt,rt=wt):_t=_t.next=yt,G|=vt;if(Y=Y.next,Y===null){if(Y=A.shared.pending,Y===null)break;yt=Y,Y=yt.next,yt.next=null,A.lastBaseUpdate=yt,A.shared.pending=null}}while(!0);_t===null&&(rt=wt),A.baseState=rt,A.firstBaseUpdate=gt,A.lastBaseUpdate=_t,M===null&&(A.shared.lanes=0),un|=G,r.lanes=G,r.memoizedState=wt}}function Zt(r,l){if(typeof r!="function")throw Error(i(191,r));r.call(l)}function Vm(r,l){var p=r.callbacks;if(p!==null)for(r.callbacks=null,r=0;r<p.length;r++)Zt(p[r],l)}var Il=V(null),eu=V(0);function Hl(r,l){r=Mr,K(eu,r),K(Il,l),Mr=r|l.baseLanes}function Gf(){K(eu,Mr),K(Il,Il.current)}function jf(){Mr=eu.current,at(Il),at(eu)}var Gs=0,be=null,tn=null,Mn=null,nu=!1,rs=!1,js=!1,Id=0,iu=0,Ra=null,ss=0;function De(){throw Error(i(321))}function _r(r,l){if(l===null)return!1;for(var p=0;p<l.length&&p<r.length;p++)if(!ra(r[p],l[p]))return!1;return!0}function Ki(r,l,p,y,A,M){return Gs=M,be=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Q.H=r===null||r.memoizedState===null?_0:rp,js=!1,M=p(y,A),js=!1,rs&&(M=Xm(l,p,y,A)),Ym(r),M}function Ym(r){Q.H=Vd;var l=tn!==null&&tn.next!==null;if(Gs=0,Mn=tn=be=null,nu=!1,iu=0,Ra=null,l)throw Error(i(300));r===null||en||(r=r.dependencies,r!==null&&Pd(r)&&(en=!0))}function Xm(r,l,p,y){be=r;var A=0;do{if(rs&&(Ra=null),iu=0,rs=!1,25<=A)throw Error(i(301));if(A+=1,Mn=tn=null,r.updateQueue!=null){var M=r.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}Q.H=W1,M=l(p,y)}while(rs);return M}function ti(){var r=Q.H,l=r.useState()[0];return l=typeof l.then=="function"?au(l):l,r=r.useState()[0],(tn!==null?tn.memoizedState:null)!==r&&(be.flags|=1024),l}function Va(){var r=Id!==0;return Id=0,r}function Uf(r,l,p){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~p}function qf(r){if(nu){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}nu=!1}Gs=0,Mn=tn=be=null,rs=!1,iu=Id=0,Ra=null}function Wi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?be.memoizedState=Mn=r:Mn=Mn.next=r,Mn}function Fn(){if(tn===null){var r=be.alternate;r=r!==null?r.memoizedState:null}else r=tn.next;var l=Mn===null?be.memoizedState:Mn.next;if(l!==null)Mn=l,tn=r;else{if(r===null)throw be.alternate===null?Error(i(467)):Error(i(310));tn=r,r={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},Mn===null?be.memoizedState=Mn=r:Mn=Mn.next=r}return Mn}function Hd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(r){var l=iu;return iu+=1,Ra===null&&(Ra=[]),r=zd(Ra,r,l),l=be,(Mn===null?l.memoizedState:Mn.next)===null&&(l=l.alternate,Q.H=l===null||l.memoizedState===null?_0:rp),r}function ru(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return au(r);if(r.$$typeof===w)return vi(r)}throw Error(i(438,String(r)))}function Vf(r){var l=null,p=be.updateQueue;if(p!==null&&(l=p.memoCache),l==null){var y=be.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(A){return A.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),p===null&&(p=Hd(),be.updateQueue=p),p.memoCache=l,p=l.data[l.index],p===void 0)for(p=l.data[l.index]=Array(r),y=0;y<r;y++)p[y]=z;return l.index++,p}function $i(r,l){return typeof l=="function"?l(r):l}function Ar(r){var l=Fn();return Yf(l,tn,r)}function Yf(r,l,p){var y=r.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=p;var A=r.baseQueue,M=y.pending;if(M!==null){if(A!==null){var G=A.next;A.next=M.next,M.next=G}l.baseQueue=A=M,y.pending=null}if(M=r.baseState,A===null)r.memoizedState=M;else{l=A.next;var Y=G=null,rt=null,gt=l,_t=!1;do{var wt=gt.lane&-536870913;if(wt!==gt.lane?(Le&wt)===wt:(Gs&wt)===wt){var vt=gt.revertLane;if(vt===0)rt!==null&&(rt=rt.next={lane:0,revertLane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),wt===Fl&&(_t=!0);else if((Gs&vt)===vt){gt=gt.next,vt===Fl&&(_t=!0);continue}else wt={lane:0,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},rt===null?(Y=rt=wt,G=M):rt=rt.next=wt,be.lanes|=vt,un|=vt;wt=gt.action,js&&p(M,wt),M=gt.hasEagerState?gt.eagerState:p(M,wt)}else vt={lane:wt,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},rt===null?(Y=rt=vt,G=M):rt=rt.next=vt,be.lanes|=wt,un|=wt;gt=gt.next}while(gt!==null&&gt!==l);if(rt===null?G=M:rt.next=Y,!ra(M,r.memoizedState)&&(en=!0,_t&&(p=Go,p!==null)))throw p;r.memoizedState=M,r.baseState=G,r.baseQueue=rt,y.lastRenderedState=M}return A===null&&(y.lanes=0),[r.memoizedState,y.dispatch]}function Xf(r){var l=Fn(),p=l.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=r;var y=p.dispatch,A=p.pending,M=l.memoizedState;if(A!==null){p.pending=null;var G=A=A.next;do M=r(M,G.action),G=G.next;while(G!==A);ra(M,l.memoizedState)||(en=!0),l.memoizedState=M,l.baseQueue===null&&(l.baseState=M),p.lastRenderedState=M}return[M,y]}function Km(r,l,p){var y=be,A=Fn(),M=Ie;if(M){if(p===void 0)throw Error(i(407));p=p()}else p=l();var G=!ra((tn||A).memoizedState,p);G&&(A.memoizedState=p,en=!0),A=A.queue;var Y=$m.bind(null,y,A,r);if(su(2048,8,Y,[r]),A.getSnapshot!==l||G||Mn!==null&&Mn.memoizedState.tag&1){if(y.flags|=2048,Ul(9,Gd(),Wm.bind(null,y,A,p,l),null),nn===null)throw Error(i(349));M||(Gs&124)!==0||Gl(y,l,p)}return p}function Gl(r,l,p){r.flags|=16384,r={getSnapshot:l,value:p},l=be.updateQueue,l===null?(l=Hd(),be.updateQueue=l,l.stores=[r]):(p=l.stores,p===null?l.stores=[r]:p.push(r))}function Wm(r,l,p,y){l.value=p,l.getSnapshot=y,Qm(l)&&jl(r)}function $m(r,l,p){return p(function(){Qm(l)&&jl(r)})}function Qm(r){var l=r.getSnapshot;r=r.value;try{var p=l();return!ra(r,p)}catch{return!0}}function jl(r){var l=pr(r,2);l!==null&&jn(l,r,2)}function Kf(r){var l=Wi();if(typeof r=="function"){var p=r;if(r=p(),js){ie(!0);try{p()}finally{ie(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:r},l}function Zm(r,l,p,y){return r.baseState=p,Yf(r,tn,typeof y=="function"?y:$i)}function Y1(r,l,p,y,A){if(qd(r))throw Error(i(485));if(r=l.action,r!==null){var M={payload:A,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){M.listeners.push(G)}};Q.T!==null?p(!0):M.isTransition=!1,y(M),p=l.pending,p===null?(M.next=l.pending=M,Jm(l,M)):(M.next=p.next,l.pending=p.next=M)}}function Jm(r,l){var p=l.action,y=l.payload,A=r.state;if(l.isTransition){var M=Q.T,G={};Q.T=G;try{var Y=p(A,y),rt=Q.S;rt!==null&&rt(G,Y),t0(r,l,Y)}catch(gt){Wf(r,l,gt)}finally{Q.T=M}}else try{M=p(A,y),t0(r,l,M)}catch(gt){Wf(r,l,gt)}}function t0(r,l,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){e0(r,l,y)},function(y){return Wf(r,l,y)}):e0(r,l,p)}function e0(r,l,p){l.status="fulfilled",l.value=p,n0(l),r.state=p,l=r.pending,l!==null&&(p=l.next,p===l?r.pending=null:(p=p.next,l.next=p,Jm(r,p)))}function Wf(r,l,p){var y=r.pending;if(r.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=p,n0(l),l=l.next;while(l!==y)}r.action=null}function n0(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function i0(r,l){return l}function a0(r,l){if(Ie){var p=nn.formState;if(p!==null){t:{var y=be;if(Ie){if(_n){e:{for(var A=_n,M=vr;A.nodeType!==8;){if(!M){A=null;break e}if(A=ms(A.nextSibling),A===null){A=null;break e}}M=A.data,A=M==="F!"||M==="F"?A:null}if(A){_n=ms(A.nextSibling),y=A.data==="F!";break t}}ks(y)}y=!1}y&&(l=p[0])}}return p=Wi(),p.memoizedState=p.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i0,lastRenderedState:l},p.queue=y,p=b0.bind(null,be,y),y.dispatch=p,y=Kf(!1),M=ap.bind(null,be,!1,y.queue),y=Wi(),A={state:l,dispatch:null,action:r,pending:null},y.queue=A,p=Y1.bind(null,be,A,M,p),A.dispatch=p,y.memoizedState=r,[l,p,!1]}function r0(r){var l=Fn();return s0(l,tn,r)}function s0(r,l,p){if(l=Yf(r,l,i0)[0],r=Ar($i)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var y=au(l)}catch(G){throw G===jo?Uo:G}else y=l;l=Fn();var A=l.queue,M=A.dispatch;return p!==l.memoizedState&&(be.flags|=2048,Ul(9,Gd(),o0.bind(null,A,p),null)),[y,M,r]}function o0(r,l){r.action=l}function l0(r){var l=Fn(),p=tn;if(p!==null)return s0(l,p,r);Fn(),l=l.memoizedState,p=Fn();var y=p.queue.dispatch;return p.memoizedState=r,[l,y,!1]}function Ul(r,l,p,y){return r={tag:r,create:p,deps:y,inst:l,next:null},l=be.updateQueue,l===null&&(l=Hd(),be.updateQueue=l),p=l.lastEffect,p===null?l.lastEffect=r.next=r:(y=p.next,p.next=r,r.next=y,l.lastEffect=r),r}function Gd(){return{destroy:void 0,resource:void 0}}function c0(){return Fn().memoizedState}function jd(r,l,p,y){var A=Wi();y=y===void 0?null:y,be.flags|=r,A.memoizedState=Ul(1|l,Gd(),p,y)}function su(r,l,p,y){var A=Fn();y=y===void 0?null:y;var M=A.memoizedState.inst;tn!==null&&y!==null&&_r(y,tn.memoizedState.deps)?A.memoizedState=Ul(l,M,p,y):(be.flags|=r,A.memoizedState=Ul(1|l,M,p,y))}function $f(r,l){jd(8390656,8,r,l)}function Qf(r,l){su(2048,8,r,l)}function u0(r,l){return su(4,2,r,l)}function Zf(r,l){return su(4,4,r,l)}function Jf(r,l){if(typeof l=="function"){r=r();var p=l(r);return function(){typeof p=="function"?p():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function tp(r,l,p){p=p!=null?p.concat([r]):null,su(4,4,Jf.bind(null,l,r),p)}function ou(){}function Ud(r,l){var p=Fn();l=l===void 0?null:l;var y=p.memoizedState;return l!==null&&_r(l,y[1])?y[0]:(p.memoizedState=[r,l],r)}function d0(r,l){var p=Fn();l=l===void 0?null:l;var y=p.memoizedState;if(l!==null&&_r(l,y[1]))return y[0];if(y=r(),js){ie(!0);try{r()}finally{ie(!1)}}return p.memoizedState=[y,l],y}function ep(r,l,p){return p===void 0||(Gs&1073741824)!==0?r.memoizedState=l:(r.memoizedState=p,r=Tn(),be.lanes|=r,un|=r,p)}function h0(r,l,p,y){return ra(p,l)?p:Il.current!==null?(r=ep(r,p,y),ra(r,l)||(en=!0),r):(Gs&42)===0?(en=!0,r.memoizedState=p):(r=Tn(),be.lanes|=r,un|=r,l)}function f0(r,l,p,y,A){var M=k.p;k.p=M!==0&&8>M?M:8;var G=Q.T,Y={};Q.T=Y,ap(r,!1,l,p);try{var rt=A(),gt=Q.S;if(gt!==null&&gt(Y,rt),rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var _t=Um(rt,y);lu(r,l,_t,Pn(r))}else lu(r,l,y,Pn(r))}catch(wt){lu(r,l,{then:function(){},status:"rejected",reason:wt},Pn())}finally{k.p=M,Q.T=G}}function p0(){}function np(r,l,p,y){if(r.tag!==5)throw Error(i(476));var A=g0(r).queue;f0(r,A,l,U,p===null?p0:function(){return m0(r),p(y)})}function g0(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:U},next:null};var p={};return l.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:p},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function m0(r){var l=g0(r).next.queue;lu(r,l,{},Pn())}function ip(){return vi(Ap)}function v0(){return Fn().memoizedState}function y0(){return Fn().memoizedState}function X1(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var p=Pn();r=Sr(p);var y=Oi(l,r,p);y!==null&&(jn(y,l,p),Vo(y,l,p)),l={cache:zl()},r.payload=l;return}l=l.return}}function K1(r,l,p){var y=Pn();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},qd(r)?x0(l,p):(p=Ls(r,l,p,y),p!==null&&(jn(p,r,y),S0(p,l,y)))}function b0(r,l,p){var y=Pn();lu(r,l,p,y)}function lu(r,l,p,y){var A={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(qd(r))x0(l,A);else{var M=r.alternate;if(r.lanes===0&&(M===null||M.lanes===0)&&(M=l.lastRenderedReducer,M!==null))try{var G=l.lastRenderedState,Y=M(G,p);if(A.hasEagerState=!0,A.eagerState=Y,ra(Y,G))return qc(r,l,A,0),nn===null&&sa(),!1}catch{}finally{}if(p=Ls(r,l,A,y),p!==null)return jn(p,r,y),S0(p,l,y),!0}return!1}function ap(r,l,p,y){if(y={lane:2,revertLane:J1(),action:y,hasEagerState:!1,eagerState:null,next:null},qd(r)){if(l)throw Error(i(479))}else l=Ls(r,p,y,2),l!==null&&jn(l,r,2)}function qd(r){var l=r.alternate;return r===be||l!==null&&l===be}function x0(r,l){rs=nu=!0;var p=r.pending;p===null?l.next=l:(l.next=p.next,p.next=l),r.pending=l}function S0(r,l,p){if((p&4194048)!==0){var y=l.lanes;y&=r.pendingLanes,p|=y,l.lanes=p,Ur(r,p)}}var Vd={readContext:vi,use:ru,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useInsertionEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useSyncExternalStore:De,useId:De,useHostTransitionStatus:De,useFormState:De,useActionState:De,useOptimistic:De,useMemoCache:De,useCacheRefresh:De},_0={readContext:vi,use:ru,useCallback:function(r,l){return Wi().memoizedState=[r,l===void 0?null:l],r},useContext:vi,useEffect:$f,useImperativeHandle:function(r,l,p){p=p!=null?p.concat([r]):null,jd(4194308,4,Jf.bind(null,l,r),p)},useLayoutEffect:function(r,l){return jd(4194308,4,r,l)},useInsertionEffect:function(r,l){jd(4,2,r,l)},useMemo:function(r,l){var p=Wi();l=l===void 0?null:l;var y=r();if(js){ie(!0);try{r()}finally{ie(!1)}}return p.memoizedState=[y,l],y},useReducer:function(r,l,p){var y=Wi();if(p!==void 0){var A=p(l);if(js){ie(!0);try{p(l)}finally{ie(!1)}}}else A=l;return y.memoizedState=y.baseState=A,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:A},y.queue=r,r=r.dispatch=K1.bind(null,be,r),[y.memoizedState,r]},useRef:function(r){var l=Wi();return r={current:r},l.memoizedState=r},useState:function(r){r=Kf(r);var l=r.queue,p=b0.bind(null,be,l);return l.dispatch=p,[r.memoizedState,p]},useDebugValue:ou,useDeferredValue:function(r,l){var p=Wi();return ep(p,r,l)},useTransition:function(){var r=Kf(!1);return r=f0.bind(null,be,r.queue,!0,!1),Wi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,p){var y=be,A=Wi();if(Ie){if(p===void 0)throw Error(i(407));p=p()}else{if(p=l(),nn===null)throw Error(i(349));(Le&124)!==0||Gl(y,l,p)}A.memoizedState=p;var M={value:p,getSnapshot:l};return A.queue=M,$f($m.bind(null,y,M,r),[r]),y.flags|=2048,Ul(9,Gd(),Wm.bind(null,y,M,p,l),null),p},useId:function(){var r=Wi(),l=nn.identifierPrefix;if(Ie){var p=Ua,y=mr;p=(y&~(1<<32-Me(y)-1)).toString(32)+p,l=""+l+"R"+p,p=Id++,0<p&&(l+="H"+p.toString(32)),l+=""}else p=ss++,l=""+l+"r"+p.toString(32)+"";return r.memoizedState=l},useHostTransitionStatus:ip,useFormState:a0,useActionState:a0,useOptimistic:function(r){var l=Wi();l.memoizedState=l.baseState=r;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=p,l=ap.bind(null,be,!0,p),p.dispatch=l,[r,l]},useMemoCache:Vf,useCacheRefresh:function(){return Wi().memoizedState=X1.bind(null,be)}},rp={readContext:vi,use:ru,useCallback:Ud,useContext:vi,useEffect:Qf,useImperativeHandle:tp,useInsertionEffect:u0,useLayoutEffect:Zf,useMemo:d0,useReducer:Ar,useRef:c0,useState:function(){return Ar($i)},useDebugValue:ou,useDeferredValue:function(r,l){var p=Fn();return h0(p,tn.memoizedState,r,l)},useTransition:function(){var r=Ar($i)[0],l=Fn().memoizedState;return[typeof r=="boolean"?r:au(r),l]},useSyncExternalStore:Km,useId:v0,useHostTransitionStatus:ip,useFormState:r0,useActionState:r0,useOptimistic:function(r,l){var p=Fn();return Zm(p,tn,r,l)},useMemoCache:Vf,useCacheRefresh:y0},W1={readContext:vi,use:ru,useCallback:Ud,useContext:vi,useEffect:Qf,useImperativeHandle:tp,useInsertionEffect:u0,useLayoutEffect:Zf,useMemo:d0,useReducer:Xf,useRef:c0,useState:function(){return Xf($i)},useDebugValue:ou,useDeferredValue:function(r,l){var p=Fn();return tn===null?ep(p,r,l):h0(p,tn.memoizedState,r,l)},useTransition:function(){var r=Xf($i)[0],l=Fn().memoizedState;return[typeof r=="boolean"?r:au(r),l]},useSyncExternalStore:Km,useId:v0,useHostTransitionStatus:ip,useFormState:l0,useActionState:l0,useOptimistic:function(r,l){var p=Fn();return tn!==null?Zm(p,tn,r,l):(p.baseState=r,[r,p.queue.dispatch])},useMemoCache:Vf,useCacheRefresh:y0},ql=null,Ni=0;function cu(r){var l=Ni;return Ni+=1,ql===null&&(ql=[]),zd(ql,r,l)}function Yo(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function uu(r,l){throw l.$$typeof===m?Error(i(525)):(r=Object.prototype.toString.call(l),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function sp(r){var l=r._init;return l(r._payload)}function op(r){function l(ht,lt){if(r){var pt=ht.deletions;pt===null?(ht.deletions=[lt],ht.flags|=16):pt.push(lt)}}function p(ht,lt){if(!r)return null;for(;lt!==null;)l(ht,lt),lt=lt.sibling;return null}function y(ht){for(var lt=new Map;ht!==null;)ht.key!==null?lt.set(ht.key,ht):lt.set(ht.index,ht),ht=ht.sibling;return lt}function A(ht,lt){return ht=gr(ht,lt),ht.index=0,ht.sibling=null,ht}function M(ht,lt,pt){return ht.index=pt,r?(pt=ht.alternate,pt!==null?(pt=pt.index,pt<lt?(ht.flags|=67108866,lt):pt):(ht.flags|=67108866,lt)):(ht.flags|=1048576,lt)}function G(ht){return r&&ht.alternate===null&&(ht.flags|=67108866),ht}function Y(ht,lt,pt,Et){return lt===null||lt.tag!==6?(lt=Md(pt,ht.mode,Et),lt.return=ht,lt):(lt=A(lt,pt),lt.return=ht,lt)}function rt(ht,lt,pt,Et){var Vt=pt.type;return Vt===S?_t(ht,lt,pt.props.children,Et,pt.key):lt!==null&&(lt.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===B&&sp(Vt)===lt.type)?(lt=A(lt,pt.props),Yo(lt,pt),lt.return=ht,lt):(lt=Pl(pt.type,pt.key,pt.props,null,ht.mode,Et),Yo(lt,pt),lt.return=ht,lt)}function gt(ht,lt,pt,Et){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==pt.containerInfo||lt.stateNode.implementation!==pt.implementation?(lt=Xc(pt,ht.mode,Et),lt.return=ht,lt):(lt=A(lt,pt.children||[]),lt.return=ht,lt)}function _t(ht,lt,pt,Et,Vt){return lt===null||lt.tag!==7?(lt=es(pt,ht.mode,Et,Vt),lt.return=ht,lt):(lt=A(lt,pt),lt.return=ht,lt)}function wt(ht,lt,pt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return lt=Md(""+lt,ht.mode,pt),lt.return=ht,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case v:return pt=Pl(lt.type,lt.key,lt.props,null,ht.mode,pt),Yo(pt,lt),pt.return=ht,pt;case x:return lt=Xc(lt,ht.mode,pt),lt.return=ht,lt;case B:var Et=lt._init;return lt=Et(lt._payload),wt(ht,lt,pt)}if(et(lt)||Z(lt))return lt=es(lt,ht.mode,pt,null),lt.return=ht,lt;if(typeof lt.then=="function")return wt(ht,cu(lt),pt);if(lt.$$typeof===w)return wt(ht,kd(ht,lt),pt);uu(ht,lt)}return null}function vt(ht,lt,pt,Et){var Vt=lt!==null?lt.key:null;if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Vt!==null?null:Y(ht,lt,""+pt,Et);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case v:return pt.key===Vt?rt(ht,lt,pt,Et):null;case x:return pt.key===Vt?gt(ht,lt,pt,Et):null;case B:return Vt=pt._init,pt=Vt(pt._payload),vt(ht,lt,pt,Et)}if(et(pt)||Z(pt))return Vt!==null?null:_t(ht,lt,pt,Et,null);if(typeof pt.then=="function")return vt(ht,lt,cu(pt),Et);if(pt.$$typeof===w)return vt(ht,lt,kd(ht,pt),Et);uu(ht,pt)}return null}function yt(ht,lt,pt,Et,Vt){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return ht=ht.get(pt)||null,Y(lt,ht,""+Et,Vt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case v:return ht=ht.get(Et.key===null?pt:Et.key)||null,rt(lt,ht,Et,Vt);case x:return ht=ht.get(Et.key===null?pt:Et.key)||null,gt(lt,ht,Et,Vt);case B:var Oe=Et._init;return Et=Oe(Et._payload),yt(ht,lt,pt,Et,Vt)}if(et(Et)||Z(Et))return ht=ht.get(pt)||null,_t(lt,ht,Et,Vt,null);if(typeof Et.then=="function")return yt(ht,lt,pt,cu(Et),Vt);if(Et.$$typeof===w)return yt(ht,lt,pt,kd(lt,Et),Vt);uu(lt,Et)}return null}function ce(ht,lt,pt,Et){for(var Vt=null,Oe=null,Kt=lt,re=lt=0,_i=null;Kt!==null&&re<pt.length;re++){Kt.index>re?(_i=Kt,Kt=null):_i=Kt.sibling;var Qe=vt(ht,Kt,pt[re],Et);if(Qe===null){Kt===null&&(Kt=_i);break}r&&Kt&&Qe.alternate===null&&l(ht,Kt),lt=M(Qe,lt,re),Oe===null?Vt=Qe:Oe.sibling=Qe,Oe=Qe,Kt=_i}if(re===pt.length)return p(ht,Kt),Ie&&Ca(ht,re),Vt;if(Kt===null){for(;re<pt.length;re++)Kt=wt(ht,pt[re],Et),Kt!==null&&(lt=M(Kt,lt,re),Oe===null?Vt=Kt:Oe.sibling=Kt,Oe=Kt);return Ie&&Ca(ht,re),Vt}for(Kt=y(Kt);re<pt.length;re++)_i=yt(Kt,ht,re,pt[re],Et),_i!==null&&(r&&_i.alternate!==null&&Kt.delete(_i.key===null?re:_i.key),lt=M(_i,lt,re),Oe===null?Vt=_i:Oe.sibling=_i,Oe=_i);return r&&Kt.forEach(function(uc){return l(ht,uc)}),Ie&&Ca(ht,re),Vt}function ne(ht,lt,pt,Et){if(pt==null)throw Error(i(151));for(var Vt=null,Oe=null,Kt=lt,re=lt=0,_i=null,Qe=pt.next();Kt!==null&&!Qe.done;re++,Qe=pt.next()){Kt.index>re?(_i=Kt,Kt=null):_i=Kt.sibling;var uc=vt(ht,Kt,Qe.value,Et);if(uc===null){Kt===null&&(Kt=_i);break}r&&Kt&&uc.alternate===null&&l(ht,Kt),lt=M(uc,lt,re),Oe===null?Vt=uc:Oe.sibling=uc,Oe=uc,Kt=_i}if(Qe.done)return p(ht,Kt),Ie&&Ca(ht,re),Vt;if(Kt===null){for(;!Qe.done;re++,Qe=pt.next())Qe=wt(ht,Qe.value,Et),Qe!==null&&(lt=M(Qe,lt,re),Oe===null?Vt=Qe:Oe.sibling=Qe,Oe=Qe);return Ie&&Ca(ht,re),Vt}for(Kt=y(Kt);!Qe.done;re++,Qe=pt.next())Qe=yt(Kt,ht,re,Qe.value,Et),Qe!==null&&(r&&Qe.alternate!==null&&Kt.delete(Qe.key===null?re:Qe.key),lt=M(Qe,lt,re),Oe===null?Vt=Qe:Oe.sibling=Qe,Oe=Qe);return r&&Kt.forEach(function(RM){return l(ht,RM)}),Ie&&Ca(ht,re),Vt}function gn(ht,lt,pt,Et){if(typeof pt=="object"&&pt!==null&&pt.type===S&&pt.key===null&&(pt=pt.props.children),typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case v:t:{for(var Vt=pt.key;lt!==null;){if(lt.key===Vt){if(Vt=pt.type,Vt===S){if(lt.tag===7){p(ht,lt.sibling),Et=A(lt,pt.props.children),Et.return=ht,ht=Et;break t}}else if(lt.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===B&&sp(Vt)===lt.type){p(ht,lt.sibling),Et=A(lt,pt.props),Yo(Et,pt),Et.return=ht,ht=Et;break t}p(ht,lt);break}else l(ht,lt);lt=lt.sibling}pt.type===S?(Et=es(pt.props.children,ht.mode,Et,pt.key),Et.return=ht,ht=Et):(Et=Pl(pt.type,pt.key,pt.props,null,ht.mode,Et),Yo(Et,pt),Et.return=ht,ht=Et)}return G(ht);case x:t:{for(Vt=pt.key;lt!==null;){if(lt.key===Vt)if(lt.tag===4&&lt.stateNode.containerInfo===pt.containerInfo&&lt.stateNode.implementation===pt.implementation){p(ht,lt.sibling),Et=A(lt,pt.children||[]),Et.return=ht,ht=Et;break t}else{p(ht,lt);break}else l(ht,lt);lt=lt.sibling}Et=Xc(pt,ht.mode,Et),Et.return=ht,ht=Et}return G(ht);case B:return Vt=pt._init,pt=Vt(pt._payload),gn(ht,lt,pt,Et)}if(et(pt))return ce(ht,lt,pt,Et);if(Z(pt)){if(Vt=Z(pt),typeof Vt!="function")throw Error(i(150));return pt=Vt.call(pt),ne(ht,lt,pt,Et)}if(typeof pt.then=="function")return gn(ht,lt,cu(pt),Et);if(pt.$$typeof===w)return gn(ht,lt,kd(ht,pt),Et);uu(ht,pt)}return typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint"?(pt=""+pt,lt!==null&&lt.tag===6?(p(ht,lt.sibling),Et=A(lt,pt),Et.return=ht,ht=Et):(p(ht,lt),Et=Md(pt,ht.mode,Et),Et.return=ht,ht=Et),G(ht)):p(ht,lt)}return function(ht,lt,pt,Et){try{Ni=0;var Vt=gn(ht,lt,pt,Et);return ql=null,Vt}catch(Kt){if(Kt===jo||Kt===Uo)throw Kt;var Oe=Vi(29,Kt,null,ht.mode);return Oe.lanes=Et,Oe.return=ht,Oe}finally{}}}var Vl=op(!0),lp=op(!1),la=V(null),Er=null;function Us(r){var l=r.alternate;K(Te,Te.current&1),K(la,r),Er===null&&(l===null||Il.current!==null||l.memoizedState!==null)&&(Er=r)}function A0(r){if(r.tag===22){if(K(Te,Te.current),K(la,r),Er===null){var l=r.alternate;l!==null&&l.memoizedState!==null&&(Er=r)}}else os()}function os(){K(Te,Te.current),K(la,la.current)}function ls(r){at(la),Er===r&&(Er=null),at(Te)}var Te=V(0);function du(r){for(var l=r;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||dy(p)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function cp(r,l,p,y){l=r.memoizedState,p=p(y,l),p=p==null?l:g({},l,p),r.memoizedState=p,r.lanes===0&&(r.updateQueue.baseState=p)}var Yd={enqueueSetState:function(r,l,p){r=r._reactInternals;var y=Pn(),A=Sr(y);A.payload=l,p!=null&&(A.callback=p),l=Oi(r,A,y),l!==null&&(jn(l,r,y),Vo(l,r,y))},enqueueReplaceState:function(r,l,p){r=r._reactInternals;var y=Pn(),A=Sr(y);A.tag=1,A.payload=l,p!=null&&(A.callback=p),l=Oi(r,A,y),l!==null&&(jn(l,r,y),Vo(l,r,y))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var p=Pn(),y=Sr(p);y.tag=2,l!=null&&(y.callback=l),l=Oi(r,y,p),l!==null&&(jn(l,r,p),Vo(l,r,p))}};function up(r,l,p,y,A,M,G){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,M,G):l.prototype&&l.prototype.isPureReactComponent?!Dl(p,y)||!Dl(A,M):!0}function Xo(r,l,p,y){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,y),l.state!==r&&Yd.enqueueReplaceState(l,l.state,null)}function cs(r,l){var p=l;if("ref"in l){p={};for(var y in l)y!=="ref"&&(p[y]=l[y])}if(r=r.defaultProps){p===l&&(p=g({},p));for(var A in r)p[A]===void 0&&(p[A]=r[A])}return p}var us=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Ko(r){us(r)}function Qi(r){console.error(r)}function E0(r){us(r)}function Xd(r,l){try{var p=r.onUncaughtError;p(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function hu(r,l,p){try{var y=r.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Yl(r,l,p){return p=Sr(p),p.tag=3,p.payload={element:null},p.callback=function(){Xd(r,l)},p}function fu(r){return r=Sr(r),r.tag=3,r}function Kd(r,l,p,y){var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var M=y.value;r.payload=function(){return A(M)},r.callback=function(){hu(l,p,y)}}var G=p.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(r.callback=function(){hu(l,p,y),typeof A!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var Y=y.stack;this.componentDidCatch(y.value,{componentStack:Y!==null?Y:""})})}function $1(r,l,p,y,A){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=p.alternate,l!==null&&Io(l,p,A,!0),p=la.current,p!==null){switch(p.tag){case 13:return Er===null?Or():p.alternate===null&&xe===0&&(xe=3),p.flags&=-257,p.flags|=65536,p.lanes=A,y===Is?p.flags|=16384:(l=p.updateQueue,l===null?p.updateQueue=new Set([y]):l.add(y),Ct(r,y,A)),!1;case 22:return p.flags|=65536,y===Is?p.flags|=16384:(l=p.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=l):(p=l.retryQueue,p===null?l.retryQueue=new Set([y]):p.add(y)),Ct(r,y,A)),!1}throw Error(i(435,p.tag))}return Ct(r,y,A),Or(),!1}if(Ie)return l=la.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=A,y!==Lf&&(r=Error(i(422),{cause:y}),Bl(Zn(r,p)))):(y!==Lf&&(l=Error(i(423),{cause:y}),Bl(Zn(l,p))),r=r.current.alternate,r.flags|=65536,A&=-A,r.lanes|=A,y=Zn(y,p),A=Yl(r.stateNode,y,A),Hf(r,A),xe!==4&&(xe=2)),!1;var M=Error(i(520),{cause:y});if(M=Zn(M,p),Js===null?Js=[M]:Js.push(M),xe!==4&&(xe=2),l===null)return!0;y=Zn(y,p),p=l;do{switch(p.tag){case 3:return p.flags|=65536,r=A&-A,p.lanes|=r,r=Yl(p.stateNode,y,r),Hf(p,r),!1;case 1:if(l=p.type,M=p.stateNode,(p.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(eo===null||!eo.has(M))))return p.flags|=65536,A&=-A,p.lanes|=A,A=fu(A),Kd(A,r,p,y),Hf(p,A),!1}p=p.return}while(p!==null);return!1}var w0=Error(i(461)),en=!1;function ei(r,l,p,y){l.child=r===null?lp(l,null,p,y):Vl(l,r.child,p,y)}function C0(r,l,p,y,A){p=p.render;var M=l.ref;if("ref"in y){var G={};for(var Y in y)Y!=="ref"&&(G[Y]=y[Y])}else G=y;return Fs(l),y=Ki(r,l,p,G,M,A),Y=Va(),r!==null&&!en?(Uf(r,l,A),bn(r,l,A)):(Ie&&Y&&Dd(l),l.flags|=1,ei(r,l,y,A),l.child)}function Wd(r,l,p,y,A){if(r===null){var M=p.type;return typeof M=="function"&&!Ll(M)&&M.defaultProps===void 0&&p.compare===null?(l.tag=15,l.type=M,T0(r,l,M,y,A)):(r=Pl(p.type,null,y,l,l.mode,A),r.ref=l.ref,r.return=l,l.child=r)}if(M=r.child,!Wo(r,A)){var G=M.memoizedProps;if(p=p.compare,p=p!==null?p:Dl,p(G,y)&&r.ref===l.ref)return bn(r,l,A)}return l.flags|=1,r=gr(M,y),r.ref=l.ref,r.return=l,l.child=r}function T0(r,l,p,y,A){if(r!==null){var M=r.memoizedProps;if(Dl(M,y)&&r.ref===l.ref)if(en=!1,l.pendingProps=y=M,Wo(r,A))(r.flags&131072)!==0&&(en=!0);else return l.lanes=r.lanes,bn(r,l,A)}return Li(r,l,p,y,A)}function R0(r,l,p){var y=l.pendingProps,A=y.children,M=r!==null?r.memoizedState:null;if(y.mode==="hidden"){if((l.flags&128)!==0){if(y=M!==null?M.baseLanes|p:p,r!==null){for(A=l.child=r.child,M=0;A!==null;)M=M|A.lanes|A.childLanes,A=A.sibling;l.childLanes=M&~y}else l.childLanes=0,l.child=null;return M0(r,l,y,p)}if((p&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&Bd(l,M!==null?M.cachePool:null),M!==null?Hl(l,M):Gf(),A0(l);else return l.lanes=l.childLanes=536870912,M0(r,l,M!==null?M.baseLanes|p:p,p)}else M!==null?(Bd(l,M.cachePool),Hl(l,M),os(),l.memoizedState=null):(r!==null&&Bd(l,null),Gf(),os());return ei(r,l,A,p),l.child}function M0(r,l,p,y){var A=ye();return A=A===null?null:{parent:zn._currentValue,pool:A},l.memoizedState={baseLanes:p,cachePool:A},r!==null&&Bd(l,null),Gf(),A0(l),r!==null&&Io(r,l,y,!0),null}function qs(r,l){var p=l.ref;if(p===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(r===null||r.ref!==p)&&(l.flags|=4194816)}}function Li(r,l,p,y,A){return Fs(l),p=Ki(r,l,p,y,void 0,A),y=Va(),r!==null&&!en?(Uf(r,l,A),bn(r,l,A)):(Ie&&y&&Dd(l),l.flags|=1,ei(r,l,p,A),l.child)}function $d(r,l,p,y,A,M){return Fs(l),l.updateQueue=null,p=Xm(l,y,p,A),Ym(r),y=Va(),r!==null&&!en?(Uf(r,l,M),bn(r,l,M)):(Ie&&y&&Dd(l),l.flags|=1,ei(r,l,p,M),l.child)}function dp(r,l,p,y,A){if(Fs(l),l.stateNode===null){var M=ko,G=p.contextType;typeof G=="object"&&G!==null&&(M=vi(G)),M=new p(y,M),l.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=Yd,l.stateNode=M,M._reactInternals=l,M=l.stateNode,M.props=y,M.state=l.memoizedState,M.refs={},Zc(l),G=p.contextType,M.context=typeof G=="object"&&G!==null?vi(G):ko,M.state=l.memoizedState,G=p.getDerivedStateFromProps,typeof G=="function"&&(cp(l,p,G,y),M.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(G=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),G!==M.state&&Yd.enqueueReplaceState(M,M.state,null),Hs(l,y,M,A),tu(),M.state=l.memoizedState),typeof M.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(r===null){M=l.stateNode;var Y=l.memoizedProps,rt=cs(p,Y);M.props=rt;var gt=M.context,_t=p.contextType;G=ko,typeof _t=="object"&&_t!==null&&(G=vi(_t));var wt=p.getDerivedStateFromProps;_t=typeof wt=="function"||typeof M.getSnapshotBeforeUpdate=="function",Y=l.pendingProps!==Y,_t||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Y||gt!==G)&&Xo(l,M,y,G),xr=!1;var vt=l.memoizedState;M.state=vt,Hs(l,y,M,A),tu(),gt=l.memoizedState,Y||vt!==gt||xr?(typeof wt=="function"&&(cp(l,p,wt,y),gt=l.memoizedState),(rt=xr||up(l,p,rt,y,vt,gt,G))?(_t||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=gt),M.props=y,M.state=gt,M.context=G,y=rt):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{M=l.stateNode,Jc(r,l),G=l.memoizedProps,_t=cs(p,G),M.props=_t,wt=l.pendingProps,vt=M.context,gt=p.contextType,rt=ko,typeof gt=="object"&&gt!==null&&(rt=vi(gt)),Y=p.getDerivedStateFromProps,(gt=typeof Y=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(G!==wt||vt!==rt)&&Xo(l,M,y,rt),xr=!1,vt=l.memoizedState,M.state=vt,Hs(l,y,M,A),tu();var yt=l.memoizedState;G!==wt||vt!==yt||xr||r!==null&&r.dependencies!==null&&Pd(r.dependencies)?(typeof Y=="function"&&(cp(l,p,Y,y),yt=l.memoizedState),(_t=xr||up(l,p,_t,y,vt,yt,rt)||r!==null&&r.dependencies!==null&&Pd(r.dependencies))?(gt||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,yt,rt),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,yt,rt)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||G===r.memoizedProps&&vt===r.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&vt===r.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=yt),M.props=y,M.state=yt,M.context=rt,y=_t):(typeof M.componentDidUpdate!="function"||G===r.memoizedProps&&vt===r.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&vt===r.memoizedState||(l.flags|=1024),y=!1)}return M=y,qs(r,l),y=(l.flags&128)!==0,M||y?(M=l.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:M.render(),l.flags|=1,r!==null&&y?(l.child=Vl(l,r.child,null,A),l.child=Vl(l,null,p,A)):ei(r,l,p,A),l.memoizedState=M.state,r=l.child):r=bn(r,l,A),r}function Qd(r,l,p,y){return kl(),l.flags|=256,ei(r,l,p,y),l.child}var Zd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vs(r){return{baseLanes:r,cachePool:Xi()}}function Ys(r,l,p){return r=r!==null?r.childLanes&~p:0,l&&(r|=ci),r}function pu(r,l,p){var y=l.pendingProps,A=!1,M=(l.flags&128)!==0,G;if((G=M)||(G=r!==null&&r.memoizedState===null?!1:(Te.current&2)!==0),G&&(A=!0,l.flags&=-129),G=(l.flags&32)!==0,l.flags&=-33,r===null){if(Ie){if(A?Us(l):os(),Ie){var Y=_n,rt;if(rt=Y){t:{for(rt=Y,Y=vr;rt.nodeType!==8;){if(!Y){Y=null;break t}if(rt=ms(rt.nextSibling),rt===null){Y=null;break t}}Y=rt}Y!==null?(l.memoizedState={dehydrated:Y,treeContext:Yi!==null?{id:mr,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},rt=Vi(18,null,null,0),rt.stateNode=Y,rt.return=l,l.child=rt,mi=l,_n=null,rt=!0):rt=!1}rt||ks(l)}if(Y=l.memoizedState,Y!==null&&(Y=Y.dehydrated,Y!==null))return dy(Y)?l.lanes=32:l.lanes=536870912,null;ls(l)}return Y=y.children,y=y.fallback,A?(os(),A=l.mode,Y=Pi({mode:"hidden",children:Y},A),y=es(y,A,p,null),Y.return=l,y.return=l,Y.sibling=y,l.child=Y,A=l.child,A.memoizedState=Vs(p),A.childLanes=Ys(r,G,p),l.memoizedState=Zd,y):(Us(l),Xl(l,Y))}if(rt=r.memoizedState,rt!==null&&(Y=rt.dehydrated,Y!==null)){if(M)l.flags&256?(Us(l),l.flags&=-257,l=Zi(r,l,p)):l.memoizedState!==null?(os(),l.child=r.child,l.flags|=128,l=null):(os(),A=y.fallback,Y=l.mode,y=Pi({mode:"visible",children:y.children},Y),A=es(A,Y,p,null),A.flags|=2,y.return=l,A.return=l,y.sibling=A,l.child=y,Vl(l,r.child,null,p),y=l.child,y.memoizedState=Vs(p),y.childLanes=Ys(r,G,p),l.memoizedState=Zd,l=A);else if(Us(l),dy(Y)){if(G=Y.nextSibling&&Y.nextSibling.dataset,G)var gt=G.dgst;G=gt,y=Error(i(419)),y.stack="",y.digest=G,Bl({value:y,source:null,stack:null}),l=Zi(r,l,p)}else if(en||Io(r,l,p,!1),G=(p&r.childLanes)!==0,en||G){if(G=nn,G!==null&&(y=p&-p,y=(y&42)!==0?1:ml(y),y=(y&(G.suspendedLanes|p))!==0?0:y,y!==0&&y!==rt.retryLane))throw rt.retryLane=y,pr(r,y),jn(G,r,y),w0;Y.data==="$?"||Or(),l=Zi(r,l,p)}else Y.data==="$?"?(l.flags|=192,l.child=r.child,l=null):(r=rt.treeContext,_n=ms(Y.nextSibling),mi=l,Ie=!0,zo=null,vr=!1,r!==null&&(oa[wa++]=mr,oa[wa++]=Ua,oa[wa++]=Yi,mr=r.id,Ua=r.overflow,Yi=l),l=Xl(l,y.children),l.flags|=4096);return l}return A?(os(),A=y.fallback,Y=l.mode,rt=r.child,gt=rt.sibling,y=gr(rt,{mode:"hidden",children:y.children}),y.subtreeFlags=rt.subtreeFlags&65011712,gt!==null?A=gr(gt,A):(A=es(A,Y,p,null),A.flags|=2),A.return=l,y.return=l,y.sibling=A,l.child=y,y=A,A=l.child,Y=r.child.memoizedState,Y===null?Y=Vs(p):(rt=Y.cachePool,rt!==null?(gt=zn._currentValue,rt=rt.parent!==gt?{parent:gt,pool:gt}:rt):rt=Xi(),Y={baseLanes:Y.baseLanes|p,cachePool:rt}),A.memoizedState=Y,A.childLanes=Ys(r,G,p),l.memoizedState=Zd,y):(Us(l),p=r.child,r=p.sibling,p=gr(p,{mode:"visible",children:y.children}),p.return=l,p.sibling=null,r!==null&&(G=l.deletions,G===null?(l.deletions=[r],l.flags|=16):G.push(r)),l.child=p,l.memoizedState=null,p)}function Xl(r,l){return l=Pi({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function Pi(r,l){return r=Vi(22,r,null,l),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Zi(r,l,p){return Vl(l,r.child,null,p),r=Xl(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function Xs(r,l,p){r.lanes|=l;var y=r.alternate;y!==null&&(y.lanes|=l),Ld(r.return,l,p)}function Ya(r,l,p,y,A){var M=r.memoizedState;M===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:A}:(M.isBackwards=l,M.rendering=null,M.renderingStartTime=0,M.last=y,M.tail=p,M.tailMode=A)}function wr(r,l,p){var y=l.pendingProps,A=y.revealOrder,M=y.tail;if(ei(r,l,y.children,p),y=Te.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Xs(r,p,l);else if(r.tag===19)Xs(r,p,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break t;for(;r.sibling===null;){if(r.return===null||r.return===l)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}switch(K(Te,y),A){case"forwards":for(p=l.child,A=null;p!==null;)r=p.alternate,r!==null&&du(r)===null&&(A=p),p=p.sibling;p=A,p===null?(A=l.child,l.child=null):(A=p.sibling,p.sibling=null),Ya(l,!1,A,p,M);break;case"backwards":for(p=null,A=l.child,l.child=null;A!==null;){if(r=A.alternate,r!==null&&du(r)===null){l.child=A;break}r=A.sibling,A.sibling=p,p=A,A=r}Ya(l,!0,p,null,M);break;case"together":Ya(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function bn(r,l,p){if(r!==null&&(l.dependencies=r.dependencies),un|=l.lanes,(p&l.childLanes)===0)if(r!==null){if(Io(r,l,p,!1),(p&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(i(153));if(l.child!==null){for(r=l.child,p=gr(r,r.pendingProps),l.child=p,p.return=l;r.sibling!==null;)r=r.sibling,p=p.sibling=gr(r,r.pendingProps),p.return=l;p.sibling=null}return l.child}function Wo(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&Pd(r)))}function Ks(r,l,p){switch(l.tag){case 3:ct(l,l.stateNode.containerInfo),Ta(l,zn,r.memoizedState.cache),kl();break;case 27:case 5:Mt(l);break;case 4:ct(l,l.stateNode.containerInfo);break;case 10:Ta(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(Us(l),l.flags|=128,null):(p&l.child.childLanes)!==0?pu(r,l,p):(Us(l),r=bn(r,l,p),r!==null?r.sibling:null);Us(l);break;case 19:var A=(r.flags&128)!==0;if(y=(p&l.childLanes)!==0,y||(Io(r,l,p,!1),y=(p&l.childLanes)!==0),A){if(y)return wr(r,l,p);l.flags|=128}if(A=l.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),K(Te,Te.current),y)break;return null;case 22:case 23:return l.lanes=0,R0(r,l,p);case 24:Ta(l,zn,r.memoizedState.cache)}return bn(r,l,p)}function gu(r,l,p){if(r!==null)if(r.memoizedProps!==l.pendingProps)en=!0;else{if(!Wo(r,p)&&(l.flags&128)===0)return en=!1,Ks(r,l,p);en=(r.flags&131072)!==0}else en=!1,Ie&&(l.flags&1048576)!==0&&Nf(l,Kc,l.index);switch(l.lanes=0,l.tag){case 16:t:{r=l.pendingProps;var y=l.elementType,A=y._init;if(y=A(y._payload),l.type=y,typeof y=="function")Ll(y)?(r=cs(y,r),l.tag=1,l=dp(null,l,y,r,p)):(l.tag=0,l=Li(null,l,y,r,p));else{if(y!=null){if(A=y.$$typeof,A===R){l.tag=11,l=C0(null,l,y,r,p);break t}else if(A===I){l.tag=14,l=Wd(null,l,y,r,p);break t}}throw l=it(y)||y,Error(i(306,l,""))}}return l;case 0:return Li(r,l,l.type,l.pendingProps,p);case 1:return y=l.type,A=cs(y,l.pendingProps),dp(r,l,y,A,p);case 3:t:{if(ct(l,l.stateNode.containerInfo),r===null)throw Error(i(387));y=l.pendingProps;var M=l.memoizedState;A=M.element,Jc(r,l),Hs(l,y,null,p);var G=l.memoizedState;if(y=G.cache,Ta(l,zn,y),y!==M.cache&&Xe(l,[zn],p,!0),tu(),y=G.element,M.isDehydrated)if(M={element:y,isDehydrated:!1,cache:G.cache},l.updateQueue.baseState=M,l.memoizedState=M,l.flags&256){l=Qd(r,l,y,p);break t}else if(y!==A){A=Zn(Error(i(424)),l),Bl(A),l=Qd(r,l,y,p);break t}else{switch(r=l.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(_n=ms(r.firstChild),mi=l,Ie=!0,zo=null,vr=!0,p=lp(l,null,y,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(kl(),y===A){l=bn(r,l,p);break t}ei(r,l,y,p)}l=l.child}return l;case 26:return qs(r,l),r===null?(p=fE(l.type,null,l.pendingProps,null))?l.memoizedState=p:Ie||(p=l.type,r=l.pendingProps,y=B0(ot.current).createElement(p),y[on]=l,y[Ri]=r,Fi(y,p,r),Vn(y),l.stateNode=y):l.memoizedState=fE(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return Mt(l),r===null&&Ie&&(y=l.stateNode=uE(l.type,l.pendingProps,ot.current),mi=l,vr=!0,A=_n,rc(l.type)?(hy=A,_n=ms(y.firstChild)):_n=A),ei(r,l,l.pendingProps.children,p),qs(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&Ie&&((A=y=_n)&&(y=iM(y,l.type,l.pendingProps,vr),y!==null?(l.stateNode=y,mi=l,_n=ms(y.firstChild),vr=!1,A=!0):A=!1),A||ks(l)),Mt(l),A=l.type,M=l.pendingProps,G=r!==null?r.memoizedProps:null,y=M.children,ly(A,M)?y=null:G!==null&&ly(A,G)&&(l.flags|=32),l.memoizedState!==null&&(A=Ki(r,l,ti,null,null,p),Ap._currentValue=A),qs(r,l),ei(r,l,y,p),l.child;case 6:return r===null&&Ie&&((r=p=_n)&&(p=aM(p,l.pendingProps,vr),p!==null?(l.stateNode=p,mi=l,_n=null,r=!0):r=!1),r||ks(l)),null;case 13:return pu(r,l,p);case 4:return ct(l,l.stateNode.containerInfo),y=l.pendingProps,r===null?l.child=Vl(l,null,y,p):ei(r,l,y,p),l.child;case 11:return C0(r,l,l.type,l.pendingProps,p);case 7:return ei(r,l,l.pendingProps,p),l.child;case 8:return ei(r,l,l.pendingProps.children,p),l.child;case 12:return ei(r,l,l.pendingProps.children,p),l.child;case 10:return y=l.pendingProps,Ta(l,l.type,y.value),ei(r,l,y.children,p),l.child;case 9:return A=l.type._context,y=l.pendingProps.children,Fs(l),A=vi(A),y=y(A),l.flags|=1,ei(r,l,y,p),l.child;case 14:return Wd(r,l,l.type,l.pendingProps,p);case 15:return T0(r,l,l.type,l.pendingProps,p);case 19:return wr(r,l,p);case 31:return y=l.pendingProps,p=l.mode,y={mode:y.mode,children:y.children},r===null?(p=Pi(y,p),p.ref=l.ref,l.child=p,p.return=l,l=p):(p=gr(r.child,y),p.ref=l.ref,l.child=p,p.return=l,l=p),l;case 22:return R0(r,l,p);case 24:return Fs(l),y=vi(zn),r===null?(A=ye(),A===null&&(A=nn,M=zl(),A.pooledCache=M,M.refCount++,M!==null&&(A.pooledCacheLanes|=p),A=M),l.memoizedState={parent:y,cache:A},Zc(l),Ta(l,zn,A)):((r.lanes&p)!==0&&(Jc(r,l),Hs(l,null,null,p),tu()),A=r.memoizedState,M=l.memoizedState,A.parent!==y?(A={parent:y,cache:y},l.memoizedState=A,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=A),Ta(l,zn,y)):(y=M.cache,Ta(l,zn,y),y!==A.cache&&Xe(l,[zn],p,!0))),ei(r,l,l.pendingProps.children,p),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function Cn(r){r.flags|=4}function In(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!yE(l)){if(l=la.current,l!==null&&((Le&4194048)===Le?Er!==null:(Le&62914560)!==Le&&(Le&536870912)===0||l!==Er))throw Qc=Is,qm;r.flags|=8192}}function Be(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?Ci():536870912,r.lanes|=l,Jl|=l)}function Xa(r,l){if(!Ie)switch(r.tailMode){case"hidden":l=r.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?r.tail=null:p.sibling=null;break;case"collapsed":p=r.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function Ve(r){var l=r.alternate!==null&&r.alternate.child===r.child,p=0,y=0;if(l)for(var A=r.child;A!==null;)p|=A.lanes|A.childLanes,y|=A.subtreeFlags&65011712,y|=A.flags&65011712,A.return=r,A=A.sibling;else for(A=r.child;A!==null;)p|=A.lanes|A.childLanes,y|=A.subtreeFlags,y|=A.flags,A.return=r,A=A.sibling;return r.subtreeFlags|=y,r.childLanes=p,l}function hp(r,l,p){var y=l.pendingProps;switch(Od(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(l),null;case 1:return Ve(l),null;case 3:return p=l.stateNode,y=null,r!==null&&(y=r.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),br(zn),At(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(r===null||r.child===null)&&(Bs(l)?Cn(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,kf())),Ve(l),null;case 26:return p=l.memoizedState,r===null?(Cn(l),p!==null?(Ve(l),In(l,p)):(Ve(l),l.flags&=-16777217)):p?p!==r.memoizedState?(Cn(l),Ve(l),In(l,p)):(Ve(l),l.flags&=-16777217):(r.memoizedProps!==y&&Cn(l),Ve(l),l.flags&=-16777217),null;case 27:Pt(l),p=ot.current;var A=l.type;if(r!==null&&l.stateNode!=null)r.memoizedProps!==y&&Cn(l);else{if(!y){if(l.stateNode===null)throw Error(i(166));return Ve(l),null}r=ut.current,Bs(l)?Pf(l):(r=uE(A,y,p),l.stateNode=r,Cn(l))}return Ve(l),null;case 5:if(Pt(l),p=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==y&&Cn(l);else{if(!y){if(l.stateNode===null)throw Error(i(166));return Ve(l),null}if(r=ut.current,Bs(l))Pf(l);else{switch(A=B0(ot.current),r){case 1:r=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:r=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":r=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":r=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":r=A.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof y.is=="string"?A.createElement("select",{is:y.is}):A.createElement("select"),y.multiple?r.multiple=!0:y.size&&(r.size=y.size);break;default:r=typeof y.is=="string"?A.createElement(p,{is:y.is}):A.createElement(p)}}r[on]=l,r[Ri]=y;t:for(A=l.child;A!==null;){if(A.tag===5||A.tag===6)r.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===l)break t;for(;A.sibling===null;){if(A.return===null||A.return===l)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}l.stateNode=r;t:switch(Fi(r,p,y),p){case"button":case"input":case"select":case"textarea":r=!!y.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Cn(l)}}return Ve(l),l.flags&=-16777217,null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==y&&Cn(l);else{if(typeof y!="string"&&l.stateNode===null)throw Error(i(166));if(r=ot.current,Bs(l)){if(r=l.stateNode,p=l.memoizedProps,y=null,A=mi,A!==null)switch(A.tag){case 27:case 5:y=A.memoizedProps}r[on]=l,r=!!(r.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||iE(r.nodeValue,p)),r||ks(l)}else r=B0(r).createTextNode(y),r[on]=l,l.stateNode=r}return Ve(l),null;case 13:if(y=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(A=Bs(l),y!==null&&y.dehydrated!==null){if(r===null){if(!A)throw Error(i(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));A[on]=l}else kl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ve(l),A=!1}else A=kf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=A),A=!0;if(!A)return l.flags&256?(ls(l),l):(ls(l),null)}if(ls(l),(l.flags&128)!==0)return l.lanes=p,l;if(p=y!==null,r=r!==null&&r.memoizedState!==null,p){y=l.child,A=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(A=y.alternate.memoizedState.cachePool.pool);var M=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(M=y.memoizedState.cachePool.pool),M!==A&&(y.flags|=2048)}return p!==r&&p&&(l.child.flags|=8192),Be(l,l.updateQueue),Ve(l),null;case 4:return At(),r===null&&iy(l.stateNode.containerInfo),Ve(l),null;case 10:return br(l.type),Ve(l),null;case 19:if(at(Te),A=l.memoizedState,A===null)return Ve(l),null;if(y=(l.flags&128)!==0,M=A.rendering,M===null)if(y)Xa(A,!1);else{if(xe!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(M=du(r),M!==null){for(l.flags|=128,Xa(A,!1),r=M.updateQueue,l.updateQueue=r,Be(l,r),l.subtreeFlags=0,r=p,p=l.child;p!==null;)Rd(p,r),p=p.sibling;return K(Te,Te.current&1|2),l.child}r=r.sibling}A.tail!==null&&kt()>Zo&&(l.flags|=128,y=!0,Xa(A,!1),l.lanes=4194304)}else{if(!y)if(r=du(M),r!==null){if(l.flags|=128,y=!0,r=r.updateQueue,l.updateQueue=r,Be(l,r),Xa(A,!0),A.tail===null&&A.tailMode==="hidden"&&!M.alternate&&!Ie)return Ve(l),null}else 2*kt()-A.renderingStartTime>Zo&&p!==536870912&&(l.flags|=128,y=!0,Xa(A,!1),l.lanes=4194304);A.isBackwards?(M.sibling=l.child,l.child=M):(r=A.last,r!==null?r.sibling=M:l.child=M,A.last=M)}return A.tail!==null?(l=A.tail,A.rendering=l,A.tail=l.sibling,A.renderingStartTime=kt(),l.sibling=null,r=Te.current,K(Te,y?r&1|2:r&1),l):(Ve(l),null);case 22:case 23:return ls(l),jf(),y=l.memoizedState!==null,r!==null?r.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?(p&536870912)!==0&&(l.flags&128)===0&&(Ve(l),l.subtreeFlags&6&&(l.flags|=8192)):Ve(l),p=l.updateQueue,p!==null&&Be(l,p.retryQueue),p=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==p&&(l.flags|=2048),r!==null&&at(is),null;case 24:return p=null,r!==null&&(p=r.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),br(zn),Ve(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function ca(r,l){switch(Od(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return br(zn),At(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return Pt(l),null;case 13:if(ls(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(i(340));kl()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return at(Te),null;case 4:return At(),null;case 10:return br(l.type),null;case 22:case 23:return ls(l),jf(),r!==null&&at(is),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return br(zn),null;case 25:return null;default:return null}}function mu(r,l){switch(Od(l),l.tag){case 3:br(zn),At();break;case 26:case 27:case 5:Pt(l);break;case 4:At();break;case 13:ls(l);break;case 19:at(Te);break;case 10:br(l.type);break;case 22:case 23:ls(l),jf(),r!==null&&at(is);break;case 24:br(zn)}}function Ka(r,l){try{var p=l.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var A=y.next;p=A;do{if((p.tag&r)===r){y=void 0;var M=p.create,G=p.inst;y=M(),G.destroy=y}p=p.next}while(p!==A)}}catch(Y){ft(l,l.return,Y)}}function yi(r,l,p){try{var y=l.updateQueue,A=y!==null?y.lastEffect:null;if(A!==null){var M=A.next;y=M;do{if((y.tag&r)===r){var G=y.inst,Y=G.destroy;if(Y!==void 0){G.destroy=void 0,A=l;var rt=p,gt=Y;try{gt()}catch(_t){ft(A,rt,_t)}}}y=y.next}while(y!==M)}}catch(_t){ft(l,l.return,_t)}}function D0(r){var l=r.updateQueue;if(l!==null){var p=r.stateNode;try{Vm(l,p)}catch(y){ft(r,r.return,y)}}}function O0(r,l,p){p.props=cs(r.type,r.memoizedProps),p.state=r.memoizedState;try{p.componentWillUnmount()}catch(y){ft(r,l,y)}}function vu(r,l){try{var p=r.ref;if(p!==null){switch(r.tag){case 26:case 27:case 5:var y=r.stateNode;break;case 30:y=r.stateNode;break;default:y=r.stateNode}typeof p=="function"?r.refCleanup=p(y):p.current=y}}catch(A){ft(r,l,A)}}function Ke(r,l){var p=r.ref,y=r.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(A){ft(r,l,A)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(A){ft(r,l,A)}else p.current=null}function yu(r){var l=r.type,p=r.memoizedProps,y=r.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break t;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(A){ft(r,r.return,A)}}function Ws(r,l,p){try{var y=r.stateNode;Z7(y,r.type,p,l),y[Ri]=l}catch(A){ft(r,r.return,A)}}function Jd(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&rc(r.type)||r.tag===4}function Kl(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Jd(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&rc(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function bu(r,l,p){var y=r.tag;if(y===5||y===6)r=r.stateNode,l?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(r,l):(l=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,l.appendChild(r),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=k0));else if(y!==4&&(y===27&&rc(r.type)&&(p=r.stateNode,l=null),r=r.child,r!==null))for(bu(r,l,p),r=r.sibling;r!==null;)bu(r,l,p),r=r.sibling}function ds(r,l,p){var y=r.tag;if(y===5||y===6)r=r.stateNode,l?p.insertBefore(r,l):p.appendChild(r);else if(y!==4&&(y===27&&rc(r.type)&&(p=r.stateNode),r=r.child,r!==null))for(ds(r,l,p),r=r.sibling;r!==null;)ds(r,l,p),r=r.sibling}function Wl(r){var l=r.stateNode,p=r.memoizedProps;try{for(var y=r.type,A=l.attributes;A.length;)l.removeAttributeNode(A[0]);Fi(l,y,p),l[on]=r,l[Ri]=p}catch(M){ft(r,r.return,M)}}var Wa=!1,dn=!1,$s=!1,fp=typeof WeakSet=="function"?WeakSet:Set,An=null;function Q1(r,l){if(r=r.containerInfo,sy=j0,r=Rf(r),No(r)){if("selectionStart"in r)var p={start:r.selectionStart,end:r.selectionEnd};else t:{p=(p=r.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var A=y.anchorOffset,M=y.focusNode;y=y.focusOffset;try{p.nodeType,M.nodeType}catch{p=null;break t}var G=0,Y=-1,rt=-1,gt=0,_t=0,wt=r,vt=null;e:for(;;){for(var yt;wt!==p||A!==0&&wt.nodeType!==3||(Y=G+A),wt!==M||y!==0&&wt.nodeType!==3||(rt=G+y),wt.nodeType===3&&(G+=wt.nodeValue.length),(yt=wt.firstChild)!==null;)vt=wt,wt=yt;for(;;){if(wt===r)break e;if(vt===p&&++gt===A&&(Y=G),vt===M&&++_t===y&&(rt=G),(yt=wt.nextSibling)!==null)break;wt=vt,vt=wt.parentNode}wt=yt}p=Y===-1||rt===-1?null:{start:Y,end:rt}}else p=null}p=p||{start:0,end:0}}else p=null;for(oy={focusedElem:r,selectionRange:p},j0=!1,An=l;An!==null;)if(l=An,r=l.child,(l.subtreeFlags&1024)!==0&&r!==null)r.return=l,An=r;else for(;An!==null;){switch(l=An,M=l.alternate,r=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&M!==null){r=void 0,p=l,A=M.memoizedProps,M=M.memoizedState,y=p.stateNode;try{var ce=cs(p.type,A,p.elementType===p.type);r=y.getSnapshotBeforeUpdate(ce,M),y.__reactInternalSnapshotBeforeUpdate=r}catch(ne){ft(p,p.return,ne)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,p=r.nodeType,p===9)uy(r);else if(p===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":uy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=l.sibling,r!==null){r.return=l.return,An=r;break}An=l.return}}function $l(r,l,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ne(r,p),y&4&&Ka(5,p);break;case 1:if(Ne(r,p),y&4)if(r=p.stateNode,l===null)try{r.componentDidMount()}catch(G){ft(p,p.return,G)}else{var A=cs(p.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(A,l,r.__reactInternalSnapshotBeforeUpdate)}catch(G){ft(p,p.return,G)}}y&64&&D0(p),y&512&&vu(p,p.return);break;case 3:if(Ne(r,p),y&64&&(r=p.updateQueue,r!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=p.child.stateNode;break;case 1:l=p.child.stateNode}try{Vm(r,l)}catch(G){ft(p,p.return,G)}}break;case 27:l===null&&y&4&&Wl(p);case 26:case 5:Ne(r,p),l===null&&y&4&&yu(p),y&512&&vu(p,p.return);break;case 12:Ne(r,p);break;case 13:Ne(r,p),y&4&&$o(r,p),y&64&&(r=p.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(p=Ft.bind(null,p),rM(r,p))));break;case 22:if(y=p.memoizedState!==null||Wa,!y){l=l!==null&&l.memoizedState!==null||dn,A=Wa;var M=dn;Wa=y,(dn=l)&&!M?$a(r,p,(p.subtreeFlags&8772)!==0):Ne(r,p),Wa=A,dn=M}break;case 30:break;default:Ne(r,p)}}function th(r){var l=r.alternate;l!==null&&(r.alternate=null,th(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&Mc(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var cn=null,li=!1;function Ji(r,l,p){for(p=p.child;p!==null;)ua(r,l,p),p=p.sibling}function ua(r,l,p){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(ee,p)}catch{}switch(p.tag){case 26:dn||Ke(p,l),Ji(r,l,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:dn||Ke(p,l);var y=cn,A=li;rc(p.type)&&(cn=p.stateNode,li=!1),Ji(r,l,p),bp(p.stateNode),cn=y,li=A;break;case 5:dn||Ke(p,l);case 6:if(y=cn,A=li,cn=null,Ji(r,l,p),cn=y,li=A,cn!==null)if(li)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(p.stateNode)}catch(M){ft(p,l,M)}else try{cn.removeChild(p.stateNode)}catch(M){ft(p,l,M)}break;case 18:cn!==null&&(li?(r=cn,lE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,p.stateNode),Tp(r)):lE(cn,p.stateNode));break;case 4:y=cn,A=li,cn=p.stateNode.containerInfo,li=!0,Ji(r,l,p),cn=y,li=A;break;case 0:case 11:case 14:case 15:dn||yi(2,p,l),dn||yi(4,p,l),Ji(r,l,p);break;case 1:dn||(Ke(p,l),y=p.stateNode,typeof y.componentWillUnmount=="function"&&O0(p,l,y)),Ji(r,l,p);break;case 21:Ji(r,l,p);break;case 22:dn=(y=dn)||p.memoizedState!==null,Ji(r,l,p),dn=y;break;default:Ji(r,l,p)}}function $o(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Tp(r)}catch(p){ft(l,l.return,p)}}function pp(r){switch(r.tag){case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new fp),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new fp),l;default:throw Error(i(435,r.tag))}}function Cr(r,l){var p=pp(r);l.forEach(function(y){var A=me.bind(null,r,y);p.has(y)||(p.add(y),y.then(A,A))})}function ki(r,l){var p=l.deletions;if(p!==null)for(var y=0;y<p.length;y++){var A=p[y],M=r,G=l,Y=G;t:for(;Y!==null;){switch(Y.tag){case 27:if(rc(Y.type)){cn=Y.stateNode,li=!1;break t}break;case 5:cn=Y.stateNode,li=!1;break t;case 3:case 4:cn=Y.stateNode.containerInfo,li=!0;break t}Y=Y.return}if(cn===null)throw Error(i(160));ua(M,G,A),cn=null,li=!1,M=A.alternate,M!==null&&(M.return=null),A.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)xu(l,r),l=l.sibling}var bi=null;function xu(r,l){var p=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ki(l,r),Hn(r),y&4&&(yi(3,r,r.return),Ka(3,r),yi(5,r,r.return));break;case 1:ki(l,r),Hn(r),y&512&&(dn||p===null||Ke(p,p.return)),y&64&&Wa&&(r=r.updateQueue,r!==null&&(y=r.callbacks,y!==null&&(p=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var A=bi;if(ki(l,r),Hn(r),y&512&&(dn||p===null||Ke(p,p.return)),y&4){var M=p!==null?p.memoizedState:null;if(y=r.memoizedState,p===null)if(y===null)if(r.stateNode===null){t:{y=r.type,p=r.memoizedProps,A=A.ownerDocument||A;e:switch(y){case"title":M=A.getElementsByTagName("title")[0],(!M||M[Yr]||M[on]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=A.createElement(y),A.head.insertBefore(M,A.querySelector("head > title"))),Fi(M,y,p),M[on]=r,Vn(M),y=M;break t;case"link":var G=mE("link","href",A).get(y+(p.href||""));if(G){for(var Y=0;Y<G.length;Y++)if(M=G[Y],M.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&M.getAttribute("rel")===(p.rel==null?null:p.rel)&&M.getAttribute("title")===(p.title==null?null:p.title)&&M.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){G.splice(Y,1);break e}}M=A.createElement(y),Fi(M,y,p),A.head.appendChild(M);break;case"meta":if(G=mE("meta","content",A).get(y+(p.content||""))){for(Y=0;Y<G.length;Y++)if(M=G[Y],M.getAttribute("content")===(p.content==null?null:""+p.content)&&M.getAttribute("name")===(p.name==null?null:p.name)&&M.getAttribute("property")===(p.property==null?null:p.property)&&M.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&M.getAttribute("charset")===(p.charSet==null?null:p.charSet)){G.splice(Y,1);break e}}M=A.createElement(y),Fi(M,y,p),A.head.appendChild(M);break;default:throw Error(i(468,y))}M[on]=r,Vn(M),y=M}r.stateNode=y}else vE(A,r.type,r.stateNode);else r.stateNode=gE(A,y,r.memoizedProps);else M!==y?(M===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):M.count--,y===null?vE(A,r.type,r.stateNode):gE(A,y,r.memoizedProps)):y===null&&r.stateNode!==null&&Ws(r,r.memoizedProps,p.memoizedProps)}break;case 27:ki(l,r),Hn(r),y&512&&(dn||p===null||Ke(p,p.return)),p!==null&&y&4&&Ws(r,r.memoizedProps,p.memoizedProps);break;case 5:if(ki(l,r),Hn(r),y&512&&(dn||p===null||Ke(p,p.return)),r.flags&32){A=r.stateNode;try{wo(A,"")}catch(yt){ft(r,r.return,yt)}}y&4&&r.stateNode!=null&&(A=r.memoizedProps,Ws(r,A,p!==null?p.memoizedProps:A)),y&1024&&($s=!0);break;case 6:if(ki(l,r),Hn(r),y&4){if(r.stateNode===null)throw Error(i(162));y=r.memoizedProps,p=r.stateNode;try{p.nodeValue=y}catch(yt){ft(r,r.return,yt)}}break;case 3:if(I0=null,A=bi,bi=z0(l.containerInfo),ki(l,r),bi=A,Hn(r),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Tp(l.containerInfo)}catch(yt){ft(r,r.return,yt)}$s&&($s=!1,ve(r));break;case 4:y=bi,bi=z0(r.stateNode.containerInfo),ki(l,r),Hn(r),bi=y;break;case 12:ki(l,r),Hn(r);break;case 13:ki(l,r),Hn(r),r.child.flags&8192&&r.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ec=kt()),y&4&&(y=r.updateQueue,y!==null&&(r.updateQueue=null,Cr(r,y)));break;case 22:A=r.memoizedState!==null;var rt=p!==null&&p.memoizedState!==null,gt=Wa,_t=dn;if(Wa=gt||A,dn=_t||rt,ki(l,r),dn=_t,Wa=gt,Hn(r),y&8192)t:for(l=r.stateNode,l._visibility=A?l._visibility&-2:l._visibility|1,A&&(p===null||rt||Wa||dn||hn(r)),p=null,l=r;;){if(l.tag===5||l.tag===26){if(p===null){rt=p=l;try{if(M=rt.stateNode,A)G=M.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{Y=rt.stateNode;var wt=rt.memoizedProps.style,vt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;Y.style.display=vt==null||typeof vt=="boolean"?"":(""+vt).trim()}}catch(yt){ft(rt,rt.return,yt)}}}else if(l.tag===6){if(p===null){rt=l;try{rt.stateNode.nodeValue=A?"":rt.memoizedProps}catch(yt){ft(rt,rt.return,yt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break t;for(;l.sibling===null;){if(l.return===null||l.return===r)break t;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}y&4&&(y=r.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,Cr(r,p))));break;case 19:ki(l,r),Hn(r),y&4&&(y=r.updateQueue,y!==null&&(r.updateQueue=null,Cr(r,y)));break;case 30:break;case 21:break;default:ki(l,r),Hn(r)}}function Hn(r){var l=r.flags;if(l&2){try{for(var p,y=r.return;y!==null;){if(Jd(y)){p=y;break}y=y.return}if(p==null)throw Error(i(160));switch(p.tag){case 27:var A=p.stateNode,M=Kl(r);ds(r,M,A);break;case 5:var G=p.stateNode;p.flags&32&&(wo(G,""),p.flags&=-33);var Y=Kl(r);ds(r,Y,G);break;case 3:case 4:var rt=p.stateNode.containerInfo,gt=Kl(r);bu(r,gt,rt);break;default:throw Error(i(161))}}catch(_t){ft(r,r.return,_t)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function ve(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;ve(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function Ne(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)$l(r,l.alternate,l),l=l.sibling}function hn(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:yi(4,l,l.return),hn(l);break;case 1:Ke(l,l.return);var p=l.stateNode;typeof p.componentWillUnmount=="function"&&O0(l,l.return,p),hn(l);break;case 27:bp(l.stateNode);case 26:case 5:Ke(l,l.return),hn(l);break;case 22:l.memoizedState===null&&hn(l);break;case 30:hn(l);break;default:hn(l)}r=r.sibling}}function $a(r,l,p){for(p=p&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,A=r,M=l,G=M.flags;switch(M.tag){case 0:case 11:case 15:$a(A,M,p),Ka(4,M);break;case 1:if($a(A,M,p),y=M,A=y.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(gt){ft(y,y.return,gt)}if(y=M,A=y.updateQueue,A!==null){var Y=y.stateNode;try{var rt=A.shared.hiddenCallbacks;if(rt!==null)for(A.shared.hiddenCallbacks=null,A=0;A<rt.length;A++)Zt(rt[A],Y)}catch(gt){ft(y,y.return,gt)}}p&&G&64&&D0(M),vu(M,M.return);break;case 27:Wl(M);case 26:case 5:$a(A,M,p),p&&y===null&&G&4&&yu(M),vu(M,M.return);break;case 12:$a(A,M,p);break;case 13:$a(A,M,p),p&&G&4&&$o(A,M);break;case 22:M.memoizedState===null&&$a(A,M,p),vu(M,M.return);break;case 30:break;default:$a(A,M,p)}l=l.sibling}}function Qs(r,l){var p=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==p&&(r!=null&&r.refCount++,p!=null&&qa(p))}function hs(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&qa(r))}function da(r,l,p,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ql(r,l,p,y),l=l.sibling}function Ql(r,l,p,y){var A=l.flags;switch(l.tag){case 0:case 11:case 15:da(r,l,p,y),A&2048&&Ka(9,l);break;case 1:da(r,l,p,y);break;case 3:da(r,l,p,y),A&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&qa(r)));break;case 12:if(A&2048){da(r,l,p,y),r=l.stateNode;try{var M=l.memoizedProps,G=M.id,Y=M.onPostCommit;typeof Y=="function"&&Y(G,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(rt){ft(l,l.return,rt)}}else da(r,l,p,y);break;case 13:da(r,l,p,y);break;case 23:break;case 22:M=l.stateNode,G=l.alternate,l.memoizedState!==null?M._visibility&2?da(r,l,p,y):Su(r,l):M._visibility&2?da(r,l,p,y):(M._visibility|=2,Qa(r,l,p,y,(l.subtreeFlags&10256)!==0)),A&2048&&Qs(G,l);break;case 24:da(r,l,p,y),A&2048&&hs(l.alternate,l);break;default:da(r,l,p,y)}}function Qa(r,l,p,y,A){for(A=A&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var M=r,G=l,Y=p,rt=y,gt=G.flags;switch(G.tag){case 0:case 11:case 15:Qa(M,G,Y,rt,A),Ka(8,G);break;case 23:break;case 22:var _t=G.stateNode;G.memoizedState!==null?_t._visibility&2?Qa(M,G,Y,rt,A):Su(M,G):(_t._visibility|=2,Qa(M,G,Y,rt,A)),A&&gt&2048&&Qs(G.alternate,G);break;case 24:Qa(M,G,Y,rt,A),A&&gt&2048&&hs(G.alternate,G);break;default:Qa(M,G,Y,rt,A)}l=l.sibling}}function Su(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var p=r,y=l,A=y.flags;switch(y.tag){case 22:Su(p,y),A&2048&&Qs(y.alternate,y);break;case 24:Su(p,y),A&2048&&hs(y.alternate,y);break;default:Su(p,y)}l=l.sibling}}var Zs=8192;function Qo(r){if(r.subtreeFlags&Zs)for(r=r.child;r!==null;)gp(r),r=r.sibling}function gp(r){switch(r.tag){case 26:Qo(r),r.flags&Zs&&r.memoizedState!==null&&yM(bi,r.memoizedState,r.memoizedProps);break;case 5:Qo(r);break;case 3:case 4:var l=bi;bi=z0(r.stateNode.containerInfo),Qo(r),bi=l;break;case 22:r.memoizedState===null&&(l=r.alternate,l!==null&&l.memoizedState!==null?(l=Zs,Zs=16777216,Qo(r),Zs=l):Qo(r));break;default:Qo(r)}}function N0(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function Tr(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var y=l[p];An=y,mp(y,r)}N0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Zl(r),r=r.sibling}function Zl(r){switch(r.tag){case 0:case 11:case 15:Tr(r),r.flags&2048&&yi(9,r,r.return);break;case 3:Tr(r);break;case 12:Tr(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,fs(r)):Tr(r);break;default:Tr(r)}}function fs(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var y=l[p];An=y,mp(y,r)}N0(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:yi(8,l,l.return),fs(l);break;case 22:p=l.stateNode,p._visibility&2&&(p._visibility&=-3,fs(l));break;default:fs(l)}r=r.sibling}}function mp(r,l){for(;An!==null;){var p=An;switch(p.tag){case 0:case 11:case 15:yi(8,p,l);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:qa(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,An=y;else t:for(p=r;An!==null;){y=An;var A=y.sibling,M=y.return;if(th(y),y===p){An=null;break t}if(A!==null){A.return=M,An=A;break t}An=M}}}var Ma={getCacheForType:function(r){var l=vi(zn),p=l.data.get(r);return p===void 0&&(p=r(),l.data.set(r,p)),p}},Rr=typeof WeakMap=="function"?WeakMap:Map,oe=0,nn=null,Ee=null,Le=0,le=0,Bi=null,xi=!1,fn=!1,_u=!1,Mr=0,xe=0,un=0,Gn=0,ha=0,ci=0,Jl=0,Js=null,ui=null,tc=!1,ec=0,Zo=1/0,to=null,eo=null,Jt=0,He=null,he=null,Se=0,We=0,zi=null,ps=null,Dr=0,Au=null;function Pn(){if((oe&2)!==0&&Le!==0)return Le&-Le;if(Q.T!==null){var r=Fl;return r!==0?r:J1()}return _o()}function Tn(){ci===0&&(ci=(Le&536870912)===0||Ie?Gr():536870912);var r=la.current;return r!==null&&(r.flags|=32),ci}function jn(r,l,p){(r===nn&&(le===2||le===9)||r.cancelPendingCommit!==null)&&(ao(r,0),fa(r,Le,ci,!1)),Ti(r,p),((oe&2)===0||r!==nn)&&(r===nn&&((oe&2)===0&&(Gn|=p),xe===4&&fa(r,Le,ci,!1)),jt(r))}function no(r,l,p){if((oe&6)!==0)throw Error(i(327));var y=!p&&(l&124)===0&&(l&r.expiredLanes)===0||Sn(r,l),A=y?ic(r,l):Xn(r,l,!0),M=y;do{if(A===0){fn&&!y&&fa(r,l,0,!1);break}else{if(p=r.current.alternate,M&&!Da(p)){A=Xn(r,l,!1),M=!1;continue}if(A===2){if(M=l,r.errorRecoveryDisabledLanes&M)var G=0;else G=r.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){l=G;t:{var Y=r;A=Js;var rt=Y.current.memoizedState.isDehydrated;if(rt&&(ao(Y,G).flags|=256),G=Xn(Y,G,!1),G!==2){if(_u&&!rt){Y.errorRecoveryDisabledLanes|=M,Gn|=M,A=4;break t}M=ui,ui=A,M!==null&&(ui===null?ui=M:ui.push.apply(ui,M))}A=G}if(M=!1,A!==2)continue}}if(A===1){ao(r,0),fa(r,l,0,!0);break}t:{switch(y=r,M=A,M){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:fa(y,l,ci,!xi);break t;case 2:ui=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(A=ec+300-kt(),10<A)){if(fa(y,l,ci,!xi),$e(y,0,!0)!==0)break t;y.timeoutHandle=sE(eh.bind(null,y,p,ui,to,tc,l,ci,Gn,Jl,xi,M,2,-0,0),A);break t}eh(y,p,ui,to,tc,l,ci,Gn,Jl,xi,M,0,-0,0)}}break}while(!0);jt(r)}function eh(r,l,p,y,A,M,G,Y,rt,gt,_t,wt,vt,yt){if(r.timeoutHandle=-1,wt=l.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(_p={stylesheets:null,count:0,unsuspend:vM},gp(l),wt=bM(),wt!==null)){r.cancelPendingCommit=wt(u.bind(null,r,l,M,p,y,A,G,Y,rt,_t,1,vt,yt)),fa(r,M,G,!gt);return}u(r,l,M,p,y,A,G,Y,rt)}function Da(r){for(var l=r;;){var p=l.tag;if((p===0||p===11||p===15)&&l.flags&16384&&(p=l.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var A=p[y],M=A.getSnapshot;A=A.value;try{if(!ra(M(),A))return!1}catch{return!1}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function fa(r,l,p,y){l&=~ha,l&=~Gn,r.suspendedLanes|=l,r.pingedLanes&=~l,y&&(r.warmLanes|=l),y=r.expirationTimes;for(var A=l;0<A;){var M=31-Me(A),G=1<<M;y[M]=-1,A&=~G}p!==0&&_a(r,p,l)}function io(){return(oe&6)===0?(Je(0),!1):!0}function Si(){if(Ee!==null){if(le===0)var r=Ee.return;else r=Ee,yr=zs=null,qf(r),ql=null,Ni=0,r=Ee;for(;r!==null;)mu(r.alternate,r),r=r.return;Ee=null}}function ao(r,l){var p=r.timeoutHandle;p!==-1&&(r.timeoutHandle=-1,tM(p)),p=r.cancelPendingCommit,p!==null&&(r.cancelPendingCommit=null,p()),Si(),nn=r,Ee=p=gr(r.current,null),Le=l,le=0,Bi=null,xi=!1,fn=Sn(r,l),_u=!1,Jl=ci=ha=Gn=un=xe=0,ui=Js=null,tc=!1,(l&8)!==0&&(l|=l&32);var y=r.entangledLanes;if(y!==0)for(r=r.entanglements,y&=l;0<y;){var A=31-Me(y),M=1<<A;l|=r[A],y&=~M}return Mr=l,sa(),p}function nh(r,l){be=null,Q.H=Vd,l===jo||l===Uo?(l=If(),le=3):l===qm?(l=If(),le=4):le=l===w0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Bi=l,Ee===null&&(xe=1,Xd(r,Zn(l,r.current)))}function nc(){var r=Q.H;return Q.H=Vd,r===null?Vd:r}function Eu(){var r=Q.A;return Q.A=Ma,r}function Or(){xe=4,xi||(Le&4194048)!==Le&&la.current!==null||(fn=!0),(un&134217727)===0&&(Gn&134217727)===0||nn===null||fa(nn,Le,ci,!1)}function Xn(r,l,p){var y=oe;oe|=2;var A=nc(),M=Eu();(nn!==r||Le!==l)&&(to=null,ao(r,l)),l=!1;var G=xe;t:do try{if(le!==0&&Ee!==null){var Y=Ee,rt=Bi;switch(le){case 8:Si(),G=6;break t;case 3:case 2:case 9:case 6:la.current===null&&(l=!0);var gt=le;if(le=0,Bi=null,Jo(r,Y,rt,gt),p&&fn){G=0;break t}break;default:gt=le,le=0,Bi=null,Jo(r,Y,rt,gt)}}ro(),G=xe;break}catch(_t){nh(r,_t)}while(!0);return l&&r.shellSuspendCounter++,yr=zs=null,oe=y,Q.H=A,Q.A=M,Ee===null&&(nn=null,Le=0,sa()),G}function ro(){for(;Ee!==null;)ih(Ee)}function ic(r,l){var p=oe;oe|=2;var y=nc(),A=Eu();nn!==r||Le!==l?(to=null,Zo=kt()+500,ao(r,l)):fn=Sn(r,l);t:do try{if(le!==0&&Ee!==null){l=Ee;var M=Bi;e:switch(le){case 1:le=0,Bi=null,Jo(r,l,M,1);break;case 2:case 9:if(qo(M)){le=0,Bi=null,ah(l);break}l=function(){le!==2&&le!==9||nn!==r||(le=7),jt(r)},M.then(l,l);break t;case 3:le=7;break t;case 4:le=5;break t;case 7:qo(M)?(le=0,Bi=null,ah(l)):(le=0,Bi=null,Jo(r,l,M,7));break;case 5:var G=null;switch(Ee.tag){case 26:G=Ee.memoizedState;case 5:case 27:var Y=Ee;if(!G||yE(G)){le=0,Bi=null;var rt=Y.sibling;if(rt!==null)Ee=rt;else{var gt=Y.return;gt!==null?(Ee=gt,so(gt)):Ee=null}break e}}le=0,Bi=null,Jo(r,l,M,5);break;case 6:le=0,Bi=null,Jo(r,l,M,6);break;case 8:Si(),xe=6;break t;default:throw Error(i(462))}}ac();break}catch(_t){nh(r,_t)}while(!0);return yr=zs=null,Q.H=y,Q.A=A,oe=p,Ee!==null?0:(nn=null,Le=0,sa(),xe)}function ac(){for(;Ee!==null&&!Nt();)ih(Ee)}function ih(r){var l=gu(r.alternate,r,Mr);r.memoizedProps=r.pendingProps,l===null?so(r):Ee=l}function ah(r){var l=r,p=l.alternate;switch(l.tag){case 15:case 0:l=$d(p,l,l.pendingProps,l.type,void 0,Le);break;case 11:l=$d(p,l,l.pendingProps,l.type.render,l.ref,Le);break;case 5:qf(l);default:mu(p,l),l=Ee=Rd(l,Mr),l=gu(p,l,Mr)}r.memoizedProps=r.pendingProps,l===null?so(r):Ee=l}function Jo(r,l,p,y){yr=zs=null,qf(l),ql=null,Ni=0;var A=l.return;try{if($1(r,A,l,p,Le)){xe=1,Xd(r,Zn(p,r.current)),Ee=null;return}}catch(M){if(A!==null)throw Ee=A,M;xe=1,Xd(r,Zn(p,r.current)),Ee=null;return}l.flags&32768?(Ie||y===1?r=!0:fn||(Le&536870912)!==0?r=!1:(xi=r=!0,(y===2||y===9||y===3||y===6)&&(y=la.current,y!==null&&y.tag===13&&(y.flags|=16384))),rh(l,r)):so(l)}function so(r){var l=r;do{if((l.flags&32768)!==0){rh(l,xi);return}r=l.return;var p=hp(l.alternate,l,Mr);if(p!==null){Ee=p;return}if(l=l.sibling,l!==null){Ee=l;return}Ee=l=r}while(l!==null);xe===0&&(xe=5)}function rh(r,l){do{var p=ca(r.alternate,r);if(p!==null){p.flags&=32767,Ee=p;return}if(p=r.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!l&&(r=r.sibling,r!==null)){Ee=r;return}Ee=r=p}while(r!==null);xe=6,Ee=null}function u(r,l,p,y,A,M,G,Y,rt){r.cancelPendingCommit=null;do P();while(Jt!==0);if((oe&6)!==0)throw Error(i(327));if(l!==null){if(l===r.current)throw Error(i(177));if(M=l.lanes|l.childLanes,M|=Uc,jr(r,p,M,G,Y,rt),r===nn&&(Ee=nn=null,Le=0),he=l,He=r,Se=p,We=M,zi=A,ps=y,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Oa(vn,function(){return W(),null})):(r.callbackNode=null,r.callbackPriority=0),y=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||y){y=Q.T,Q.T=null,A=k.p,k.p=2,G=oe,oe|=4;try{Q1(r,l,p)}finally{oe=G,k.p=A,Q.T=y}}Jt=1,h(),b(),E()}}function h(){if(Jt===1){Jt=0;var r=He,l=he,p=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||p){p=Q.T,Q.T=null;var y=k.p;k.p=2;var A=oe;oe|=4;try{xu(l,r);var M=oy,G=Rf(r.containerInfo),Y=M.focusedElem,rt=M.selectionRange;if(G!==Y&&Y&&Y.ownerDocument&&Tf(Y.ownerDocument.documentElement,Y)){if(rt!==null&&No(Y)){var gt=rt.start,_t=rt.end;if(_t===void 0&&(_t=gt),"selectionStart"in Y)Y.selectionStart=gt,Y.selectionEnd=Math.min(_t,Y.value.length);else{var wt=Y.ownerDocument||document,vt=wt&&wt.defaultView||window;if(vt.getSelection){var yt=vt.getSelection(),ce=Y.textContent.length,ne=Math.min(rt.start,ce),gn=rt.end===void 0?ne:Math.min(rt.end,ce);!yt.extend&&ne>gn&&(G=gn,gn=ne,ne=G);var ht=Jr(Y,ne),lt=Jr(Y,gn);if(ht&&lt&&(yt.rangeCount!==1||yt.anchorNode!==ht.node||yt.anchorOffset!==ht.offset||yt.focusNode!==lt.node||yt.focusOffset!==lt.offset)){var pt=wt.createRange();pt.setStart(ht.node,ht.offset),yt.removeAllRanges(),ne>gn?(yt.addRange(pt),yt.extend(lt.node,lt.offset)):(pt.setEnd(lt.node,lt.offset),yt.addRange(pt))}}}}for(wt=[],yt=Y;yt=yt.parentNode;)yt.nodeType===1&&wt.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<wt.length;Y++){var Et=wt[Y];Et.element.scrollLeft=Et.left,Et.element.scrollTop=Et.top}}j0=!!sy,oy=sy=null}finally{oe=A,k.p=y,Q.T=p}}r.current=l,Jt=2}}function b(){if(Jt===2){Jt=0;var r=He,l=he,p=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||p){p=Q.T,Q.T=null;var y=k.p;k.p=2;var A=oe;oe|=4;try{$l(r,l.alternate,l)}finally{oe=A,k.p=y,Q.T=p}}Jt=3}}function E(){if(Jt===4||Jt===3){Jt=0,we();var r=He,l=he,p=Se,y=ps;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Jt=5:(Jt=0,he=He=null,N(r,r.pendingLanes));var A=r.pendingLanes;if(A===0&&(eo=null),vl(p),l=l.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(ee,l,void 0,(l.current.flags&128)===128)}catch{}if(y!==null){l=Q.T,A=k.p,k.p=2,Q.T=null;try{for(var M=r.onRecoverableError,G=0;G<y.length;G++){var Y=y[G];M(Y.value,{componentStack:Y.stack})}}finally{Q.T=l,k.p=A}}(Se&3)!==0&&P(),jt(r),A=r.pendingLanes,(p&4194090)!==0&&(A&42)!==0?r===Au?Dr++:(Dr=0,Au=r):Dr=0,Je(0)}}function N(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,qa(l)))}function P(r){return h(),b(),E(),W()}function W(){if(Jt!==5)return!1;var r=He,l=We;We=0;var p=vl(Se),y=Q.T,A=k.p;try{k.p=32>p?32:p,Q.T=null,p=zi,zi=null;var M=He,G=Se;if(Jt=0,he=He=null,Se=0,(oe&6)!==0)throw Error(i(331));var Y=oe;if(oe|=4,Zl(M.current),Ql(M,M.current,G,p),oe=Y,Je(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(ee,M)}catch{}return!0}finally{k.p=A,Q.T=y,N(r,l)}}function st(r,l,p){l=Zn(p,l),l=Yl(r.stateNode,l,2),r=Oi(r,l,2),r!==null&&(Ti(r,2),jt(r))}function ft(r,l,p){if(r.tag===3)st(r,r,p);else for(;l!==null;){if(l.tag===3){st(l,r,p);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(eo===null||!eo.has(y))){r=Zn(p,r),p=fu(2),y=Oi(l,p,2),y!==null&&(Kd(p,y,l,r),Ti(y,2),jt(y));break}}l=l.return}}function Ct(r,l,p){var y=r.pingCache;if(y===null){y=r.pingCache=new Rr;var A=new Set;y.set(l,A)}else A=y.get(l),A===void 0&&(A=new Set,y.set(l,A));A.has(p)||(_u=!0,A.add(p),r=Ot.bind(null,r,l,p),l.then(r,r))}function Ot(r,l,p){var y=r.pingCache;y!==null&&y.delete(l),r.pingedLanes|=r.suspendedLanes&p,r.warmLanes&=~p,nn===r&&(Le&p)===p&&(xe===4||xe===3&&(Le&62914560)===Le&&300>kt()-ec?(oe&2)===0&&ao(r,0):ha|=p,Jl===Le&&(Jl=0)),jt(r)}function zt(r,l){l===0&&(l=Ci()),r=pr(r,l),r!==null&&(Ti(r,l),jt(r))}function Ft(r){var l=r.memoizedState,p=0;l!==null&&(p=l.retryLane),zt(r,p)}function me(r,l){var p=0;switch(r.tag){case 13:var y=r.stateNode,A=r.memoizedState;A!==null&&(p=A.retryLane);break;case 19:y=r.stateNode;break;case 22:y=r.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(l),zt(r,p)}function Oa(r,l){return Gt(r,l)}var oo=null,Na=null,mt=!1,dt=!1,bt=!1,Tt=0;function jt(r){r!==Na&&r.next===null&&(Na===null?oo=Na=r:Na=Na.next=r),dt=!0,mt||(mt=!0,Z1())}function Je(r,l){if(!bt&&dt){bt=!0;do for(var p=!1,y=oo;y!==null;){if(r!==0){var A=y.pendingLanes;if(A===0)var M=0;else{var G=y.suspendedLanes,Y=y.pingedLanes;M=(1<<31-Me(42|r)+1)-1,M&=A&~(G&~Y),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(p=!0,gs(y,M))}else M=Le,M=$e(y,y===nn?M:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(M&3)===0||Sn(y,M)||(p=!0,gs(y,M));y=y.next}while(p);bt=!1}}function ae(){Ge()}function Ge(){dt=mt=!1;var r=0;Tt!==0&&(J7()&&(r=Tt),Tt=0);for(var l=kt(),p=null,y=oo;y!==null;){var A=y.next,M=Kn(y,l);M===0?(y.next=null,p===null?oo=A:p.next=A,A===null&&(Na=p)):(p=y,(r!==0||(M&3)!==0)&&(dt=!0)),y=A}Je(r)}function Kn(r,l){for(var p=r.suspendedLanes,y=r.pingedLanes,A=r.expirationTimes,M=r.pendingLanes&-62914561;0<M;){var G=31-Me(M),Y=1<<G,rt=A[G];rt===-1?((Y&p)===0||(Y&y)!==0)&&(A[G]=sr(Y,l)):rt<=l&&(r.expiredLanes|=Y),M&=~Y}if(l=nn,p=Le,p=$e(r,r===l?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),y=r.callbackNode,p===0||r===l&&(le===2||le===9)||r.cancelPendingCommit!==null)return y!==null&&y!==null&&de(y),r.callbackNode=null,r.callbackPriority=0;if((p&3)===0||Sn(r,p)){if(l=p&-p,l===r.callbackPriority)return l;switch(y!==null&&de(y),vl(p)){case 2:case 8:p=sn;break;case 32:p=vn;break;case 268435456:p=Ce;break;default:p=vn}return y=je.bind(null,r),p=Gt(p,y),r.callbackPriority=l,r.callbackNode=p,l}return y!==null&&y!==null&&de(y),r.callbackPriority=2,r.callbackNode=null,2}function je(r,l){if(Jt!==0&&Jt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var p=r.callbackNode;if(P()&&r.callbackNode!==p)return null;var y=Le;return y=$e(r,r===nn?y:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),y===0?null:(no(r,y,l),Kn(r,kt()),r.callbackNode!=null&&r.callbackNode===p?je.bind(null,r):null)}function gs(r,l){if(P())return null;no(r,l,!0)}function Z1(){eM(function(){(oe&6)!==0?Gt(rn,ae):Ge()})}function J1(){return Tt===0&&(Tt=Gr()),Tt}function QA(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:od(""+r)}function ZA(r,l){var p=l.ownerDocument.createElement("input");return p.name=l.name,p.value=l.value,r.id&&p.setAttribute("form",r.id),l.parentNode.insertBefore(p,l),r=new FormData(r),p.parentNode.removeChild(p),r}function Y7(r,l,p,y,A){if(l==="submit"&&p&&p.stateNode===A){var M=QA((A[Ri]||null).action),G=y.submitter;G&&(l=(l=G[Ri]||null)?QA(l.formAction):G.getAttribute("formAction"),l!==null&&(M=l,G=null));var Y=new Bc("action","action",null,y,A);r.push({event:Y,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Tt!==0){var rt=G?ZA(A,G):new FormData(A);np(p,{pending:!0,data:rt,method:A.method,action:M},null,rt)}}else typeof M=="function"&&(Y.preventDefault(),rt=G?ZA(A,G):new FormData(A),np(p,{pending:!0,data:rt,method:A.method,action:M},M,rt))},currentTarget:A}]})}}for(var ty=0;ty<pi.length;ty++){var ey=pi[ty],X7=ey.toLowerCase(),K7=ey[0].toUpperCase()+ey.slice(1);Ea(X7,"on"+K7)}Ea(Mf,"onAnimationEnd"),Ea(Aa,"onAnimationIteration"),Ea(Td,"onAnimationStart"),Ea("dblclick","onDoubleClick"),Ea("focusin","onFocus"),Ea("focusout","onBlur"),Ea(Hm,"onTransitionRun"),Ea(q1,"onTransitionStart"),Ea(Df,"onTransitionCancel"),Ea(fi,"onTransitionEnd"),Cs("onMouseEnter",["mouseout","mouseover"]),Cs("onMouseLeave",["mouseout","mouseover"]),Cs("onPointerEnter",["pointerout","pointerover"]),Cs("onPointerLeave",["pointerout","pointerover"]),ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vp));function JA(r,l){l=(l&4)!==0;for(var p=0;p<r.length;p++){var y=r[p],A=y.event;y=y.listeners;t:{var M=void 0;if(l)for(var G=y.length-1;0<=G;G--){var Y=y[G],rt=Y.instance,gt=Y.currentTarget;if(Y=Y.listener,rt!==M&&A.isPropagationStopped())break t;M=Y,A.currentTarget=gt;try{M(A)}catch(_t){us(_t)}A.currentTarget=null,M=rt}else for(G=0;G<y.length;G++){if(Y=y[G],rt=Y.instance,gt=Y.currentTarget,Y=Y.listener,rt!==M&&A.isPropagationStopped())break t;M=Y,A.currentTarget=gt;try{M(A)}catch(_t){us(_t)}A.currentTarget=null,M=rt}}}}function Pe(r,l){var p=l[Rc];p===void 0&&(p=l[Rc]=new Set);var y=r+"__bubble";p.has(y)||(tE(l,r,2,!1),p.add(y))}function ny(r,l,p){var y=0;l&&(y|=4),tE(p,r,y,l)}var L0="_reactListening"+Math.random().toString(36).slice(2);function iy(r){if(!r[L0]){r[L0]=!0,td.forEach(function(p){p!=="selectionchange"&&(W7.has(p)||ny(p,!1,r),ny(p,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[L0]||(l[L0]=!0,ny("selectionchange",!1,l))}}function tE(r,l,p,y){switch(EE(l)){case 2:var A=_M;break;case 8:A=AM;break;default:A=vy}p=A.bind(null,l,p,r),A=void 0,!cd||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(A=!0),y?A!==void 0?r.addEventListener(l,p,{capture:!0,passive:A}):r.addEventListener(l,p,!0):A!==void 0?r.addEventListener(l,p,{passive:A}):r.addEventListener(l,p,!1)}function ay(r,l,p,y,A){var M=y;if((l&1)===0&&(l&2)===0&&y!==null)t:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var Y=y.stateNode.containerInfo;if(Y===A)break;if(G===4)for(G=y.return;G!==null;){var rt=G.tag;if((rt===3||rt===4)&&G.stateNode.containerInfo===A)return;G=G.return}for(;Y!==null;){if(G=lr(Y),G===null)return;if(rt=G.tag,rt===5||rt===6||rt===26||rt===27){y=M=G;continue t}Y=Y.parentNode}}y=y.return}gf(function(){var gt=M,_t=Rs(p),wt=[];t:{var vt=Of.get(r);if(vt!==void 0){var yt=Bc,ce=r;switch(r){case"keypress":if(Cl(p)===0)break t;case"keydown":case"keyup":yt=gd;break;case"focusin":ce="focus",yt=Ro;break;case"focusout":ce="blur",yt=Ro;break;case"beforeblur":case"afterblur":yt=Ro;break;case"click":if(p.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=Am;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Dm;break;case Mf:case Aa:case Td:yt=Em;break;case fi:yt=oi;break;case"scroll":case"scrollend":yt=H1;break;case"wheel":yt=Nm;break;case"copy":case"cut":case"paste":yt=Ms;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=md;break;case"toggle":case"beforetoggle":yt=Pm}var ne=(l&4)!==0,gn=!ne&&(r==="scroll"||r==="scrollend"),ht=ne?vt!==null?vt+"Capture":null:vt;ne=[];for(var lt=gt,pt;lt!==null;){var Et=lt;if(pt=Et.stateNode,Et=Et.tag,Et!==5&&Et!==26&&Et!==27||pt===null||ht===null||(Et=El(lt,ht),Et!=null&&ne.push(yp(lt,Et,pt))),gn)break;lt=lt.return}0<ne.length&&(vt=new yt(vt,ce,null,p,_t),wt.push({event:vt,listeners:ne}))}}if((l&7)===0){t:{if(vt=r==="mouseover"||r==="pointerover",yt=r==="mouseout"||r==="pointerout",vt&&p!==ld&&(ce=p.relatedTarget||p.fromElement)&&(lr(ce)||ce[qr]))break t;if((yt||vt)&&(vt=_t.window===_t?_t:(vt=_t.ownerDocument)?vt.defaultView||vt.parentWindow:window,yt?(ce=p.relatedTarget||p.toElement,yt=gt,ce=ce?lr(ce):null,ce!==null&&(gn=s(ce),ne=ce.tag,ce!==gn||ne!==5&&ne!==27&&ne!==6)&&(ce=null)):(yt=null,ce=gt),yt!==ce)){if(ne=zc,Et="onMouseLeave",ht="onMouseEnter",lt="mouse",(r==="pointerout"||r==="pointerover")&&(ne=md,Et="onPointerLeave",ht="onPointerEnter",lt="pointer"),gn=yt==null?vt:bl(yt),pt=ce==null?vt:bl(ce),vt=new ne(Et,lt+"leave",yt,p,_t),vt.target=gn,vt.relatedTarget=pt,Et=null,lr(_t)===gt&&(ne=new ne(ht,lt+"enter",ce,p,_t),ne.target=pt,ne.relatedTarget=gn,Et=ne),gn=Et,yt&&ce)e:{for(ne=yt,ht=ce,lt=0,pt=ne;pt;pt=sh(pt))lt++;for(pt=0,Et=ht;Et;Et=sh(Et))pt++;for(;0<lt-pt;)ne=sh(ne),lt--;for(;0<pt-lt;)ht=sh(ht),pt--;for(;lt--;){if(ne===ht||ht!==null&&ne===ht.alternate)break e;ne=sh(ne),ht=sh(ht)}ne=null}else ne=null;yt!==null&&eE(wt,vt,yt,ne,!1),ce!==null&&gn!==null&&eE(wt,gn,ce,ne,!0)}}t:{if(vt=gt?bl(gt):window,yt=vt.nodeName&&vt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&vt.type==="file")var Vt=qi;else if(xd(vt))if(wf)Vt=wn;else{Vt=Ed;var Oe=Fm}else yt=vt.nodeName,!yt||yt.toLowerCase()!=="input"||vt.type!=="checkbox"&&vt.type!=="radio"?gt&&sd(gt.elementType)&&(Vt=qi):Vt=Hc;if(Vt&&(Vt=Vt(r,gt))){Ef(wt,Vt,p,_t);break t}Oe&&Oe(r,vt,gt),r==="focusout"&&gt&&vt.type==="number"&&gt.memoizedProps.value!=null&&rd(vt,"number",vt.value)}switch(Oe=gt?bl(gt):window,r){case"focusin":(xd(Oe)||Oe.contentEditable==="true")&&(Lo=Oe,Gc=gt,Nl=null);break;case"focusout":Nl=Gc=Lo=null;break;case"mousedown":jc=!0;break;case"contextmenu":case"mouseup":case"dragend":jc=!1,wd(wt,p,_t);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":wd(wt,p,_t)}var Kt;if(Ml)t:{switch(r){case"compositionstart":var re="onCompositionStart";break t;case"compositionend":re="onCompositionEnd";break t;case"compositionupdate":re="onCompositionUpdate";break t}re=void 0}else Ds?yd(r,p)&&(re="onCompositionEnd"):r==="keydown"&&p.keyCode===229&&(re="onCompositionStart");re&&(xf&&p.locale!=="ko"&&(Ds||re!=="onCompositionStart"?re==="onCompositionEnd"&&Ds&&(Kt=mf()):(Kr=_t,Lc="value"in Kr?Kr.value:Kr.textContent,Ds=!0)),Oe=P0(gt,re),0<Oe.length&&(re=new Qr(re,r,null,p,_t),wt.push({event:re,listeners:Oe}),Kt?re.data=Kt:(Kt=_f(p),Kt!==null&&(re.data=Kt)))),(Kt=Bm?bd(r,p):Af(r,p))&&(re=P0(gt,"onBeforeInput"),0<re.length&&(Oe=new Qr("onBeforeInput","beforeinput",null,p,_t),wt.push({event:Oe,listeners:re}),Oe.data=Kt)),Y7(wt,r,gt,p,_t)}JA(wt,l)})}function yp(r,l,p){return{instance:r,listener:l,currentTarget:p}}function P0(r,l){for(var p=l+"Capture",y=[];r!==null;){var A=r,M=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||M===null||(A=El(r,p),A!=null&&y.unshift(yp(r,A,M)),A=El(r,l),A!=null&&y.push(yp(r,A,M))),r.tag===3)return y;r=r.return}return[]}function sh(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function eE(r,l,p,y,A){for(var M=l._reactName,G=[];p!==null&&p!==y;){var Y=p,rt=Y.alternate,gt=Y.stateNode;if(Y=Y.tag,rt!==null&&rt===y)break;Y!==5&&Y!==26&&Y!==27||gt===null||(rt=gt,A?(gt=El(p,M),gt!=null&&G.unshift(yp(p,gt,rt))):A||(gt=El(p,M),gt!=null&&G.push(yp(p,gt,rt)))),p=p.return}G.length!==0&&r.push({event:l,listeners:G})}var $7=/\r\n?/g,Q7=/\u0000|\uFFFD/g;function nE(r){return(typeof r=="string"?r:""+r).replace($7,`
`).replace(Q7,"")}function iE(r,l){return l=nE(l),nE(r)===l}function k0(){}function pn(r,l,p,y,A,M){switch(p){case"children":typeof y=="string"?l==="body"||l==="textarea"&&y===""||wo(r,y):(typeof y=="number"||typeof y=="bigint")&&l!=="body"&&wo(r,""+y);break;case"className":Sl(r,"class",y);break;case"tabIndex":Sl(r,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Sl(r,p,y);break;case"style":pf(r,y,M);break;case"data":if(l!=="object"){Sl(r,"data",y);break}case"src":case"href":if(y===""&&(l!=="a"||p!=="href")){r.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){r.removeAttribute(p);break}y=od(""+y),r.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){r.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(p==="formAction"?(l!=="input"&&pn(r,l,"name",A.name,A,null),pn(r,l,"formEncType",A.formEncType,A,null),pn(r,l,"formMethod",A.formMethod,A,null),pn(r,l,"formTarget",A.formTarget,A,null)):(pn(r,l,"encType",A.encType,A,null),pn(r,l,"method",A.method,A,null),pn(r,l,"target",A.target,A,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){r.removeAttribute(p);break}y=od(""+y),r.setAttribute(p,y);break;case"onClick":y!=null&&(r.onclick=k0);break;case"onScroll":y!=null&&Pe("scroll",r);break;case"onScrollEnd":y!=null&&Pe("scrollend",r);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(p=y.__html,p!=null){if(A.children!=null)throw Error(i(60));r.innerHTML=p}}break;case"multiple":r.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":r.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){r.removeAttribute("xlink:href");break}p=od(""+y),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?r.setAttribute(p,""+y):r.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?r.setAttribute(p,""):r.removeAttribute(p);break;case"capture":case"download":y===!0?r.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?r.setAttribute(p,y):r.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?r.setAttribute(p,y):r.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?r.removeAttribute(p):r.setAttribute(p,y);break;case"popover":Pe("beforetoggle",r),Pe("toggle",r),xl(r,"popover",y);break;case"xlinkActuate":ja(r,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ja(r,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ja(r,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ja(r,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ja(r,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ja(r,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ja(r,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ja(r,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ja(r,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":xl(r,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=xm.get(p)||p,xl(r,p,y))}}function ry(r,l,p,y,A,M){switch(p){case"style":pf(r,y,M);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(p=y.__html,p!=null){if(A.children!=null)throw Error(i(60));r.innerHTML=p}}break;case"children":typeof y=="string"?wo(r,y):(typeof y=="number"||typeof y=="bigint")&&wo(r,""+y);break;case"onScroll":y!=null&&Pe("scroll",r);break;case"onScrollEnd":y!=null&&Pe("scrollend",r);break;case"onClick":y!=null&&(r.onclick=k0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ed.hasOwnProperty(p))t:{if(p[0]==="o"&&p[1]==="n"&&(A=p.endsWith("Capture"),l=p.slice(2,A?p.length-7:void 0),M=r[Ri]||null,M=M!=null?M[p]:null,typeof M=="function"&&r.removeEventListener(l,M,A),typeof y=="function")){typeof M!="function"&&M!==null&&(p in r?r[p]=null:r.hasAttribute(p)&&r.removeAttribute(p)),r.addEventListener(l,y,A);break t}p in r?r[p]=y:y===!0?r.setAttribute(p,""):xl(r,p,y)}}}function Fi(r,l,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",r),Pe("load",r);var y=!1,A=!1,M;for(M in p)if(p.hasOwnProperty(M)){var G=p[M];if(G!=null)switch(M){case"src":y=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:pn(r,l,M,G,p,null)}}A&&pn(r,l,"srcSet",p.srcSet,p,null),y&&pn(r,l,"src",p.src,p,null);return;case"input":Pe("invalid",r);var Y=M=G=A=null,rt=null,gt=null;for(y in p)if(p.hasOwnProperty(y)){var _t=p[y];if(_t!=null)switch(y){case"name":A=_t;break;case"type":G=_t;break;case"checked":rt=_t;break;case"defaultChecked":gt=_t;break;case"value":M=_t;break;case"defaultValue":Y=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(i(137,l));break;default:pn(r,l,y,_t,p,null)}}ad(r,M,Y,rt,gt,G,A,!1),Dc(r);return;case"select":Pe("invalid",r),y=G=M=null;for(A in p)if(p.hasOwnProperty(A)&&(Y=p[A],Y!=null))switch(A){case"value":M=Y;break;case"defaultValue":G=Y;break;case"multiple":y=Y;default:pn(r,l,A,Y,p,null)}l=M,p=G,r.multiple=!!y,l!=null?Al(r,!!y,l,!1):p!=null&&Al(r,!!y,p,!0);return;case"textarea":Pe("invalid",r),M=A=y=null;for(G in p)if(p.hasOwnProperty(G)&&(Y=p[G],Y!=null))switch(G){case"value":y=Y;break;case"defaultValue":A=Y;break;case"children":M=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(91));break;default:pn(r,l,G,Y,p,null)}df(r,y,A,M),Dc(r);return;case"option":for(rt in p)if(p.hasOwnProperty(rt)&&(y=p[rt],y!=null))switch(rt){case"selected":r.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:pn(r,l,rt,y,p,null)}return;case"dialog":Pe("beforetoggle",r),Pe("toggle",r),Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":Pe("load",r);break;case"video":case"audio":for(y=0;y<vp.length;y++)Pe(vp[y],r);break;case"image":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"embed":case"source":case"link":Pe("error",r),Pe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(gt in p)if(p.hasOwnProperty(gt)&&(y=p[gt],y!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:pn(r,l,gt,y,p,null)}return;default:if(sd(l)){for(_t in p)p.hasOwnProperty(_t)&&(y=p[_t],y!==void 0&&ry(r,l,_t,y,p,void 0));return}}for(Y in p)p.hasOwnProperty(Y)&&(y=p[Y],y!=null&&pn(r,l,Y,y,p,null))}function Z7(r,l,p,y){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,M=null,G=null,Y=null,rt=null,gt=null,_t=null;for(yt in p){var wt=p[yt];if(p.hasOwnProperty(yt)&&wt!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":rt=wt;default:y.hasOwnProperty(yt)||pn(r,l,yt,null,y,wt)}}for(var vt in y){var yt=y[vt];if(wt=p[vt],y.hasOwnProperty(vt)&&(yt!=null||wt!=null))switch(vt){case"type":M=yt;break;case"name":A=yt;break;case"checked":gt=yt;break;case"defaultChecked":_t=yt;break;case"value":G=yt;break;case"defaultValue":Y=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(i(137,l));break;default:yt!==wt&&pn(r,l,vt,yt,y,wt)}}id(r,G,Y,rt,gt,_t,M,A);return;case"select":yt=G=Y=vt=null;for(M in p)if(rt=p[M],p.hasOwnProperty(M)&&rt!=null)switch(M){case"value":break;case"multiple":yt=rt;default:y.hasOwnProperty(M)||pn(r,l,M,null,y,rt)}for(A in y)if(M=y[A],rt=p[A],y.hasOwnProperty(A)&&(M!=null||rt!=null))switch(A){case"value":vt=M;break;case"defaultValue":Y=M;break;case"multiple":G=M;default:M!==rt&&pn(r,l,A,M,y,rt)}l=Y,p=G,y=yt,vt!=null?Al(r,!!p,vt,!1):!!y!=!!p&&(l!=null?Al(r,!!p,l,!0):Al(r,!!p,p?[]:"",!1));return;case"textarea":yt=vt=null;for(Y in p)if(A=p[Y],p.hasOwnProperty(Y)&&A!=null&&!y.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:pn(r,l,Y,null,y,A)}for(G in y)if(A=y[G],M=p[G],y.hasOwnProperty(G)&&(A!=null||M!=null))switch(G){case"value":vt=A;break;case"defaultValue":yt=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:A!==M&&pn(r,l,G,A,y,M)}uf(r,vt,yt);return;case"option":for(var ce in p)if(vt=p[ce],p.hasOwnProperty(ce)&&vt!=null&&!y.hasOwnProperty(ce))switch(ce){case"selected":r.selected=!1;break;default:pn(r,l,ce,null,y,vt)}for(rt in y)if(vt=y[rt],yt=p[rt],y.hasOwnProperty(rt)&&vt!==yt&&(vt!=null||yt!=null))switch(rt){case"selected":r.selected=vt&&typeof vt!="function"&&typeof vt!="symbol";break;default:pn(r,l,rt,vt,y,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ne in p)vt=p[ne],p.hasOwnProperty(ne)&&vt!=null&&!y.hasOwnProperty(ne)&&pn(r,l,ne,null,y,vt);for(gt in y)if(vt=y[gt],yt=p[gt],y.hasOwnProperty(gt)&&vt!==yt&&(vt!=null||yt!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(i(137,l));break;default:pn(r,l,gt,vt,y,yt)}return;default:if(sd(l)){for(var gn in p)vt=p[gn],p.hasOwnProperty(gn)&&vt!==void 0&&!y.hasOwnProperty(gn)&&ry(r,l,gn,void 0,y,vt);for(_t in y)vt=y[_t],yt=p[_t],!y.hasOwnProperty(_t)||vt===yt||vt===void 0&&yt===void 0||ry(r,l,_t,vt,y,yt);return}}for(var ht in p)vt=p[ht],p.hasOwnProperty(ht)&&vt!=null&&!y.hasOwnProperty(ht)&&pn(r,l,ht,null,y,vt);for(wt in y)vt=y[wt],yt=p[wt],!y.hasOwnProperty(wt)||vt===yt||vt==null&&yt==null||pn(r,l,wt,vt,y,yt)}var sy=null,oy=null;function B0(r){return r.nodeType===9?r:r.ownerDocument}function aE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rE(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function ly(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var cy=null;function J7(){var r=window.event;return r&&r.type==="popstate"?r===cy?!1:(cy=r,!0):(cy=null,!1)}var sE=typeof setTimeout=="function"?setTimeout:void 0,tM=typeof clearTimeout=="function"?clearTimeout:void 0,oE=typeof Promise=="function"?Promise:void 0,eM=typeof queueMicrotask=="function"?queueMicrotask:typeof oE<"u"?function(r){return oE.resolve(null).then(r).catch(nM)}:sE;function nM(r){setTimeout(function(){throw r})}function rc(r){return r==="head"}function lE(r,l){var p=l,y=0,A=0;do{var M=p.nextSibling;if(r.removeChild(p),M&&M.nodeType===8)if(p=M.data,p==="/$"){if(0<y&&8>y){p=y;var G=r.ownerDocument;if(p&1&&bp(G.documentElement),p&2&&bp(G.body),p&4)for(p=G.head,bp(p),G=p.firstChild;G;){var Y=G.nextSibling,rt=G.nodeName;G[Yr]||rt==="SCRIPT"||rt==="STYLE"||rt==="LINK"&&G.rel.toLowerCase()==="stylesheet"||p.removeChild(G),G=Y}}if(A===0){r.removeChild(M),Tp(l);return}A--}else p==="$"||p==="$?"||p==="$!"?A++:y=p.charCodeAt(0)-48;else y=0;p=M}while(p);Tp(l)}function uy(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var p=l;switch(l=l.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":uy(p),Mc(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}r.removeChild(p)}}function iM(r,l,p,y){for(;r.nodeType===1;){var A=p;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!y&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(y){if(!r[Yr])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(M=r.getAttribute("rel"),M==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(M!==A.rel||r.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||r.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||r.getAttribute("title")!==(A.title==null?null:A.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(M=r.getAttribute("src"),(M!==(A.src==null?null:A.src)||r.getAttribute("type")!==(A.type==null?null:A.type)||r.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&M&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var M=A.name==null?null:""+A.name;if(A.type==="hidden"&&r.getAttribute("name")===M)return r}else return r;if(r=ms(r.nextSibling),r===null)break}return null}function aM(r,l,p){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!p||(r=ms(r.nextSibling),r===null))return null;return r}function dy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function rM(r,l){var p=r.ownerDocument;if(r.data!=="$?"||p.readyState==="complete")l();else{var y=function(){l(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),r._reactRetry=y}}function ms(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return r}var hy=null;function cE(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var p=r.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return r;l--}else p==="/$"&&l++}r=r.previousSibling}return null}function uE(r,l,p){switch(l=B0(p),r){case"html":if(r=l.documentElement,!r)throw Error(i(452));return r;case"head":if(r=l.head,!r)throw Error(i(453));return r;case"body":if(r=l.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function bp(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);Mc(r)}var Nr=new Map,dE=new Set;function z0(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var tl=k.d;k.d={f:sM,r:oM,D:lM,C:cM,L:uM,m:dM,X:fM,S:hM,M:pM};function sM(){var r=tl.f(),l=io();return r||l}function oM(r){var l=cr(r);l!==null&&l.tag===5&&l.type==="form"?m0(l):tl.r(r)}var oh=typeof document>"u"?null:document;function hE(r,l,p){var y=oh;if(y&&typeof l=="string"&&l){var A=ia(l);A='link[rel="'+r+'"][href="'+A+'"]',typeof p=="string"&&(A+='[crossorigin="'+p+'"]'),dE.has(A)||(dE.add(A),r={rel:r,crossOrigin:p,href:l},y.querySelector(A)===null&&(l=y.createElement("link"),Fi(l,"link",r),Vn(l),y.head.appendChild(l)))}}function lM(r){tl.D(r),hE("dns-prefetch",r,null)}function cM(r,l){tl.C(r,l),hE("preconnect",r,l)}function uM(r,l,p){tl.L(r,l,p);var y=oh;if(y&&r&&l){var A='link[rel="preload"][as="'+ia(l)+'"]';l==="image"&&p&&p.imageSrcSet?(A+='[imagesrcset="'+ia(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(A+='[imagesizes="'+ia(p.imageSizes)+'"]')):A+='[href="'+ia(r)+'"]';var M=A;switch(l){case"style":M=lh(r);break;case"script":M=ch(r)}Nr.has(M)||(r=g({rel:"preload",href:l==="image"&&p&&p.imageSrcSet?void 0:r,as:l},p),Nr.set(M,r),y.querySelector(A)!==null||l==="style"&&y.querySelector(xp(M))||l==="script"&&y.querySelector(Sp(M))||(l=y.createElement("link"),Fi(l,"link",r),Vn(l),y.head.appendChild(l)))}}function dM(r,l){tl.m(r,l);var p=oh;if(p&&r){var y=l&&typeof l.as=="string"?l.as:"script",A='link[rel="modulepreload"][as="'+ia(y)+'"][href="'+ia(r)+'"]',M=A;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=ch(r)}if(!Nr.has(M)&&(r=g({rel:"modulepreload",href:r},l),Nr.set(M,r),p.querySelector(A)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Sp(M)))return}y=p.createElement("link"),Fi(y,"link",r),Vn(y),p.head.appendChild(y)}}}function hM(r,l,p){tl.S(r,l,p);var y=oh;if(y&&r){var A=Ao(y).hoistableStyles,M=lh(r);l=l||"default";var G=A.get(M);if(!G){var Y={loading:0,preload:null};if(G=y.querySelector(xp(M)))Y.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":l},p),(p=Nr.get(M))&&fy(r,p);var rt=G=y.createElement("link");Vn(rt),Fi(rt,"link",r),rt._p=new Promise(function(gt,_t){rt.onload=gt,rt.onerror=_t}),rt.addEventListener("load",function(){Y.loading|=1}),rt.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,F0(G,l,y)}G={type:"stylesheet",instance:G,count:1,state:Y},A.set(M,G)}}}function fM(r,l){tl.X(r,l);var p=oh;if(p&&r){var y=Ao(p).hoistableScripts,A=ch(r),M=y.get(A);M||(M=p.querySelector(Sp(A)),M||(r=g({src:r,async:!0},l),(l=Nr.get(A))&&py(r,l),M=p.createElement("script"),Vn(M),Fi(M,"link",r),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},y.set(A,M))}}function pM(r,l){tl.M(r,l);var p=oh;if(p&&r){var y=Ao(p).hoistableScripts,A=ch(r),M=y.get(A);M||(M=p.querySelector(Sp(A)),M||(r=g({src:r,async:!0,type:"module"},l),(l=Nr.get(A))&&py(r,l),M=p.createElement("script"),Vn(M),Fi(M,"link",r),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},y.set(A,M))}}function fE(r,l,p,y){var A=(A=ot.current)?z0(A):null;if(!A)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(l=lh(p.href),p=Ao(A).hoistableStyles,y=p.get(l),y||(y={type:"style",instance:null,count:0,state:null},p.set(l,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){r=lh(p.href);var M=Ao(A).hoistableStyles,G=M.get(r);if(G||(A=A.ownerDocument||A,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(r,G),(M=A.querySelector(xp(r)))&&!M._p&&(G.instance=M,G.state.loading=5),Nr.has(r)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Nr.set(r,p),M||gM(A,r,p,G.state))),l&&y===null)throw Error(i(528,""));return G}if(l&&y!==null)throw Error(i(529,""));return null;case"script":return l=p.async,p=p.src,typeof p=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ch(p),p=Ao(A).hoistableScripts,y=p.get(l),y||(y={type:"script",instance:null,count:0,state:null},p.set(l,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function lh(r){return'href="'+ia(r)+'"'}function xp(r){return'link[rel="stylesheet"]['+r+"]"}function pE(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function gM(r,l,p,y){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?y.loading=1:(l=r.createElement("link"),y.preload=l,l.addEventListener("load",function(){return y.loading|=1}),l.addEventListener("error",function(){return y.loading|=2}),Fi(l,"link",p),Vn(l),r.head.appendChild(l))}function ch(r){return'[src="'+ia(r)+'"]'}function Sp(r){return"script[async]"+r}function gE(r,l,p){if(l.count++,l.instance===null)switch(l.type){case"style":var y=r.querySelector('style[data-href~="'+ia(p.href)+'"]');if(y)return l.instance=y,Vn(y),y;var A=g({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(r.ownerDocument||r).createElement("style"),Vn(y),Fi(y,"style",A),F0(y,p.precedence,r),l.instance=y;case"stylesheet":A=lh(p.href);var M=r.querySelector(xp(A));if(M)return l.state.loading|=4,l.instance=M,Vn(M),M;y=pE(p),(A=Nr.get(A))&&fy(y,A),M=(r.ownerDocument||r).createElement("link"),Vn(M);var G=M;return G._p=new Promise(function(Y,rt){G.onload=Y,G.onerror=rt}),Fi(M,"link",y),l.state.loading|=4,F0(M,p.precedence,r),l.instance=M;case"script":return M=ch(p.src),(A=r.querySelector(Sp(M)))?(l.instance=A,Vn(A),A):(y=p,(A=Nr.get(M))&&(y=g({},p),py(y,A)),r=r.ownerDocument||r,A=r.createElement("script"),Vn(A),Fi(A,"link",y),r.head.appendChild(A),l.instance=A);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(y=l.instance,l.state.loading|=4,F0(y,p.precedence,r));return l.instance}function F0(r,l,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=y.length?y[y.length-1]:null,M=A,G=0;G<y.length;G++){var Y=y[G];if(Y.dataset.precedence===l)M=Y;else if(M!==A)break}M?M.parentNode.insertBefore(r,M.nextSibling):(l=p.nodeType===9?p.head:p,l.insertBefore(r,l.firstChild))}function fy(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function py(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var I0=null;function mE(r,l,p){if(I0===null){var y=new Map,A=I0=new Map;A.set(p,y)}else A=I0,y=A.get(p),y||(y=new Map,A.set(p,y));if(y.has(r))return y;for(y.set(r,null),p=p.getElementsByTagName(r),A=0;A<p.length;A++){var M=p[A];if(!(M[Yr]||M[on]||r==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var G=M.getAttribute(l)||"";G=r+G;var Y=y.get(G);Y?Y.push(M):y.set(G,[M])}}return y}function vE(r,l,p){r=r.ownerDocument||r,r.head.insertBefore(p,l==="title"?r.querySelector("head > title"):null)}function mM(r,l,p){if(p===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return r=l.disabled,typeof l.precedence=="string"&&r==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function yE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var _p=null;function vM(){}function yM(r,l,p){if(_p===null)throw Error(i(475));var y=_p;if(l.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var A=lh(p.href),M=r.querySelector(xp(A));if(M){r=M._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(y.count++,y=H0.bind(y),r.then(y,y)),l.state.loading|=4,l.instance=M,Vn(M);return}M=r.ownerDocument||r,p=pE(p),(A=Nr.get(A))&&fy(p,A),M=M.createElement("link"),Vn(M);var G=M;G._p=new Promise(function(Y,rt){G.onload=Y,G.onerror=rt}),Fi(M,"link",p),l.instance=M}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(y.count++,l=H0.bind(y),r.addEventListener("load",l),r.addEventListener("error",l))}}function bM(){if(_p===null)throw Error(i(475));var r=_p;return r.stylesheets&&r.count===0&&gy(r,r.stylesheets),0<r.count?function(l){var p=setTimeout(function(){if(r.stylesheets&&gy(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(p)}}:null}function H0(){if(this.count--,this.count===0){if(this.stylesheets)gy(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var G0=null;function gy(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,G0=new Map,l.forEach(xM,r),G0=null,H0.call(r))}function xM(r,l){if(!(l.state.loading&4)){var p=G0.get(r);if(p)var y=p.get(null);else{p=new Map,G0.set(r,p);for(var A=r.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<A.length;M++){var G=A[M];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(p.set(G.dataset.precedence,G),y=G)}y&&p.set(null,y)}A=l.instance,G=A.getAttribute("data-precedence"),M=p.get(G)||y,M===y&&p.set(null,A),p.set(G,A),this.count++,y=H0.bind(this),A.addEventListener("load",y),A.addEventListener("error",y),M?M.parentNode.insertBefore(A,M.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(A,r.firstChild)),l.state.loading|=4}}var Ap={$$typeof:w,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function SM(r,l,p,y,A,M,G,Y){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=y,this.onUncaughtError=A,this.onCaughtError=M,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function bE(r,l,p,y,A,M,G,Y,rt,gt,_t,wt){return r=new SM(r,l,p,G,Y,rt,gt,wt),l=1,M===!0&&(l|=24),M=Vi(3,null,null,l),r.current=M,M.stateNode=r,l=zl(),l.refCount++,r.pooledCache=l,l.refCount++,M.memoizedState={element:y,isDehydrated:p,cache:l},Zc(M),r}function xE(r){return r?(r=ko,r):ko}function SE(r,l,p,y,A,M){A=xE(A),y.context===null?y.context=A:y.pendingContext=A,y=Sr(l),y.payload={element:p},M=M===void 0?null:M,M!==null&&(y.callback=M),p=Oi(r,y,l),p!==null&&(jn(p,r,l),Vo(p,r,l))}function _E(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var p=r.retryLane;r.retryLane=p!==0&&p<l?p:l}}function my(r,l){_E(r,l),(r=r.alternate)&&_E(r,l)}function AE(r){if(r.tag===13){var l=pr(r,67108864);l!==null&&jn(l,r,67108864),my(r,67108864)}}var j0=!0;function _M(r,l,p,y){var A=Q.T;Q.T=null;var M=k.p;try{k.p=2,vy(r,l,p,y)}finally{k.p=M,Q.T=A}}function AM(r,l,p,y){var A=Q.T;Q.T=null;var M=k.p;try{k.p=8,vy(r,l,p,y)}finally{k.p=M,Q.T=A}}function vy(r,l,p,y){if(j0){var A=yy(y);if(A===null)ay(r,l,y,U0,p),wE(r,y);else if(wM(A,r,l,p,y))y.stopPropagation();else if(wE(r,y),l&4&&-1<EM.indexOf(r)){for(;A!==null;){var M=cr(A);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var G=qt(M.pendingLanes);if(G!==0){var Y=M;for(Y.pendingLanes|=2,Y.entangledLanes|=2;G;){var rt=1<<31-Me(G);Y.entanglements[1]|=rt,G&=~rt}jt(M),(oe&6)===0&&(Zo=kt()+500,Je(0))}}break;case 13:Y=pr(M,2),Y!==null&&jn(Y,M,2),io(),my(M,2)}if(M=yy(y),M===null&&ay(r,l,y,U0,p),M===A)break;A=M}A!==null&&y.stopPropagation()}else ay(r,l,y,null,p)}}function yy(r){return r=Rs(r),by(r)}var U0=null;function by(r){if(U0=null,r=lr(r),r!==null){var l=s(r);if(l===null)r=null;else{var p=l.tag;if(p===13){if(r=o(l),r!==null)return r;r=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return U0=r,null}function EE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case rn:return 2;case sn:return 8;case vn:case $t:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var xy=!1,sc=null,oc=null,lc=null,Ep=new Map,wp=new Map,cc=[],EM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wE(r,l){switch(r){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":oc=null;break;case"mouseover":case"mouseout":lc=null;break;case"pointerover":case"pointerout":Ep.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":wp.delete(l.pointerId)}}function Cp(r,l,p,y,A,M){return r===null||r.nativeEvent!==M?(r={blockedOn:l,domEventName:p,eventSystemFlags:y,nativeEvent:M,targetContainers:[A]},l!==null&&(l=cr(l),l!==null&&AE(l)),r):(r.eventSystemFlags|=y,l=r.targetContainers,A!==null&&l.indexOf(A)===-1&&l.push(A),r)}function wM(r,l,p,y,A){switch(l){case"focusin":return sc=Cp(sc,r,l,p,y,A),!0;case"dragenter":return oc=Cp(oc,r,l,p,y,A),!0;case"mouseover":return lc=Cp(lc,r,l,p,y,A),!0;case"pointerover":var M=A.pointerId;return Ep.set(M,Cp(Ep.get(M)||null,r,l,p,y,A)),!0;case"gotpointercapture":return M=A.pointerId,wp.set(M,Cp(wp.get(M)||null,r,l,p,y,A)),!0}return!1}function CE(r){var l=lr(r.target);if(l!==null){var p=s(l);if(p!==null){if(l=p.tag,l===13){if(l=o(p),l!==null){r.blockedOn=l,yl(r.priority,function(){if(p.tag===13){var y=Pn();y=ml(y);var A=pr(p,y);A!==null&&jn(A,p,y),my(p,y)}});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){r.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}r.blockedOn=null}function q0(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var p=yy(r.nativeEvent);if(p===null){p=r.nativeEvent;var y=new p.constructor(p.type,p);ld=y,p.target.dispatchEvent(y),ld=null}else return l=cr(p),l!==null&&AE(l),r.blockedOn=p,!1;l.shift()}return!0}function TE(r,l,p){q0(r)&&p.delete(l)}function CM(){xy=!1,sc!==null&&q0(sc)&&(sc=null),oc!==null&&q0(oc)&&(oc=null),lc!==null&&q0(lc)&&(lc=null),Ep.forEach(TE),wp.forEach(TE)}function V0(r,l){r.blockedOn===l&&(r.blockedOn=null,xy||(xy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,CM)))}var Y0=null;function RE(r){Y0!==r&&(Y0=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Y0===r&&(Y0=null);for(var l=0;l<r.length;l+=3){var p=r[l],y=r[l+1],A=r[l+2];if(typeof y!="function"){if(by(y||p)===null)continue;break}var M=cr(p);M!==null&&(r.splice(l,3),l-=3,np(M,{pending:!0,data:A,method:p.method,action:y},y,A))}}))}function Tp(r){function l(rt){return V0(rt,r)}sc!==null&&V0(sc,r),oc!==null&&V0(oc,r),lc!==null&&V0(lc,r),Ep.forEach(l),wp.forEach(l);for(var p=0;p<cc.length;p++){var y=cc[p];y.blockedOn===r&&(y.blockedOn=null)}for(;0<cc.length&&(p=cc[0],p.blockedOn===null);)CE(p),p.blockedOn===null&&cc.shift();if(p=(r.ownerDocument||r).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var A=p[y],M=p[y+1],G=A[Ri]||null;if(typeof M=="function")G||RE(p);else if(G){var Y=null;if(M&&M.hasAttribute("formAction")){if(A=M,G=M[Ri]||null)Y=G.formAction;else if(by(A)!==null)continue}else Y=G.action;typeof Y=="function"?p[y+1]=Y:(p.splice(y,3),y-=3),RE(p)}}}function Sy(r){this._internalRoot=r}X0.prototype.render=Sy.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(i(409));var p=l.current,y=Pn();SE(p,y,r,l,null,null)},X0.prototype.unmount=Sy.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;SE(r.current,2,null,r,null,null),io(),l[qr]=null}};function X0(r){this._internalRoot=r}X0.prototype.unstable_scheduleHydration=function(r){if(r){var l=_o();r={blockedOn:null,target:r,priority:l};for(var p=0;p<cc.length&&l!==0&&l<cc[p].priority;p++);cc.splice(p,0,r),p===0&&CE(r)}};var ME=t.version;if(ME!=="19.1.0")throw Error(i(527,ME,"19.1.0"));k.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(l),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var TM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var K0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!K0.isDisabled&&K0.supportsFiber)try{ee=K0.inject(TM),Xt=K0}catch{}}return Mp.createRoot=function(r,l){if(!a(r))throw Error(i(299));var p=!1,y="",A=Ko,M=Qi,G=E0,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(A=l.onUncaughtError),l.onCaughtError!==void 0&&(M=l.onCaughtError),l.onRecoverableError!==void 0&&(G=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Y=l.unstable_transitionCallbacks)),l=bE(r,1,!1,null,null,p,y,A,M,G,Y,null),r[qr]=l.current,iy(r),new Sy(l)},Mp.hydrateRoot=function(r,l,p){if(!a(r))throw Error(i(299));var y=!1,A="",M=Ko,G=Qi,Y=E0,rt=null,gt=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onUncaughtError!==void 0&&(M=p.onUncaughtError),p.onCaughtError!==void 0&&(G=p.onCaughtError),p.onRecoverableError!==void 0&&(Y=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(rt=p.unstable_transitionCallbacks),p.formState!==void 0&&(gt=p.formState)),l=bE(r,1,!0,l,p??null,y,A,M,G,Y,rt,gt),l.context=xE(null),p=l.current,y=Pn(),y=ml(y),A=Sr(y),A.callback=null,Oi(p,A,y),p=y,l.current.lanes=p,Ti(l,p),jt(l),r[qr]=l.current,iy(r),new X0(l)},Mp.version="19.1.0",Mp}var jE;function BM(){if(jE)return wy.exports;jE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),wy.exports=kM(),wy.exports}var IT=BM();const zM=rr(IT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase()),UE=n=>{const t=IM(n);return t.charAt(0).toUpperCase()+t.slice(1)},HT=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim(),HM=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=X.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:a="",children:s,iconNode:o,...c},d)=>X.createElement("svg",{ref:d,...GM,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:HT("lucide",a),...!s&&!HM(c)&&{"aria-hidden":"true"},...c},[...o.map(([f,g])=>X.createElement(f,g)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(n,t)=>{const e=X.forwardRef(({className:i,...a},s)=>X.createElement(jM,{ref:s,iconNode:t,className:HT(`lucide-${FM(UE(n))}`,`lucide-${n}`,i),...a}));return e.displayName=UE(n),e};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],qM=ge("arrow-down-to-line",UM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],YM=ge("arrow-down",VM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],KM=ge("arrow-right",XM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]],$M=ge("arrow-up-to-line",WM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ZM=ge("arrow-up",QM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xS=ge("chevron-down",JM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],eD=ge("chevron-right",tD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],GT=ge("chevron-up",nD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],aD=ge("circle-plus",iD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sD=ge("circle",rD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],qE=ge("clipboard-paste",oD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],cD=ge("clipboard",lD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jT=ge("copy",uD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],gv=ge("download",dD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],r_=ge("droplet",hD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],UT=ge("eye-off",fD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qT=ge("eye",pD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],VE=ge("file-image",gD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YE=ge("file-text",mD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],yD=ge("grid-3x3",vD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],xD=ge("hand",bD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],s_=ge("image",SD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],VT=ge("info",_D);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ED=ge("layers",AD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],CD=ge("locate-fixed",wD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],RD=ge("lock-open",TD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],DD=ge("lock",MD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ND=ge("map-pin",OD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],PD=ge("mouse-pointer-click",LD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],YT=ge("paint-bucket",kD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],zD=ge("pen-tool",BD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],ID=ge("redo",FD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],XE=ge("refresh-cw",HD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jD=ge("save",GD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XT=ge("settings",UD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M22 2 2 22",key:"y4kqgn"}]],VD=ge("slash",qD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],XD=ge("square",YD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],o_=ge("trash-2",KD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],$D=ge("type",WD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],ZD=ge("undo-2",QD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],tO=ge("undo",JD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],l_=ge("x",eO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],iO=ge("zoom-in",nO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],rO=ge("zoom-out",aO),KE=n=>{let t;const e=new Set,i=(f,g)=>{const m=typeof f=="function"?f(t):f;if(!Object.is(m,t)){const v=t;t=g??(typeof m!="object"||m===null)?m:Object.assign({},t,m),e.forEach(x=>x(t,v))}},a=()=>t,c={setState:i,getState:a,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=n(i,a,c);return c},sO=n=>n?KE(n):KE,oO=n=>n;function lO(n,t=oO){const e=q.useSyncExternalStore(n.subscribe,()=>t(n.getState()),()=>t(n.getInitialState()));return q.useDebugValue(e),e}const WE=n=>{const t=sO(n),e=i=>lO(t,i);return Object.assign(e,t),e},cO=n=>n?WE(n):WE,Ii=[];for(let n=0;n<256;++n)Ii.push((n+256).toString(16).slice(1));function uO(n,t=0){return(Ii[n[t+0]]+Ii[n[t+1]]+Ii[n[t+2]]+Ii[n[t+3]]+"-"+Ii[n[t+4]]+Ii[n[t+5]]+"-"+Ii[n[t+6]]+Ii[n[t+7]]+"-"+Ii[n[t+8]]+Ii[n[t+9]]+"-"+Ii[n[t+10]]+Ii[n[t+11]]+Ii[n[t+12]]+Ii[n[t+13]]+Ii[n[t+14]]+Ii[n[t+15]]).toLowerCase()}let My;const dO=new Uint8Array(16);function hO(){if(!My){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");My=crypto.getRandomValues.bind(crypto)}return My(dO)}const fO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$E={randomUUID:fO};function pO(n,t,e){if($E.randomUUID&&!n)return $E.randomUUID();n=n||{};const i=n.random??n.rng?.()??hO();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,uO(i)}function mv(){return pO()}const gO=20,mO="black",vO="transparent",yO="#ffffff",QE=mv();function bO(n){return n.charAt(0).toUpperCase()+n.slice(1)}const It=cO((n,t)=>({tool:"select",selectedShapeId:null,selectedShapeIds:[],zoom:1,pan:{x:0,y:0},gridEnabled:!0,strokeColor:mO,fillColor:vO,backgroundColor:yO,backgroundImage:null,layers:[{id:QE,name:"Base",visible:!0,locked:!1,opacity:1}],activeLayerId:QE,shapes:[],clipboardShape:null,history:[],future:[],canvasWidth:1200,canvasHeight:900,saveToHistory:()=>{const{shapes:e,layers:i,backgroundColor:a,history:s}=t();n({history:[...s,{shapes:JSON.parse(JSON.stringify(e)),layers:JSON.parse(JSON.stringify(i)),backgroundColor:a}],future:[]})},undo:()=>{const{history:e,future:i,shapes:a,layers:s,backgroundColor:o}=t();if(e.length===0)return;const c=e[e.length-1];n({shapes:c.shapes,layers:c.layers,backgroundColor:c.backgroundColor,history:e.slice(0,e.length-1),future:[...i,{shapes:JSON.parse(JSON.stringify(a)),layers:JSON.parse(JSON.stringify(s)),backgroundColor:o}]})},redo:()=>{const{history:e,future:i,shapes:a,layers:s,backgroundColor:o}=t();if(i.length===0)return;const c=i[i.length-1];n({shapes:c.shapes,layers:c.layers,backgroundColor:c.backgroundColor,history:[...e,{shapes:JSON.parse(JSON.stringify(a)),layers:JSON.parse(JSON.stringify(s)),backgroundColor:o}],future:i.slice(0,i.length-1)})},setTool:e=>n({tool:e}),setSelectedShape:e=>{t().selectedShapeId!==e&&n({selectedShapeId:e,selectedShapeIds:e?[e]:[]})},addToSelection:e=>{const i=t().selectedShapeIds;if(!i.includes(e)){const a=[...i,e];n({selectedShapeIds:a,selectedShapeId:a.length===1?a[0]:null})}},removeFromSelection:e=>{const a=t().selectedShapeIds.filter(s=>s!==e);n({selectedShapeIds:a,selectedShapeId:a.length===1?a[0]:null})},toggleSelection:e=>{t().selectedShapeIds.includes(e)?t().removeFromSelection(e):t().addToSelection(e)},clearSelection:()=>{n({selectedShapeId:null,selectedShapeIds:[]})},setMultipleSelection:e=>{n({selectedShapeIds:e,selectedShapeId:e.length===1?e[0]:null})},setZoom:e=>n({zoom:e}),setPan:e=>n({pan:e}),zoomIn:()=>n(e=>({zoom:e.zoom*1.2})),zoomOut:()=>n(e=>({zoom:e.zoom/1.2})),resetView:()=>n({zoom:1,pan:{x:0,y:0}}),toggleGrid:()=>n(e=>({gridEnabled:!e.gridEnabled})),setStrokeColor:e=>n({strokeColor:e}),setFillColor:e=>n({fillColor:e}),setBackgroundColor:e=>{t().saveToHistory(),n({backgroundColor:e})},setBackgroundImage:e=>n({backgroundImage:e}),clearBackgroundImage:()=>n({backgroundImage:null}),setCanvasSize:({width:e,height:i})=>n({canvasWidth:e,canvasHeight:i}),addLayer:e=>{t().saveToHistory();const i=mv();n(a=>({layers:[...a.layers,{id:i,name:e,visible:!0,locked:!1,opacity:1}],activeLayerId:a.activeLayerId||i}))},toggleLayerVisibility:e=>{t().saveToHistory(),n(i=>({layers:i.layers.map(a=>a.id===e?{...a,visible:!a.visible}:a)}))},toggleLayerLock:e=>{t().saveToHistory(),n(i=>({layers:i.layers.map(a=>a.id===e?{...a,locked:!a.locked}:a)}))},setActiveLayer:e=>n({activeLayerId:e}),removeLayer:e=>{t().saveToHistory(),n(i=>({layers:i.layers.filter(a=>a.id!==e),shapes:i.shapes.filter(a=>a.layerId!==e),activeLayerId:i.activeLayerId===e?i.layers[0]?.id||null:i.activeLayerId}))},moveLayerUp:e=>{t().saveToHistory(),n(i=>{const a=i.layers.findIndex(o=>o.id===e);if(a<=0)return{};const s=[...i.layers];return[s[a-1],s[a]]=[s[a],s[a-1]],{layers:s}})},moveLayerDown:e=>{t().saveToHistory(),n(i=>{const a=i.layers.findIndex(o=>o.id===e);if(a===-1||a===i.layers.length-1)return{};const s=[...i.layers];return[s[a],s[a+1]]=[s[a+1],s[a]],{layers:s}})},setLayerOpacity:(e,i)=>{t().saveToHistory(),n(a=>({layers:a.layers.map(s=>s.id===e?{...s,opacity:i}:s)}))},renameLayer:(e,i)=>n(a=>({layers:a.layers.map(s=>s.id===e?{...s,name:i}:s)})),addShape:e=>{t().saveToHistory();const i=mv(),a=t(),s=e.type||"Shape",o=a.shapes.filter(d=>d.type===s),c=`${bO(s)} ${o.length+1}`;return n(d=>({shapes:[...d.shapes,{id:i,...e,name:e.name||c}]})),i},updateShape:(e,i)=>{n(a=>({shapes:a.shapes.map(s=>s.id===e?{...s,props:{...s.props,...i}}:s)}))},removeShape:e=>{t().saveToHistory(),n(i=>({shapes:i.shapes.filter(a=>a.id!==e),selectedShapeIds:i.selectedShapeIds.filter(a=>a!==e),selectedShapeId:i.selectedShapeId===e?null:i.selectedShapeId}))},removeSelectedShapes:()=>{const{selectedShapeIds:e}=t();e.length>0&&(t().saveToHistory(),n(i=>({shapes:i.shapes.filter(a=>!e.includes(a.id)),selectedShapeIds:[],selectedShapeId:null})))},bringShapeToFront:e=>{t().saveToHistory(),n(i=>{const a=[...i.shapes],s=a.findIndex(c=>c.id===e);if(s===-1)return{};const[o]=a.splice(s,1);return a.push(o),{shapes:a}})},sendShapeToBack:e=>{t().saveToHistory(),n(i=>{const a=[...i.shapes],s=a.findIndex(c=>c.id===e);if(s===-1)return{};const[o]=a.splice(s,1);return a.unshift(o),{shapes:a}})},bringShapeForward:e=>{t().saveToHistory(),n(i=>{const a=[...i.shapes],s=a.findIndex(o=>o.id===e);return s<0||s===a.length-1?{}:([a[s],a[s+1]]=[a[s+1],a[s]],{shapes:a})})},sendShapeBackward:e=>{t().saveToHistory(),n(i=>{const a=[...i.shapes],s=a.findIndex(o=>o.id===e);return s<=0?{}:([a[s],a[s-1]]=[a[s-1],a[s]],{shapes:a})})},copyShape:e=>{const i=t().shapes.find(a=>a.id===e);i&&n({clipboardShape:JSON.parse(JSON.stringify({...i,id:void 0}))})},pasteShape:()=>{const e=t().clipboardShape;if(e){let i={...e.props};if(typeof i.x=="number"&&(i.x+=30),typeof i.y=="number"&&(i.y+=30),Array.isArray(i.points))for(let a=0;a<i.points.length;a+=2)i.points[a]+=30,i.points[a+1]+=30;t().addShape({...e,props:i})}},replaceShape:e=>{const{clipboardShape:i,shapes:a,addShape:s,removeShape:o}=t();if(!i)return;const c=a.find(g=>g.id===e);if(!c)return;let d={...i.props};delete d.id,d.x=c.props.x,d.y=c.props.y,"width"in c.props&&(d.width=c.props.width),"height"in c.props&&(d.height=c.props.height),"radius"in c.props&&(d.radius=c.props.radius),"points"in c.props&&(d.points=[...c.props.points]),"rotation"in c.props&&(d.rotation=c.props.rotation),"scaleX"in c.props&&(d.scaleX=c.props.scaleX),"scaleY"in c.props&&(d.scaleY=c.props.scaleY);const f=c.name||i.name;"text"in c.props&&(d.text=c.props.text),o(e),s({id:mv(),...i,layerId:c.layerId,name:f,props:d})},toggleShapeVisibility:e=>{t().saveToHistory(),n(i=>({shapes:i.shapes.map(a=>a.id===e?{...a,visible:!a.visible}:a)}))},renameShape:(e,i)=>n(a=>({shapes:a.shapes.map(s=>s.id===e?{...s,name:i}:s)})),layersPanelVisible:!1,showLayersPanel:()=>n({layersPanelVisible:!0}),hideLayersPanel:()=>n({layersPanelVisible:!1}),toggleLayersPanel:()=>n(e=>({layersPanelVisible:!e.layersPanelVisible}))}));var im=FT();const xO=rr(im);var Pa={},uh={},Dy,ZE;function KT(){if(ZE)return Dy;ZE=1;var n=typeof Fh=="object"&&Fh&&Fh.Object===Object&&Fh;return Dy=n,Dy}var Oy,JE;function xo(){if(JE)return Oy;JE=1;var n=KT(),t=typeof self=="object"&&self&&self.Object===Object&&self,e=n||t||Function("return this")();return Oy=e,Oy}var Ny,t3;function am(){if(t3)return Ny;t3=1;var n=xo(),t=n.Symbol;return Ny=t,Ny}var Ly,e3;function SO(){if(e3)return Ly;e3=1;var n=am(),t=Object.prototype,e=t.hasOwnProperty,i=t.toString,a=n?n.toStringTag:void 0;function s(o){var c=e.call(o,a),d=o[a];try{o[a]=void 0;var f=!0}catch{}var g=i.call(o);return f&&(c?o[a]=d:delete o[a]),g}return Ly=s,Ly}var Py,n3;function _O(){if(n3)return Py;n3=1;var n=Object.prototype,t=n.toString;function e(i){return t.call(i)}return Py=e,Py}var ky,i3;function Uu(){if(i3)return ky;i3=1;var n=am(),t=SO(),e=_O(),i="[object Null]",a="[object Undefined]",s=n?n.toStringTag:void 0;function o(c){return c==null?c===void 0?a:i:s&&s in Object(c)?t(c):e(c)}return ky=o,ky}var By,a3;function As(){if(a3)return By;a3=1;var n=Array.isArray;return By=n,By}var zy,r3;function dl(){if(r3)return zy;r3=1;function n(t){return t!=null&&typeof t=="object"}return zy=n,zy}var Fy,s3;function AO(){if(s3)return Fy;s3=1;var n=Uu(),t=As(),e=dl(),i="[object String]";function a(s){return typeof s=="string"||!t(s)&&e(s)&&n(s)==i}return Fy=a,Fy}var Iy,o3;function EO(){if(o3)return Iy;o3=1;function n(t){return function(e,i,a){for(var s=-1,o=Object(e),c=a(e),d=c.length;d--;){var f=c[t?d:++s];if(i(o[f],f,o)===!1)break}return e}}return Iy=n,Iy}var Hy,l3;function wO(){if(l3)return Hy;l3=1;var n=EO(),t=n();return Hy=t,Hy}var Gy,c3;function CO(){if(c3)return Gy;c3=1;function n(t,e){for(var i=-1,a=Array(t);++i<t;)a[i]=e(i);return a}return Gy=n,Gy}var jy,u3;function TO(){if(u3)return jy;u3=1;var n=Uu(),t=dl(),e="[object Arguments]";function i(a){return t(a)&&n(a)==e}return jy=i,jy}var Uy,d3;function WT(){if(d3)return Uy;d3=1;var n=TO(),t=dl(),e=Object.prototype,i=e.hasOwnProperty,a=e.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(o){return t(o)&&i.call(o,"callee")&&!a.call(o,"callee")};return Uy=s,Uy}var Tg={exports:{}},qy,h3;function RO(){if(h3)return qy;h3=1;function n(){return!1}return qy=n,qy}Tg.exports;var f3;function c_(){return f3||(f3=1,function(n,t){var e=xo(),i=RO(),a=t&&!t.nodeType&&t,s=a&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===a,c=o?e.Buffer:void 0,d=c?c.isBuffer:void 0,f=d||i;n.exports=f}(Tg,Tg.exports)),Tg.exports}var Vy,p3;function $T(){if(p3)return Vy;p3=1;var n=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function e(i,a){var s=typeof i;return a=a??n,!!a&&(s=="number"||s!="symbol"&&t.test(i))&&i>-1&&i%1==0&&i<a}return Vy=e,Vy}var Yy,g3;function u_(){if(g3)return Yy;g3=1;var n=9007199254740991;function t(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=n}return Yy=t,Yy}var Xy,m3;function MO(){if(m3)return Xy;m3=1;var n=Uu(),t=u_(),e=dl(),i="[object Arguments]",a="[object Array]",s="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",f="[object Map]",g="[object Number]",m="[object Object]",v="[object RegExp]",x="[object Set]",S="[object String]",_="[object WeakMap]",C="[object ArrayBuffer]",D="[object DataView]",T="[object Float32Array]",w="[object Float64Array]",R="[object Int8Array]",O="[object Int16Array]",L="[object Int32Array]",I="[object Uint8Array]",B="[object Uint8ClampedArray]",F="[object Uint16Array]",z="[object Uint32Array]",j={};j[T]=j[w]=j[R]=j[O]=j[L]=j[I]=j[B]=j[F]=j[z]=!0,j[i]=j[a]=j[C]=j[s]=j[D]=j[o]=j[c]=j[d]=j[f]=j[g]=j[m]=j[v]=j[x]=j[S]=j[_]=!1;function Z(nt){return e(nt)&&t(nt.length)&&!!j[n(nt)]}return Xy=Z,Xy}var Ky,v3;function d_(){if(v3)return Ky;v3=1;function n(t){return function(e){return t(e)}}return Ky=n,Ky}var Rg={exports:{}};Rg.exports;var y3;function h_(){return y3||(y3=1,function(n,t){var e=KT(),i=t&&!t.nodeType&&t,a=i&&!0&&n&&!n.nodeType&&n,s=a&&a.exports===i,o=s&&e.process,c=function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();n.exports=c}(Rg,Rg.exports)),Rg.exports}var Wy,b3;function QT(){if(b3)return Wy;b3=1;var n=MO(),t=d_(),e=h_(),i=e&&e.isTypedArray,a=i?t(i):n;return Wy=a,Wy}var $y,x3;function ZT(){if(x3)return $y;x3=1;var n=CO(),t=WT(),e=As(),i=c_(),a=$T(),s=QT(),o=Object.prototype,c=o.hasOwnProperty;function d(f,g){var m=e(f),v=!m&&t(f),x=!m&&!v&&i(f),S=!m&&!v&&!x&&s(f),_=m||v||x||S,C=_?n(f.length,String):[],D=C.length;for(var T in f)(g||c.call(f,T))&&!(_&&(T=="length"||x&&(T=="offset"||T=="parent")||S&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||a(T,D)))&&C.push(T);return C}return $y=d,$y}var Qy,S3;function f_(){if(S3)return Qy;S3=1;var n=Object.prototype;function t(e){var i=e&&e.constructor,a=typeof i=="function"&&i.prototype||n;return e===a}return Qy=t,Qy}var Zy,_3;function JT(){if(_3)return Zy;_3=1;function n(t,e){return function(i){return t(e(i))}}return Zy=n,Zy}var Jy,A3;function DO(){if(A3)return Jy;A3=1;var n=JT(),t=n(Object.keys,Object);return Jy=t,Jy}var tb,E3;function OO(){if(E3)return tb;E3=1;var n=f_(),t=DO(),e=Object.prototype,i=e.hasOwnProperty;function a(s){if(!n(s))return t(s);var o=[];for(var c in Object(s))i.call(s,c)&&c!="constructor"&&o.push(c);return o}return tb=a,tb}var eb,w3;function Wh(){if(w3)return eb;w3=1;function n(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}return eb=n,eb}var nb,C3;function t8(){if(C3)return nb;C3=1;var n=Uu(),t=Wh(),e="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function o(c){if(!t(c))return!1;var d=n(c);return d==i||d==a||d==e||d==s}return nb=o,nb}var ib,T3;function Qv(){if(T3)return ib;T3=1;var n=t8(),t=u_();function e(i){return i!=null&&t(i.length)&&!n(i)}return ib=e,ib}var ab,R3;function rm(){if(R3)return ab;R3=1;var n=ZT(),t=OO(),e=Qv();function i(a){return e(a)?n(a):t(a)}return ab=i,ab}var rb,M3;function e8(){if(M3)return rb;M3=1;var n=wO(),t=rm();function e(i,a){return i&&n(i,a,t)}return rb=e,rb}var sb,D3;function n8(){if(D3)return sb;D3=1;function n(t){return t}return sb=n,sb}var ob,O3;function NO(){if(O3)return ob;O3=1;var n=n8();function t(e){return typeof e=="function"?e:n}return ob=t,ob}var lb,N3;function p_(){if(N3)return lb;N3=1;var n=e8(),t=NO();function e(i,a){return i&&n(i,t(a))}return lb=e,lb}var cb,L3;function g_(){if(L3)return cb;L3=1;var n=JT(),t=n(Object.getPrototypeOf,Object);return cb=t,cb}var ub,P3;function LO(){if(P3)return ub;P3=1;var n=Uu(),t=g_(),e=dl(),i="[object Object]",a=Function.prototype,s=Object.prototype,o=a.toString,c=s.hasOwnProperty,d=o.call(Object);function f(g){if(!e(g)||n(g)!=i)return!1;var m=t(g);if(m===null)return!0;var v=c.call(m,"constructor")&&m.constructor;return typeof v=="function"&&v instanceof v&&o.call(v)==d}return ub=f,ub}var db,k3;function i8(){if(k3)return db;k3=1;function n(t,e){for(var i=-1,a=t==null?0:t.length,s=Array(a);++i<a;)s[i]=e(t[i],i,t);return s}return db=n,db}var hb,B3;function PO(){if(B3)return hb;B3=1;function n(){this.__data__=[],this.size=0}return hb=n,hb}var fb,z3;function m_(){if(z3)return fb;z3=1;function n(t,e){return t===e||t!==t&&e!==e}return fb=n,fb}var pb,F3;function Zv(){if(F3)return pb;F3=1;var n=m_();function t(e,i){for(var a=e.length;a--;)if(n(e[a][0],i))return a;return-1}return pb=t,pb}var gb,I3;function kO(){if(I3)return gb;I3=1;var n=Zv(),t=Array.prototype,e=t.splice;function i(a){var s=this.__data__,o=n(s,a);if(o<0)return!1;var c=s.length-1;return o==c?s.pop():e.call(s,o,1),--this.size,!0}return gb=i,gb}var mb,H3;function BO(){if(H3)return mb;H3=1;var n=Zv();function t(e){var i=this.__data__,a=n(i,e);return a<0?void 0:i[a][1]}return mb=t,mb}var vb,G3;function zO(){if(G3)return vb;G3=1;var n=Zv();function t(e){return n(this.__data__,e)>-1}return vb=t,vb}var yb,j3;function FO(){if(j3)return yb;j3=1;var n=Zv();function t(e,i){var a=this.__data__,s=n(a,e);return s<0?(++this.size,a.push([e,i])):a[s][1]=i,this}return yb=t,yb}var bb,U3;function Jv(){if(U3)return bb;U3=1;var n=PO(),t=kO(),e=BO(),i=zO(),a=FO();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var f=o[c];this.set(f[0],f[1])}}return s.prototype.clear=n,s.prototype.delete=t,s.prototype.get=e,s.prototype.has=i,s.prototype.set=a,bb=s,bb}var xb,q3;function IO(){if(q3)return xb;q3=1;var n=Jv();function t(){this.__data__=new n,this.size=0}return xb=t,xb}var Sb,V3;function HO(){if(V3)return Sb;V3=1;function n(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}return Sb=n,Sb}var _b,Y3;function GO(){if(Y3)return _b;Y3=1;function n(t){return this.__data__.get(t)}return _b=n,_b}var Ab,X3;function jO(){if(X3)return Ab;X3=1;function n(t){return this.__data__.has(t)}return Ab=n,Ab}var Eb,K3;function UO(){if(K3)return Eb;K3=1;var n=xo(),t=n["__core-js_shared__"];return Eb=t,Eb}var wb,W3;function qO(){if(W3)return wb;W3=1;var n=UO(),t=function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function e(i){return!!t&&t in i}return wb=e,wb}var Cb,$3;function a8(){if($3)return Cb;$3=1;var n=Function.prototype,t=n.toString;function e(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return Cb=e,Cb}var Tb,Q3;function VO(){if(Q3)return Tb;Q3=1;var n=t8(),t=qO(),e=Wh(),i=a8(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,f=c.hasOwnProperty,g=RegExp("^"+d.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(v){if(!e(v)||t(v))return!1;var x=n(v)?g:s;return x.test(i(v))}return Tb=m,Tb}var Rb,Z3;function YO(){if(Z3)return Rb;Z3=1;function n(t,e){return t?.[e]}return Rb=n,Rb}var Mb,J3;function qu(){if(J3)return Mb;J3=1;var n=VO(),t=YO();function e(i,a){var s=t(i,a);return n(s)?s:void 0}return Mb=e,Mb}var Db,tw;function v_(){if(tw)return Db;tw=1;var n=qu(),t=xo(),e=n(t,"Map");return Db=e,Db}var Ob,ew;function t1(){if(ew)return Ob;ew=1;var n=qu(),t=n(Object,"create");return Ob=t,Ob}var Nb,nw;function XO(){if(nw)return Nb;nw=1;var n=t1();function t(){this.__data__=n?n(null):{},this.size=0}return Nb=t,Nb}var Lb,iw;function KO(){if(iw)return Lb;iw=1;function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}return Lb=n,Lb}var Pb,aw;function WO(){if(aw)return Pb;aw=1;var n=t1(),t="__lodash_hash_undefined__",e=Object.prototype,i=e.hasOwnProperty;function a(s){var o=this.__data__;if(n){var c=o[s];return c===t?void 0:c}return i.call(o,s)?o[s]:void 0}return Pb=a,Pb}var kb,rw;function $O(){if(rw)return kb;rw=1;var n=t1(),t=Object.prototype,e=t.hasOwnProperty;function i(a){var s=this.__data__;return n?s[a]!==void 0:e.call(s,a)}return kb=i,kb}var Bb,sw;function QO(){if(sw)return Bb;sw=1;var n=t1(),t="__lodash_hash_undefined__";function e(i,a){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=n&&a===void 0?t:a,this}return Bb=e,Bb}var zb,ow;function ZO(){if(ow)return zb;ow=1;var n=XO(),t=KO(),e=WO(),i=$O(),a=QO();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var f=o[c];this.set(f[0],f[1])}}return s.prototype.clear=n,s.prototype.delete=t,s.prototype.get=e,s.prototype.has=i,s.prototype.set=a,zb=s,zb}var Fb,lw;function JO(){if(lw)return Fb;lw=1;var n=ZO(),t=Jv(),e=v_();function i(){this.size=0,this.__data__={hash:new n,map:new(e||t),string:new n}}return Fb=i,Fb}var Ib,cw;function tN(){if(cw)return Ib;cw=1;function n(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}return Ib=n,Ib}var Hb,uw;function e1(){if(uw)return Hb;uw=1;var n=tN();function t(e,i){var a=e.__data__;return n(i)?a[typeof i=="string"?"string":"hash"]:a.map}return Hb=t,Hb}var Gb,dw;function eN(){if(dw)return Gb;dw=1;var n=e1();function t(e){var i=n(this,e).delete(e);return this.size-=i?1:0,i}return Gb=t,Gb}var jb,hw;function nN(){if(hw)return jb;hw=1;var n=e1();function t(e){return n(this,e).get(e)}return jb=t,jb}var Ub,fw;function iN(){if(fw)return Ub;fw=1;var n=e1();function t(e){return n(this,e).has(e)}return Ub=t,Ub}var qb,pw;function aN(){if(pw)return qb;pw=1;var n=e1();function t(e,i){var a=n(this,e),s=a.size;return a.set(e,i),this.size+=a.size==s?0:1,this}return qb=t,qb}var Vb,gw;function y_(){if(gw)return Vb;gw=1;var n=JO(),t=eN(),e=nN(),i=iN(),a=aN();function s(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var f=o[c];this.set(f[0],f[1])}}return s.prototype.clear=n,s.prototype.delete=t,s.prototype.get=e,s.prototype.has=i,s.prototype.set=a,Vb=s,Vb}var Yb,mw;function rN(){if(mw)return Yb;mw=1;var n=Jv(),t=v_(),e=y_(),i=200;function a(s,o){var c=this.__data__;if(c instanceof n){var d=c.__data__;if(!t||d.length<i-1)return d.push([s,o]),this.size=++c.size,this;c=this.__data__=new e(d)}return c.set(s,o),this.size=c.size,this}return Yb=a,Yb}var Xb,vw;function b_(){if(vw)return Xb;vw=1;var n=Jv(),t=IO(),e=HO(),i=GO(),a=jO(),s=rN();function o(c){var d=this.__data__=new n(c);this.size=d.size}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=i,o.prototype.has=a,o.prototype.set=s,Xb=o,Xb}var Kb,yw;function sN(){if(yw)return Kb;yw=1;var n="__lodash_hash_undefined__";function t(e){return this.__data__.set(e,n),this}return Kb=t,Kb}var Wb,bw;function oN(){if(bw)return Wb;bw=1;function n(t){return this.__data__.has(t)}return Wb=n,Wb}var $b,xw;function lN(){if(xw)return $b;xw=1;var n=y_(),t=sN(),e=oN();function i(a){var s=-1,o=a==null?0:a.length;for(this.__data__=new n;++s<o;)this.add(a[s])}return i.prototype.add=i.prototype.push=t,i.prototype.has=e,$b=i,$b}var Qb,Sw;function cN(){if(Sw)return Qb;Sw=1;function n(t,e){for(var i=-1,a=t==null?0:t.length;++i<a;)if(e(t[i],i,t))return!0;return!1}return Qb=n,Qb}var Zb,_w;function uN(){if(_w)return Zb;_w=1;function n(t,e){return t.has(e)}return Zb=n,Zb}var Jb,Aw;function r8(){if(Aw)return Jb;Aw=1;var n=lN(),t=cN(),e=uN(),i=1,a=2;function s(o,c,d,f,g,m){var v=d&i,x=o.length,S=c.length;if(x!=S&&!(v&&S>x))return!1;var _=m.get(o),C=m.get(c);if(_&&C)return _==c&&C==o;var D=-1,T=!0,w=d&a?new n:void 0;for(m.set(o,c),m.set(c,o);++D<x;){var R=o[D],O=c[D];if(f)var L=v?f(O,R,D,c,o,m):f(R,O,D,o,c,m);if(L!==void 0){if(L)continue;T=!1;break}if(w){if(!t(c,function(I,B){if(!e(w,B)&&(R===I||g(R,I,d,f,m)))return w.push(B)})){T=!1;break}}else if(!(R===O||g(R,O,d,f,m))){T=!1;break}}return m.delete(o),m.delete(c),T}return Jb=s,Jb}var t2,Ew;function s8(){if(Ew)return t2;Ew=1;var n=xo(),t=n.Uint8Array;return t2=t,t2}var e2,ww;function dN(){if(ww)return e2;ww=1;function n(t){var e=-1,i=Array(t.size);return t.forEach(function(a,s){i[++e]=[s,a]}),i}return e2=n,e2}var n2,Cw;function hN(){if(Cw)return n2;Cw=1;function n(t){var e=-1,i=Array(t.size);return t.forEach(function(a){i[++e]=a}),i}return n2=n,n2}var i2,Tw;function fN(){if(Tw)return i2;Tw=1;var n=am(),t=s8(),e=m_(),i=r8(),a=dN(),s=hN(),o=1,c=2,d="[object Boolean]",f="[object Date]",g="[object Error]",m="[object Map]",v="[object Number]",x="[object RegExp]",S="[object Set]",_="[object String]",C="[object Symbol]",D="[object ArrayBuffer]",T="[object DataView]",w=n?n.prototype:void 0,R=w?w.valueOf:void 0;function O(L,I,B,F,z,j,Z){switch(B){case T:if(L.byteLength!=I.byteLength||L.byteOffset!=I.byteOffset)return!1;L=L.buffer,I=I.buffer;case D:return!(L.byteLength!=I.byteLength||!j(new t(L),new t(I)));case d:case f:case v:return e(+L,+I);case g:return L.name==I.name&&L.message==I.message;case x:case _:return L==I+"";case m:var nt=a;case S:var it=F&o;if(nt||(nt=s),L.size!=I.size&&!it)return!1;var et=Z.get(L);if(et)return et==I;F|=c,Z.set(L,I);var Q=i(nt(L),nt(I),F,z,j,Z);return Z.delete(L),Q;case C:if(R)return R.call(L)==R.call(I)}return!1}return i2=O,i2}var a2,Rw;function o8(){if(Rw)return a2;Rw=1;function n(t,e){for(var i=-1,a=e.length,s=t.length;++i<a;)t[s+i]=e[i];return t}return a2=n,a2}var r2,Mw;function l8(){if(Mw)return r2;Mw=1;var n=o8(),t=As();function e(i,a,s){var o=a(i);return t(i)?o:n(o,s(i))}return r2=e,r2}var s2,Dw;function pN(){if(Dw)return s2;Dw=1;function n(t,e){for(var i=-1,a=t==null?0:t.length,s=0,o=[];++i<a;){var c=t[i];e(c,i,t)&&(o[s++]=c)}return o}return s2=n,s2}var o2,Ow;function c8(){if(Ow)return o2;Ow=1;function n(){return[]}return o2=n,o2}var l2,Nw;function x_(){if(Nw)return l2;Nw=1;var n=pN(),t=c8(),e=Object.prototype,i=e.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(o){return o==null?[]:(o=Object(o),n(a(o),function(c){return i.call(o,c)}))}:t;return l2=s,l2}var c2,Lw;function u8(){if(Lw)return c2;Lw=1;var n=l8(),t=x_(),e=rm();function i(a){return n(a,e,t)}return c2=i,c2}var u2,Pw;function gN(){if(Pw)return u2;Pw=1;var n=u8(),t=1,e=Object.prototype,i=e.hasOwnProperty;function a(s,o,c,d,f,g){var m=c&t,v=n(s),x=v.length,S=n(o),_=S.length;if(x!=_&&!m)return!1;for(var C=x;C--;){var D=v[C];if(!(m?D in o:i.call(o,D)))return!1}var T=g.get(s),w=g.get(o);if(T&&w)return T==o&&w==s;var R=!0;g.set(s,o),g.set(o,s);for(var O=m;++C<x;){D=v[C];var L=s[D],I=o[D];if(d)var B=m?d(I,L,D,o,s,g):d(L,I,D,s,o,g);if(!(B===void 0?L===I||f(L,I,c,d,g):B)){R=!1;break}O||(O=D=="constructor")}if(R&&!O){var F=s.constructor,z=o.constructor;F!=z&&"constructor"in s&&"constructor"in o&&!(typeof F=="function"&&F instanceof F&&typeof z=="function"&&z instanceof z)&&(R=!1)}return g.delete(s),g.delete(o),R}return u2=a,u2}var d2,kw;function mN(){if(kw)return d2;kw=1;var n=qu(),t=xo(),e=n(t,"DataView");return d2=e,d2}var h2,Bw;function vN(){if(Bw)return h2;Bw=1;var n=qu(),t=xo(),e=n(t,"Promise");return h2=e,h2}var f2,zw;function yN(){if(zw)return f2;zw=1;var n=qu(),t=xo(),e=n(t,"Set");return f2=e,f2}var p2,Fw;function bN(){if(Fw)return p2;Fw=1;var n=qu(),t=xo(),e=n(t,"WeakMap");return p2=e,p2}var g2,Iw;function n1(){if(Iw)return g2;Iw=1;var n=mN(),t=v_(),e=vN(),i=yN(),a=bN(),s=Uu(),o=a8(),c="[object Map]",d="[object Object]",f="[object Promise]",g="[object Set]",m="[object WeakMap]",v="[object DataView]",x=o(n),S=o(t),_=o(e),C=o(i),D=o(a),T=s;return(n&&T(new n(new ArrayBuffer(1)))!=v||t&&T(new t)!=c||e&&T(e.resolve())!=f||i&&T(new i)!=g||a&&T(new a)!=m)&&(T=function(w){var R=s(w),O=R==d?w.constructor:void 0,L=O?o(O):"";if(L)switch(L){case x:return v;case S:return c;case _:return f;case C:return g;case D:return m}return R}),g2=T,g2}var m2,Hw;function xN(){if(Hw)return m2;Hw=1;var n=b_(),t=r8(),e=fN(),i=gN(),a=n1(),s=As(),o=c_(),c=QT(),d=1,f="[object Arguments]",g="[object Array]",m="[object Object]",v=Object.prototype,x=v.hasOwnProperty;function S(_,C,D,T,w,R){var O=s(_),L=s(C),I=O?g:a(_),B=L?g:a(C);I=I==f?m:I,B=B==f?m:B;var F=I==m,z=B==m,j=I==B;if(j&&o(_)){if(!o(C))return!1;O=!0,F=!1}if(j&&!F)return R||(R=new n),O||c(_)?t(_,C,D,T,w,R):e(_,C,I,D,T,w,R);if(!(D&d)){var Z=F&&x.call(_,"__wrapped__"),nt=z&&x.call(C,"__wrapped__");if(Z||nt){var it=Z?_.value():_,et=nt?C.value():C;return R||(R=new n),w(it,et,D,T,R)}}return j?(R||(R=new n),i(_,C,D,T,w,R)):!1}return m2=S,m2}var v2,Gw;function d8(){if(Gw)return v2;Gw=1;var n=xN(),t=dl();function e(i,a,s,o,c){return i===a?!0:i==null||a==null||!t(i)&&!t(a)?i!==i&&a!==a:n(i,a,s,o,e,c)}return v2=e,v2}var y2,jw;function SN(){if(jw)return y2;jw=1;var n=b_(),t=d8(),e=1,i=2;function a(s,o,c,d){var f=c.length,g=f,m=!d;if(s==null)return!g;for(s=Object(s);f--;){var v=c[f];if(m&&v[2]?v[1]!==s[v[0]]:!(v[0]in s))return!1}for(;++f<g;){v=c[f];var x=v[0],S=s[x],_=v[1];if(m&&v[2]){if(S===void 0&&!(x in s))return!1}else{var C=new n;if(d)var D=d(S,_,x,s,o,C);if(!(D===void 0?t(_,S,e|i,d,C):D))return!1}}return!0}return y2=a,y2}var b2,Uw;function h8(){if(Uw)return b2;Uw=1;var n=Wh();function t(e){return e===e&&!n(e)}return b2=t,b2}var x2,qw;function _N(){if(qw)return x2;qw=1;var n=h8(),t=rm();function e(i){for(var a=t(i),s=a.length;s--;){var o=a[s],c=i[o];a[s]=[o,c,n(c)]}return a}return x2=e,x2}var S2,Vw;function f8(){if(Vw)return S2;Vw=1;function n(t,e){return function(i){return i==null?!1:i[t]===e&&(e!==void 0||t in Object(i))}}return S2=n,S2}var _2,Yw;function AN(){if(Yw)return _2;Yw=1;var n=SN(),t=_N(),e=f8();function i(a){var s=t(a);return s.length==1&&s[0][2]?e(s[0][0],s[0][1]):function(o){return o===a||n(o,a,s)}}return _2=i,_2}var A2,Xw;function S_(){if(Xw)return A2;Xw=1;var n=Uu(),t=dl(),e="[object Symbol]";function i(a){return typeof a=="symbol"||t(a)&&n(a)==e}return A2=i,A2}var E2,Kw;function __(){if(Kw)return E2;Kw=1;var n=As(),t=S_(),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,o){if(n(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||t(s)?!0:i.test(s)||!e.test(s)||o!=null&&s in Object(o)}return E2=a,E2}var w2,Ww;function EN(){if(Ww)return w2;Ww=1;var n=y_(),t="Expected a function";function e(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=s.cache;if(d.has(c))return d.get(c);var f=i.apply(this,o);return s.cache=d.set(c,f)||d,f};return s.cache=new(e.Cache||n),s}return e.Cache=n,w2=e,w2}var C2,$w;function wN(){if($w)return C2;$w=1;var n=EN(),t=500;function e(i){var a=n(i,function(o){return s.size===t&&s.clear(),o}),s=a.cache;return a}return C2=e,C2}var T2,Qw;function CN(){if(Qw)return T2;Qw=1;var n=wN(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,i=n(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(o,c,d,f){s.push(d?f.replace(e,"$1"):c||o)}),s});return T2=i,T2}var R2,Zw;function TN(){if(Zw)return R2;Zw=1;var n=am(),t=i8(),e=As(),i=S_(),a=n?n.prototype:void 0,s=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(e(c))return t(c,o)+"";if(i(c))return s?s.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return R2=o,R2}var M2,Jw;function RN(){if(Jw)return M2;Jw=1;var n=TN();function t(e){return e==null?"":n(e)}return M2=t,M2}var D2,t5;function p8(){if(t5)return D2;t5=1;var n=As(),t=__(),e=CN(),i=RN();function a(s,o){return n(s)?s:t(s,o)?[s]:e(i(s))}return D2=a,D2}var O2,e5;function i1(){if(e5)return O2;e5=1;var n=S_();function t(e){if(typeof e=="string"||n(e))return e;var i=e+"";return i=="0"&&1/e==-1/0?"-0":i}return O2=t,O2}var N2,n5;function g8(){if(n5)return N2;n5=1;var n=p8(),t=i1();function e(i,a){a=n(a,i);for(var s=0,o=a.length;i!=null&&s<o;)i=i[t(a[s++])];return s&&s==o?i:void 0}return N2=e,N2}var L2,i5;function MN(){if(i5)return L2;i5=1;var n=g8();function t(e,i,a){var s=e==null?void 0:n(e,i);return s===void 0?a:s}return L2=t,L2}var P2,a5;function DN(){if(a5)return P2;a5=1;function n(t,e){return t!=null&&e in Object(t)}return P2=n,P2}var k2,r5;function ON(){if(r5)return k2;r5=1;var n=p8(),t=WT(),e=As(),i=$T(),a=u_(),s=i1();function o(c,d,f){d=n(d,c);for(var g=-1,m=d.length,v=!1;++g<m;){var x=s(d[g]);if(!(v=c!=null&&f(c,x)))break;c=c[x]}return v||++g!=m?v:(m=c==null?0:c.length,!!m&&a(m)&&i(x,m)&&(e(c)||t(c)))}return k2=o,k2}var B2,s5;function NN(){if(s5)return B2;s5=1;var n=DN(),t=ON();function e(i,a){return i!=null&&t(i,a,n)}return B2=e,B2}var z2,o5;function LN(){if(o5)return z2;o5=1;var n=d8(),t=MN(),e=NN(),i=__(),a=h8(),s=f8(),o=i1(),c=1,d=2;function f(g,m){return i(g)&&a(m)?s(o(g),m):function(v){var x=t(v,g);return x===void 0&&x===m?e(v,g):n(m,x,c|d)}}return z2=f,z2}var F2,l5;function PN(){if(l5)return F2;l5=1;function n(t){return function(e){return e?.[t]}}return F2=n,F2}var I2,c5;function kN(){if(c5)return I2;c5=1;var n=g8();function t(e){return function(i){return n(i,e)}}return I2=t,I2}var H2,u5;function BN(){if(u5)return H2;u5=1;var n=PN(),t=kN(),e=__(),i=i1();function a(s){return e(s)?n(i(s)):t(s)}return H2=a,H2}var G2,d5;function zN(){if(d5)return G2;d5=1;var n=AN(),t=LN(),e=n8(),i=As(),a=BN();function s(o){return typeof o=="function"?o:o==null?e:typeof o=="object"?i(o)?t(o[0],o[1]):n(o):a(o)}return G2=s,G2}var j2,h5;function FN(){if(h5)return j2;h5=1;var n=Qv();function t(e,i){return function(a,s){if(a==null)return a;if(!n(a))return e(a,s);for(var o=a.length,c=i?o:-1,d=Object(a);(i?c--:++c<o)&&s(d[c],c,d)!==!1;);return a}}return j2=t,j2}var U2,f5;function IN(){if(f5)return U2;f5=1;var n=e8(),t=FN(),e=t(n);return U2=e,U2}var q2,p5;function HN(){if(p5)return q2;p5=1;var n=IN(),t=Qv();function e(i,a){var s=-1,o=t(i)?Array(i.length):[];return n(i,function(c,d,f){o[++s]=a(c,d,f)}),o}return q2=e,q2}var V2,g5;function GN(){if(g5)return V2;g5=1;var n=i8(),t=zN(),e=HN(),i=As();function a(s,o){var c=i(s)?n:e;return c(s,t(o,3))}return V2=a,V2}var m5;function jN(){if(m5)return uh;m5=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.flattenNames=void 0;var n=AO(),t=d(n),e=p_(),i=d(e),a=LO(),s=d(a),o=GN(),c=d(o);function d(g){return g&&g.__esModule?g:{default:g}}var f=uh.flattenNames=function g(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=[];return(0,c.default)(m,function(x){Array.isArray(x)?g(x).map(function(S){return v.push(S)}):(0,s.default)(x)?(0,i.default)(x,function(S,_){S===!0&&v.push(_),v.push(_+"-"+S)}):(0,t.default)(x)&&v.push(x)}),v};return uh.default=f,uh}var dh={},Y2,v5;function UN(){if(v5)return Y2;v5=1;function n(t,e){for(var i=-1,a=t==null?0:t.length;++i<a&&e(t[i],i,t)!==!1;);return t}return Y2=n,Y2}var X2,y5;function qN(){if(y5)return X2;y5=1;var n=qu(),t=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch{}}();return X2=t,X2}var K2,b5;function m8(){if(b5)return K2;b5=1;var n=qN();function t(e,i,a){i=="__proto__"&&n?n(e,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[i]=a}return K2=t,K2}var W2,x5;function v8(){if(x5)return W2;x5=1;var n=m8(),t=m_(),e=Object.prototype,i=e.hasOwnProperty;function a(s,o,c){var d=s[o];(!(i.call(s,o)&&t(d,c))||c===void 0&&!(o in s))&&n(s,o,c)}return W2=a,W2}var $2,S5;function a1(){if(S5)return $2;S5=1;var n=v8(),t=m8();function e(i,a,s,o){var c=!s;s||(s={});for(var d=-1,f=a.length;++d<f;){var g=a[d],m=o?o(s[g],i[g],g,s,i):void 0;m===void 0&&(m=i[g]),c?t(s,g,m):n(s,g,m)}return s}return $2=e,$2}var Q2,_5;function VN(){if(_5)return Q2;_5=1;var n=a1(),t=rm();function e(i,a){return i&&n(a,t(a),i)}return Q2=e,Q2}var Z2,A5;function YN(){if(A5)return Z2;A5=1;function n(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}return Z2=n,Z2}var J2,E5;function XN(){if(E5)return J2;E5=1;var n=Wh(),t=f_(),e=YN(),i=Object.prototype,a=i.hasOwnProperty;function s(o){if(!n(o))return e(o);var c=t(o),d=[];for(var f in o)f=="constructor"&&(c||!a.call(o,f))||d.push(f);return d}return J2=s,J2}var tx,w5;function A_(){if(w5)return tx;w5=1;var n=ZT(),t=XN(),e=Qv();function i(a){return e(a)?n(a,!0):t(a)}return tx=i,tx}var ex,C5;function KN(){if(C5)return ex;C5=1;var n=a1(),t=A_();function e(i,a){return i&&n(a,t(a),i)}return ex=e,ex}var Mg={exports:{}};Mg.exports;var T5;function WN(){return T5||(T5=1,function(n,t){var e=xo(),i=t&&!t.nodeType&&t,a=i&&!0&&n&&!n.nodeType&&n,s=a&&a.exports===i,o=s?e.Buffer:void 0,c=o?o.allocUnsafe:void 0;function d(f,g){if(g)return f.slice();var m=f.length,v=c?c(m):new f.constructor(m);return f.copy(v),v}n.exports=d}(Mg,Mg.exports)),Mg.exports}var nx,R5;function $N(){if(R5)return nx;R5=1;function n(t,e){var i=-1,a=t.length;for(e||(e=Array(a));++i<a;)e[i]=t[i];return e}return nx=n,nx}var ix,M5;function QN(){if(M5)return ix;M5=1;var n=a1(),t=x_();function e(i,a){return n(i,t(i),a)}return ix=e,ix}var ax,D5;function y8(){if(D5)return ax;D5=1;var n=o8(),t=g_(),e=x_(),i=c8(),a=Object.getOwnPropertySymbols,s=a?function(o){for(var c=[];o;)n(c,e(o)),o=t(o);return c}:i;return ax=s,ax}var rx,O5;function ZN(){if(O5)return rx;O5=1;var n=a1(),t=y8();function e(i,a){return n(i,t(i),a)}return rx=e,rx}var sx,N5;function JN(){if(N5)return sx;N5=1;var n=l8(),t=y8(),e=A_();function i(a){return n(a,e,t)}return sx=i,sx}var ox,L5;function tL(){if(L5)return ox;L5=1;var n=Object.prototype,t=n.hasOwnProperty;function e(i){var a=i.length,s=new i.constructor(a);return a&&typeof i[0]=="string"&&t.call(i,"index")&&(s.index=i.index,s.input=i.input),s}return ox=e,ox}var lx,P5;function E_(){if(P5)return lx;P5=1;var n=s8();function t(e){var i=new e.constructor(e.byteLength);return new n(i).set(new n(e)),i}return lx=t,lx}var cx,k5;function eL(){if(k5)return cx;k5=1;var n=E_();function t(e,i){var a=i?n(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}return cx=t,cx}var ux,B5;function nL(){if(B5)return ux;B5=1;var n=/\w*$/;function t(e){var i=new e.constructor(e.source,n.exec(e));return i.lastIndex=e.lastIndex,i}return ux=t,ux}var dx,z5;function iL(){if(z5)return dx;z5=1;var n=am(),t=n?n.prototype:void 0,e=t?t.valueOf:void 0;function i(a){return e?Object(e.call(a)):{}}return dx=i,dx}var hx,F5;function aL(){if(F5)return hx;F5=1;var n=E_();function t(e,i){var a=i?n(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}return hx=t,hx}var fx,I5;function rL(){if(I5)return fx;I5=1;var n=E_(),t=eL(),e=nL(),i=iL(),a=aL(),s="[object Boolean]",o="[object Date]",c="[object Map]",d="[object Number]",f="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",x="[object ArrayBuffer]",S="[object DataView]",_="[object Float32Array]",C="[object Float64Array]",D="[object Int8Array]",T="[object Int16Array]",w="[object Int32Array]",R="[object Uint8Array]",O="[object Uint8ClampedArray]",L="[object Uint16Array]",I="[object Uint32Array]";function B(F,z,j){var Z=F.constructor;switch(z){case x:return n(F);case s:case o:return new Z(+F);case S:return t(F,j);case _:case C:case D:case T:case w:case R:case O:case L:case I:return a(F,j);case c:return new Z;case d:case m:return new Z(F);case f:return e(F);case g:return new Z;case v:return i(F)}}return fx=B,fx}var px,H5;function sL(){if(H5)return px;H5=1;var n=Wh(),t=Object.create,e=function(){function i(){}return function(a){if(!n(a))return{};if(t)return t(a);i.prototype=a;var s=new i;return i.prototype=void 0,s}}();return px=e,px}var gx,G5;function oL(){if(G5)return gx;G5=1;var n=sL(),t=g_(),e=f_();function i(a){return typeof a.constructor=="function"&&!e(a)?n(t(a)):{}}return gx=i,gx}var mx,j5;function lL(){if(j5)return mx;j5=1;var n=n1(),t=dl(),e="[object Map]";function i(a){return t(a)&&n(a)==e}return mx=i,mx}var vx,U5;function cL(){if(U5)return vx;U5=1;var n=lL(),t=d_(),e=h_(),i=e&&e.isMap,a=i?t(i):n;return vx=a,vx}var yx,q5;function uL(){if(q5)return yx;q5=1;var n=n1(),t=dl(),e="[object Set]";function i(a){return t(a)&&n(a)==e}return yx=i,yx}var bx,V5;function dL(){if(V5)return bx;V5=1;var n=uL(),t=d_(),e=h_(),i=e&&e.isSet,a=i?t(i):n;return bx=a,bx}var xx,Y5;function hL(){if(Y5)return xx;Y5=1;var n=b_(),t=UN(),e=v8(),i=VN(),a=KN(),s=WN(),o=$N(),c=QN(),d=ZN(),f=u8(),g=JN(),m=n1(),v=tL(),x=rL(),S=oL(),_=As(),C=c_(),D=cL(),T=Wh(),w=dL(),R=rm(),O=A_(),L=1,I=2,B=4,F="[object Arguments]",z="[object Array]",j="[object Boolean]",Z="[object Date]",nt="[object Error]",it="[object Function]",et="[object GeneratorFunction]",Q="[object Map]",k="[object Number]",U="[object Object]",$="[object RegExp]",H="[object Set]",V="[object String]",at="[object Symbol]",K="[object WeakMap]",ut="[object ArrayBuffer]",xt="[object DataView]",ot="[object Float32Array]",tt="[object Float64Array]",ct="[object Int8Array]",At="[object Int16Array]",Mt="[object Int32Array]",Pt="[object Uint8Array]",Bt="[object Uint8ClampedArray]",Gt="[object Uint16Array]",de="[object Uint32Array]",Nt={};Nt[F]=Nt[z]=Nt[ut]=Nt[xt]=Nt[j]=Nt[Z]=Nt[ot]=Nt[tt]=Nt[ct]=Nt[At]=Nt[Mt]=Nt[Q]=Nt[k]=Nt[U]=Nt[$]=Nt[H]=Nt[V]=Nt[at]=Nt[Pt]=Nt[Bt]=Nt[Gt]=Nt[de]=!0,Nt[nt]=Nt[it]=Nt[K]=!1;function we(kt,Ae,rn,sn,vn,$t){var Ce,Dt=Ae&L,Ht=Ae&I,ee=Ae&B;if(rn&&(Ce=vn?rn(kt,sn,vn,$t):rn(kt)),Ce!==void 0)return Ce;if(!T(kt))return kt;var Xt=_(kt);if(Xt){if(Ce=v(kt),!Dt)return o(kt,Ce)}else{var ie=m(kt),Me=ie==it||ie==et;if(C(kt))return s(kt,Dt);if(ie==U||ie==F||Me&&!vn){if(Ce=Ht||Me?{}:S(kt),!Dt)return Ht?d(kt,a(Ce,kt)):c(kt,i(Ce,kt))}else{if(!Nt[ie])return vn?kt:{};Ce=x(kt,ie,Dt)}}$t||($t=new n);var Ze=$t.get(kt);if(Ze)return Ze;$t.set(kt,Ce),w(kt)?kt.forEach(function(En){Ce.add(we(En,Ae,rn,En,kt,$t))}):D(kt)&&kt.forEach(function(En,Rt){Ce.set(Rt,we(En,Ae,rn,Rt,kt,$t))});var yn=ee?Ht?g:f:Ht?O:R,si=Xt?void 0:yn(kt);return t(si||kt,function(En,Rt){si&&(Rt=En,En=kt[Rt]),e(Ce,Rt,we(En,Ae,rn,Rt,kt,$t))}),Ce}return xx=we,xx}var Sx,X5;function fL(){if(X5)return Sx;X5=1;var n=hL(),t=1,e=4;function i(a){return n(a,t|e)}return Sx=i,Sx}var K5;function pL(){if(K5)return dh;K5=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.mergeClasses=void 0;var n=p_(),t=s(n),e=fL(),i=s(e),a=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(c[g]=f[g])}return c};function s(c){return c&&c.__esModule?c:{default:c}}var o=dh.mergeClasses=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],g=d.default&&(0,i.default)(d.default)||{};return f.map(function(m){var v=d[m];return v&&(0,t.default)(v,function(x,S){g[S]||(g[S]={}),g[S]=a({},g[S],v[S])}),m}),g};return dh.default=o,dh}var hh={},W5;function gL(){if(W5)return hh;W5=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.autoprefix=void 0;var n=p_(),t=i(n),e=Object.assign||function(o){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(o[f]=d[f])}return o};function i(o){return o&&o.__esModule?o:{default:o}}var a={borderRadius:function(c){return{msBorderRadius:c,MozBorderRadius:c,OBorderRadius:c,WebkitBorderRadius:c,borderRadius:c}},boxShadow:function(c){return{msBoxShadow:c,MozBoxShadow:c,OBoxShadow:c,WebkitBoxShadow:c,boxShadow:c}},userSelect:function(c){return{WebkitTouchCallout:c,KhtmlUserSelect:c,MozUserSelect:c,msUserSelect:c,WebkitUserSelect:c,userSelect:c}},flex:function(c){return{WebkitBoxFlex:c,MozBoxFlex:c,WebkitFlex:c,msFlex:c,flex:c}},flexBasis:function(c){return{WebkitFlexBasis:c,flexBasis:c}},justifyContent:function(c){return{WebkitJustifyContent:c,justifyContent:c}},transition:function(c){return{msTransition:c,MozTransition:c,OTransition:c,WebkitTransition:c,transition:c}},transform:function(c){return{msTransform:c,MozTransform:c,OTransform:c,WebkitTransform:c,transform:c}},absolute:function(c){var d=c&&c.split(" ");return{position:"absolute",top:d&&d[0],right:d&&d[1],bottom:d&&d[2],left:d&&d[3]}},extend:function(c,d){var f=d[c];return f||{extend:c}}},s=hh.autoprefix=function(c){var d={};return(0,t.default)(c,function(f,g){var m={};(0,t.default)(f,function(v,x){var S=a[x];S?m=e({},m,S(v)):m[x]=v}),d[g]=m}),d};return hh.default=s,hh}var fh={},$5;function mL(){if($5)return fh;$5=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.hover=void 0;var n=Object.assign||function(d){for(var f=1;f<arguments.length;f++){var g=arguments[f];for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(d[m]=g[m])}return d},t=bo(),e=i(t);function i(d){return d&&d.__esModule?d:{default:d}}function a(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function s(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function o(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var c=fh.hover=function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(m){o(v,m);function v(){var x,S,_,C;a(this,v);for(var D=arguments.length,T=Array(D),w=0;w<D;w++)T[w]=arguments[w];return C=(S=(_=s(this,(x=v.__proto__||Object.getPrototypeOf(v)).call.apply(x,[this].concat(T))),_),_.state={hover:!1},_.handleMouseOver=function(){return _.setState({hover:!0})},_.handleMouseOut=function(){return _.setState({hover:!1})},_.render=function(){return e.default.createElement(g,{onMouseOver:_.handleMouseOver,onMouseOut:_.handleMouseOut},e.default.createElement(f,n({},_.props,_.state)))},S),s(_,C)}return v}(e.default.Component)};return fh.default=c,fh}var ph={},Q5;function vL(){if(Q5)return ph;Q5=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.active=void 0;var n=Object.assign||function(d){for(var f=1;f<arguments.length;f++){var g=arguments[f];for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(d[m]=g[m])}return d},t=bo(),e=i(t);function i(d){return d&&d.__esModule?d:{default:d}}function a(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function s(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function o(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var c=ph.active=function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(m){o(v,m);function v(){var x,S,_,C;a(this,v);for(var D=arguments.length,T=Array(D),w=0;w<D;w++)T[w]=arguments[w];return C=(S=(_=s(this,(x=v.__proto__||Object.getPrototypeOf(v)).call.apply(x,[this].concat(T))),_),_.state={active:!1},_.handleMouseDown=function(){return _.setState({active:!0})},_.handleMouseUp=function(){return _.setState({active:!1})},_.render=function(){return e.default.createElement(g,{onMouseDown:_.handleMouseDown,onMouseUp:_.handleMouseUp},e.default.createElement(f,n({},_.props,_.state)))},S),s(_,C)}return v}(e.default.Component)};return ph.default=c,ph}var W0={},Z5;function yL(){if(Z5)return W0;Z5=1,Object.defineProperty(W0,"__esModule",{value:!0});var n=function(e,i){var a={},s=function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;a[c]=d};return e===0&&s("first-child"),e===i-1&&s("last-child"),(e===0||e%2===0)&&s("even"),Math.abs(e%2)===1&&s("odd"),s("nth-child",e),a};return W0.default=n,W0}var J5;function bL(){if(J5)return Pa;J5=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.ReactCSS=Pa.loop=Pa.handleActive=Pa.handleHover=Pa.hover=void 0;var n=jN(),t=v(n),e=pL(),i=v(e),a=gL(),s=v(a),o=mL(),c=v(o),d=vL(),f=v(d),g=yL(),m=v(g);function v(S){return S&&S.__esModule?S:{default:S}}Pa.hover=c.default,Pa.handleHover=c.default,Pa.handleActive=f.default,Pa.loop=m.default;var x=Pa.ReactCSS=function(_){for(var C=arguments.length,D=Array(C>1?C-1:0),T=1;T<C;T++)D[T-1]=arguments[T];var w=(0,t.default)(D),R=(0,i.default)(_,w);return(0,s.default)(R)};return Pa.default=x,Pa}var w_=bL();const ue=rr(w_);var xL=function(t,e,i,a,s){var o=s.clientWidth,c=s.clientHeight,d=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,f=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,g=d-(s.getBoundingClientRect().left+window.pageXOffset),m=f-(s.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var v=void 0;if(m<0?v=0:m>c?v=1:v=Math.round(m*100/c)/100,e.a!==v)return{h:e.h,s:e.s,l:e.l,a:v,source:"rgb"}}else{var x=void 0;if(g<0?x=0:g>o?x=1:x=Math.round(g*100/o)/100,a!==x)return{h:e.h,s:e.s,l:e.l,a:x,source:"rgb"}}return null},_x={},SL=function(t,e,i,a){if(typeof document>"u"&&!a)return null;var s=a?new a:document.createElement("canvas");s.width=i*2,s.height=i*2;var o=s.getContext("2d");return o?(o.fillStyle=t,o.fillRect(0,0,s.width,s.height),o.fillStyle=e,o.fillRect(0,0,i,i),o.translate(i,i),o.fillRect(0,0,i,i),s.toDataURL()):null},_L=function(t,e,i,a){var s=t+"-"+e+"-"+i+(a?"-server":"");if(_x[s])return _x[s];var o=SL(t,e,i,a);return _x[s]=o,o},t4=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},$h=function(t){var e=t.white,i=t.grey,a=t.size,s=t.renderers,o=t.borderRadius,c=t.boxShadow,d=t.children,f=ue({default:{grid:{borderRadius:o,boxShadow:c,absolute:"0px 0px 0px 0px",background:"url("+_L(e,i,a,s.canvas)+") center left"}}});return X.isValidElement(d)?q.cloneElement(d,t4({},d.props,{style:t4({},d.props.style,f.grid)})):q.createElement("div",{style:f.grid})};$h.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var AL=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},EL=function(){function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function wL(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e4(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function CL(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var C_=function(n){CL(t,n);function t(){var e,i,a,s;wL(this,t);for(var o=arguments.length,c=Array(o),d=0;d<o;d++)c[d]=arguments[d];return s=(i=(a=e4(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a),a.handleChange=function(f){var g=xL(f,a.props.hsl,a.props.direction,a.props.a,a.container);g&&typeof a.props.onChange=="function"&&a.props.onChange(g,f)},a.handleMouseDown=function(f){a.handleChange(f),window.addEventListener("mousemove",a.handleChange),window.addEventListener("mouseup",a.handleMouseUp)},a.handleMouseUp=function(){a.unbindEventListeners()},a.unbindEventListeners=function(){window.removeEventListener("mousemove",a.handleChange),window.removeEventListener("mouseup",a.handleMouseUp)},i),e4(a,s)}return EL(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var i=this,a=this.props.rgb,s=ue({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+a.r+","+a.g+","+a.b+`, 0) 0%,
           rgba(`+a.r+","+a.g+","+a.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:a.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+a.r+","+a.g+","+a.b+`, 0) 0%,
           rgba(`+a.r+","+a.g+","+a.b+", 1) 100%)"},pointer:{left:0,top:a.a*100+"%"}},overwrite:AL({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return q.createElement("div",{style:s.alpha},q.createElement("div",{style:s.checkboard},q.createElement($h,{renderers:this.props.renderers})),q.createElement("div",{style:s.gradient}),q.createElement("div",{style:s.container,ref:function(c){return i.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},q.createElement("div",{style:s.pointer},this.props.pointer?q.createElement(this.props.pointer,this.props):q.createElement("div",{style:s.slider}))))}}]),t}(X.PureComponent||X.Component),TL=function(){function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function RL(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ML(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function DL(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function OL(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var NL=1,b8=38,LL=40,PL=[b8,LL],kL=function(t){return PL.indexOf(t)>-1},BL=function(t){return Number(String(t).replace(/%/g,""))},zL=1,qe=function(n){OL(t,n);function t(e){ML(this,t);var i=DL(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.handleBlur=function(){i.state.blurValue&&i.setState({value:i.state.blurValue,blurValue:null})},i.handleChange=function(a){i.setUpdatedValue(a.target.value,a)},i.handleKeyDown=function(a){var s=BL(a.target.value);if(!isNaN(s)&&kL(a.keyCode)){var o=i.getArrowOffset(),c=a.keyCode===b8?s+o:s-o;i.setUpdatedValue(c,a)}},i.handleDrag=function(a){if(i.props.dragLabel){var s=Math.round(i.props.value+a.movementX);s>=0&&s<=i.props.dragMax&&i.props.onChange&&i.props.onChange(i.getValueObjectWithLabel(s),a)}},i.handleMouseDown=function(a){i.props.dragLabel&&(a.preventDefault(),i.handleDrag(a),window.addEventListener("mousemove",i.handleDrag),window.addEventListener("mouseup",i.handleMouseUp))},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleDrag),window.removeEventListener("mouseup",i.handleMouseUp)},i.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},i.inputId="rc-editable-input-"+zL++,i}return TL(t,[{key:"componentDidUpdate",value:function(i,a){this.props.value!==this.state.value&&(i.value!==this.props.value||a.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(i){return RL({},this.props.label,i)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||NL}},{key:"setUpdatedValue",value:function(i,a){var s=this.props.label?this.getValueObjectWithLabel(i):i;this.props.onChange&&this.props.onChange(s,a),this.setState({value:i})}},{key:"render",value:function(){var i=this,a=ue({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return q.createElement("div",{style:a.wrap},q.createElement("input",{id:this.inputId,style:a.input,ref:function(o){return i.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?q.createElement("label",{htmlFor:this.inputId,style:a.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(X.PureComponent||X.Component),FL=function(t,e,i,a){var s=a.clientWidth,o=a.clientHeight,c=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,f=c-(a.getBoundingClientRect().left+window.pageXOffset),g=d-(a.getBoundingClientRect().top+window.pageYOffset);if(e==="vertical"){var m=void 0;if(g<0)m=359;else if(g>o)m=0;else{var v=-(g*100/o)+100;m=360*v/100}if(i.h!==m)return{h:m,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var x=void 0;if(f<0)x=0;else if(f>s)x=359;else{var S=f*100/s;x=360*S/100}if(i.h!==x)return{h:x,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null},IL=function(){function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function HL(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function n4(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function GL(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var Qh=function(n){GL(t,n);function t(){var e,i,a,s;HL(this,t);for(var o=arguments.length,c=Array(o),d=0;d<o;d++)c[d]=arguments[d];return s=(i=(a=n4(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a),a.handleChange=function(f){var g=FL(f,a.props.direction,a.props.hsl,a.container);g&&typeof a.props.onChange=="function"&&a.props.onChange(g,f)},a.handleMouseDown=function(f){a.handleChange(f),window.addEventListener("mousemove",a.handleChange),window.addEventListener("mouseup",a.handleMouseUp)},a.handleMouseUp=function(){a.unbindEventListeners()},i),n4(a,s)}return IL(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,a=this.props.direction,s=a===void 0?"horizontal":a,o=ue({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return q.createElement("div",{style:o.hue},q.createElement("div",{className:"hue-"+s,style:o.container,ref:function(d){return i.container=d},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},q.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),q.createElement("div",{style:o.pointer},this.props.pointer?q.createElement(this.props.pointer,this.props):q.createElement("div",{style:o.slider}))))}}]),t}(X.PureComponent||X.Component),Ax={exports:{}},Ex,i4;function jL(){if(i4)return Ex;i4=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ex=n,Ex}var wx,a4;function UL(){if(a4)return wx;a4=1;var n=jL();function t(){}function e(){}return e.resetWarningCache=t,wx=function(){function i(o,c,d,f,g,m){if(m!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function a(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:e,resetWarningCache:t};return s.PropTypes=s,s},wx}var r4;function qL(){return r4||(r4=1,Ax.exports=UL()()),Ax.exports}var VL=qL();const St=rr(VL);function YL(){this.__data__=[],this.size=0}function sm(n,t){return n===t||n!==n&&t!==t}function r1(n,t){for(var e=n.length;e--;)if(sm(n[e][0],t))return e;return-1}var XL=Array.prototype,KL=XL.splice;function WL(n){var t=this.__data__,e=r1(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():KL.call(t,e,1),--this.size,!0}function $L(n){var t=this.__data__,e=r1(t,n);return e<0?void 0:t[e][1]}function QL(n){return r1(this.__data__,n)>-1}function ZL(n,t){var e=this.__data__,i=r1(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}function hl(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}hl.prototype.clear=YL;hl.prototype.delete=WL;hl.prototype.get=$L;hl.prototype.has=QL;hl.prototype.set=ZL;function JL(){this.__data__=new hl,this.size=0}function tP(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function eP(n){return this.__data__.get(n)}function nP(n){return this.__data__.has(n)}var x8=typeof global=="object"&&global&&global.Object===Object&&global,iP=typeof self=="object"&&self&&self.Object===Object&&self,Es=x8||iP||Function("return this")(),Sc=Es.Symbol,S8=Object.prototype,aP=S8.hasOwnProperty,rP=S8.toString,Dp=Sc?Sc.toStringTag:void 0;function sP(n){var t=aP.call(n,Dp),e=n[Dp];try{n[Dp]=void 0;var i=!0}catch{}var a=rP.call(n);return i&&(t?n[Dp]=e:delete n[Dp]),a}var oP=Object.prototype,lP=oP.toString;function cP(n){return lP.call(n)}var uP="[object Null]",dP="[object Undefined]",s4=Sc?Sc.toStringTag:void 0;function Vu(n){return n==null?n===void 0?dP:uP:s4&&s4 in Object(n)?sP(n):cP(n)}function Ir(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var hP="[object AsyncFunction]",fP="[object Function]",pP="[object GeneratorFunction]",gP="[object Proxy]";function T_(n){if(!Ir(n))return!1;var t=Vu(n);return t==fP||t==pP||t==hP||t==gP}var Cx=Es["__core-js_shared__"],o4=function(){var n=/[^.]+$/.exec(Cx&&Cx.keys&&Cx.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function mP(n){return!!o4&&o4 in n}var vP=Function.prototype,yP=vP.toString;function Yu(n){if(n!=null){try{return yP.call(n)}catch{}try{return n+""}catch{}}return""}var bP=/[\\^$.*+?()[\]{}|]/g,xP=/^\[object .+?Constructor\]$/,SP=Function.prototype,_P=Object.prototype,AP=SP.toString,EP=_P.hasOwnProperty,wP=RegExp("^"+AP.call(EP).replace(bP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function CP(n){if(!Ir(n)||mP(n))return!1;var t=T_(n)?wP:xP;return t.test(Yu(n))}function TP(n,t){return n?.[t]}function Xu(n,t){var e=TP(n,t);return CP(e)?e:void 0}var Vg=Xu(Es,"Map"),Yg=Xu(Object,"create");function RP(){this.__data__=Yg?Yg(null):{},this.size=0}function MP(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var DP="__lodash_hash_undefined__",OP=Object.prototype,NP=OP.hasOwnProperty;function LP(n){var t=this.__data__;if(Yg){var e=t[n];return e===DP?void 0:e}return NP.call(t,n)?t[n]:void 0}var PP=Object.prototype,kP=PP.hasOwnProperty;function BP(n){var t=this.__data__;return Yg?t[n]!==void 0:kP.call(t,n)}var zP="__lodash_hash_undefined__";function FP(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Yg&&t===void 0?zP:t,this}function zu(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}zu.prototype.clear=RP;zu.prototype.delete=MP;zu.prototype.get=LP;zu.prototype.has=BP;zu.prototype.set=FP;function IP(){this.size=0,this.__data__={hash:new zu,map:new(Vg||hl),string:new zu}}function HP(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function s1(n,t){var e=n.__data__;return HP(t)?e[typeof t=="string"?"string":"hash"]:e.map}function GP(n){var t=s1(this,n).delete(n);return this.size-=t?1:0,t}function jP(n){return s1(this,n).get(n)}function UP(n){return s1(this,n).has(n)}function qP(n,t){var e=s1(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}function fl(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}fl.prototype.clear=IP;fl.prototype.delete=GP;fl.prototype.get=jP;fl.prototype.has=UP;fl.prototype.set=qP;var VP=200;function YP(n,t){var e=this.__data__;if(e instanceof hl){var i=e.__data__;if(!Vg||i.length<VP-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new fl(i)}return e.set(n,t),this.size=e.size,this}function vo(n){var t=this.__data__=new hl(n);this.size=t.size}vo.prototype.clear=JL;vo.prototype.delete=tP;vo.prototype.get=eP;vo.prototype.has=nP;vo.prototype.set=YP;var _v=function(){try{var n=Xu(Object,"defineProperty");return n({},"",{}),n}catch{}}();function R_(n,t,e){t=="__proto__"&&_v?_v(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function SS(n,t,e){(e!==void 0&&!sm(n[t],e)||e===void 0&&!(t in n))&&R_(n,t,e)}function XP(n){return function(t,e,i){for(var a=-1,s=Object(t),o=i(t),c=o.length;c--;){var d=o[++a];if(e(s[d],d,s)===!1)break}return t}}var _8=XP(),A8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,l4=A8&&typeof module=="object"&&module&&!module.nodeType&&module,KP=l4&&l4.exports===A8,c4=KP?Es.Buffer:void 0;c4&&c4.allocUnsafe;function WP(n,t){return n.slice()}var Av=Es.Uint8Array;function $P(n){var t=new n.constructor(n.byteLength);return new Av(t).set(new Av(n)),t}function QP(n,t){var e=$P(n.buffer);return new n.constructor(e,n.byteOffset,n.length)}function ZP(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}var u4=Object.create,JP=function(){function n(){}return function(t){if(!Ir(t))return{};if(u4)return u4(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();function E8(n,t){return function(e){return n(t(e))}}var w8=E8(Object.getPrototypeOf,Object),tk=Object.prototype;function M_(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||tk;return n===e}function ek(n){return typeof n.constructor=="function"&&!M_(n)?JP(w8(n)):{}}function _c(n){return n!=null&&typeof n=="object"}var nk="[object Arguments]";function d4(n){return _c(n)&&Vu(n)==nk}var C8=Object.prototype,ik=C8.hasOwnProperty,ak=C8.propertyIsEnumerable,Ev=d4(function(){return arguments}())?d4:function(n){return _c(n)&&ik.call(n,"callee")&&!ak.call(n,"callee")},ar=Array.isArray,rk=9007199254740991;function D_(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=rk}function Zh(n){return n!=null&&D_(n.length)&&!T_(n)}function sk(n){return _c(n)&&Zh(n)}function ok(){return!1}var T8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,h4=T8&&typeof module=="object"&&module&&!module.nodeType&&module,lk=h4&&h4.exports===T8,f4=lk?Es.Buffer:void 0,ck=f4?f4.isBuffer:void 0,wv=ck||ok,uk="[object Object]",dk=Function.prototype,hk=Object.prototype,R8=dk.toString,fk=hk.hasOwnProperty,pk=R8.call(Object);function gk(n){if(!_c(n)||Vu(n)!=uk)return!1;var t=w8(n);if(t===null)return!0;var e=fk.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&R8.call(e)==pk}var mk="[object Arguments]",vk="[object Array]",yk="[object Boolean]",bk="[object Date]",xk="[object Error]",Sk="[object Function]",_k="[object Map]",Ak="[object Number]",Ek="[object Object]",wk="[object RegExp]",Ck="[object Set]",Tk="[object String]",Rk="[object WeakMap]",Mk="[object ArrayBuffer]",Dk="[object DataView]",Ok="[object Float32Array]",Nk="[object Float64Array]",Lk="[object Int8Array]",Pk="[object Int16Array]",kk="[object Int32Array]",Bk="[object Uint8Array]",zk="[object Uint8ClampedArray]",Fk="[object Uint16Array]",Ik="[object Uint32Array]",Rn={};Rn[Ok]=Rn[Nk]=Rn[Lk]=Rn[Pk]=Rn[kk]=Rn[Bk]=Rn[zk]=Rn[Fk]=Rn[Ik]=!0;Rn[mk]=Rn[vk]=Rn[Mk]=Rn[yk]=Rn[Dk]=Rn[bk]=Rn[xk]=Rn[Sk]=Rn[_k]=Rn[Ak]=Rn[Ek]=Rn[wk]=Rn[Ck]=Rn[Tk]=Rn[Rk]=!1;function Hk(n){return _c(n)&&D_(n.length)&&!!Rn[Vu(n)]}function Gk(n){return function(t){return n(t)}}var M8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ig=M8&&typeof module=="object"&&module&&!module.nodeType&&module,jk=Ig&&Ig.exports===M8,Tx=jk&&x8.process,p4=function(){try{var n=Ig&&Ig.require&&Ig.require("util").types;return n||Tx&&Tx.binding&&Tx.binding("util")}catch{}}(),g4=p4&&p4.isTypedArray,O_=g4?Gk(g4):Hk;function _S(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var Uk=Object.prototype,qk=Uk.hasOwnProperty;function Vk(n,t,e){var i=n[t];(!(qk.call(n,t)&&sm(i,e))||e===void 0&&!(t in n))&&R_(n,t,e)}function Yk(n,t,e,i){var a=!e;e||(e={});for(var s=-1,o=t.length;++s<o;){var c=t[s],d=void 0;d===void 0&&(d=n[c]),a?R_(e,c,d):Vk(e,c,d)}return e}function Xk(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var Kk=9007199254740991,Wk=/^(?:0|[1-9]\d*)$/;function N_(n,t){var e=typeof n;return t=t??Kk,!!t&&(e=="number"||e!="symbol"&&Wk.test(n))&&n>-1&&n%1==0&&n<t}var $k=Object.prototype,Qk=$k.hasOwnProperty;function D8(n,t){var e=ar(n),i=!e&&Ev(n),a=!e&&!i&&wv(n),s=!e&&!i&&!a&&O_(n),o=e||i||a||s,c=o?Xk(n.length,String):[],d=c.length;for(var f in n)(t||Qk.call(n,f))&&!(o&&(f=="length"||a&&(f=="offset"||f=="parent")||s&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||N_(f,d)))&&c.push(f);return c}function Zk(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var Jk=Object.prototype,tB=Jk.hasOwnProperty;function eB(n){if(!Ir(n))return Zk(n);var t=M_(n),e=[];for(var i in n)i=="constructor"&&(t||!tB.call(n,i))||e.push(i);return e}function O8(n){return Zh(n)?D8(n,!0):eB(n)}function nB(n){return Yk(n,O8(n))}function iB(n,t,e,i,a,s,o){var c=_S(n,e),d=_S(t,e),f=o.get(d);if(f){SS(n,e,f);return}var g=s?s(c,d,e+"",n,t,o):void 0,m=g===void 0;if(m){var v=ar(d),x=!v&&wv(d),S=!v&&!x&&O_(d);g=d,v||x||S?ar(c)?g=c:sk(c)?g=ZP(c):x?(m=!1,g=WP(d)):S?(m=!1,g=QP(d)):g=[]:gk(d)||Ev(d)?(g=c,Ev(c)?g=nB(c):(!Ir(c)||T_(c))&&(g=ek(d))):m=!1}m&&(o.set(d,g),a(g,d,i,s,o),o.delete(d)),SS(n,e,g)}function N8(n,t,e,i,a){n!==t&&_8(t,function(s,o){if(a||(a=new vo),Ir(s))iB(n,t,o,e,N8,i,a);else{var c=i?i(_S(n,o),s,o+"",n,t,a):void 0;c===void 0&&(c=s),SS(n,o,c)}},O8)}function o1(n){return n}function aB(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var m4=Math.max;function rB(n,t,e){return t=m4(t===void 0?n.length-1:t,0),function(){for(var i=arguments,a=-1,s=m4(i.length-t,0),o=Array(s);++a<s;)o[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=e(o),aB(n,this,c)}}function sB(n){return function(){return n}}var oB=_v?function(n,t){return _v(n,"toString",{configurable:!0,enumerable:!1,value:sB(t),writable:!0})}:o1,lB=800,cB=16,uB=Date.now;function dB(n){var t=0,e=0;return function(){var i=uB(),a=cB-(i-e);if(e=i,a>0){if(++t>=lB)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var hB=dB(oB);function fB(n,t){return hB(rB(n,t,o1),n+"")}function pB(n,t,e){if(!Ir(e))return!1;var i=typeof t;return(i=="number"?Zh(e)&&N_(t,e.length):i=="string"&&t in e)?sm(e[t],n):!1}function gB(n){return fB(function(t,e){var i=-1,a=e.length,s=a>1?e[a-1]:void 0,o=a>2?e[2]:void 0;for(s=n.length>3&&typeof s=="function"?(a--,s):void 0,o&&pB(e[0],e[1],o)&&(s=a<3?void 0:s,a=1),t=Object(t);++i<a;){var c=e[i];c&&n(t,c,i,s)}return t})}var Ia=gB(function(n,t,e){N8(n,t,e)}),om=function(t){var e=t.zDepth,i=t.radius,a=t.background,s=t.children,o=t.styles,c=o===void 0?{}:o,d=ue(Ia({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+e+"px "+e*4+"px rgba(0,0,0,.24)",borderRadius:i,background:a}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},c),{"zDepth-1":e===1});return q.createElement("div",{style:d.wrap},q.createElement("div",{style:d.bg}),q.createElement("div",{style:d.content},s))};om.propTypes={background:St.string,zDepth:St.oneOf([0,1,2,3,4,5]),radius:St.number,styles:St.object};om.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Rx=function(){return Es.Date.now()},mB=/\s/;function vB(n){for(var t=n.length;t--&&mB.test(n.charAt(t)););return t}var yB=/^\s+/;function bB(n){return n&&n.slice(0,vB(n)+1).replace(yB,"")}var xB="[object Symbol]";function l1(n){return typeof n=="symbol"||_c(n)&&Vu(n)==xB}var v4=NaN,SB=/^[-+]0x[0-9a-f]+$/i,_B=/^0b[01]+$/i,AB=/^0o[0-7]+$/i,EB=parseInt;function y4(n){if(typeof n=="number")return n;if(l1(n))return v4;if(Ir(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=Ir(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=bB(n);var e=_B.test(n);return e||AB.test(n)?EB(n.slice(2),e?2:8):SB.test(n)?v4:+n}var wB="Expected a function",CB=Math.max,TB=Math.min;function L8(n,t,e){var i,a,s,o,c,d,f=0,g=!1,m=!1,v=!0;if(typeof n!="function")throw new TypeError(wB);t=y4(t)||0,Ir(e)&&(g=!!e.leading,m="maxWait"in e,s=m?CB(y4(e.maxWait)||0,t):s,v="trailing"in e?!!e.trailing:v);function x(L){var I=i,B=a;return i=a=void 0,f=L,o=n.apply(B,I),o}function S(L){return f=L,c=setTimeout(D,t),g?x(L):o}function _(L){var I=L-d,B=L-f,F=t-I;return m?TB(F,s-B):F}function C(L){var I=L-d,B=L-f;return d===void 0||I>=t||I<0||m&&B>=s}function D(){var L=Rx();if(C(L))return T(L);c=setTimeout(D,_(L))}function T(L){return c=void 0,v&&i?x(L):(i=a=void 0,o)}function w(){c!==void 0&&clearTimeout(c),f=0,i=d=a=c=void 0}function R(){return c===void 0?o:T(Rx())}function O(){var L=Rx(),I=C(L);if(i=arguments,a=this,d=L,I){if(c===void 0)return S(d);if(m)return clearTimeout(c),c=setTimeout(D,t),x(d)}return c===void 0&&(c=setTimeout(D,t)),o}return O.cancel=w,O.flush=R,O}var RB="Expected a function";function MB(n,t,e){var i=!0,a=!0;if(typeof n!="function")throw new TypeError(RB);return Ir(e)&&(i="leading"in e?!!e.leading:i,a="trailing"in e?!!e.trailing:a),L8(n,t,{leading:i,maxWait:t,trailing:a})}var DB=function(t,e,i){var a=i.getBoundingClientRect(),s=a.width,o=a.height,c=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,f=c-(i.getBoundingClientRect().left+window.pageXOffset),g=d-(i.getBoundingClientRect().top+window.pageYOffset);f<0?f=0:f>s&&(f=s),g<0?g=0:g>o&&(g=o);var m=f/s,v=1-g/o;return{h:e.h,s:m,v,a:e.a,source:"hsv"}},OB=function(){function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function NB(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function LB(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function PB(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var c1=function(n){PB(t,n);function t(e){NB(this,t);var i=LB(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.handleChange=function(a){typeof i.props.onChange=="function"&&i.throttle(i.props.onChange,DB(a,i.props.hsl,i.container),a)},i.handleMouseDown=function(a){i.handleChange(a);var s=i.getContainerRenderWindow();s.addEventListener("mousemove",i.handleChange),s.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.throttle=MB(function(a,s,o){a(s,o)},50),i}return OB(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var i=this.container,a=window;!a.document.contains(i)&&a.parent!==a;)a=a.parent;return a}},{key:"unbindEventListeners",value:function(){var i=this.getContainerRenderWindow();i.removeEventListener("mousemove",this.handleChange),i.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,a=this.props.style||{},s=a.color,o=a.white,c=a.black,d=a.pointer,f=a.circle,g=ue({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:c,pointer:d,circle:f}},{custom:!!this.props.style});return q.createElement("div",{style:g.color,ref:function(v){return i.container=v},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},q.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),q.createElement("div",{style:g.white,className:"saturation-white"},q.createElement("div",{style:g.black,className:"saturation-black"}),q.createElement("div",{style:g.pointer},this.props.pointer?q.createElement(this.props.pointer,this.props):q.createElement("div",{style:g.circle}))))}}]),t}(X.PureComponent||X.Component);function kB(n,t){for(var e=-1,i=n==null?0:n.length;++e<i&&t(n[e],e,n)!==!1;);return n}var BB=E8(Object.keys,Object),zB=Object.prototype,FB=zB.hasOwnProperty;function IB(n){if(!M_(n))return BB(n);var t=[];for(var e in Object(n))FB.call(n,e)&&e!="constructor"&&t.push(e);return t}function L_(n){return Zh(n)?D8(n):IB(n)}function HB(n,t){return n&&_8(n,t,L_)}function GB(n,t){return function(e,i){if(e==null)return e;if(!Zh(e))return n(e,i);for(var a=e.length,s=-1,o=Object(e);++s<a&&i(o[s],s,o)!==!1;);return e}}var P8=GB(HB);function jB(n){return typeof n=="function"?n:o1}function UB(n,t){var e=ar(n)?kB:P8;return e(n,jB(t))}function Cv(n){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cv(n)}var qB=/^\s+/,VB=/\s+$/;function Yt(n,t){if(n=n||"",t=t||{},n instanceof Yt)return n;if(!(this instanceof Yt))return new Yt(n,t);var e=YB(n);this._originalInput=n,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||e.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}Yt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),e,i,a,s,o,c;return e=t.r/255,i=t.g/255,a=t.b/255,e<=.03928?s=e/12.92:s=Math.pow((e+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),a<=.03928?c=a/12.92:c=Math.pow((a+.055)/1.055,2.4),.2126*s+.7152*o+.0722*c},setAlpha:function(t){return this._a=k8(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=x4(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=x4(this._r,this._g,this._b),e=Math.round(t.h*360),i=Math.round(t.s*100),a=Math.round(t.v*100);return this._a==1?"hsv("+e+", "+i+"%, "+a+"%)":"hsva("+e+", "+i+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var t=b4(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=b4(this._r,this._g,this._b),e=Math.round(t.h*360),i=Math.round(t.s*100),a=Math.round(t.l*100);return this._a==1?"hsl("+e+", "+i+"%, "+a+"%)":"hsla("+e+", "+i+"%, "+a+"%, "+this._roundA+")"},toHex:function(t){return S4(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return $B(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Nn(this._r,255)*100)+"%",g:Math.round(Nn(this._g,255)*100)+"%",b:Math.round(Nn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Nn(this._r,255)*100)+"%, "+Math.round(Nn(this._g,255)*100)+"%, "+Math.round(Nn(this._b,255)*100)+"%)":"rgba("+Math.round(Nn(this._r,255)*100)+"%, "+Math.round(Nn(this._g,255)*100)+"%, "+Math.round(Nn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:lz[S4(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+_4(this._r,this._g,this._b,this._a),i=e,a=this._gradientType?"GradientType = 1, ":"";if(t){var s=Yt(t);i="#"+_4(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,a=this._a<1&&this._a>=0,s=!e&&a&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return s?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Yt(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(tz,arguments)},brighten:function(){return this._applyModification(ez,arguments)},darken:function(){return this._applyModification(nz,arguments)},desaturate:function(){return this._applyModification(QB,arguments)},saturate:function(){return this._applyModification(ZB,arguments)},greyscale:function(){return this._applyModification(JB,arguments)},spin:function(){return this._applyModification(iz,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(sz,arguments)},complement:function(){return this._applyCombination(az,arguments)},monochromatic:function(){return this._applyCombination(oz,arguments)},splitcomplement:function(){return this._applyCombination(rz,arguments)},triad:function(){return this._applyCombination(A4,[3])},tetrad:function(){return this._applyCombination(A4,[4])}};Yt.fromRatio=function(n,t){if(Cv(n)=="object"){var e={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?e[i]=n[i]:e[i]=Dg(n[i]));n=e}return Yt(n,t)};function YB(n){var t={r:0,g:0,b:0},e=1,i=null,a=null,s=null,o=!1,c=!1;return typeof n=="string"&&(n=hz(n)),Cv(n)=="object"&&(el(n.r)&&el(n.g)&&el(n.b)?(t=XB(n.r,n.g,n.b),o=!0,c=String(n.r).substr(-1)==="%"?"prgb":"rgb"):el(n.h)&&el(n.s)&&el(n.v)?(i=Dg(n.s),a=Dg(n.v),t=WB(n.h,i,a),o=!0,c="hsv"):el(n.h)&&el(n.s)&&el(n.l)&&(i=Dg(n.s),s=Dg(n.l),t=KB(n.h,i,s),o=!0,c="hsl"),n.hasOwnProperty("a")&&(e=n.a)),e=k8(e),{ok:o,format:n.format||c,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}function XB(n,t,e){return{r:Nn(n,255)*255,g:Nn(t,255)*255,b:Nn(e,255)*255}}function b4(n,t,e){n=Nn(n,255),t=Nn(t,255),e=Nn(e,255);var i=Math.max(n,t,e),a=Math.min(n,t,e),s,o,c=(i+a)/2;if(i==a)s=o=0;else{var d=i-a;switch(o=c>.5?d/(2-i-a):d/(i+a),i){case n:s=(t-e)/d+(t<e?6:0);break;case t:s=(e-n)/d+2;break;case e:s=(n-t)/d+4;break}s/=6}return{h:s,s:o,l:c}}function KB(n,t,e){var i,a,s;n=Nn(n,360),t=Nn(t,100),e=Nn(e,100);function o(f,g,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?f+(g-f)*6*m:m<1/2?g:m<2/3?f+(g-f)*(2/3-m)*6:f}if(t===0)i=a=s=e;else{var c=e<.5?e*(1+t):e+t-e*t,d=2*e-c;i=o(d,c,n+1/3),a=o(d,c,n),s=o(d,c,n-1/3)}return{r:i*255,g:a*255,b:s*255}}function x4(n,t,e){n=Nn(n,255),t=Nn(t,255),e=Nn(e,255);var i=Math.max(n,t,e),a=Math.min(n,t,e),s,o,c=i,d=i-a;if(o=i===0?0:d/i,i==a)s=0;else{switch(i){case n:s=(t-e)/d+(t<e?6:0);break;case t:s=(e-n)/d+2;break;case e:s=(n-t)/d+4;break}s/=6}return{h:s,s:o,v:c}}function WB(n,t,e){n=Nn(n,360)*6,t=Nn(t,100),e=Nn(e,100);var i=Math.floor(n),a=n-i,s=e*(1-t),o=e*(1-a*t),c=e*(1-(1-a)*t),d=i%6,f=[e,o,s,s,c,e][d],g=[c,e,e,o,s,s][d],m=[s,s,c,e,e,o][d];return{r:f*255,g:g*255,b:m*255}}function S4(n,t,e,i){var a=[bs(Math.round(n).toString(16)),bs(Math.round(t).toString(16)),bs(Math.round(e).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function $B(n,t,e,i,a){var s=[bs(Math.round(n).toString(16)),bs(Math.round(t).toString(16)),bs(Math.round(e).toString(16)),bs(B8(i))];return a&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function _4(n,t,e,i){var a=[bs(B8(i)),bs(Math.round(n).toString(16)),bs(Math.round(t).toString(16)),bs(Math.round(e).toString(16))];return a.join("")}Yt.equals=function(n,t){return!n||!t?!1:Yt(n).toRgbString()==Yt(t).toRgbString()};Yt.random=function(){return Yt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function QB(n,t){t=t===0?0:t||10;var e=Yt(n).toHsl();return e.s-=t/100,e.s=u1(e.s),Yt(e)}function ZB(n,t){t=t===0?0:t||10;var e=Yt(n).toHsl();return e.s+=t/100,e.s=u1(e.s),Yt(e)}function JB(n){return Yt(n).desaturate(100)}function tz(n,t){t=t===0?0:t||10;var e=Yt(n).toHsl();return e.l+=t/100,e.l=u1(e.l),Yt(e)}function ez(n,t){t=t===0?0:t||10;var e=Yt(n).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(t/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(t/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(t/100)))),Yt(e)}function nz(n,t){t=t===0?0:t||10;var e=Yt(n).toHsl();return e.l-=t/100,e.l=u1(e.l),Yt(e)}function iz(n,t){var e=Yt(n).toHsl(),i=(e.h+t)%360;return e.h=i<0?360+i:i,Yt(e)}function az(n){var t=Yt(n).toHsl();return t.h=(t.h+180)%360,Yt(t)}function A4(n,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var e=Yt(n).toHsl(),i=[Yt(n)],a=360/t,s=1;s<t;s++)i.push(Yt({h:(e.h+s*a)%360,s:e.s,l:e.l}));return i}function rz(n){var t=Yt(n).toHsl(),e=t.h;return[Yt(n),Yt({h:(e+72)%360,s:t.s,l:t.l}),Yt({h:(e+216)%360,s:t.s,l:t.l})]}function sz(n,t,e){t=t||6,e=e||30;var i=Yt(n).toHsl(),a=360/e,s=[Yt(n)];for(i.h=(i.h-(a*t>>1)+720)%360;--t;)i.h=(i.h+a)%360,s.push(Yt(i));return s}function oz(n,t){t=t||6;for(var e=Yt(n).toHsv(),i=e.h,a=e.s,s=e.v,o=[],c=1/t;t--;)o.push(Yt({h:i,s:a,v:s})),s=(s+c)%1;return o}Yt.mix=function(n,t,e){e=e===0?0:e||50;var i=Yt(n).toRgb(),a=Yt(t).toRgb(),s=e/100,o={r:(a.r-i.r)*s+i.r,g:(a.g-i.g)*s+i.g,b:(a.b-i.b)*s+i.b,a:(a.a-i.a)*s+i.a};return Yt(o)};Yt.readability=function(n,t){var e=Yt(n),i=Yt(t);return(Math.max(e.getLuminance(),i.getLuminance())+.05)/(Math.min(e.getLuminance(),i.getLuminance())+.05)};Yt.isReadable=function(n,t,e){var i=Yt.readability(n,t),a,s;switch(s=!1,a=fz(e),a.level+a.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};Yt.mostReadable=function(n,t,e){var i=null,a=0,s,o,c,d;e=e||{},o=e.includeFallbackColors,c=e.level,d=e.size;for(var f=0;f<t.length;f++)s=Yt.readability(n,t[f]),s>a&&(a=s,i=Yt(t[f]));return Yt.isReadable(n,i,{level:c,size:d})||!o?i:(e.includeFallbackColors=!1,Yt.mostReadable(n,["#fff","#000"],e))};var AS=Yt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},lz=Yt.hexNames=cz(AS);function cz(n){var t={};for(var e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function k8(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Nn(n,t){uz(n)&&(n="100%");var e=dz(n);return n=Math.min(t,Math.max(0,parseFloat(n))),e&&(n=parseInt(n*t,10)/100),Math.abs(n-t)<1e-6?1:n%t/parseFloat(t)}function u1(n){return Math.min(1,Math.max(0,n))}function Za(n){return parseInt(n,16)}function uz(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function dz(n){return typeof n=="string"&&n.indexOf("%")!=-1}function bs(n){return n.length==1?"0"+n:""+n}function Dg(n){return n<=1&&(n=n*100+"%"),n}function B8(n){return Math.round(parseFloat(n)*255).toString(16)}function E4(n){return Za(n)/255}var vs=function(){var n="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",e="(?:"+t+")|(?:"+n+")",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",a="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function el(n){return!!vs.CSS_UNIT.exec(n)}function hz(n){n=n.replace(qB,"").replace(VB,"").toLowerCase();var t=!1;if(AS[n])n=AS[n],t=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=vs.rgb.exec(n))?{r:e[1],g:e[2],b:e[3]}:(e=vs.rgba.exec(n))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=vs.hsl.exec(n))?{h:e[1],s:e[2],l:e[3]}:(e=vs.hsla.exec(n))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=vs.hsv.exec(n))?{h:e[1],s:e[2],v:e[3]}:(e=vs.hsva.exec(n))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=vs.hex8.exec(n))?{r:Za(e[1]),g:Za(e[2]),b:Za(e[3]),a:E4(e[4]),format:t?"name":"hex8"}:(e=vs.hex6.exec(n))?{r:Za(e[1]),g:Za(e[2]),b:Za(e[3]),format:t?"name":"hex"}:(e=vs.hex4.exec(n))?{r:Za(e[1]+""+e[1]),g:Za(e[2]+""+e[2]),b:Za(e[3]+""+e[3]),a:E4(e[4]+""+e[4]),format:t?"name":"hex8"}:(e=vs.hex3.exec(n))?{r:Za(e[1]+""+e[1]),g:Za(e[2]+""+e[2]),b:Za(e[3]+""+e[3]),format:t?"name":"hex"}:!1}function fz(n){var t,e;return n=n||{level:"AA",size:"small"},t=(n.level||"AA").toUpperCase(),e=(n.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:t,size:e}}var w4=function(t){var e=["r","g","b","a","h","s","l","v"],i=0,a=0;return UB(e,function(s){if(t[s]&&(i+=1,isNaN(t[s])||(a+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(t[s])&&(a+=1)}}),i===a?t:!1},Og=function(t,e){var i=t.hex?Yt(t.hex):Yt(t),a=i.toHsl(),s=i.toHsv(),o=i.toRgb(),c=i.toHex();a.s===0&&(a.h=e||0,s.h=e||0);var d=c==="000000"&&o.a===0;return{hsl:a,hex:d?"transparent":"#"+c,rgb:o,hsv:s,oldHue:t.h||e||a.h,source:t.source}},Cc=function(t){if(t==="transparent")return!0;var e=String(t).charAt(0)==="#"?1:0;return t.length!==4+e&&t.length<7+e&&Yt(t).isValid()},P_=function(t){if(!t)return"#fff";var e=Og(t);if(e.hex==="transparent")return"rgba(0,0,0,0.4)";var i=(e.rgb.r*299+e.rgb.g*587+e.rgb.b*114)/1e3;return i>=128?"#000":"#fff"},Mx=function(t,e){var i=t.replace("","");return Yt(e+" ("+i+")")._ok},Op=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},pz=function(){function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function gz(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function mz(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function vz(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var Ha=function(t){var e=function(i){vz(a,i);function a(s){gz(this,a);var o=mz(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return o.handleChange=function(c,d){var f=w4(c);if(f){var g=Og(c,c.h||o.state.oldHue);o.setState(g),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,g,d),o.props.onChange&&o.props.onChange(g,d)}},o.handleSwatchHover=function(c,d){var f=w4(c);if(f){var g=Og(c,c.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(g,d)}},o.state=Op({},Og(s.color,0)),o.debounce=L8(function(c,d,f){c(d,f)},100),o}return pz(a,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),q.createElement(t,Op({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,c){return Op({},Og(o.color,c.oldHue))}}]),a}(X.PureComponent||X.Component);return e.propTypes=Op({},t.propTypes),e.defaultProps=Op({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e},yz=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},bz=function(){function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function xz(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function C4(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function Sz(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _z=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){Sz(a,i);function a(){var s,o,c,d;xz(this,a);for(var f=arguments.length,g=Array(f),m=0;m<f;m++)g[m]=arguments[m];return d=(o=(c=C4(this,(s=a.__proto__||Object.getPrototypeOf(a)).call.apply(s,[this].concat(g))),c),c.state={focus:!1},c.handleFocus=function(){return c.setState({focus:!0})},c.handleBlur=function(){return c.setState({focus:!1})},o),C4(c,d)}return bz(a,[{key:"render",value:function(){return q.createElement(e,{onFocus:this.handleFocus,onBlur:this.handleBlur},q.createElement(t,yz({},this.props,this.state)))}}]),a}(q.Component)},T4=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Az=13,Ez=function(t){var e=t.color,i=t.style,a=t.onClick,s=a===void 0?function(){}:a,o=t.onHover,c=t.title,d=c===void 0?e:c,f=t.children,g=t.focus,m=t.focusStyle,v=m===void 0?{}:m,x=e==="transparent",S=ue({default:{swatch:T4({background:e,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},i,g?v:{})}}),_=function(R){return s(e,R)},C=function(R){return R.keyCode===Az&&s(e,R)},D=function(R){return o(e,R)},T={};return o&&(T.onMouseOver=D),q.createElement("div",T4({style:S.swatch,onClick:_,title:d,tabIndex:0,onKeyDown:C},T),f,x&&q.createElement($h,{borderRadius:S.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Ku=_z(Ez);var wz=function(t){var e=t.direction,i=ue({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:e==="vertical"});return q.createElement("div",{style:i.picker})},Cz=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},z8=function(t){var e=t.rgb,i=t.hsl,a=t.width,s=t.height,o=t.onChange,c=t.direction,d=t.style,f=t.renderers,g=t.pointer,m=t.className,v=m===void 0?"":m,x=ue({default:{picker:{position:"relative",width:a,height:s},alpha:{radius:"2px",style:d}}});return q.createElement("div",{style:x.picker,className:"alpha-picker "+v},q.createElement(C_,Cz({},x.alpha,{rgb:e,hsl:i,pointer:g,renderers:f,onChange:o,direction:c})))};z8.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:wz};Ha(z8);function F8(n,t){for(var e=-1,i=n==null?0:n.length,a=Array(i);++e<i;)a[e]=t(n[e],e,n);return a}var Tz="__lodash_hash_undefined__";function Rz(n){return this.__data__.set(n,Tz),this}function Mz(n){return this.__data__.has(n)}function Tv(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new fl;++t<e;)this.add(n[t])}Tv.prototype.add=Tv.prototype.push=Rz;Tv.prototype.has=Mz;function Dz(n,t){for(var e=-1,i=n==null?0:n.length;++e<i;)if(t(n[e],e,n))return!0;return!1}function Oz(n,t){return n.has(t)}var Nz=1,Lz=2;function I8(n,t,e,i,a,s){var o=e&Nz,c=n.length,d=t.length;if(c!=d&&!(o&&d>c))return!1;var f=s.get(n),g=s.get(t);if(f&&g)return f==t&&g==n;var m=-1,v=!0,x=e&Lz?new Tv:void 0;for(s.set(n,t),s.set(t,n);++m<c;){var S=n[m],_=t[m];if(i)var C=o?i(_,S,m,t,n,s):i(S,_,m,n,t,s);if(C!==void 0){if(C)continue;v=!1;break}if(x){if(!Dz(t,function(D,T){if(!Oz(x,T)&&(S===D||a(S,D,e,i,s)))return x.push(T)})){v=!1;break}}else if(!(S===_||a(S,_,e,i,s))){v=!1;break}}return s.delete(n),s.delete(t),v}function Pz(n){var t=-1,e=Array(n.size);return n.forEach(function(i,a){e[++t]=[a,i]}),e}function kz(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e}var Bz=1,zz=2,Fz="[object Boolean]",Iz="[object Date]",Hz="[object Error]",Gz="[object Map]",jz="[object Number]",Uz="[object RegExp]",qz="[object Set]",Vz="[object String]",Yz="[object Symbol]",Xz="[object ArrayBuffer]",Kz="[object DataView]",R4=Sc?Sc.prototype:void 0,Dx=R4?R4.valueOf:void 0;function Wz(n,t,e,i,a,s,o){switch(e){case Kz:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case Xz:return!(n.byteLength!=t.byteLength||!s(new Av(n),new Av(t)));case Fz:case Iz:case jz:return sm(+n,+t);case Hz:return n.name==t.name&&n.message==t.message;case Uz:case Vz:return n==t+"";case Gz:var c=Pz;case qz:var d=i&Bz;if(c||(c=kz),n.size!=t.size&&!d)return!1;var f=o.get(n);if(f)return f==t;i|=zz,o.set(n,t);var g=I8(c(n),c(t),i,a,s,o);return o.delete(n),g;case Yz:if(Dx)return Dx.call(n)==Dx.call(t)}return!1}function $z(n,t){for(var e=-1,i=t.length,a=n.length;++e<i;)n[a+e]=t[e];return n}function Qz(n,t,e){var i=t(n);return ar(n)?i:$z(i,e(n))}function Zz(n,t){for(var e=-1,i=n==null?0:n.length,a=0,s=[];++e<i;){var o=n[e];t(o,e,n)&&(s[a++]=o)}return s}function Jz(){return[]}var tF=Object.prototype,eF=tF.propertyIsEnumerable,M4=Object.getOwnPropertySymbols,nF=M4?function(n){return n==null?[]:(n=Object(n),Zz(M4(n),function(t){return eF.call(n,t)}))}:Jz;function D4(n){return Qz(n,L_,nF)}var iF=1,aF=Object.prototype,rF=aF.hasOwnProperty;function sF(n,t,e,i,a,s){var o=e&iF,c=D4(n),d=c.length,f=D4(t),g=f.length;if(d!=g&&!o)return!1;for(var m=d;m--;){var v=c[m];if(!(o?v in t:rF.call(t,v)))return!1}var x=s.get(n),S=s.get(t);if(x&&S)return x==t&&S==n;var _=!0;s.set(n,t),s.set(t,n);for(var C=o;++m<d;){v=c[m];var D=n[v],T=t[v];if(i)var w=o?i(T,D,v,t,n,s):i(D,T,v,n,t,s);if(!(w===void 0?D===T||a(D,T,e,i,s):w)){_=!1;break}C||(C=v=="constructor")}if(_&&!C){var R=n.constructor,O=t.constructor;R!=O&&"constructor"in n&&"constructor"in t&&!(typeof R=="function"&&R instanceof R&&typeof O=="function"&&O instanceof O)&&(_=!1)}return s.delete(n),s.delete(t),_}var ES=Xu(Es,"DataView"),wS=Xu(Es,"Promise"),CS=Xu(Es,"Set"),TS=Xu(Es,"WeakMap"),O4="[object Map]",oF="[object Object]",N4="[object Promise]",L4="[object Set]",P4="[object WeakMap]",k4="[object DataView]",lF=Yu(ES),cF=Yu(Vg),uF=Yu(wS),dF=Yu(CS),hF=Yu(TS),hc=Vu;(ES&&hc(new ES(new ArrayBuffer(1)))!=k4||Vg&&hc(new Vg)!=O4||wS&&hc(wS.resolve())!=N4||CS&&hc(new CS)!=L4||TS&&hc(new TS)!=P4)&&(hc=function(n){var t=Vu(n),e=t==oF?n.constructor:void 0,i=e?Yu(e):"";if(i)switch(i){case lF:return k4;case cF:return O4;case uF:return N4;case dF:return L4;case hF:return P4}return t});var fF=1,B4="[object Arguments]",z4="[object Array]",$0="[object Object]",pF=Object.prototype,F4=pF.hasOwnProperty;function gF(n,t,e,i,a,s){var o=ar(n),c=ar(t),d=o?z4:hc(n),f=c?z4:hc(t);d=d==B4?$0:d,f=f==B4?$0:f;var g=d==$0,m=f==$0,v=d==f;if(v&&wv(n)){if(!wv(t))return!1;o=!0,g=!1}if(v&&!g)return s||(s=new vo),o||O_(n)?I8(n,t,e,i,a,s):Wz(n,t,d,e,i,a,s);if(!(e&fF)){var x=g&&F4.call(n,"__wrapped__"),S=m&&F4.call(t,"__wrapped__");if(x||S){var _=x?n.value():n,C=S?t.value():t;return s||(s=new vo),a(_,C,e,i,s)}}return v?(s||(s=new vo),sF(n,t,e,i,a,s)):!1}function k_(n,t,e,i,a){return n===t?!0:n==null||t==null||!_c(n)&&!_c(t)?n!==n&&t!==t:gF(n,t,e,i,k_,a)}var mF=1,vF=2;function yF(n,t,e,i){var a=e.length,s=a;if(n==null)return!s;for(n=Object(n);a--;){var o=e[a];if(o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++a<s;){o=e[a];var c=o[0],d=n[c],f=o[1];if(o[2]){if(d===void 0&&!(c in n))return!1}else{var g=new vo,m;if(!(m===void 0?k_(f,d,mF|vF,i,g):m))return!1}}return!0}function H8(n){return n===n&&!Ir(n)}function bF(n){for(var t=L_(n),e=t.length;e--;){var i=t[e],a=n[i];t[e]=[i,a,H8(a)]}return t}function G8(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==void 0||n in Object(e))}}function xF(n){var t=bF(n);return t.length==1&&t[0][2]?G8(t[0][0],t[0][1]):function(e){return e===n||yF(e,n,t)}}var SF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_F=/^\w*$/;function B_(n,t){if(ar(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||l1(n)?!0:_F.test(n)||!SF.test(n)||t!=null&&n in Object(t)}var AF="Expected a function";function z_(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(AF);var e=function(){var i=arguments,a=t?t.apply(this,i):i[0],s=e.cache;if(s.has(a))return s.get(a);var o=n.apply(this,i);return e.cache=s.set(a,o)||s,o};return e.cache=new(z_.Cache||fl),e}z_.Cache=fl;var EF=500;function wF(n){var t=z_(n,function(i){return e.size===EF&&e.clear(),i}),e=t.cache;return t}var CF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TF=/\\(\\)?/g,RF=wF(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(CF,function(e,i,a,s){t.push(a?s.replace(TF,"$1"):i||e)}),t}),I4=Sc?Sc.prototype:void 0,H4=I4?I4.toString:void 0;function j8(n){if(typeof n=="string")return n;if(ar(n))return F8(n,j8)+"";if(l1(n))return H4?H4.call(n):"";var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function MF(n){return n==null?"":j8(n)}function U8(n,t){return ar(n)?n:B_(n,t)?[n]:RF(MF(n))}function d1(n){if(typeof n=="string"||l1(n))return n;var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function q8(n,t){t=U8(t,n);for(var e=0,i=t.length;n!=null&&e<i;)n=n[d1(t[e++])];return e&&e==i?n:void 0}function DF(n,t,e){var i=n==null?void 0:q8(n,t);return i===void 0?e:i}function OF(n,t){return n!=null&&t in Object(n)}function NF(n,t,e){t=U8(t,n);for(var i=-1,a=t.length,s=!1;++i<a;){var o=d1(t[i]);if(!(s=n!=null&&e(n,o)))break;n=n[o]}return s||++i!=a?s:(a=n==null?0:n.length,!!a&&D_(a)&&N_(o,a)&&(ar(n)||Ev(n)))}function LF(n,t){return n!=null&&NF(n,t,OF)}var PF=1,kF=2;function BF(n,t){return B_(n)&&H8(t)?G8(d1(n),t):function(e){var i=DF(e,n);return i===void 0&&i===t?LF(e,n):k_(t,i,PF|kF)}}function zF(n){return function(t){return t?.[n]}}function FF(n){return function(t){return q8(t,n)}}function IF(n){return B_(n)?zF(d1(n)):FF(n)}function HF(n){return typeof n=="function"?n:n==null?o1:typeof n=="object"?ar(n)?BF(n[0],n[1]):xF(n):IF(n)}function GF(n,t){var e=-1,i=Zh(n)?Array(n.length):[];return P8(n,function(a,s,o){i[++e]=t(a,s,o)}),i}function Wu(n,t){var e=ar(n)?F8:GF;return e(n,HF(t))}var jF=function(t){var e=t.colors,i=t.onClick,a=t.onSwatchHover,s=ue({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return q.createElement("div",{style:s.swatches},Wu(e,function(o){return q.createElement(Ku,{key:o,color:o,style:s.swatch,onClick:i,onHover:a,focusStyle:{boxShadow:"0 0 4px "+o}})}),q.createElement("div",{style:s.clear}))},F_=function(t){var e=t.onChange,i=t.onSwatchHover,a=t.hex,s=t.colors,o=t.width,c=t.triangle,d=t.styles,f=d===void 0?{}:d,g=t.className,m=g===void 0?"":g,v=a==="transparent",x=function(C,D){Cc(C)&&e({hex:C,source:"hex"},D)},S=ue(Ia({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:a,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:P_(a),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+a+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},f),{"hide-triangle":c==="hide"});return q.createElement("div",{style:S.card,className:"block-picker "+m},q.createElement("div",{style:S.triangle}),q.createElement("div",{style:S.head},v&&q.createElement($h,{borderRadius:"6px 6px 0 0"}),q.createElement("div",{style:S.label},a)),q.createElement("div",{style:S.body},q.createElement(jF,{colors:s,onClick:x,onSwatchHover:i}),q.createElement(qe,{style:{input:S.input},value:a,onChange:x})))};F_.propTypes={width:St.oneOfType([St.string,St.number]),colors:St.arrayOf(St.string),triangle:St.oneOf(["top","hide"]),styles:St.object};F_.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Ha(F_);var mh={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},vh={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},yh={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},bh={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},xh={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Sh={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},_h={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Ah={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Eh={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},Ng={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},wh={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},Ch={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},Th={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},Rh={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},Mh={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},Dh={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},Oh={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Nh={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},V8=function(t){var e=t.color,i=t.onClick,a=t.onSwatchHover,s=t.hover,o=t.active,c=t.circleSize,d=t.circleSpacing,f=ue({default:{swatch:{width:c,height:c,marginRight:d,marginBottom:d,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(c/2+1)+"px "+e,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+e}}},{hover:s,active:o});return q.createElement("div",{style:f.swatch},q.createElement(Ku,{style:f.Swatch,color:e,onClick:i,onHover:a,focusStyle:{boxShadow:f.Swatch.boxShadow+", 0 0 5px "+e}}))};V8.defaultProps={circleSize:28,circleSpacing:14};const UF=w_.handleHover(V8);var I_=function(t){var e=t.width,i=t.onChange,a=t.onSwatchHover,s=t.colors,o=t.hex,c=t.circleSize,d=t.styles,f=d===void 0?{}:d,g=t.circleSpacing,m=t.className,v=m===void 0?"":m,x=ue(Ia({default:{card:{width:e,display:"flex",flexWrap:"wrap",marginRight:-g,marginBottom:-g}}},f)),S=function(C,D){return i({hex:C,source:"hex"},D)};return q.createElement("div",{style:x.card,className:"circle-picker "+v},Wu(s,function(_){return q.createElement(UF,{key:_,color:_,onClick:S,onSwatchHover:a,active:o===_.toLowerCase(),circleSize:c,circleSpacing:g})}))};I_.propTypes={width:St.oneOfType([St.string,St.number]),circleSize:St.number,circleSpacing:St.number,styles:St.object};I_.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[mh[500],vh[500],yh[500],bh[500],xh[500],Sh[500],_h[500],Ah[500],Eh[500],Ng[500],wh[500],Ch[500],Th[500],Rh[500],Mh[500],Dh[500],Oh[500],Nh[500]],styles:{}};Ha(I_);function G4(n){return n===void 0}var Q0={},j4;function qF(){if(j4)return Q0;j4=1,Object.defineProperty(Q0,"__esModule",{value:!0});var n=Object.assign||function(o){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(o[f]=d[f])}return o},t=bo(),e=i(t);function i(o){return o&&o.__esModule?o:{default:o}}function a(o,c){var d={};for(var f in o)c.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(o,f)&&(d[f]=o[f]);return d}var s=24;return Q0.default=function(o){var c=o.fill,d=c===void 0?"currentColor":c,f=o.width,g=f===void 0?s:f,m=o.height,v=m===void 0?s:m,x=o.style,S=x===void 0?{}:x,_=a(o,["fill","width","height","style"]);return e.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:d,width:g,height:v},S)},_),e.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Q0}var VF=qF();const YF=rr(VF);var XF=function(){function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function KF(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function WF(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function $F(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var Y8=function(n){$F(t,n);function t(e){KF(this,t);var i=WF(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.toggleViews=function(){i.state.view==="hex"?i.setState({view:"rgb"}):i.state.view==="rgb"?i.setState({view:"hsl"}):i.state.view==="hsl"&&(i.props.hsl.a===1?i.setState({view:"hex"}):i.setState({view:"rgb"}))},i.handleChange=function(a,s){a.hex?Cc(a.hex)&&i.props.onChange({hex:a.hex,source:"hex"},s):a.r||a.g||a.b?i.props.onChange({r:a.r||i.props.rgb.r,g:a.g||i.props.rgb.g,b:a.b||i.props.rgb.b,source:"rgb"},s):a.a?(a.a<0?a.a=0:a.a>1&&(a.a=1),i.props.onChange({h:i.props.hsl.h,s:i.props.hsl.s,l:i.props.hsl.l,a:Math.round(a.a*100)/100,source:"rgb"},s)):(a.h||a.s||a.l)&&(typeof a.s=="string"&&a.s.includes("%")&&(a.s=a.s.replace("%","")),typeof a.l=="string"&&a.l.includes("%")&&(a.l=a.l.replace("%","")),a.s==1?a.s=.01:a.l==1&&(a.l=.01),i.props.onChange({h:a.h||i.props.hsl.h,s:Number(G4(a.s)?i.props.hsl.s:a.s),l:Number(G4(a.l)?i.props.hsl.l:a.l),source:"hsl"},s))},i.showHighlight=function(a){a.currentTarget.style.background="#eee"},i.hideHighlight=function(a){a.currentTarget.style.background="transparent"},e.hsl.a!==1&&e.view==="hex"?i.state={view:"rgb"}:i.state={view:e.view},i}return XF(t,[{key:"render",value:function(){var i=this,a=ue({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=q.createElement("div",{style:a.fields,className:"flexbox-fix"},q.createElement("div",{style:a.field},q.createElement(qe,{style:{input:a.input,label:a.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=q.createElement("div",{style:a.fields,className:"flexbox-fix"},q.createElement("div",{style:a.field},q.createElement(qe,{style:{input:a.input,label:a.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),q.createElement("div",{style:a.field},q.createElement(qe,{style:{input:a.input,label:a.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),q.createElement("div",{style:a.field},q.createElement(qe,{style:{input:a.input,label:a.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),q.createElement("div",{style:a.alpha},q.createElement(qe,{style:{input:a.input,label:a.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=q.createElement("div",{style:a.fields,className:"flexbox-fix"},q.createElement("div",{style:a.field},q.createElement(qe,{style:{input:a.input,label:a.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),q.createElement("div",{style:a.field},q.createElement(qe,{style:{input:a.input,label:a.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),q.createElement("div",{style:a.field},q.createElement(qe,{style:{input:a.input,label:a.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),q.createElement("div",{style:a.alpha},q.createElement(qe,{style:{input:a.input,label:a.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),q.createElement("div",{style:a.wrap,className:"flexbox-fix"},s,q.createElement("div",{style:a.toggle},q.createElement("div",{style:a.icon,onClick:this.toggleViews,ref:function(c){return i.icon=c}},q.createElement(YF,{style:a.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.hsl.a!==1&&a.view==="hex"?{view:"rgb"}:null}}]),t}(q.Component);Y8.defaultProps={view:"hex"};var U4=function(){var t=ue({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return q.createElement("div",{style:t.picker})},QF=function(){var t=ue({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return q.createElement("div",{style:t.picker})},H_=function(t){var e=t.width,i=t.onChange,a=t.disableAlpha,s=t.rgb,o=t.hsl,c=t.hsv,d=t.hex,f=t.renderers,g=t.styles,m=g===void 0?{}:g,v=t.className,x=v===void 0?"":v,S=t.defaultView,_=ue(Ia({default:{picker:{width:e,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},m),{disableAlpha:a});return q.createElement("div",{style:_.picker,className:"chrome-picker "+x},q.createElement("div",{style:_.saturation},q.createElement(c1,{style:_.Saturation,hsl:o,hsv:c,pointer:QF,onChange:i})),q.createElement("div",{style:_.body},q.createElement("div",{style:_.controls,className:"flexbox-fix"},q.createElement("div",{style:_.color},q.createElement("div",{style:_.swatch},q.createElement("div",{style:_.active}),q.createElement($h,{renderers:f}))),q.createElement("div",{style:_.toggles},q.createElement("div",{style:_.hue},q.createElement(Qh,{style:_.Hue,hsl:o,pointer:U4,onChange:i})),q.createElement("div",{style:_.alpha},q.createElement(C_,{style:_.Alpha,rgb:s,hsl:o,pointer:U4,renderers:f,onChange:i})))),q.createElement(Y8,{rgb:s,hsl:o,hex:d,view:S,onChange:i,disableAlpha:a})))};H_.propTypes={width:St.oneOfType([St.string,St.number]),disableAlpha:St.bool,styles:St.object,defaultView:St.oneOf(["hex","rgb","hsl"])};H_.defaultProps={width:225,disableAlpha:!1,styles:{}};Ha(H_);var ZF=function(t){var e=t.color,i=t.onClick,a=i===void 0?function(){}:i,s=t.onSwatchHover,o=t.active,c=ue({default:{color:{background:e,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:P_(e),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":e==="#FFFFFF",transparent:e==="transparent"});return q.createElement(Ku,{style:c.color,color:e,onClick:a,onHover:s,focusStyle:{boxShadow:"0 0 4px "+e}},q.createElement("div",{style:c.dot}))},JF=function(t){var e=t.hex,i=t.rgb,a=t.onChange,s=ue({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:e},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(d,f){d.r||d.g||d.b?a({r:d.r||i.r,g:d.g||i.g,b:d.b||i.b,source:"rgb"},f):a({hex:d.hex,source:"hex"},f)};return q.createElement("div",{style:s.fields,className:"flexbox-fix"},q.createElement("div",{style:s.active}),q.createElement(qe,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:e,onChange:o}),q.createElement(qe,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:i.r,onChange:o}),q.createElement(qe,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:i.g,onChange:o}),q.createElement(qe,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:i.b,onChange:o}))},G_=function(t){var e=t.onChange,i=t.onSwatchHover,a=t.colors,s=t.hex,o=t.rgb,c=t.styles,d=c===void 0?{}:c,f=t.className,g=f===void 0?"":f,m=ue(Ia({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},d)),v=function(S,_){S.hex?Cc(S.hex)&&e({hex:S.hex,source:"hex"},_):e(S,_)};return q.createElement(om,{style:m.Compact,styles:d},q.createElement("div",{style:m.compact,className:"compact-picker "+g},q.createElement("div",null,Wu(a,function(x){return q.createElement(ZF,{key:x,color:x,active:x.toLowerCase()===s,onClick:v,onSwatchHover:i})}),q.createElement("div",{style:m.clear})),q.createElement(JF,{hex:s,rgb:o,onChange:v})))};G_.propTypes={colors:St.arrayOf(St.string),styles:St.object};G_.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Ha(G_);var tI=function(t){var e=t.hover,i=t.color,a=t.onClick,s=t.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},c=ue({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:e});return q.createElement("div",{style:c.swatch},q.createElement(Ku,{color:i,onClick:a,onHover:s,focusStyle:o}))};const eI=w_.handleHover(tI);var j_=function(t){var e=t.width,i=t.colors,a=t.onChange,s=t.onSwatchHover,o=t.triangle,c=t.styles,d=c===void 0?{}:c,f=t.className,g=f===void 0?"":f,m=ue(Ia({default:{card:{width:e,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},d),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),v=function(S,_){return a({hex:S,source:"hex"},_)};return q.createElement("div",{style:m.card,className:"github-picker "+g},q.createElement("div",{style:m.triangleShadow}),q.createElement("div",{style:m.triangle}),Wu(i,function(x){return q.createElement(eI,{color:x,key:x,onClick:v,onSwatchHover:s})}))};j_.propTypes={width:St.oneOfType([St.string,St.number]),colors:St.arrayOf(St.string),triangle:St.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:St.object};j_.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Ha(j_);var nI=function(t){var e=t.direction,i=ue({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:e==="vertical"});return q.createElement("div",{style:i.picker})},iI=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},U_=function(t){var e=t.width,i=t.height,a=t.onChange,s=t.hsl,o=t.direction,c=t.pointer,d=t.styles,f=d===void 0?{}:d,g=t.className,m=g===void 0?"":g,v=ue(Ia({default:{picker:{position:"relative",width:e,height:i},hue:{radius:"2px"}}},f)),x=function(_){return a({a:1,h:_.h,l:.5,s:1})};return q.createElement("div",{style:v.picker,className:"hue-picker "+m},q.createElement(Qh,iI({},v.hue,{hsl:s,pointer:c,onChange:x,direction:o})))};U_.propTypes={styles:St.object};U_.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:nI,styles:{}};Ha(U_);var aI=function(t){var e=t.onChange,i=t.hex,a=t.rgb,s=t.styles,o=s===void 0?{}:s,c=t.className,d=c===void 0?"":c,f=ue(Ia({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+i,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),g=function(v,x){v.hex?Cc(v.hex)&&e({hex:v.hex,source:"hex"},x):(v.r||v.g||v.b)&&e({r:v.r||a.r,g:v.g||a.g,b:v.b||a.b,source:"rgb"},x)};return q.createElement(om,{styles:o},q.createElement("div",{style:f.material,className:"material-picker "+d},q.createElement(qe,{style:{wrap:f.HEXwrap,input:f.HEXinput,label:f.HEXlabel},label:"hex",value:i,onChange:g}),q.createElement("div",{style:f.split,className:"flexbox-fix"},q.createElement("div",{style:f.third},q.createElement(qe,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"r",value:a.r,onChange:g})),q.createElement("div",{style:f.third},q.createElement(qe,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"g",value:a.g,onChange:g})),q.createElement("div",{style:f.third},q.createElement(qe,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"b",value:a.b,onChange:g})))))};Ha(aI);var rI=function(t){var e=t.onChange,i=t.rgb,a=t.hsv,s=t.hex,o=ue({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),c=function(f,g){f["#"]?Cc(f["#"])&&e({hex:f["#"],source:"hex"},g):f.r||f.g||f.b?e({r:f.r||i.r,g:f.g||i.g,b:f.b||i.b,source:"rgb"},g):(f.h||f.s||f.v)&&e({h:f.h||a.h,s:f.s||a.s,v:f.v||a.v,source:"hsv"},g)};return q.createElement("div",{style:o.fields},q.createElement(qe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(a.h),onChange:c}),q.createElement(qe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(a.s*100),onChange:c}),q.createElement(qe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(a.v*100),onChange:c}),q.createElement("div",{style:o.divider}),q.createElement(qe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:i.r,onChange:c}),q.createElement(qe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:i.g,onChange:c}),q.createElement(qe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:i.b,onChange:c}),q.createElement("div",{style:o.divider}),q.createElement(qe,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:s.replace("#",""),onChange:c}),q.createElement("div",{style:o.fieldSymbols},q.createElement("div",{style:o.symbol},""),q.createElement("div",{style:o.symbol},"%"),q.createElement("div",{style:o.symbol},"%")))},sI=function(t){var e=t.hsl,i=ue({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":e.l>.5});return q.createElement("div",{style:i.picker})},oI=function(){var t=ue({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return q.createElement("div",{style:t.pointer},q.createElement("div",{style:t.left},q.createElement("div",{style:t.leftInside})),q.createElement("div",{style:t.right},q.createElement("div",{style:t.rightInside})))},q4=function(t){var e=t.onClick,i=t.label,a=t.children,s=t.active,o=ue({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return q.createElement("div",{style:o.button,onClick:e},i||a)},lI=function(t){var e=t.rgb,i=t.currentColor,a=ue({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+e.r+","+e.g+", "+e.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:i,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return q.createElement("div",null,q.createElement("div",{style:a.label},"new"),q.createElement("div",{style:a.swatches},q.createElement("div",{style:a.new}),q.createElement("div",{style:a.current})),q.createElement("div",{style:a.label},"current"))},cI=function(){function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function uI(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function dI(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function hI(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var q_=function(n){hI(t,n);function t(e){uI(this,t);var i=dI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.state={currentColor:e.hex},i}return cI(t,[{key:"render",value:function(){var i=this.props,a=i.styles,s=a===void 0?{}:a,o=i.className,c=o===void 0?"":o,d=ue(Ia({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return q.createElement("div",{style:d.picker,className:"photoshop-picker "+c},q.createElement("div",{style:d.head},this.props.header),q.createElement("div",{style:d.body,className:"flexbox-fix"},q.createElement("div",{style:d.saturation},q.createElement(c1,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:sI,onChange:this.props.onChange})),q.createElement("div",{style:d.hue},q.createElement(Qh,{direction:"vertical",hsl:this.props.hsl,pointer:oI,onChange:this.props.onChange})),q.createElement("div",{style:d.controls},q.createElement("div",{style:d.top,className:"flexbox-fix"},q.createElement("div",{style:d.previews},q.createElement(lI,{rgb:this.props.rgb,currentColor:this.state.currentColor})),q.createElement("div",{style:d.actions},q.createElement(q4,{label:"OK",onClick:this.props.onAccept,active:!0}),q.createElement(q4,{label:"Cancel",onClick:this.props.onCancel}),q.createElement(rI,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(q.Component);q_.propTypes={header:St.string,styles:St.object};q_.defaultProps={header:"Color Picker",styles:{}};Ha(q_);var fI=function(t){var e=t.onChange,i=t.rgb,a=t.hsl,s=t.hex,o=t.disableAlpha,c=ue({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),d=function(g,m){g.hex?Cc(g.hex)&&e({hex:g.hex,source:"hex"},m):g.r||g.g||g.b?e({r:g.r||i.r,g:g.g||i.g,b:g.b||i.b,a:i.a,source:"rgb"},m):g.a&&(g.a<0?g.a=0:g.a>100&&(g.a=100),g.a/=100,e({h:a.h,s:a.s,l:a.l,a:g.a,source:"rgb"},m))};return q.createElement("div",{style:c.fields,className:"flexbox-fix"},q.createElement("div",{style:c.double},q.createElement(qe,{style:{input:c.input,label:c.label},label:"hex",value:s.replace("#",""),onChange:d})),q.createElement("div",{style:c.single},q.createElement(qe,{style:{input:c.input,label:c.label},label:"r",value:i.r,onChange:d,dragLabel:"true",dragMax:"255"})),q.createElement("div",{style:c.single},q.createElement(qe,{style:{input:c.input,label:c.label},label:"g",value:i.g,onChange:d,dragLabel:"true",dragMax:"255"})),q.createElement("div",{style:c.single},q.createElement(qe,{style:{input:c.input,label:c.label},label:"b",value:i.b,onChange:d,dragLabel:"true",dragMax:"255"})),q.createElement("div",{style:c.alpha},q.createElement(qe,{style:{input:c.input,label:c.label},label:"a",value:Math.round(i.a*100),onChange:d,dragLabel:"true",dragMax:"100"})))},pI=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},X8=function(t){var e=t.colors,i=t.onClick,a=i===void 0?function(){}:i,s=t.onSwatchHover,o=ue({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!e||!e.length}),c=function(f,g){a({hex:f,source:"hex"},g)};return q.createElement("div",{style:o.colors,className:"flexbox-fix"},e.map(function(d){var f=typeof d=="string"?{color:d}:d,g=""+f.color+(f.title||"");return q.createElement("div",{key:g,style:o.swatchWrap},q.createElement(Ku,pI({},f,{style:o.swatch,onClick:c,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+f.color}})))}))};X8.propTypes={colors:St.arrayOf(St.oneOfType([St.string,St.shape({color:St.string,title:St.string})])).isRequired};var gI=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},V_=function(t){var e=t.width,i=t.rgb,a=t.hex,s=t.hsv,o=t.hsl,c=t.onChange,d=t.onSwatchHover,f=t.disableAlpha,g=t.presetColors,m=t.renderers,v=t.styles,x=v===void 0?{}:v,S=t.className,_=S===void 0?"":S,C=ue(Ia({default:gI({picker:{width:e,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+i.r+","+i.g+","+i.b+","+i.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},x),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},x),{disableAlpha:f});return q.createElement("div",{style:C.picker,className:"sketch-picker "+_},q.createElement("div",{style:C.saturation},q.createElement(c1,{style:C.Saturation,hsl:o,hsv:s,onChange:c})),q.createElement("div",{style:C.controls,className:"flexbox-fix"},q.createElement("div",{style:C.sliders},q.createElement("div",{style:C.hue},q.createElement(Qh,{style:C.Hue,hsl:o,onChange:c})),q.createElement("div",{style:C.alpha},q.createElement(C_,{style:C.Alpha,rgb:i,hsl:o,renderers:m,onChange:c}))),q.createElement("div",{style:C.color},q.createElement($h,null),q.createElement("div",{style:C.activeColor}))),q.createElement(fI,{rgb:i,hsl:o,hex:a,onChange:c,disableAlpha:f}),q.createElement(X8,{colors:g,onClick:c,onSwatchHover:d}))};V_.propTypes={disableAlpha:St.bool,width:St.oneOfType([St.string,St.number]),styles:St.object};V_.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const mI=Ha(V_);var Np=function(t){var e=t.hsl,i=t.offset,a=t.onClick,s=a===void 0?function(){}:a,o=t.active,c=t.first,d=t.last,f=ue({default:{swatch:{height:"12px",background:"hsl("+e.h+", 50%, "+i*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:c,last:d}),g=function(v){return s({h:e.h,s:.5,l:i,source:"hsl"},v)};return q.createElement("div",{style:f.swatch,onClick:g})},vI=function(t){var e=t.onClick,i=t.hsl,a=ue({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return q.createElement("div",{style:a.swatches},q.createElement("div",{style:a.swatch},q.createElement(Np,{hsl:i,offset:".80",active:Math.abs(i.l-.8)<s&&Math.abs(i.s-.5)<s,onClick:e,first:!0})),q.createElement("div",{style:a.swatch},q.createElement(Np,{hsl:i,offset:".65",active:Math.abs(i.l-.65)<s&&Math.abs(i.s-.5)<s,onClick:e})),q.createElement("div",{style:a.swatch},q.createElement(Np,{hsl:i,offset:".50",active:Math.abs(i.l-.5)<s&&Math.abs(i.s-.5)<s,onClick:e})),q.createElement("div",{style:a.swatch},q.createElement(Np,{hsl:i,offset:".35",active:Math.abs(i.l-.35)<s&&Math.abs(i.s-.5)<s,onClick:e})),q.createElement("div",{style:a.swatch},q.createElement(Np,{hsl:i,offset:".20",active:Math.abs(i.l-.2)<s&&Math.abs(i.s-.5)<s,onClick:e,last:!0})),q.createElement("div",{style:a.clear}))},yI=function(){var t=ue({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return q.createElement("div",{style:t.picker})},Y_=function(t){var e=t.hsl,i=t.onChange,a=t.pointer,s=t.styles,o=s===void 0?{}:s,c=t.className,d=c===void 0?"":c,f=ue(Ia({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return q.createElement("div",{style:f.wrap||{},className:"slider-picker "+d},q.createElement("div",{style:f.hue},q.createElement(Qh,{style:f.Hue,hsl:e,pointer:a,onChange:i})),q.createElement("div",{style:f.swatches},q.createElement(vI,{hsl:e,onClick:i})))};Y_.propTypes={styles:St.object};Y_.defaultProps={pointer:yI,styles:{}};Ha(Y_);var Z0={},V4;function bI(){if(V4)return Z0;V4=1,Object.defineProperty(Z0,"__esModule",{value:!0});var n=Object.assign||function(o){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(o[f]=d[f])}return o},t=bo(),e=i(t);function i(o){return o&&o.__esModule?o:{default:o}}function a(o,c){var d={};for(var f in o)c.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(o,f)&&(d[f]=o[f]);return d}var s=24;return Z0.default=function(o){var c=o.fill,d=c===void 0?"currentColor":c,f=o.width,g=f===void 0?s:f,m=o.height,v=m===void 0?s:m,x=o.style,S=x===void 0?{}:x,_=a(o,["fill","width","height","style"]);return e.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:d,width:g,height:v},S)},_),e.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Z0}var xI=bI();const SI=rr(xI);var _I=function(t){var e=t.color,i=t.onClick,a=i===void 0?function(){}:i,s=t.onSwatchHover,o=t.first,c=t.last,d=t.active,f=ue({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:e,marginBottom:"1px"},check:{color:P_(e),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:c,active:d,"color-#FFFFFF":e==="#FFFFFF",transparent:e==="transparent"});return q.createElement(Ku,{color:e,style:f.color,onClick:a,onHover:s,focusStyle:{boxShadow:"0 0 4px "+e}},q.createElement("div",{style:f.check},q.createElement(SI,null)))},AI=function(t){var e=t.onClick,i=t.onSwatchHover,a=t.group,s=t.active,o=ue({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return q.createElement("div",{style:o.group},Wu(a,function(c,d){return q.createElement(_I,{key:c,color:c,active:c.toLowerCase()===s,first:d===0,last:d===a.length-1,onClick:e,onSwatchHover:i})}))},X_=function(t){var e=t.width,i=t.height,a=t.onChange,s=t.onSwatchHover,o=t.colors,c=t.hex,d=t.styles,f=d===void 0?{}:d,g=t.className,m=g===void 0?"":g,v=ue(Ia({default:{picker:{width:e,height:i},overflow:{height:i,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},f)),x=function(_,C){return a({hex:_,source:"hex"},C)};return q.createElement("div",{style:v.picker,className:"swatches-picker "+m},q.createElement(om,null,q.createElement("div",{style:v.overflow},q.createElement("div",{style:v.body},Wu(o,function(S){return q.createElement(AI,{key:S.toString(),group:S,active:c,onClick:x,onSwatchHover:s})}),q.createElement("div",{style:v.clear})))))};X_.propTypes={width:St.oneOfType([St.string,St.number]),height:St.oneOfType([St.string,St.number]),colors:St.arrayOf(St.arrayOf(St.string)),styles:St.object};X_.defaultProps={width:320,height:240,colors:[[mh[900],mh[700],mh[500],mh[300],mh[100]],[vh[900],vh[700],vh[500],vh[300],vh[100]],[yh[900],yh[700],yh[500],yh[300],yh[100]],[bh[900],bh[700],bh[500],bh[300],bh[100]],[xh[900],xh[700],xh[500],xh[300],xh[100]],[Sh[900],Sh[700],Sh[500],Sh[300],Sh[100]],[_h[900],_h[700],_h[500],_h[300],_h[100]],[Ah[900],Ah[700],Ah[500],Ah[300],Ah[100]],[Eh[900],Eh[700],Eh[500],Eh[300],Eh[100]],["#194D33",Ng[700],Ng[500],Ng[300],Ng[100]],[wh[900],wh[700],wh[500],wh[300],wh[100]],[Ch[900],Ch[700],Ch[500],Ch[300],Ch[100]],[Th[900],Th[700],Th[500],Th[300],Th[100]],[Rh[900],Rh[700],Rh[500],Rh[300],Rh[100]],[Mh[900],Mh[700],Mh[500],Mh[300],Mh[100]],[Dh[900],Dh[700],Dh[500],Dh[300],Dh[100]],[Oh[900],Oh[700],Oh[500],Oh[300],Oh[100]],[Nh[900],Nh[700],Nh[500],Nh[300],Nh[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Ha(X_);var K_=function(t){var e=t.onChange,i=t.onSwatchHover,a=t.hex,s=t.colors,o=t.width,c=t.triangle,d=t.styles,f=d===void 0?{}:d,g=t.className,m=g===void 0?"":g,v=ue(Ia({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},f),{"hide-triangle":c==="hide","top-left-triangle":c==="top-left","top-right-triangle":c==="top-right"}),x=function(_,C){Cc(_)&&e({hex:_,source:"hex"},C)};return q.createElement("div",{style:v.card,className:"twitter-picker "+m},q.createElement("div",{style:v.triangleShadow}),q.createElement("div",{style:v.triangle}),q.createElement("div",{style:v.body},Wu(s,function(S,_){return q.createElement(Ku,{key:_,color:S,hex:S,style:v.swatch,onClick:x,onHover:i,focusStyle:{boxShadow:"0 0 4px "+S}})}),q.createElement("div",{style:v.hash},"#"),q.createElement(qe,{label:null,style:{input:v.input},value:a.replace("#",""),onChange:x}),q.createElement("div",{style:v.clear})))};K_.propTypes={width:St.oneOfType([St.string,St.number]),triangle:St.oneOf(["hide","top-left","top-right"]),colors:St.arrayOf(St.string),styles:St.object};K_.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Ha(K_);var W_=function(t){var e=ue({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return q.createElement("div",{style:e.picker})};W_.propTypes={hsl:St.shape({h:St.number,s:St.number,l:St.number,a:St.number})};W_.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var $_=function(t){var e=ue({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return q.createElement("div",{style:e.picker})};$_.propTypes={hsl:St.shape({h:St.number,s:St.number,l:St.number,a:St.number})};$_.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var EI=function(t){var e=t.onChange,i=t.rgb,a=t.hsl,s=t.hex,o=t.hsv,c=function(x,S){if(x.hex)Cc(x.hex)&&e({hex:x.hex,source:"hex"},S);else if(x.rgb){var _=x.rgb.split(",");Mx(x.rgb,"rgb")&&e({r:_[0],g:_[1],b:_[2],a:1,source:"rgb"},S)}else if(x.hsv){var C=x.hsv.split(",");Mx(x.hsv,"hsv")&&(C[2]=C[2].replace("%",""),C[1]=C[1].replace("%",""),C[0]=C[0].replace("",""),C[1]==1?C[1]=.01:C[2]==1&&(C[2]=.01),e({h:Number(C[0]),s:Number(C[1]),v:Number(C[2]),source:"hsv"},S))}else if(x.hsl){var D=x.hsl.split(",");Mx(x.hsl,"hsl")&&(D[2]=D[2].replace("%",""),D[1]=D[1].replace("%",""),D[0]=D[0].replace("",""),m[1]==1?m[1]=.01:m[2]==1&&(m[2]=.01),e({h:Number(D[0]),s:Number(D[1]),v:Number(D[2]),source:"hsl"},S))}},d=ue({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),f=i.r+", "+i.g+", "+i.b,g=Math.round(a.h)+", "+Math.round(a.s*100)+"%, "+Math.round(a.l*100)+"%",m=Math.round(o.h)+", "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return q.createElement("div",{style:d.wrap,className:"flexbox-fix"},q.createElement("div",{style:d.fields},q.createElement("div",{style:d.double},q.createElement(qe,{style:{input:d.input,label:d.label},label:"hex",value:s,onChange:c})),q.createElement("div",{style:d.column},q.createElement("div",{style:d.single},q.createElement(qe,{style:{input:d.input2,label:d.label2},label:"rgb",value:f,onChange:c})),q.createElement("div",{style:d.single},q.createElement(qe,{style:{input:d.input2,label:d.label2},label:"hsv",value:m,onChange:c})),q.createElement("div",{style:d.single},q.createElement(qe,{style:{input:d.input2,label:d.label2},label:"hsl",value:g,onChange:c})))))},Q_=function(t){var e=t.width,i=t.onChange,a=t.rgb,s=t.hsl,o=t.hsv,c=t.hex,d=t.header,f=t.styles,g=f===void 0?{}:f,m=t.className,v=m===void 0?"":m,x=ue(Ia({default:{picker:{width:e,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+a.r+", "+a.g+", "+a.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},g));return q.createElement("div",{style:x.picker,className:"google-picker "+v},q.createElement("div",{style:x.head},d),q.createElement("div",{style:x.swatch}),q.createElement("div",{style:x.saturation},q.createElement(c1,{hsl:s,hsv:o,pointer:W_,onChange:i})),q.createElement("div",{style:x.body},q.createElement("div",{style:x.controls,className:"flexbox-fix"},q.createElement("div",{style:x.hue},q.createElement(Qh,{style:x.Hue,hsl:s,radius:"4px",pointer:$_,onChange:i}))),q.createElement(EI,{rgb:a,hsl:s,hex:c,hsv:o,onChange:i})))};Q_.propTypes={width:St.oneOfType([St.string,St.number]),styles:St.object,header:St.string};Q_.defaultProps={width:652,styles:{},header:"Color picker"};Ha(Q_);var Ox={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Y4;function wI(){return Y4||(Y4=1,function(n){(function(){var t={}.hasOwnProperty;function e(){for(var s="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(s=a(s,i(c)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return e.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var c in s)t.call(s,c)&&s[c]&&(o=a(o,c));return o}function a(s,o){return o?s?s+" "+o:s+o:s}n.exports?(e.default=e,n.exports=e):window.classNames=e})()}(Ox)),Ox.exports}var CI=wI();const xa=rr(CI);function TI(n){let t=n.replace("#","");t.length===3&&(t=t.split("").map(s=>s+s).join(""));const e=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16);return(e*299+i*587+a*114)/1e3>=128?"black":"white"}function Rv({color:n="#000",onChange:t,icon:e,disabled:i=!1,size:a=28,label:s="",pickerPlacement:o="bottom",className:c}){const[d,f]=X.useState(!1),g=X.useRef(null),[m,v]=X.useState({top:0,left:0});X.useEffect(()=>{if(d&&g.current){const S=g.current.getBoundingClientRect(),_=225;let C=S.left+window.scrollX;C+_>window.innerWidth-8&&(C=Math.max(8,window.innerWidth-_-30)),v({top:o==="top"?S.top+window.scrollY-320:S.top+S.height+window.scrollY+8,left:C})}},[d,o]);const x=TI(n);return J.jsxs(J.Fragment,{children:[J.jsxs("button",{type:"button",ref:g,className:xa("relative flex items-center justify-center rounded-full shadow transition-all border",{"opacity-60 cursor-not-allowed":i},c),style:{width:a,height:a,background:n,borderColor:x==="white"?"#ddd":"#222"},onClick:()=>!i&&f(S=>!S),disabled:i,title:s,children:[J.jsx(e,{size:a*.6,color:x}),J.jsx("span",{className:"absolute inset-0 rounded-full pointer-events-none border-2",style:{borderColor:x==="white"?"#bbb":"#fff",opacity:.4}})]}),d&&im.createPortal(J.jsx("div",{className:"z-[9999] absolute",style:{top:m.top,left:m.left},onMouseDown:S=>S.stopPropagation(),onClick:S=>S.stopPropagation(),children:J.jsxs("div",{className:"bg-white p-2 rounded-xl shadow-2xl border",style:{minWidth:210,position:"relative"},children:[J.jsx(mI,{color:n,onChange:S=>t?.(S.hex),disableAlpha:!0}),J.jsx("button",{className:"absolute top-0 right-1 text-gray-500 hover:text-black text-xs",onClick:()=>f(!1),children:J.jsx(l_,{size:20})})]})}),document.body)]})}var J0={},X4;function RI(){if(X4)return J0;X4=1,J0.match=s,J0.parse=o;var n=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,e=/^(?:(min|max)-)?(.+)/,i=/(em|rem|px|cm|mm|in|pt|pc)?$/,a=/(dpi|dpcm|dppx)?$/;function s(g,m){return o(g).some(function(v){var x=v.inverse,S=v.type==="all"||m.type===v.type;if(S&&x||!(S||x))return!1;var _=v.expressions.every(function(C){var D=C.feature,T=C.modifier,w=C.value,R=m[D];if(!R)return!1;switch(D){case"orientation":case"scan":return R.toLowerCase()===w.toLowerCase();case"width":case"height":case"device-width":case"device-height":w=f(w),R=f(R);break;case"resolution":w=d(w),R=d(R);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":w=c(w),R=c(R);break;case"grid":case"color":case"color-index":case"monochrome":w=parseInt(w,10)||1,R=parseInt(R,10)||0;break}switch(T){case"min":return R>=w;case"max":return R<=w;default:return R===w}});return _&&!x||!_&&x})}function o(g){return g.split(",").map(function(m){m=m.trim();var v=m.match(n),x=v[1],S=v[2],_=v[3]||"",C={};return C.inverse=!!x&&x.toLowerCase()==="not",C.type=S?S.toLowerCase():"all",_=_.match(/\([^\)]+\)/g)||[],C.expressions=_.map(function(D){var T=D.match(t),w=T[1].toLowerCase().match(e);return{modifier:w[1],feature:w[2],value:T[2]}}),C})}function c(g){var m=Number(g),v;return m||(v=g.match(/^(\d+)\s*\/\s*(\d+)$/),m=v[1]/v[2]),m}function d(g){var m=parseFloat(g),v=String(g).match(a)[1];switch(v){case"dpcm":return m/2.54;case"dppx":return m*96;default:return m}}function f(g){var m=parseFloat(g),v=String(g).match(i)[1];switch(v){case"em":return m*16;case"rem":return m*16;case"cm":return m*96/2.54;case"mm":return m*96/2.54/10;case"in":return m*96;case"pt":return m*72;case"pc":return m*72/12;default:return m}}return J0}var Nx,K4;function MI(){if(K4)return Nx;K4=1;var n=RI().match,t=typeof window<"u"?window.matchMedia:null;function e(a,s,o){var c=this,d;t&&!o&&(d=t.call(window,a)),d?(this.matches=d.matches,this.media=d.media,d.addListener(m)):(this.matches=n(a,s),this.media=a),this.addListener=f,this.removeListener=g,this.dispose=v;function f(x){d&&d.addListener(x)}function g(x){d&&d.removeListener(x)}function m(x){c.matches=x.matches,c.media=x.media}function v(){d&&d.removeListener(m)}}function i(a,s,o){return new e(a,s,o)}return Nx=i,Nx}var DI=MI();const OI=rr(DI);var NI=/[A-Z]/g,LI=/^ms-/,Lx={};function PI(n){return"-"+n.toLowerCase()}function K8(n){if(Lx.hasOwnProperty(n))return Lx[n];var t=n.replace(NI,PI);return Lx[n]=LI.test(t)?"-"+t:t}function kI(n,t){if(n===t)return!0;if(!n||!t)return!1;const e=Object.keys(n),i=Object.keys(t),a=e.length;if(i.length!==a)return!1;for(let s=0;s<a;s++){const o=e[s];if(n[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}const va=St.oneOfType([St.string,St.number]),W8={all:St.bool,grid:St.bool,aural:St.bool,braille:St.bool,handheld:St.bool,print:St.bool,projection:St.bool,screen:St.bool,tty:St.bool,tv:St.bool,embossed:St.bool},BI={orientation:St.oneOf(["portrait","landscape"]),scan:St.oneOf(["progressive","interlace"]),aspectRatio:St.string,deviceAspectRatio:St.string,height:va,deviceHeight:va,width:va,deviceWidth:va,color:St.bool,colorIndex:St.bool,monochrome:St.bool,resolution:va,type:Object.keys(W8)},{type:QZ,...zI}=BI,FI={minAspectRatio:St.string,maxAspectRatio:St.string,minDeviceAspectRatio:St.string,maxDeviceAspectRatio:St.string,minHeight:va,maxHeight:va,minDeviceHeight:va,maxDeviceHeight:va,minWidth:va,maxWidth:va,minDeviceWidth:va,maxDeviceWidth:va,minColor:St.number,maxColor:St.number,minColorIndex:St.number,maxColorIndex:St.number,minMonochrome:St.number,maxMonochrome:St.number,minResolution:va,maxResolution:va,...zI},II={...W8,...FI};var HI={all:II};const GI=n=>`not ${n}`,jI=(n,t)=>{const e=K8(n);return typeof t=="number"&&(t=`${t}px`),t===!0?e:t===!1?GI(e):`(${e}: ${t})`},UI=n=>n.join(" and "),qI=n=>{const t=[];return Object.keys(HI.all).forEach(e=>{const i=n[e];i!=null&&t.push(jI(e,i))}),UI(t)},VI=X.createContext(void 0),YI=n=>n.query||qI(n),W4=n=>n?Object.keys(n).reduce((e,i)=>(e[K8(i)]=n[i],e),{}):void 0,$8=()=>{const n=X.useRef(!1);return X.useEffect(()=>{n.current=!0},[]),n.current},XI=n=>{const t=X.useContext(VI),e=()=>W4(n)||W4(t),[i,a]=X.useState(e);return X.useEffect(()=>{const s=e();kI(i,s)||a(s)},[n,t]),i},KI=n=>{const t=()=>YI(n),[e,i]=X.useState(t);return X.useEffect(()=>{const a=t();e!==a&&i(a)},[n]),e},WI=(n,t)=>{const e=()=>OI(n,t||{},!!t),[i,a]=X.useState(e),s=$8();return X.useEffect(()=>{if(s){const o=e();return a(o),()=>{o&&o.dispose()}}},[n,t]),i},$I=n=>{const[t,e]=X.useState(n.matches);return X.useEffect(()=>{const i=a=>{e(a.matches)};return n.addListener(i),e(n.matches),()=>{n.removeListener(i)}},[n]),t},Z_=(n,t,e)=>{const i=XI(t),a=KI(n);if(!a)throw new Error("Invalid or missing MediaQuery!");const s=WI(a,i),o=$I(s);return $8(),X.useEffect(()=>{},[o]),X.useEffect(()=>()=>{s&&s.dispose()},[]),o},QI=[{name:"select",icon:PD,title:"Seleccionar (V)"},{name:"hand",icon:xD,title:"Mano (Pan)"},{name:"free",icon:zD,title:"Dibujo libre"},{name:"line",icon:VD,title:"Lnea (L)"},{name:"arrow",icon:KM,title:"Flecha (A)"},{name:"rect",icon:XD,title:"Rectngulo (R)"},{name:"circle",icon:sD,title:"Crculo (C)"},{name:"text",icon:$D,title:"Texto (T)"},{name:"image",icon:s_,title:"Imagen (I)"},{name:"marker",icon:ND,title:"Marcador (M)"}];function ZI(){const{strokeColor:n,fillColor:t,backgroundColor:e,setBackgroundColor:i,tool:a,setTool:s,clipboardShape:o}=It(),c=It(L=>L.toggleLayersPanel),d=It(L=>L.layersPanelVisible),f=It(L=>L.selectedShapeId),g=It(L=>L.copyShape),m=It(L=>L.pasteShape),v=It(L=>L.shapes),x=It(L=>L.updateShape),S=It(L=>L.setStrokeColor),_=It(L=>L.setFillColor),C=v.find(L=>L.id===f),D=C?.props?.stroke??n,T=C?.props?.fill??t,w=L=>{C?x(C.id,{stroke:L}):S(L)},R=L=>{C?x(C.id,{fill:L}):_(L)},O=Z_({maxWidth:768});return J.jsx("div",{className:xa("fixed z-50 top-4 left-1/2 -translate-x-1/2 transition-all duration-200",{"w-[95vw]":O,"w-auto":!O}),style:{maxWidth:O?"100vw":"100%"},children:J.jsxs("nav",{className:xa("flex items-center gap-2 overflow-x-auto p-2 bg-blue-900/50 backdrop-blur-lg rounded-xl shadow-2xl",{"w-full":O,"w-auto":!O}),style:{maxWidth:O?"100vw":"unset",minWidth:O?220:0},children:[J.jsx("button",{onClick:()=>{c(),s("select")},title:d?"Ocultar capas (Shift+L)":"Mostrar capas (Shift+L)",className:xa("flex-shrink-0 text-white rounded p-2 shadow-lg transition",{"bg-blue-600":d,"bg-slate-800":!d}),children:J.jsx(ED,{size:20})}),J.jsx("div",{className:"border-r border-slate-500/50 h-8"}),J.jsxs("div",{className:"flex flex-nowrap items-center space-x-2",children:[QI.map(({name:L,icon:I,title:B})=>J.jsx("button",{title:B,onClick:()=>s(L),className:xa("p-2 rounded transition-colors duration-200 flex-shrink-0",{"bg-blue-500/90 text-white":a===L,"text-white hover:text-white hover:bg-blue-500/90":a!==L}),children:J.jsx(I,{size:20})},L)),J.jsx("div",{className:"border-l border-slate-500/50 h-8"}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx("button",{className:xa("p-2 rounded transition-colors duration-200 flex-shrink-0",{"bg-blue-500/90 text-white":f,"text-white hover:text-white hover:bg-blue-500/90":!f}),title:"Copiar elemento (Ctrl+C)",onClick:()=>g(f),disabled:!f,children:J.jsx(jT,{size:20})}),J.jsx("button",{className:xa("p-2 rounded transition-colors duration-200 flex-shrink-0",{"bg-blue-500/90 text-white":o,"text-white hover:text-white hover:bg-blue-500/90":!o}),title:"Pegar elemento (Ctrl+V)",onClick:m,disabled:!o,children:J.jsx(cD,{size:20})})]}),J.jsx("div",{className:"border-r border-slate-500/50 h-8"}),J.jsxs("div",{className:"flex items-center gap-3",children:[J.jsx(Rv,{icon:r_,color:D,onChange:w,label:"Color del trazo"}),J.jsx(Rv,{icon:YT,color:T,onChange:R,label:"Color de relleno"})]})]})]})})}function ga(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var JI=typeof Symbol=="function"&&Symbol.observable||"@@observable",$4=JI,Q4=()=>Math.random().toString(36).substring(7).split("").join("."),tH={INIT:`@@redux/INIT${Q4()}`,REPLACE:`@@redux/REPLACE${Q4()}`},Z4=tH;function eH(n){if(typeof n!="object"||n===null)return!1;let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t||Object.getPrototypeOf(n)===null}function Q8(n,t,e){if(typeof n!="function")throw new Error(ga(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(ga(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(ga(1));return e(Q8)(n,t)}let i=n,a=t,s=new Map,o=s,c=0,d=!1;function f(){o===s&&(o=new Map,s.forEach((C,D)=>{o.set(D,C)}))}function g(){if(d)throw new Error(ga(3));return a}function m(C){if(typeof C!="function")throw new Error(ga(4));if(d)throw new Error(ga(5));let D=!0;f();const T=c++;return o.set(T,C),function(){if(D){if(d)throw new Error(ga(6));D=!1,f(),o.delete(T),s=null}}}function v(C){if(!eH(C))throw new Error(ga(7));if(typeof C.type>"u")throw new Error(ga(8));if(typeof C.type!="string")throw new Error(ga(17));if(d)throw new Error(ga(9));try{d=!0,a=i(a,C)}finally{d=!1}return(s=o).forEach(T=>{T()}),C}function x(C){if(typeof C!="function")throw new Error(ga(10));i=C,v({type:Z4.REPLACE})}function S(){const C=m;return{subscribe(D){if(typeof D!="object"||D===null)throw new Error(ga(11));function T(){const R=D;R.next&&R.next(g())}return T(),{unsubscribe:C(T)}},[$4](){return this}}}return v({type:Z4.INIT}),{dispatch:v,subscribe:m,getState:g,replaceReducer:x,[$4]:S}}function J4(n,t){return function(...e){return t(n.apply(this,e))}}function tC(n,t){if(typeof n=="function")return J4(n,t);if(typeof n!="object"||n===null)throw new Error(ga(16));const e={};for(const i in n){const a=n[i];typeof a=="function"&&(e[i]=J4(a,t))}return e}function Z8(...n){return n.length===0?t=>t:n.length===1?n[0]:n.reduce((t,e)=>(...i)=>t(e(...i)))}function nH(...n){return t=>(e,i)=>{const a=t(e,i);let s=()=>{throw new Error(ga(15))};const o={getState:a.getState,dispatch:(d,...f)=>s(d,...f)},c=n.map(d=>d(o));return s=Z8(...c)(a.dispatch),{...a,dispatch:s}}}var Px={exports:{}},kx={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC;function iH(){if(eC)return kx;eC=1;var n=bo();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var e=typeof Object.is=="function"?Object.is:t,i=n.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return kx.useSyncExternalStoreWithSelector=function(d,f,g,m,v){var x=a(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=o(function(){function C(O){if(!D){if(D=!0,T=O,O=m(O),v!==void 0&&S.hasValue){var L=S.value;if(v(L,O))return w=L}return w=O}if(L=w,e(T,O))return L;var I=m(O);return v!==void 0&&v(L,I)?(T=O,L):(T=O,w=I)}var D=!1,T,w,R=g===void 0?null:g;return[function(){return C(f())},R===null?void 0:function(){return C(R())}]},[f,g,m,v]);var _=i(d,x[0],x[1]);return s(function(){S.hasValue=!0,S.value=_},[_]),c(_),_},kx}var nC;function aH(){return nC||(nC=1,Px.exports=iH()),Px.exports}var rH=aH(),sH=X.version.startsWith("19"),oH=Symbol.for(sH?"react.transitional.element":"react.element"),lH=Symbol.for("react.portal"),cH=Symbol.for("react.fragment"),uH=Symbol.for("react.strict_mode"),dH=Symbol.for("react.profiler"),hH=Symbol.for("react.consumer"),fH=Symbol.for("react.context"),J8=Symbol.for("react.forward_ref"),pH=Symbol.for("react.suspense"),gH=Symbol.for("react.suspense_list"),J_=Symbol.for("react.memo"),mH=Symbol.for("react.lazy"),vH=J8,yH=J_;function bH(n){if(typeof n=="object"&&n!==null){const{$$typeof:t}=n;switch(t){case oH:switch(n=n.type,n){case cH:case dH:case uH:case pH:case gH:return n;default:switch(n=n&&n.$$typeof,n){case fH:case J8:case mH:case J_:return n;case hH:return n;default:return t}}case lH:return t}}}function xH(n){return bH(n)===J_}function SH(n,t,e,i,{areStatesEqual:a,areOwnPropsEqual:s,areStatePropsEqual:o}){let c=!1,d,f,g,m,v;function x(T,w){return d=T,f=w,g=n(d,f),m=t(i,f),v=e(g,m,f),c=!0,v}function S(){return g=n(d,f),t.dependsOnOwnProps&&(m=t(i,f)),v=e(g,m,f),v}function _(){return n.dependsOnOwnProps&&(g=n(d,f)),t.dependsOnOwnProps&&(m=t(i,f)),v=e(g,m,f),v}function C(){const T=n(d,f),w=!o(T,g);return g=T,w&&(v=e(g,m,f)),v}function D(T,w){const R=!s(w,f),O=!a(T,d,w,f);return d=T,f=w,R&&O?S():R?_():O?C():v}return function(w,R){return c?D(w,R):x(w,R)}}function _H(n,{initMapStateToProps:t,initMapDispatchToProps:e,initMergeProps:i,...a}){const s=t(n,a),o=e(n,a),c=i(n,a);return SH(s,o,c,n,a)}function AH(n,t){const e={};for(const i in n){const a=n[i];typeof a=="function"&&(e[i]=(...s)=>t(a(...s)))}return e}function RS(n){return function(e){const i=n(e);function a(){return i}return a.dependsOnOwnProps=!1,a}}function iC(n){return n.dependsOnOwnProps?!!n.dependsOnOwnProps:n.length!==1}function tR(n,t){return function(i,{displayName:a}){const s=function(c,d){return s.dependsOnOwnProps?s.mapToProps(c,d):s.mapToProps(c,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(c,d){s.mapToProps=n,s.dependsOnOwnProps=iC(n);let f=s(c,d);return typeof f=="function"&&(s.mapToProps=f,s.dependsOnOwnProps=iC(f),f=s(c,d)),f},s}}function tA(n,t){return(e,i)=>{throw new Error(`Invalid value of type ${typeof n} for ${t} argument when connecting component ${i.wrappedComponentName}.`)}}function EH(n){return n&&typeof n=="object"?RS(t=>AH(n,t)):n?typeof n=="function"?tR(n):tA(n,"mapDispatchToProps"):RS(t=>({dispatch:t}))}function wH(n){return n?typeof n=="function"?tR(n):tA(n,"mapStateToProps"):RS(()=>({}))}function CH(n,t,e){return{...e,...n,...t}}function TH(n){return function(e,{displayName:i,areMergedPropsEqual:a}){let s=!1,o;return function(d,f,g){const m=n(d,f,g);return s?a(m,o)||(o=m):(s=!0,o=m),o}}}function RH(n){return n?typeof n=="function"?TH(n):tA(n,"mergeProps"):()=>CH}function MH(n){n()}function DH(){let n=null,t=null;return{clear(){n=null,t=null},notify(){MH(()=>{let e=n;for(;e;)e.callback(),e=e.next})},get(){const e=[];let i=n;for(;i;)e.push(i),i=i.next;return e},subscribe(e){let i=!0;const a=t={callback:e,next:null,prev:t};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var aC={notify(){},get:()=>[]};function eR(n,t){let e,i=aC,a=0,s=!1;function o(_){g();const C=i.subscribe(_);let D=!1;return()=>{D||(D=!0,C(),m())}}function c(){i.notify()}function d(){S.onStateChange&&S.onStateChange()}function f(){return s}function g(){a++,e||(e=t?t.addNestedSub(d):n.subscribe(d),i=DH())}function m(){a--,e&&a===0&&(e(),e=void 0,i.clear(),i=aC)}function v(){s||(s=!0,g())}function x(){s&&(s=!1,m())}const S={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:f,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>i};return S}var OH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NH=OH(),LH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",PH=LH(),kH=()=>NH||PH?X.useLayoutEffect:X.useEffect,Mv=kH();function rC(n,t){return n===t?n!==0||t!==0||1/n===1/t:n!==n&&t!==t}function Bx(n,t){if(rC(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;const e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(!Object.prototype.hasOwnProperty.call(t,e[a])||!rC(n[e[a]],t[e[a]]))return!1;return!0}var BH={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},zH={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FH={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},IH={[vH]:FH,[yH]:nR};function sC(n){return xH(n)?nR:IH[n.$$typeof]||BH}var HH=Object.defineProperty,GH=Object.getOwnPropertyNames,oC=Object.getOwnPropertySymbols,jH=Object.getOwnPropertyDescriptor,UH=Object.getPrototypeOf,lC=Object.prototype;function MS(n,t){if(typeof t!="string"){if(lC){const s=UH(t);s&&s!==lC&&MS(n,s)}let e=GH(t);oC&&(e=e.concat(oC(t)));const i=sC(n),a=sC(t);for(let s=0;s<e.length;++s){const o=e[s];if(!zH[o]&&!(a&&a[o])&&!(i&&i[o])){const c=jH(t,o);try{HH(n,o,c)}catch{}}}}return n}var qH=Symbol.for("react-redux-context"),VH=typeof globalThis<"u"?globalThis:{};function YH(){if(!X.createContext)return{};const n=VH[qH]??=new Map;let t=n.get(X.createContext);return t||(t=X.createContext(null),n.set(X.createContext,t)),t}var iR=YH(),XH=[null,null];function KH(n,t,e){Mv(()=>n(...t),e)}function WH(n,t,e,i,a,s){n.current=i,e.current=!1,a.current&&(a.current=null,s())}function $H(n,t,e,i,a,s,o,c,d,f,g){if(!n)return()=>{};let m=!1,v=null;const x=()=>{if(m||!c.current)return;const _=t.getState();let C,D;try{C=i(_,a.current)}catch(T){D=T,v=T}D||(v=null),C===s.current?o.current||f():(s.current=C,d.current=C,o.current=!0,g())};return e.onStateChange=x,e.trySubscribe(),x(),()=>{if(m=!0,e.tryUnsubscribe(),e.onStateChange=null,v)throw v}}function QH(n,t){return n===t}function ZH(n,t,e,{pure:i,areStatesEqual:a=QH,areOwnPropsEqual:s=Bx,areStatePropsEqual:o=Bx,areMergedPropsEqual:c=Bx,forwardRef:d=!1,context:f=iR}={}){const g=f,m=wH(n),v=EH(t),x=RH(e),S=!!n;return C=>{const D=C.displayName||C.name||"Component",T=`Connect(${D})`,w={shouldHandleStateChanges:S,displayName:T,wrappedComponentName:D,WrappedComponent:C,initMapStateToProps:m,initMapDispatchToProps:v,initMergeProps:x,areStatesEqual:a,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:c};function R(I){const[B,F,z]=X.useMemo(()=>{const{reactReduxForwardedRef:Bt,...Gt}=I;return[I.context,Bt,Gt]},[I]),j=X.useMemo(()=>{let Bt=g;return B?.Consumer,Bt},[B,g]),Z=X.useContext(j),nt=!!I.store&&!!I.store.getState&&!!I.store.dispatch,it=!!Z&&!!Z.store,et=nt?I.store:Z.store,Q=it?Z.getServerState:et.getState,k=X.useMemo(()=>_H(et.dispatch,w),[et]),[U,$]=X.useMemo(()=>{if(!S)return XH;const Bt=eR(et,nt?void 0:Z.subscription),Gt=Bt.notifyNestedSubs.bind(Bt);return[Bt,Gt]},[et,nt,Z]),H=X.useMemo(()=>nt?Z:{...Z,subscription:U},[nt,Z,U]),V=X.useRef(void 0),at=X.useRef(z),K=X.useRef(void 0),ut=X.useRef(!1),xt=X.useRef(!1),ot=X.useRef(void 0);Mv(()=>(xt.current=!0,()=>{xt.current=!1}),[]);const tt=X.useMemo(()=>()=>K.current&&z===at.current?K.current:k(et.getState(),z),[et,z]),ct=X.useMemo(()=>Gt=>U?$H(S,et,U,k,at,V,ut,xt,K,$,Gt):()=>{},[U]);KH(WH,[at,V,ut,z,K,$]);let At;try{At=X.useSyncExternalStore(ct,tt,Q?()=>k(Q(),z):tt)}catch(Bt){throw ot.current&&(Bt.message+=`
The error may be correlated with this previous error:
${ot.current.stack}

`),Bt}Mv(()=>{ot.current=void 0,K.current=void 0,V.current=At});const Mt=X.useMemo(()=>X.createElement(C,{...At,ref:F}),[F,C,At]);return X.useMemo(()=>S?X.createElement(j.Provider,{value:H},Mt):Mt,[j,Mt,H])}const L=X.memo(R);if(L.WrappedComponent=C,L.displayName=R.displayName=T,d){const B=X.forwardRef(function(z,j){return X.createElement(L,{...z,reactReduxForwardedRef:j})});return B.displayName=T,B.WrappedComponent=C,MS(B,C)}return MS(L,C)}}var aR=ZH;function JH(n){const{children:t,context:e,serverState:i,store:a}=n,s=X.useMemo(()=>{const d=eR(a);return{store:a,subscription:d,getServerState:i?()=>i:void 0}},[a,i]),o=X.useMemo(()=>a.getState(),[a]);Mv(()=>{const{subscription:d}=s;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[s,o]);const c=e||iR;return X.createElement(c.Provider,{value:s},t)}var tG=JH,eG="Invariant failed";function nG(n,t){throw new Error(eG)}var xs=function(t){var e=t.top,i=t.right,a=t.bottom,s=t.left,o=i-s,c=a-e,d={top:e,right:i,bottom:a,left:s,width:o,height:c,x:s,y:e,center:{x:(i+s)/2,y:(a+e)/2}};return d},eA=function(t,e){return{top:t.top-e.top,left:t.left-e.left,bottom:t.bottom+e.bottom,right:t.right+e.right}},cC=function(t,e){return{top:t.top+e.top,left:t.left+e.left,bottom:t.bottom-e.bottom,right:t.right-e.right}},iG=function(t,e){return{top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}},zx={top:0,right:0,bottom:0,left:0},nA=function(t){var e=t.borderBox,i=t.margin,a=i===void 0?zx:i,s=t.border,o=s===void 0?zx:s,c=t.padding,d=c===void 0?zx:c,f=xs(eA(e,a)),g=xs(cC(e,o)),m=xs(cC(g,d));return{marginBox:f,borderBox:xs(e),paddingBox:g,contentBox:m,margin:a,border:o,padding:d}},Lr=function(t){var e=t.slice(0,-2),i=t.slice(-2);if(i!=="px")return 0;var a=Number(e);return isNaN(a)&&nG(),a},aG=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Dv=function(t,e){var i=t.borderBox,a=t.border,s=t.margin,o=t.padding,c=iG(i,e);return nA({borderBox:c,border:a,margin:s,padding:o})},Ov=function(t,e){return e===void 0&&(e=aG()),Dv(t,e)},rR=function(t,e){var i={top:Lr(e.marginTop),right:Lr(e.marginRight),bottom:Lr(e.marginBottom),left:Lr(e.marginLeft)},a={top:Lr(e.paddingTop),right:Lr(e.paddingRight),bottom:Lr(e.paddingBottom),left:Lr(e.paddingLeft)},s={top:Lr(e.borderTopWidth),right:Lr(e.borderRightWidth),bottom:Lr(e.borderBottomWidth),left:Lr(e.borderLeftWidth)};return nA({borderBox:t,margin:i,padding:a,border:s})},sR=function(t){var e=t.getBoundingClientRect(),i=window.getComputedStyle(t);return rR(e,i)},Xg=function(t){var e=[],i=null,a=function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];e=c,!i&&(i=requestAnimationFrame(function(){i=null,t.apply(void 0,e)}))};return a.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},a};function Nv(){return Nv=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Nv.apply(null,arguments)}function oR(n,t){}oR.bind(null,"warn");oR.bind(null,"error");function yc(){}function rG(n,t){return{...n,...t}}function zr(n,t,e){const i=t.map(a=>{const s=rG(e,a.options);return n.addEventListener(a.eventName,a.fn,s),function(){n.removeEventListener(a.eventName,a.fn,s)}});return function(){i.forEach(s=>{s()})}}const sG="Invariant failed";class Lv extends Error{}Lv.prototype.toString=function(){return this.message};function Lt(n,t){throw new Lv(sG)}class oG extends q.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=yc,this.onWindowError=e=>{const i=this.getCallbacks();i.isDragging()&&i.tryAbort(),e.error instanceof Lv&&e.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=e=>{this.callbacks=e}}componentDidMount(){this.unbind=zr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Lv){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const lG=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Pv=n=>n+1,cG=n=>`
  You have lifted an item in position ${Pv(n.source.index)}
`,lR=(n,t)=>{const e=n.droppableId===t.droppableId,i=Pv(n.index),a=Pv(t.index);return e?`
      You have moved the item from position ${i}
      to position ${a}
    `:`
    You have moved the item from position ${i}
    in list ${n.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},cR=(n,t,e)=>t.droppableId===e.droppableId?`
      The item ${n}
      has been combined with ${e.draggableId}`:`
      The item ${n}
      in list ${t.droppableId}
      has been combined with ${e.draggableId}
      in list ${e.droppableId}
    `,uG=n=>{const t=n.destination;if(t)return lR(n.source,t);const e=n.combine;return e?cR(n.draggableId,n.source,e):"You are over an area that cannot be dropped on"},uC=n=>`
  The item has returned to its starting position
  of ${Pv(n.index)}
`,dG=n=>{if(n.reason==="CANCEL")return`
      Movement cancelled.
      ${uC(n.source)}
    `;const t=n.destination,e=n.combine;return t?`
      You have dropped the item.
      ${lR(n.source,t)}
    `:e?`
      You have dropped the item.
      ${cR(n.draggableId,n.source,e)}
    `:`
    The item has been dropped while not over a drop area.
    ${uC(n.source)}
  `},vv={dragHandleUsageInstructions:lG,onDragStart:cG,onDragUpdate:uG,onDragEnd:dG};function hG(n,t){return!!(n===t||Number.isNaN(n)&&Number.isNaN(t))}function uR(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(!hG(n[e],t[e]))return!1;return!0}function Ye(n,t){const e=X.useState(()=>({inputs:t,result:n()}))[0],i=X.useRef(!0),a=X.useRef(e),o=i.current||!!(t&&a.current.inputs&&uR(t,a.current.inputs))?a.current:{inputs:t,result:n()};return X.useEffect(()=>{i.current=!1,a.current=o},[o]),o.result}function Wt(n,t){return Ye(()=>n,t)}const Ei={x:0,y:0},ji=(n,t)=>({x:n.x+t.x,y:n.y+t.y}),er=(n,t)=>({x:n.x-t.x,y:n.y-t.y}),bc=(n,t)=>n.x===t.x&&n.y===t.y,Jh=n=>({x:n.x!==0?-n.x:0,y:n.y!==0?-n.y:0}),Fu=(n,t,e=0)=>n==="x"?{x:t,y:e}:{x:e,y:t},Kg=(n,t)=>Math.sqrt((t.x-n.x)**2+(t.y-n.y)**2),dC=(n,t)=>Math.min(...t.map(e=>Kg(n,e))),dR=n=>t=>({x:n(t.x),y:n(t.y)});var fG=(n,t)=>{const e=xs({top:Math.max(t.top,n.top),right:Math.min(t.right,n.right),bottom:Math.min(t.bottom,n.bottom),left:Math.max(t.left,n.left)});return e.width<=0||e.height<=0?null:e};const lm=(n,t)=>({top:n.top+t.y,left:n.left+t.x,bottom:n.bottom+t.y,right:n.right+t.x}),hC=n=>[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.left,y:n.bottom},{x:n.right,y:n.bottom}],pG={top:0,right:0,bottom:0,left:0},gG=(n,t)=>t?lm(n,t.scroll.diff.displacement):n,mG=(n,t,e)=>e&&e.increasedBy?{...n,[t.end]:n[t.end]+e.increasedBy[t.line]}:n,vG=(n,t)=>t&&t.shouldClipSubject?fG(t.pageMarginBox,n):xs(n);var qh=({page:n,withPlaceholder:t,axis:e,frame:i})=>{const a=gG(n.marginBox,i),s=mG(a,e,t),o=vG(s,i);return{page:n,withPlaceholder:t,active:o}},iA=(n,t)=>{n.frame||Lt();const e=n.frame,i=er(t,e.scroll.initial),a=Jh(i),s={...e,scroll:{initial:e.scroll.initial,current:t,diff:{value:i,displacement:a},max:e.scroll.max}},o=qh({page:n.subject.page,withPlaceholder:n.subject.withPlaceholder,axis:n.axis,frame:s});return{...n,frame:s,subject:o}};function Ai(n,t=uR){let e=null;function i(...a){if(e&&e.lastThis===this&&t(a,e.lastArgs))return e.lastResult;const s=n.apply(this,a);return e={lastResult:s,lastArgs:a,lastThis:this},s}return i.clear=function(){e=null},i}const hR=Ai(n=>n.reduce((t,e)=>(t[e.descriptor.id]=e,t),{})),fR=Ai(n=>n.reduce((t,e)=>(t[e.descriptor.id]=e,t),{})),h1=Ai(n=>Object.values(n)),yG=Ai(n=>Object.values(n));var tf=Ai((n,t)=>yG(t).filter(i=>n===i.descriptor.droppableId).sort((i,a)=>i.descriptor.index-a.descriptor.index));function aA(n){return n.at&&n.at.type==="REORDER"?n.at.destination:null}function f1(n){return n.at&&n.at.type==="COMBINE"?n.at.combine:null}var p1=Ai((n,t)=>t.filter(e=>e.descriptor.id!==n.descriptor.id)),bG=({isMovingForward:n,draggable:t,destination:e,insideDestination:i,previousImpact:a})=>{if(!e.isCombineEnabled||!aA(a))return null;function o(x){const S={type:"COMBINE",combine:{draggableId:x,droppableId:e.descriptor.id}};return{...a,at:S}}const c=a.displaced.all,d=c.length?c[0]:null;if(n)return d?o(d):null;const f=p1(t,i);if(!d){if(!f.length)return null;const x=f[f.length-1];return o(x.descriptor.id)}const g=f.findIndex(x=>x.descriptor.id===d);g===-1&&Lt();const m=g-1;if(m<0)return null;const v=f[m];return o(v.descriptor.id)},ef=(n,t)=>n.descriptor.droppableId===t.descriptor.id;const pR={point:Ei,value:0},Wg={invisible:{},visible:{},all:[]},xG={displaced:Wg,displacedBy:pR,at:null};var Fr=(n,t)=>e=>n<=e&&e<=t,gR=n=>{const t=Fr(n.top,n.bottom),e=Fr(n.left,n.right);return i=>{if(t(i.top)&&t(i.bottom)&&e(i.left)&&e(i.right))return!0;const s=t(i.top)||t(i.bottom),o=e(i.left)||e(i.right);if(s&&o)return!0;const d=i.top<n.top&&i.bottom>n.bottom,f=i.left<n.left&&i.right>n.right;return d&&f?!0:d&&o||f&&s}},SG=n=>{const t=Fr(n.top,n.bottom),e=Fr(n.left,n.right);return i=>t(i.top)&&t(i.bottom)&&e(i.left)&&e(i.right)};const rA={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},mR={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var _G=n=>t=>{const e=Fr(t.top,t.bottom),i=Fr(t.left,t.right);return a=>n===rA?e(a.top)&&e(a.bottom):i(a.left)&&i(a.right)};const AG=(n,t)=>{const e=t.frame?t.frame.scroll.diff.displacement:Ei;return lm(n,e)},EG=(n,t,e)=>t.subject.active?e(t.subject.active)(n):!1,wG=(n,t,e)=>e(t)(n),sA=({target:n,destination:t,viewport:e,withDroppableDisplacement:i,isVisibleThroughFrameFn:a})=>{const s=i?AG(n,t):n;return EG(s,t,a)&&wG(s,e,a)},CG=n=>sA({...n,isVisibleThroughFrameFn:gR}),vR=n=>sA({...n,isVisibleThroughFrameFn:SG}),TG=n=>sA({...n,isVisibleThroughFrameFn:_G(n.destination.axis)}),RG=(n,t,e)=>{if(typeof e=="boolean")return e;if(!t)return!0;const{invisible:i,visible:a}=t;if(i[n])return!1;const s=a[n];return s?s.shouldAnimate:!0};function MG(n,t){const e=n.page.marginBox,i={top:t.point.y,right:0,bottom:0,left:t.point.x};return xs(eA(e,i))}function $g({afterDragging:n,destination:t,displacedBy:e,viewport:i,forceShouldAnimate:a,last:s}){return n.reduce(function(c,d){const f=MG(d,e),g=d.descriptor.id;if(c.all.push(g),!CG({target:f,destination:t,viewport:i,withDroppableDisplacement:!0}))return c.invisible[d.descriptor.id]=!0,c;const v=RG(g,s,a),x={draggableId:g,shouldAnimate:v};return c.visible[g]=x,c},{all:[],visible:{},invisible:{}})}function DG(n,t){if(!n.length)return 0;const e=n[n.length-1].descriptor.index;return t.inHomeList?e:e+1}function fC({insideDestination:n,inHomeList:t,displacedBy:e,destination:i}){const a=DG(n,{inHomeList:t});return{displaced:Wg,displacedBy:e,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function kv({draggable:n,insideDestination:t,destination:e,viewport:i,displacedBy:a,last:s,index:o,forceShouldAnimate:c}){const d=ef(n,e);if(o==null)return fC({insideDestination:t,inHomeList:d,displacedBy:a,destination:e});const f=t.find(S=>S.descriptor.index===o);if(!f)return fC({insideDestination:t,inHomeList:d,displacedBy:a,destination:e});const g=p1(n,t),m=t.indexOf(f),v=g.slice(m);return{displaced:$g({afterDragging:v,destination:e,displacedBy:a,last:s,viewport:i.frame,forceShouldAnimate:c}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:e.descriptor.id,index:o}}}}function Ac(n,t){return!!t.effected[n]}var OG=({isMovingForward:n,destination:t,draggables:e,combine:i,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const s=i.draggableId,c=e[s].descriptor.index;return Ac(s,a)?n?c:c-1:n?c+1:c},NG=({isMovingForward:n,isInHomeList:t,insideDestination:e,location:i})=>{if(!e.length)return null;const a=i.index,s=n?a+1:a-1,o=e[0].descriptor.index,c=e[e.length-1].descriptor.index,d=t?c:c+1;return s<o||s>d?null:s},LG=({isMovingForward:n,isInHomeList:t,draggable:e,draggables:i,destination:a,insideDestination:s,previousImpact:o,viewport:c,afterCritical:d})=>{const f=o.at;if(f||Lt(),f.type==="REORDER"){const m=NG({isMovingForward:n,isInHomeList:t,location:f.destination,insideDestination:s});return m==null?null:kv({draggable:e,insideDestination:s,destination:a,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:m})}const g=OG({isMovingForward:n,destination:a,displaced:o.displaced,draggables:i,combine:f.combine,afterCritical:d});return g==null?null:kv({draggable:e,insideDestination:s,destination:a,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:g})},PG=({displaced:n,afterCritical:t,combineWith:e,displacedBy:i})=>{const a=!!(n.visible[e]||n.invisible[e]);return Ac(e,t)?a?Ei:Jh(i.point):a?i.point:Ei},kG=({afterCritical:n,impact:t,draggables:e})=>{const i=f1(t);i||Lt();const a=i.draggableId,s=e[a].page.borderBox.center,o=PG({displaced:t.displaced,afterCritical:n,combineWith:a,displacedBy:t.displacedBy});return ji(s,o)};const yR=(n,t)=>t.margin[n.start]+t.borderBox[n.size]/2,BG=(n,t)=>t.margin[n.end]+t.borderBox[n.size]/2,oA=(n,t,e)=>t[n.crossAxisStart]+e.margin[n.crossAxisStart]+e.borderBox[n.crossAxisSize]/2,pC=({axis:n,moveRelativeTo:t,isMoving:e})=>Fu(n.line,t.marginBox[n.end]+yR(n,e),oA(n,t.marginBox,e)),gC=({axis:n,moveRelativeTo:t,isMoving:e})=>Fu(n.line,t.marginBox[n.start]-BG(n,e),oA(n,t.marginBox,e)),zG=({axis:n,moveInto:t,isMoving:e})=>Fu(n.line,t.contentBox[n.start]+yR(n,e),oA(n,t.contentBox,e));var FG=({impact:n,draggable:t,draggables:e,droppable:i,afterCritical:a})=>{const s=tf(i.descriptor.id,e),o=t.page,c=i.axis;if(!s.length)return zG({axis:c,moveInto:i.page,isMoving:o});const{displaced:d,displacedBy:f}=n,g=d.all[0];if(g){const v=e[g];if(Ac(g,a))return gC({axis:c,moveRelativeTo:v.page,isMoving:o});const x=Dv(v.page,f.point);return gC({axis:c,moveRelativeTo:x,isMoving:o})}const m=s[s.length-1];if(m.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Ac(m.descriptor.id,a)){const v=Dv(m.page,Jh(a.displacedBy.point));return pC({axis:c,moveRelativeTo:v,isMoving:o})}return pC({axis:c,moveRelativeTo:m.page,isMoving:o})},DS=(n,t)=>{const e=n.frame;return e?ji(t,e.scroll.diff.displacement):t};const IG=({impact:n,draggable:t,droppable:e,draggables:i,afterCritical:a})=>{const s=t.page.borderBox.center,o=n.at;return!e||!o?s:o.type==="REORDER"?FG({impact:n,draggable:t,draggables:i,droppable:e,afterCritical:a}):kG({impact:n,draggables:i,afterCritical:a})};var g1=n=>{const t=IG(n),e=n.droppable;return e?DS(e,t):t},bR=(n,t)=>{const e=er(t,n.scroll.initial),i=Jh(e);return{frame:xs({top:t.y,bottom:t.y+n.frame.height,left:t.x,right:t.x+n.frame.width}),scroll:{initial:n.scroll.initial,max:n.scroll.max,current:t,diff:{value:e,displacement:i}}}};function mC(n,t){return n.map(e=>t[e])}function HG(n,t){for(let e=0;e<t.length;e++){const i=t[e].visible[n];if(i)return i}return null}var GG=({impact:n,viewport:t,destination:e,draggables:i,maxScrollChange:a})=>{const s=bR(t,ji(t.scroll.current,a)),o=e.frame?iA(e,ji(e.frame.scroll.current,a)):e,c=n.displaced,d=$g({afterDragging:mC(c.all,i),destination:e,displacedBy:n.displacedBy,viewport:s.frame,last:c,forceShouldAnimate:!1}),f=$g({afterDragging:mC(c.all,i),destination:o,displacedBy:n.displacedBy,viewport:t.frame,last:c,forceShouldAnimate:!1}),g={},m={},v=[c,d,f];return c.all.forEach(S=>{const _=HG(S,v);if(_){m[S]=_;return}g[S]=!0}),{...n,displaced:{all:c.all,invisible:g,visible:m}}},jG=(n,t)=>ji(n.scroll.diff.displacement,t),lA=({pageBorderBoxCenter:n,draggable:t,viewport:e})=>{const i=jG(e,n),a=er(i,t.page.borderBox.center);return ji(t.client.borderBox.center,a)},xR=({draggable:n,destination:t,newPageBorderBoxCenter:e,viewport:i,withDroppableDisplacement:a,onlyOnMainAxis:s=!1})=>{const o=er(e,n.page.borderBox.center),d={target:lm(n.page.borderBox,o),destination:t,withDroppableDisplacement:a,viewport:i};return s?TG(d):vR(d)},UG=({isMovingForward:n,draggable:t,destination:e,draggables:i,previousImpact:a,viewport:s,previousPageBorderBoxCenter:o,previousClientSelection:c,afterCritical:d})=>{if(!e.isEnabled)return null;const f=tf(e.descriptor.id,i),g=ef(t,e),m=bG({isMovingForward:n,draggable:t,destination:e,insideDestination:f,previousImpact:a})||LG({isMovingForward:n,isInHomeList:g,draggable:t,draggables:i,destination:e,insideDestination:f,previousImpact:a,viewport:s,afterCritical:d});if(!m)return null;const v=g1({impact:m,draggable:t,droppable:e,draggables:i,afterCritical:d});if(xR({draggable:t,destination:e,newPageBorderBoxCenter:v,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:lA({pageBorderBoxCenter:v,draggable:t,viewport:s}),impact:m,scrollJumpRequest:null};const S=er(v,o),_=GG({impact:m,viewport:s,destination:e,draggables:i,maxScrollChange:S});return{clientSelection:c,impact:_,scrollJumpRequest:S}};const pa=n=>{const t=n.subject.active;return t||Lt(),t};var qG=({isMovingForward:n,pageBorderBoxCenter:t,source:e,droppables:i,viewport:a})=>{const s=e.subject.active;if(!s)return null;const o=e.axis,c=Fr(s[o.start],s[o.end]),d=h1(i).filter(g=>g!==e).filter(g=>g.isEnabled).filter(g=>!!g.subject.active).filter(g=>gR(a.frame)(pa(g))).filter(g=>{const m=pa(g);return n?s[o.crossAxisEnd]<m[o.crossAxisEnd]:m[o.crossAxisStart]<s[o.crossAxisStart]}).filter(g=>{const m=pa(g),v=Fr(m[o.start],m[o.end]);return c(m[o.start])||c(m[o.end])||v(s[o.start])||v(s[o.end])}).sort((g,m)=>{const v=pa(g)[o.crossAxisStart],x=pa(m)[o.crossAxisStart];return n?v-x:x-v}).filter((g,m,v)=>pa(g)[o.crossAxisStart]===pa(v[0])[o.crossAxisStart]);if(!d.length)return null;if(d.length===1)return d[0];const f=d.filter(g=>Fr(pa(g)[o.start],pa(g)[o.end])(t[o.line]));return f.length===1?f[0]:f.length>1?f.sort((g,m)=>pa(g)[o.start]-pa(m)[o.start])[0]:d.sort((g,m)=>{const v=dC(t,hC(pa(g))),x=dC(t,hC(pa(m)));return v!==x?v-x:pa(g)[o.start]-pa(m)[o.start]})[0]};const vC=(n,t)=>{const e=n.page.borderBox.center;return Ac(n.descriptor.id,t)?er(e,t.displacedBy.point):e},VG=(n,t)=>{const e=n.page.borderBox;return Ac(n.descriptor.id,t)?lm(e,Jh(t.displacedBy.point)):e};var YG=({pageBorderBoxCenter:n,viewport:t,destination:e,insideDestination:i,afterCritical:a})=>i.filter(o=>vR({target:VG(o,a),destination:e,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,c)=>{const d=Kg(n,DS(e,vC(o,a))),f=Kg(n,DS(e,vC(c,a)));return d<f?-1:f<d?1:o.descriptor.index-c.descriptor.index})[0]||null,cm=Ai(function(t,e){const i=e[t.line];return{value:i,point:Fu(t.line,i)}});const XG=(n,t,e)=>{const i=n.axis;if(n.descriptor.mode==="virtual")return Fu(i.line,t[i.line]);const a=n.subject.page.contentBox[i.size],d=tf(n.descriptor.id,e).reduce((f,g)=>f+g.client.marginBox[i.size],0)+t[i.line]-a;return d<=0?null:Fu(i.line,d)},SR=(n,t)=>({...n,scroll:{...n.scroll,max:t}}),_R=(n,t,e)=>{const i=n.frame;ef(t,n)&&Lt(),n.subject.withPlaceholder&&Lt();const a=cm(n.axis,t.displaceBy).point,s=XG(n,a,e),o={placeholderSize:a,increasedBy:s,oldFrameMaxScroll:n.frame?n.frame.scroll.max:null};if(!i){const g=qh({page:n.subject.page,withPlaceholder:o,axis:n.axis,frame:n.frame});return{...n,subject:g}}const c=s?ji(i.scroll.max,s):i.scroll.max,d=SR(i,c),f=qh({page:n.subject.page,withPlaceholder:o,axis:n.axis,frame:d});return{...n,subject:f,frame:d}},KG=n=>{const t=n.subject.withPlaceholder;t||Lt();const e=n.frame;if(!e){const o=qh({page:n.subject.page,axis:n.axis,frame:null,withPlaceholder:null});return{...n,subject:o}}const i=t.oldFrameMaxScroll;i||Lt();const a=SR(e,i),s=qh({page:n.subject.page,axis:n.axis,frame:a,withPlaceholder:null});return{...n,subject:s,frame:a}};var WG=({previousPageBorderBoxCenter:n,moveRelativeTo:t,insideDestination:e,draggable:i,draggables:a,destination:s,viewport:o,afterCritical:c})=>{if(!t){if(e.length)return null;const m={displaced:Wg,displacedBy:pR,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},v=g1({impact:m,draggable:i,droppable:s,draggables:a,afterCritical:c}),x=ef(i,s)?s:_R(s,i,a);return xR({draggable:i,destination:x,newPageBorderBoxCenter:v,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const d=n[s.axis.line]<=t.page.borderBox.center[s.axis.line],f=(()=>{const m=t.descriptor.index;return t.descriptor.id===i.descriptor.id||d?m:m+1})(),g=cm(s.axis,i.displaceBy);return kv({draggable:i,insideDestination:e,destination:s,viewport:o,displacedBy:g,last:Wg,index:f})},$G=({isMovingForward:n,previousPageBorderBoxCenter:t,draggable:e,isOver:i,draggables:a,droppables:s,viewport:o,afterCritical:c})=>{const d=qG({isMovingForward:n,pageBorderBoxCenter:t,source:i,droppables:s,viewport:o});if(!d)return null;const f=tf(d.descriptor.id,a),g=YG({pageBorderBoxCenter:t,viewport:o,destination:d,insideDestination:f,afterCritical:c}),m=WG({previousPageBorderBoxCenter:t,destination:d,draggable:e,draggables:a,moveRelativeTo:g,insideDestination:f,viewport:o,afterCritical:c});if(!m)return null;const v=g1({impact:m,draggable:e,droppable:d,draggables:a,afterCritical:c});return{clientSelection:lA({pageBorderBoxCenter:v,draggable:e,viewport:o}),impact:m,scrollJumpRequest:null}},nr=n=>{const t=n.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const QG=(n,t)=>{const e=nr(n);return e?t[e]:null};var ZG=({state:n,type:t})=>{const e=QG(n.impact,n.dimensions.droppables),i=!!e,a=n.dimensions.droppables[n.critical.droppable.id],s=e||a,o=s.axis.direction,c=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(c&&!i)return null;const d=t==="MOVE_DOWN"||t==="MOVE_RIGHT",f=n.dimensions.draggables[n.critical.draggable.id],g=n.current.page.borderBoxCenter,{draggables:m,droppables:v}=n.dimensions;return c?UG({isMovingForward:d,previousPageBorderBoxCenter:g,draggable:f,destination:s,draggables:m,viewport:n.viewport,previousClientSelection:n.current.client.selection,previousImpact:n.impact,afterCritical:n.afterCritical}):$G({isMovingForward:d,previousPageBorderBoxCenter:g,draggable:f,isOver:s,draggables:m,droppables:v,viewport:n.viewport,afterCritical:n.afterCritical})};function Tu(n){return n.phase==="DRAGGING"||n.phase==="COLLECTING"}function AR(n){const t=Fr(n.top,n.bottom),e=Fr(n.left,n.right);return function(a){return t(a.y)&&e(a.x)}}function JG(n,t){return n.left<t.right&&n.right>t.left&&n.top<t.bottom&&n.bottom>t.top}function tj({pageBorderBox:n,draggable:t,candidates:e}){const i=t.page.borderBox.center,a=e.map(s=>{const o=s.axis,c=Fu(s.axis.line,n.center[o.line],s.page.borderBox.center[o.crossAxisLine]);return{id:s.descriptor.id,distance:Kg(i,c)}}).sort((s,o)=>o.distance-s.distance);return a[0]?a[0].id:null}function ej({pageBorderBox:n,draggable:t,droppables:e}){const i=h1(e).filter(a=>{if(!a.isEnabled)return!1;const s=a.subject.active;if(!s||!JG(n,s))return!1;if(AR(s)(n.center))return!0;const o=a.axis,c=s.center[o.crossAxisLine],d=n[o.crossAxisStart],f=n[o.crossAxisEnd],g=Fr(s[o.crossAxisStart],s[o.crossAxisEnd]),m=g(d),v=g(f);return!m&&!v?!0:m?d<c:f>c});return i.length?i.length===1?i[0].descriptor.id:tj({pageBorderBox:n,draggable:t,candidates:i}):null}const ER=(n,t)=>xs(lm(n,t));var nj=(n,t)=>{const e=n.frame;return e?ER(t,e.scroll.diff.value):t};function wR({displaced:n,id:t}){return!!(n.visible[t]||n.invisible[t])}function ij({draggable:n,closest:t,inHomeList:e}){return t?e&&t.descriptor.index>n.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var aj=({pageBorderBoxWithDroppableScroll:n,draggable:t,destination:e,insideDestination:i,last:a,viewport:s,afterCritical:o})=>{const c=e.axis,d=cm(e.axis,t.displaceBy),f=d.value,g=n[c.start],m=n[c.end],x=p1(t,i).find(_=>{const C=_.descriptor.id,D=_.page.borderBox.center[c.line],T=Ac(C,o),w=wR({displaced:a,id:C});return T?w?m<=D:g<D-f:w?m<=D+f:g<D})||null,S=ij({draggable:t,closest:x,inHomeList:ef(t,e)});return kv({draggable:t,insideDestination:i,destination:e,viewport:s,last:a,displacedBy:d,index:S})};const rj=4;var sj=({draggable:n,pageBorderBoxWithDroppableScroll:t,previousImpact:e,destination:i,insideDestination:a,afterCritical:s})=>{if(!i.isCombineEnabled)return null;const o=i.axis,c=cm(i.axis,n.displaceBy),d=c.value,f=t[o.start],g=t[o.end],v=p1(n,a).find(S=>{const _=S.descriptor.id,C=S.page.borderBox,T=C[o.size]/rj,w=Ac(_,s),R=wR({displaced:e.displaced,id:_});return w?R?g>C[o.start]+T&&g<C[o.end]-T:f>C[o.start]-d+T&&f<C[o.end]-d-T:R?g>C[o.start]+d+T&&g<C[o.end]+d-T:f>C[o.start]+T&&f<C[o.end]-T});return v?{displacedBy:c,displaced:e.displaced,at:{type:"COMBINE",combine:{draggableId:v.descriptor.id,droppableId:i.descriptor.id}}}:null},CR=({pageOffset:n,draggable:t,draggables:e,droppables:i,previousImpact:a,viewport:s,afterCritical:o})=>{const c=ER(t.page.borderBox,n),d=ej({pageBorderBox:c,draggable:t,droppables:i});if(!d)return xG;const f=i[d],g=tf(f.descriptor.id,e),m=nj(f,c);return sj({pageBorderBoxWithDroppableScroll:m,draggable:t,previousImpact:a,destination:f,insideDestination:g,afterCritical:o})||aj({pageBorderBoxWithDroppableScroll:m,draggable:t,destination:f,insideDestination:g,last:a.displaced,viewport:s,afterCritical:o})},cA=(n,t)=>({...n,[t.descriptor.id]:t});const oj=({previousImpact:n,impact:t,droppables:e})=>{const i=nr(n),a=nr(t);if(!i||i===a)return e;const s=e[i];if(!s.subject.withPlaceholder)return e;const o=KG(s);return cA(e,o)};var lj=({draggable:n,draggables:t,droppables:e,previousImpact:i,impact:a})=>{const s=oj({previousImpact:i,impact:a,droppables:e}),o=nr(a);if(!o)return s;const c=e[o];if(ef(n,c)||c.subject.withPlaceholder)return s;const d=_R(c,n,t);return cA(s,d)},Hg=({state:n,clientSelection:t,dimensions:e,viewport:i,impact:a,scrollJumpRequest:s})=>{const o=i||n.viewport,c=e||n.dimensions,d=t||n.current.client.selection,f=er(d,n.initial.client.selection),g={offset:f,selection:d,borderBoxCenter:ji(n.initial.client.borderBoxCenter,f)},m={selection:ji(g.selection,o.scroll.current),borderBoxCenter:ji(g.borderBoxCenter,o.scroll.current),offset:ji(g.offset,o.scroll.diff.value)},v={client:g,page:m};if(n.phase==="COLLECTING")return{...n,dimensions:c,viewport:o,current:v};const x=c.draggables[n.critical.draggable.id],S=a||CR({pageOffset:m.offset,draggable:x,draggables:c.draggables,droppables:c.droppables,previousImpact:n.impact,viewport:o,afterCritical:n.afterCritical}),_=lj({draggable:x,impact:S,previousImpact:n.impact,draggables:c.draggables,droppables:c.droppables});return{...n,current:v,dimensions:{draggables:c.draggables,droppables:_},impact:S,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function cj(n,t){return n.map(e=>t[e])}var TR=({impact:n,viewport:t,draggables:e,destination:i,forceShouldAnimate:a})=>{const s=n.displaced,o=cj(s.all,e),c=$g({afterDragging:o,destination:i,displacedBy:n.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:s});return{...n,displaced:c}},RR=({impact:n,draggable:t,droppable:e,draggables:i,viewport:a,afterCritical:s})=>{const o=g1({impact:n,draggable:t,draggables:i,droppable:e,afterCritical:s});return lA({pageBorderBoxCenter:o,draggable:t,viewport:a})},MR=({state:n,dimensions:t,viewport:e})=>{n.movementMode!=="SNAP"&&Lt();const i=n.impact,a=e||n.viewport,s=t||n.dimensions,{draggables:o,droppables:c}=s,d=o[n.critical.draggable.id],f=nr(i);f||Lt();const g=c[f],m=TR({impact:i,viewport:a,destination:g,draggables:o}),v=RR({impact:m,draggable:d,droppable:g,draggables:o,viewport:a,afterCritical:n.afterCritical});return Hg({impact:m,clientSelection:v,state:n,dimensions:s,viewport:a})},uj=n=>({index:n.index,droppableId:n.droppableId}),DR=({draggable:n,home:t,draggables:e,viewport:i})=>{const a=cm(t.axis,n.displaceBy),s=tf(t.descriptor.id,e),o=s.indexOf(n);o===-1&&Lt();const c=s.slice(o+1),d=c.reduce((v,x)=>(v[x.descriptor.id]=!0,v),{}),f={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:d};return{impact:{displaced:$g({afterDragging:c,destination:t,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:uj(n.descriptor)}},afterCritical:f}},dj=(n,t)=>({draggables:n.draggables,droppables:cA(n.droppables,t)}),hj=({draggable:n,offset:t,initialWindowScroll:e})=>{const i=Dv(n.client,t),a=Ov(i,e);return{...n,placeholder:{...n.placeholder,client:i},client:i,page:a}},fj=n=>{const t=n.frame;return t||Lt(),t},pj=({additions:n,updatedDroppables:t,viewport:e})=>{const i=e.scroll.diff.value;return n.map(a=>{const s=a.descriptor.droppableId,o=t[s],d=fj(o).scroll.diff.value,f=ji(i,d);return hj({draggable:a,offset:f,initialWindowScroll:e.scroll.initial})})},gj=({state:n,published:t})=>{const e=t.modified.map(D=>{const T=n.dimensions.droppables[D.droppableId];return iA(T,D.scroll)}),i={...n.dimensions.droppables,...hR(e)},a=fR(pj({additions:t.additions,updatedDroppables:i,viewport:n.viewport})),s={...n.dimensions.draggables,...a};t.removals.forEach(D=>{delete s[D]});const o={droppables:i,draggables:s},c=nr(n.impact),d=c?o.droppables[c]:null,f=o.draggables[n.critical.draggable.id],g=o.droppables[n.critical.droppable.id],{impact:m,afterCritical:v}=DR({draggable:f,home:g,draggables:s,viewport:n.viewport}),x=d&&d.isCombineEnabled?n.impact:m,S=CR({pageOffset:n.current.page.offset,draggable:o.draggables[n.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:x,viewport:n.viewport,afterCritical:v}),_={...n,phase:"DRAGGING",impact:S,onLiftImpact:m,dimensions:o,afterCritical:v,forceShouldAnimate:!1};return n.phase==="COLLECTING"?_:{..._,phase:"DROP_PENDING",reason:n.reason,isWaiting:!1}};const OS=n=>n.movementMode==="SNAP",Fx=(n,t,e)=>{const i=dj(n.dimensions,t);return!OS(n)||e?Hg({state:n,dimensions:i}):MR({state:n,dimensions:i})};function Ix(n){return n.isDragging&&n.movementMode==="SNAP"?{...n,scrollJumpRequest:null}:n}const yC={phase:"IDLE",completed:null,shouldFlush:!1};var mj=(n=yC,t)=>{if(t.type==="FLUSH")return{...yC,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){n.phase!=="IDLE"&&Lt();const{critical:e,clientSelection:i,viewport:a,dimensions:s,movementMode:o}=t.payload,c=s.draggables[e.draggable.id],d=s.droppables[e.droppable.id],f={selection:i,borderBoxCenter:c.client.borderBox.center,offset:Ei},g={client:f,page:{selection:ji(f.selection,a.scroll.initial),borderBoxCenter:ji(f.selection,a.scroll.initial),offset:ji(f.selection,a.scroll.diff.value)}},m=h1(s.droppables).every(_=>!_.isFixedOnPage),{impact:v,afterCritical:x}=DR({draggable:c,home:d,draggables:s.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:e,movementMode:o,dimensions:s,initial:g,current:g,isWindowScrollAllowed:m,impact:v,afterCritical:x,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"?n:(n.phase!=="DRAGGING"&&Lt(),{...n,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"||Lt(),gj({state:n,published:t.payload});if(t.type==="MOVE"){if(n.phase==="DROP_PENDING")return n;Tu(n)||Lt();const{client:e}=t.payload;return bc(e,n.current.client.selection)?n:Hg({state:n,clientSelection:e,impact:OS(n)?n.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="COLLECTING")return Ix(n);Tu(n)||Lt();const{id:e,newScroll:i}=t.payload,a=n.dimensions.droppables[e];if(!a)return n;const s=iA(a,i);return Fx(n,s,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(n.phase==="DROP_PENDING")return n;Tu(n)||Lt();const{id:e,isEnabled:i}=t.payload,a=n.dimensions.droppables[e];a||Lt(),a.isEnabled===i&&Lt();const s={...a,isEnabled:i};return Fx(n,s,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(n.phase==="DROP_PENDING")return n;Tu(n)||Lt();const{id:e,isCombineEnabled:i}=t.payload,a=n.dimensions.droppables[e];a||Lt(),a.isCombineEnabled===i&&Lt();const s={...a,isCombineEnabled:i};return Fx(n,s,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="DROP_ANIMATING")return n;Tu(n)||Lt(),n.isWindowScrollAllowed||Lt();const e=t.payload.newScroll;if(bc(n.viewport.scroll.current,e))return Ix(n);const i=bR(n.viewport,e);return OS(n)?MR({state:n,viewport:i}):Hg({state:n,viewport:i})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Tu(n))return n;const e=t.payload.maxScroll;if(bc(e,n.viewport.scroll.max))return n;const i={...n.viewport,scroll:{...n.viewport.scroll,max:e}};return{...n,viewport:i}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&Lt();const e=ZG({state:n,type:t.type});return e?Hg({state:n,impact:e.impact,clientSelection:e.clientSelection,scrollJumpRequest:e.scrollJumpRequest}):n}if(t.type==="DROP_PENDING"){const e=t.payload.reason;return n.phase!=="COLLECTING"&&Lt(),{...n,phase:"DROP_PENDING",isWaiting:!0,reason:e}}if(t.type==="DROP_ANIMATE"){const{completed:e,dropDuration:i,newHomeClientOffset:a}=t.payload;return n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||Lt(),{phase:"DROP_ANIMATING",completed:e,dropDuration:i,newHomeClientOffset:a,dimensions:n.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:e}=t.payload;return{phase:"IDLE",completed:e,shouldFlush:!1}}return n};function an(n,t){return n instanceof Object&&"type"in n&&n.type===t}const vj=n=>({type:"BEFORE_INITIAL_CAPTURE",payload:n}),yj=n=>({type:"LIFT",payload:n}),bj=n=>({type:"INITIAL_PUBLISH",payload:n}),xj=n=>({type:"PUBLISH_WHILE_DRAGGING",payload:n}),Sj=()=>({type:"COLLECTION_STARTING",payload:null}),_j=n=>({type:"UPDATE_DROPPABLE_SCROLL",payload:n}),Aj=n=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:n}),Ej=n=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:n}),OR=n=>({type:"MOVE",payload:n}),wj=n=>({type:"MOVE_BY_WINDOW_SCROLL",payload:n}),Cj=n=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:n}),Tj=()=>({type:"MOVE_UP",payload:null}),Rj=()=>({type:"MOVE_DOWN",payload:null}),Mj=()=>({type:"MOVE_RIGHT",payload:null}),Dj=()=>({type:"MOVE_LEFT",payload:null}),uA=()=>({type:"FLUSH",payload:null}),Oj=n=>({type:"DROP_ANIMATE",payload:n}),dA=n=>({type:"DROP_COMPLETE",payload:n}),NR=n=>({type:"DROP",payload:n}),Nj=n=>({type:"DROP_PENDING",payload:n}),LR=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Lj=n=>({getState:t,dispatch:e})=>i=>a=>{if(!an(a,"LIFT")){i(a);return}const{id:s,clientSelection:o,movementMode:c}=a.payload,d=t();d.phase==="DROP_ANIMATING"&&e(dA({completed:d.completed})),t().phase!=="IDLE"&&Lt(),e(uA()),e(vj({draggableId:s,movementMode:c}));const g={draggableId:s,scrollOptions:{shouldPublishImmediately:c==="SNAP"}},{critical:m,dimensions:v,viewport:x}=n.startPublishing(g);e(bj({critical:m,dimensions:v,clientSelection:o,movementMode:c,viewport:x}))},Pj=n=>()=>t=>e=>{an(e,"INITIAL_PUBLISH")&&n.dragging(),an(e,"DROP_ANIMATE")&&n.dropping(e.payload.completed.result.reason),(an(e,"FLUSH")||an(e,"DROP_COMPLETE"))&&n.resting(),t(e)};const hA={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Qg={opacity:{drop:0,combining:.7},scale:{drop:.75}},PR={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},wu=`${PR.outOfTheWay}s ${hA.outOfTheWay}`,Gg={fluid:`opacity ${wu}`,snap:`transform ${wu}, opacity ${wu}`,drop:n=>{const t=`${n}s ${hA.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${wu}`,placeholder:`height ${wu}, width ${wu}, margin ${wu}`},bC=n=>bc(n,Ei)?void 0:`translate(${n.x}px, ${n.y}px)`,NS={moveTo:bC,drop:(n,t)=>{const e=bC(n);if(e)return t?`${e} scale(${Qg.scale.drop})`:e}},{minDropTime:LS,maxDropTime:kR}=PR,kj=kR-LS,xC=1500,Bj=.6;var zj=({current:n,destination:t,reason:e})=>{const i=Kg(n,t);if(i<=0)return LS;if(i>=xC)return kR;const a=i/xC,s=LS+kj*a,o=e==="CANCEL"?s*Bj:s;return Number(o.toFixed(2))},Fj=({impact:n,draggable:t,dimensions:e,viewport:i,afterCritical:a})=>{const{draggables:s,droppables:o}=e,c=nr(n),d=c?o[c]:null,f=o[t.descriptor.droppableId],g=RR({impact:n,draggable:t,draggables:s,afterCritical:a,droppable:d||f,viewport:i});return er(g,t.client.borderBox.center)},Ij=({draggables:n,reason:t,lastImpact:e,home:i,viewport:a,onLiftImpact:s})=>!e.at||t!=="DROP"?{impact:TR({draggables:n,impact:s,destination:i,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:e.at.type==="REORDER"?{impact:e,didDropInsideDroppable:!0}:{impact:{...e,displaced:Wg},didDropInsideDroppable:!0};const Hj=({getState:n,dispatch:t})=>e=>i=>{if(!an(i,"DROP")){e(i);return}const a=n(),s=i.payload.reason;if(a.phase==="COLLECTING"){t(Nj({reason:s}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&Lt(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Lt();const c=a.critical,d=a.dimensions,f=d.draggables[a.critical.draggable.id],{impact:g,didDropInsideDroppable:m}=Ij({reason:s,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),v=m?aA(g):null,x=m?f1(g):null,S={index:c.draggable.index,droppableId:c.droppable.id},_={draggableId:f.descriptor.id,type:f.descriptor.type,source:S,reason:s,mode:a.movementMode,destination:v,combine:x},C=Fj({impact:g,draggable:f,dimensions:d,viewport:a.viewport,afterCritical:a.afterCritical}),D={critical:a.critical,afterCritical:a.afterCritical,result:_,impact:g};if(!(!bc(a.current.client.offset,C)||!!_.combine)){t(dA({completed:D}));return}const w=zj({current:a.current.client.offset,destination:C,reason:s});t(Oj({newHomeClientOffset:C,dropDuration:w,completed:D}))};var BR=()=>({x:window.pageXOffset,y:window.pageYOffset});function Gj(n){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||n()}}}function jj({onWindowScroll:n}){function t(){n(BR())}const e=Xg(t),i=Gj(e);let a=yc;function s(){return a!==yc}function o(){s()&&Lt(),a=zr(window,[i])}function c(){s()||Lt(),e.cancel(),a(),a=yc}return{start:o,stop:c,isActive:s}}const Uj=n=>an(n,"DROP_COMPLETE")||an(n,"DROP_ANIMATE")||an(n,"FLUSH"),qj=n=>{const t=jj({onWindowScroll:e=>{n.dispatch(wj({newScroll:e}))}});return e=>i=>{!t.isActive()&&an(i,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&Uj(i)&&t.stop(),e(i)}};var Vj=n=>{let t=!1,e=!1;const i=setTimeout(()=>{e=!0}),a=s=>{t||e||(t=!0,n(s),clearTimeout(i))};return a.wasCalled=()=>t,a},Yj=()=>{const n=[],t=a=>{const s=n.findIndex(c=>c.timerId===a);s===-1&&Lt();const[o]=n.splice(s,1);o.callback()};return{add:a=>{const s=setTimeout(()=>t(s)),o={timerId:s,callback:a};n.push(o)},flush:()=>{if(!n.length)return;const a=[...n];n.length=0,a.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const Xj=(n,t)=>n==null&&t==null?!0:n==null||t==null?!1:n.droppableId===t.droppableId&&n.index===t.index,Kj=(n,t)=>n==null&&t==null?!0:n==null||t==null?!1:n.draggableId===t.draggableId&&n.droppableId===t.droppableId,Wj=(n,t)=>{if(n===t)return!0;const e=n.draggable.id===t.draggable.id&&n.draggable.droppableId===t.draggable.droppableId&&n.draggable.type===t.draggable.type&&n.draggable.index===t.draggable.index,i=n.droppable.id===t.droppable.id&&n.droppable.type===t.droppable.type;return e&&i},Lp=(n,t)=>{t()},tv=(n,t)=>({draggableId:n.draggable.id,type:n.droppable.type,source:{droppableId:n.droppable.id,index:n.draggable.index},mode:t});function Hx(n,t,e,i){if(!n){e(i(t));return}const a=Vj(e);n(t,{announce:a}),a.wasCalled()||e(i(t))}var $j=(n,t)=>{const e=Yj();let i=null;const a=(m,v)=>{i&&Lt(),Lp("onBeforeCapture",()=>{const x=n().onBeforeCapture;x&&x({draggableId:m,mode:v})})},s=(m,v)=>{i&&Lt(),Lp("onBeforeDragStart",()=>{const x=n().onBeforeDragStart;x&&x(tv(m,v))})},o=(m,v)=>{i&&Lt();const x=tv(m,v);i={mode:v,lastCritical:m,lastLocation:x.source,lastCombine:null},e.add(()=>{Lp("onDragStart",()=>Hx(n().onDragStart,x,t,vv.onDragStart))})},c=(m,v)=>{const x=aA(v),S=f1(v);i||Lt();const _=!Wj(m,i.lastCritical);_&&(i.lastCritical=m);const C=!Xj(i.lastLocation,x);C&&(i.lastLocation=x);const D=!Kj(i.lastCombine,S);if(D&&(i.lastCombine=S),!_&&!C&&!D)return;const T={...tv(m,i.mode),combine:S,destination:x};e.add(()=>{Lp("onDragUpdate",()=>Hx(n().onDragUpdate,T,t,vv.onDragUpdate))})},d=()=>{i||Lt(),e.flush()},f=m=>{i||Lt(),i=null,Lp("onDragEnd",()=>Hx(n().onDragEnd,m,t,vv.onDragEnd))};return{beforeCapture:a,beforeStart:s,start:o,update:c,flush:d,drop:f,abort:()=>{if(!i)return;const m={...tv(i.lastCritical,i.mode),combine:null,destination:null,reason:"CANCEL"};f(m)}}},Qj=(n,t)=>{const e=$j(n,t);return i=>a=>s=>{if(an(s,"BEFORE_INITIAL_CAPTURE")){e.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(an(s,"INITIAL_PUBLISH")){const c=s.payload.critical;e.beforeStart(c,s.payload.movementMode),a(s),e.start(c,s.payload.movementMode);return}if(an(s,"DROP_COMPLETE")){const c=s.payload.completed.result;e.flush(),a(s),e.drop(c);return}if(a(s),an(s,"FLUSH")){e.abort();return}const o=i.getState();o.phase==="DRAGGING"&&e.update(o.critical,o.impact)}};const Zj=n=>t=>e=>{if(!an(e,"DROP_ANIMATION_FINISHED")){t(e);return}const i=n.getState();i.phase!=="DROP_ANIMATING"&&Lt(),n.dispatch(dA({completed:i.completed}))},Jj=n=>{let t=null,e=null;function i(){e&&(cancelAnimationFrame(e),e=null),t&&(t(),t=null)}return a=>s=>{if((an(s,"FLUSH")||an(s,"DROP_COMPLETE")||an(s,"DROP_ANIMATION_FINISHED"))&&i(),a(s),!an(s,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){n.getState().phase==="DROP_ANIMATING"&&n.dispatch(LR())}};e=requestAnimationFrame(()=>{e=null,t=zr(window,[o])})}};var tU=n=>()=>t=>e=>{(an(e,"DROP_COMPLETE")||an(e,"FLUSH")||an(e,"DROP_ANIMATE"))&&n.stopPublishing(),t(e)},eU=n=>{let t=!1;return()=>e=>i=>{if(an(i,"INITIAL_PUBLISH")){t=!0,n.tryRecordFocus(i.payload.critical.draggable.id),e(i),n.tryRestoreFocusRecorded();return}if(e(i),!!t){if(an(i,"FLUSH")){t=!1,n.tryRestoreFocusRecorded();return}if(an(i,"DROP_COMPLETE")){t=!1;const a=i.payload.completed.result;a.combine&&n.tryShiftRecord(a.draggableId,a.combine.draggableId),n.tryRestoreFocusRecorded()}}}};const nU=n=>an(n,"DROP_COMPLETE")||an(n,"DROP_ANIMATE")||an(n,"FLUSH");var iU=n=>t=>e=>i=>{if(nU(i)){n.stop(),e(i);return}if(an(i,"INITIAL_PUBLISH")){e(i);const a=t.getState();a.phase!=="DRAGGING"&&Lt(),n.start(a);return}e(i),n.scroll(t.getState())};const aU=n=>t=>e=>{if(t(e),!an(e,"PUBLISH_WHILE_DRAGGING"))return;const i=n.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||n.dispatch(NR({reason:i.reason})))},rU=Z8;var sU=({dimensionMarshal:n,focusMarshal:t,styleMarshal:e,getResponders:i,announce:a,autoScroller:s})=>Q8(mj,rU(nH(Pj(e),tU(n),Lj(n),Hj,Zj,Jj,aU,iU(s),qj,eU(t),Qj(i,a))));const Gx=()=>({additions:{},removals:{},modified:{}});function oU({registry:n,callbacks:t}){let e=Gx(),i=null;const a=()=>{i||(t.collectionStarting(),i=requestAnimationFrame(()=>{i=null;const{additions:d,removals:f,modified:g}=e,m=Object.keys(d).map(S=>n.draggable.getById(S).getDimension(Ei)).sort((S,_)=>S.descriptor.index-_.descriptor.index),v=Object.keys(g).map(S=>{const C=n.droppable.getById(S).callbacks.getScrollWhileDragging();return{droppableId:S,scroll:C}}),x={additions:m,removals:Object.keys(f),modified:v};e=Gx(),t.publish(x)}))};return{add:d=>{const f=d.descriptor.id;e.additions[f]=d,e.modified[d.descriptor.droppableId]=!0,e.removals[f]&&delete e.removals[f],a()},remove:d=>{const f=d.descriptor;e.removals[f.id]=!0,e.modified[f.droppableId]=!0,e.additions[f.id]&&delete e.additions[f.id],a()},stop:()=>{i&&(cancelAnimationFrame(i),i=null,e=Gx())}}}var zR=({scrollHeight:n,scrollWidth:t,height:e,width:i})=>{const a=er({x:t,y:n},{x:i,y:e});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},FR=()=>{const n=document.documentElement;return n||Lt(),n},IR=()=>{const n=FR();return zR({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,width:n.clientWidth,height:n.clientHeight})},lU=()=>{const n=BR(),t=IR(),e=n.y,i=n.x,a=FR(),s=a.clientWidth,o=a.clientHeight,c=i+s,d=e+o;return{frame:xs({top:e,left:i,right:c,bottom:d}),scroll:{initial:n,current:n,max:t,diff:{value:Ei,displacement:Ei}}}},cU=({critical:n,scrollOptions:t,registry:e})=>{const i=lU(),a=i.scroll.current,s=n.droppable,o=e.droppable.getAllByType(s.type).map(g=>g.callbacks.getDimensionAndWatchScroll(a,t)),c=e.draggable.getAllByType(n.draggable.type).map(g=>g.getDimension(a));return{dimensions:{draggables:fR(c),droppables:hR(o)},critical:n,viewport:i}};function SC(n,t,e){return!(e.descriptor.id===t.id||e.descriptor.type!==t.type||n.droppable.getById(e.descriptor.droppableId).descriptor.mode!=="virtual")}var uU=(n,t)=>{let e=null;const i=oU({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:n}),a=(v,x)=>{n.droppable.exists(v)||Lt(),e&&t.updateDroppableIsEnabled({id:v,isEnabled:x})},s=(v,x)=>{e&&(n.droppable.exists(v)||Lt(),t.updateDroppableIsCombineEnabled({id:v,isCombineEnabled:x}))},o=(v,x)=>{e&&(n.droppable.exists(v)||Lt(),t.updateDroppableScroll({id:v,newScroll:x}))},c=(v,x)=>{e&&n.droppable.getById(v).callbacks.scroll(x)},d=()=>{if(!e)return;i.stop();const v=e.critical.droppable;n.droppable.getAllByType(v.type).forEach(x=>x.callbacks.dragStopped()),e.unsubscribe(),e=null},f=v=>{e||Lt();const x=e.critical.draggable;v.type==="ADDITION"&&SC(n,x,v.value)&&i.add(v.value),v.type==="REMOVAL"&&SC(n,x,v.value)&&i.remove(v.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:s,scrollDroppable:c,updateDroppableScroll:o,startPublishing:v=>{e&&Lt();const x=n.draggable.getById(v.draggableId),S=n.droppable.getById(x.descriptor.droppableId),_={draggable:x.descriptor,droppable:S.descriptor},C=n.subscribe(f);return e={critical:_,unsubscribe:C},cU({critical:_,registry:n,scrollOptions:v.scrollOptions})},stopPublishing:d}},HR=(n,t)=>n.phase==="IDLE"?!0:n.phase!=="DROP_ANIMATING"||n.completed.result.draggableId===t?!1:n.completed.result.reason==="DROP",dU=n=>{window.scrollBy(n.x,n.y)};const hU=Ai(n=>h1(n).filter(t=>!(!t.isEnabled||!t.frame))),fU=(n,t)=>hU(t).find(i=>(i.frame||Lt(),AR(i.frame.pageMarginBox)(n)))||null;var pU=({center:n,destination:t,droppables:e})=>{if(t){const a=e[t];return a.frame?a:null}return fU(n,e)};const Zg={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:n=>n**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var gU=(n,t,e=()=>Zg)=>{const i=e(),a=n[t.size]*i.startFromPercentage,s=n[t.size]*i.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:s}},GR=({startOfRange:n,endOfRange:t,current:e})=>{const i=t-n;return i===0?0:(e-n)/i},fA=1,mU=(n,t,e=()=>Zg)=>{const i=e();if(n>t.startScrollingFrom)return 0;if(n<=t.maxScrollValueAt)return i.maxPixelScroll;if(n===t.startScrollingFrom)return fA;const s=1-GR({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:n}),o=i.maxPixelScroll*i.ease(s);return Math.ceil(o)},vU=(n,t,e)=>{const i=e(),a=i.durationDampening.accelerateAt,s=i.durationDampening.stopDampeningAt,o=t,c=s,f=Date.now()-o;if(f>=s)return n;if(f<a)return fA;const g=GR({startOfRange:a,endOfRange:c,current:f}),m=n*i.ease(g);return Math.ceil(m)},_C=({distanceToEdge:n,thresholds:t,dragStartTime:e,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const s=mU(n,t,a);return s===0?0:i?Math.max(vU(s,e,a),fA):s},AC=({container:n,distanceToEdges:t,dragStartTime:e,axis:i,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const o=gU(n,i,s);return t[i.end]<t[i.start]?_C({distanceToEdge:t[i.end],thresholds:o,dragStartTime:e,shouldUseTimeDampening:a,getAutoScrollerOptions:s}):-1*_C({distanceToEdge:t[i.start],thresholds:o,dragStartTime:e,shouldUseTimeDampening:a,getAutoScrollerOptions:s})},yU=({container:n,subject:t,proposedScroll:e})=>{const i=t.height>n.height,a=t.width>n.width;return!a&&!i?e:a&&i?null:{x:a?0:e.x,y:i?0:e.y}};const bU=dR(n=>n===0?0:n);var jR=({dragStartTime:n,container:t,subject:e,center:i,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const o={top:i.y-t.top,right:t.right-i.x,bottom:t.bottom-i.y,left:i.x-t.left},c=AC({container:t,distanceToEdges:o,dragStartTime:n,axis:rA,shouldUseTimeDampening:a,getAutoScrollerOptions:s}),d=AC({container:t,distanceToEdges:o,dragStartTime:n,axis:mR,shouldUseTimeDampening:a,getAutoScrollerOptions:s}),f=bU({x:d,y:c});if(bc(f,Ei))return null;const g=yU({container:t,subject:e,proposedScroll:f});return g?bc(g,Ei)?null:g:null};const xU=dR(n=>n===0?0:n>0?1:-1),pA=(()=>{const n=(t,e)=>t<0?t:t>e?t-e:0;return({current:t,max:e,change:i})=>{const a=ji(t,i),s={x:n(a.x,e.x),y:n(a.y,e.y)};return bc(s,Ei)?null:s}})(),UR=({max:n,current:t,change:e})=>{const i={x:Math.max(t.x,n.x),y:Math.max(t.y,n.y)},a=xU(e),s=pA({max:i,current:t,change:a});return!s||a.x!==0&&s.x===0||a.y!==0&&s.y===0},gA=(n,t)=>UR({current:n.scroll.current,max:n.scroll.max,change:t}),SU=(n,t)=>{if(!gA(n,t))return null;const e=n.scroll.max,i=n.scroll.current;return pA({current:i,max:e,change:t})},mA=(n,t)=>{const e=n.frame;return e?UR({current:e.scroll.current,max:e.scroll.max,change:t}):!1},_U=(n,t)=>{const e=n.frame;return!e||!mA(n,t)?null:pA({current:e.scroll.current,max:e.scroll.max,change:t})};var AU=({viewport:n,subject:t,center:e,dragStartTime:i,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const o=jR({dragStartTime:i,container:n.frame,subject:t,center:e,shouldUseTimeDampening:a,getAutoScrollerOptions:s});return o&&gA(n,o)?o:null},EU=({droppable:n,subject:t,center:e,dragStartTime:i,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const o=n.frame;if(!o)return null;const c=jR({dragStartTime:i,container:o.pageMarginBox,subject:t,center:e,shouldUseTimeDampening:a,getAutoScrollerOptions:s});return c&&mA(n,c)?c:null},EC=({state:n,dragStartTime:t,shouldUseTimeDampening:e,scrollWindow:i,scrollDroppable:a,getAutoScrollerOptions:s})=>{const o=n.current.page.borderBoxCenter,d=n.dimensions.draggables[n.critical.draggable.id].page.marginBox;if(n.isWindowScrollAllowed){const m=n.viewport,v=AU({dragStartTime:t,viewport:m,subject:d,center:o,shouldUseTimeDampening:e,getAutoScrollerOptions:s});if(v){i(v);return}}const f=pU({center:o,destination:nr(n.impact),droppables:n.dimensions.droppables});if(!f)return;const g=EU({dragStartTime:t,droppable:f,subject:d,center:o,shouldUseTimeDampening:e,getAutoScrollerOptions:s});g&&a(f.descriptor.id,g)},wU=({scrollWindow:n,scrollDroppable:t,getAutoScrollerOptions:e=()=>Zg})=>{const i=Xg(n),a=Xg(t);let s=null;const o=f=>{s||Lt();const{shouldUseTimeDampening:g,dragStartTime:m}=s;EC({state:f,scrollWindow:i,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:g,getAutoScrollerOptions:e})};return{start:f=>{s&&Lt();const g=Date.now();let m=!1;const v=()=>{m=!0};EC({state:f,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:v,scrollDroppable:v,getAutoScrollerOptions:e}),s={dragStartTime:g,shouldUseTimeDampening:m},m&&o(f)},stop:()=>{s&&(i.cancel(),a.cancel(),s=null)},scroll:o}},CU=({move:n,scrollDroppable:t,scrollWindow:e})=>{const i=(c,d)=>{const f=ji(c.current.client.selection,d);n({client:f})},a=(c,d)=>{if(!mA(c,d))return d;const f=_U(c,d);if(!f)return t(c.descriptor.id,d),null;const g=er(d,f);return t(c.descriptor.id,g),er(d,g)},s=(c,d,f)=>{if(!c||!gA(d,f))return f;const g=SU(d,f);if(!g)return e(f),null;const m=er(f,g);return e(m),er(f,m)};return c=>{const d=c.scrollJumpRequest;if(!d)return;const f=nr(c.impact);f||Lt();const g=a(c.dimensions.droppables[f],d);if(!g)return;const m=c.viewport,v=s(c.isWindowScrollAllowed,m,g);v&&i(c,v)}},TU=({scrollDroppable:n,scrollWindow:t,move:e,getAutoScrollerOptions:i})=>{const a=wU({scrollWindow:t,scrollDroppable:n,getAutoScrollerOptions:i}),s=CU({move:e,scrollWindow:t,scrollDroppable:n});return{scroll:d=>{if(!(i().disabled||d.phase!=="DRAGGING")){if(d.movementMode==="FLUID"){a.scroll(d);return}d.scrollJumpRequest&&s(d)}},start:a.start,stop:a.stop}};const Vh="data-rfd",Yh=(()=>{const n=`${Vh}-drag-handle`;return{base:n,draggableId:`${n}-draggable-id`,contextId:`${n}-context-id`}})(),PS=(()=>{const n=`${Vh}-draggable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),RU=(()=>{const n=`${Vh}-droppable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),wC={contextId:`${Vh}-scroll-container-context-id`},MU=n=>t=>`[${t}="${n}"]`,Pp=(n,t)=>n.map(e=>{const i=e.styles[t];return i?`${e.selector} { ${i} }`:""}).join(" "),DU="pointer-events: none;";var OU=n=>{const t=MU(n),e=(()=>{const c=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Yh.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:c,dragging:DU,dropAnimating:c}}})(),i=(()=>{const c=`
      transition: ${Gg.outOfTheWay};
    `;return{selector:t(PS.contextId),styles:{dragging:c,dropAnimating:c,userCancel:c}}})(),a={selector:t(RU.contextId),styles:{always:"overflow-anchor: none;"}},o=[i,e,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Pp(o,"always"),resting:Pp(o,"resting"),dragging:Pp(o,"dragging"),dropAnimating:Pp(o,"dropAnimating"),userCancel:Pp(o,"userCancel")}};const ir=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?X.useLayoutEffect:X.useEffect,jx=()=>{const n=document.querySelector("head");return n||Lt(),n},CC=n=>{const t=document.createElement("style");return n&&t.setAttribute("nonce",n),t.type="text/css",t};function NU(n,t){const e=Ye(()=>OU(n),[n]),i=X.useRef(null),a=X.useRef(null),s=Wt(Ai(m=>{const v=a.current;v||Lt(),v.textContent=m}),[]),o=Wt(m=>{const v=i.current;v||Lt(),v.textContent=m},[]);ir(()=>{!i.current&&!a.current||Lt();const m=CC(t),v=CC(t);return i.current=m,a.current=v,m.setAttribute(`${Vh}-always`,n),v.setAttribute(`${Vh}-dynamic`,n),jx().appendChild(m),jx().appendChild(v),o(e.always),s(e.resting),()=>{const x=S=>{const _=S.current;_||Lt(),jx().removeChild(_),S.current=null};x(i),x(a)}},[t,o,s,e.always,e.resting,n]);const c=Wt(()=>s(e.dragging),[s,e.dragging]),d=Wt(m=>{if(m==="DROP"){s(e.dropAnimating);return}s(e.userCancel)},[s,e.dropAnimating,e.userCancel]),f=Wt(()=>{a.current&&s(e.resting)},[s,e.resting]);return Ye(()=>({dragging:c,dropping:d,resting:f}),[c,d,f])}function qR(n,t){return Array.from(n.querySelectorAll(t))}var VR=n=>n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView:window;function m1(n){return n instanceof VR(n).HTMLElement}function LU(n,t){const e=`[${Yh.contextId}="${n}"]`,i=qR(document,e);if(!i.length)return null;const a=i.find(s=>s.getAttribute(Yh.draggableId)===t);return!a||!m1(a)?null:a}function PU(n){const t=X.useRef({}),e=X.useRef(null),i=X.useRef(null),a=X.useRef(!1),s=Wt(function(v,x){const S={id:v,focus:x};return t.current[v]=S,function(){const C=t.current;C[v]!==S&&delete C[v]}},[]),o=Wt(function(v){const x=LU(n,v);x&&x!==document.activeElement&&x.focus()},[n]),c=Wt(function(v,x){e.current===v&&(e.current=x)},[]),d=Wt(function(){i.current||a.current&&(i.current=requestAnimationFrame(()=>{i.current=null;const v=e.current;v&&o(v)}))},[o]),f=Wt(function(v){e.current=null;const x=document.activeElement;x&&x.getAttribute(Yh.draggableId)===v&&(e.current=v)},[]);return ir(()=>(a.current=!0,function(){a.current=!1;const v=i.current;v&&cancelAnimationFrame(v)}),[]),Ye(()=>({register:s,tryRecordFocus:f,tryRestoreFocusRecorded:d,tryShiftRecord:c}),[s,f,d,c])}function kU(){const n={draggables:{},droppables:{}},t=[];function e(m){return t.push(m),function(){const x=t.indexOf(m);x!==-1&&t.splice(x,1)}}function i(m){t.length&&t.forEach(v=>v(m))}function a(m){return n.draggables[m]||null}function s(m){const v=a(m);return v||Lt(),v}const o={register:m=>{n.draggables[m.descriptor.id]=m,i({type:"ADDITION",value:m})},update:(m,v)=>{const x=n.draggables[v.descriptor.id];x&&x.uniqueId===m.uniqueId&&(delete n.draggables[v.descriptor.id],n.draggables[m.descriptor.id]=m)},unregister:m=>{const v=m.descriptor.id,x=a(v);x&&m.uniqueId===x.uniqueId&&(delete n.draggables[v],n.droppables[m.descriptor.droppableId]&&i({type:"REMOVAL",value:m}))},getById:s,findById:a,exists:m=>!!a(m),getAllByType:m=>Object.values(n.draggables).filter(v=>v.descriptor.type===m)};function c(m){return n.droppables[m]||null}function d(m){const v=c(m);return v||Lt(),v}const f={register:m=>{n.droppables[m.descriptor.id]=m},unregister:m=>{const v=c(m.descriptor.id);v&&m.uniqueId===v.uniqueId&&delete n.droppables[m.descriptor.id]},getById:d,findById:c,exists:m=>!!c(m),getAllByType:m=>Object.values(n.droppables).filter(v=>v.descriptor.type===m)};function g(){n.draggables={},n.droppables={},t.length=0}return{draggable:o,droppable:f,subscribe:e,clean:g}}function BU(){const n=Ye(kU,[]);return X.useEffect(()=>function(){n.clean()},[n]),n}var vA=q.createContext(null),Bv=()=>{const n=document.body;return n||Lt(),n};const zU={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},FU=n=>`rfd-announcement-${n}`;function IU(n){const t=Ye(()=>FU(n),[n]),e=X.useRef(null);return X.useEffect(function(){const s=document.createElement("div");return e.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Nv(s.style,zU),Bv().appendChild(s),function(){setTimeout(function(){const d=Bv();d.contains(s)&&d.removeChild(s),s===e.current&&(e.current=null)})}},[t]),Wt(a=>{const s=e.current;if(s){s.textContent=a;return}},[])}const HU={separator:"::"};function yA(n,t=HU){const e=q.useId();return Ye(()=>`${n}${t.separator}${e}`,[t.separator,n,e])}function GU({contextId:n,uniqueId:t}){return`rfd-hidden-text-${n}-${t}`}function jU({contextId:n,text:t}){const e=yA("hidden-text",{separator:"-"}),i=Ye(()=>GU({contextId:n,uniqueId:e}),[e,n]);return X.useEffect(function(){const s=document.createElement("div");return s.id=i,s.textContent=t,s.style.display="none",Bv().appendChild(s),function(){const c=Bv();c.contains(s)&&c.removeChild(s)}},[i,t]),i}var v1=q.createContext(null);function YR(n){const t=X.useRef(n);return X.useEffect(()=>{t.current=n}),t}function UU(){let n=null;function t(){return!!n}function e(o){return o===n}function i(o){n&&Lt();const c={abandon:o};return n=c,c}function a(){n||Lt(),n=null}function s(){n&&(n.abandon(),a())}return{isClaimed:t,isActive:e,claim:i,release:a,tryAbandon:s}}function Jg(n){return n.phase==="IDLE"||n.phase==="DROP_ANIMATING"?!1:n.isDragging}const qU=9,VU=13,bA=27,XR=32,YU=33,XU=34,KU=35,WU=36,$U=37,QU=38,ZU=39,JU=40,tq={[VU]:!0,[qU]:!0};var KR=n=>{tq[n.keyCode]&&n.preventDefault()};const y1=(()=>{const n="visibilitychange";return typeof document>"u"?n:[n,`ms${n}`,`webkit${n}`,`moz${n}`,`o${n}`].find(i=>`on${i}`in document)||n})(),WR=0,TC=5;function eq(n,t){return Math.abs(t.x-n.x)>=TC||Math.abs(t.y-n.y)>=TC}const RC={type:"IDLE"};function nq({cancel:n,completed:t,getPhase:e,setPhase:i}){return[{eventName:"mousemove",fn:a=>{const{button:s,clientX:o,clientY:c}=a;if(s!==WR)return;const d={x:o,y:c},f=e();if(f.type==="DRAGGING"){a.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&Lt();const g=f.point;if(!eq(g,d))return;a.preventDefault();const m=f.actions.fluidLift(d);i({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:a=>{const s=e();if(s.type!=="DRAGGING"){n();return}a.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{e().type==="DRAGGING"&&a.preventDefault(),n()}},{eventName:"keydown",fn:a=>{if(e().type==="PENDING"){n();return}if(a.keyCode===bA){a.preventDefault(),n();return}KR(a)}},{eventName:"resize",fn:n},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{e().type==="PENDING"&&n()}},{eventName:"webkitmouseforcedown",fn:a=>{const s=e();if(s.type==="IDLE"&&Lt(),s.actions.shouldRespectForcePress()){n();return}a.preventDefault()}},{eventName:y1,fn:n}]}function iq(n){const t=X.useRef(RC),e=X.useRef(yc),i=Ye(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==WR||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const v=n.findClosestDraggableId(m);if(!v)return;const x=n.tryGetLock(v,o,{sourceEvent:m});if(!x)return;m.preventDefault();const S={x:m.clientX,y:m.clientY};e.current(),f(x,S)}}),[n]),a=Ye(()=>({eventName:"webkitmouseforcewillbegin",fn:g=>{if(g.defaultPrevented)return;const m=n.findClosestDraggableId(g);if(!m)return;const v=n.findOptionsForDraggable(m);v&&(v.shouldRespectForcePress||n.canGetLock(m)&&g.preventDefault())}}),[n]),s=Wt(function(){const m={passive:!1,capture:!0};e.current=zr(window,[a,i],m)},[a,i]),o=Wt(()=>{t.current.type!=="IDLE"&&(t.current=RC,e.current(),s())},[s]),c=Wt(()=>{const g=t.current;o(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[o]),d=Wt(function(){const m={capture:!0,passive:!1},v=nq({cancel:c,completed:o,getPhase:()=>t.current,setPhase:x=>{t.current=x}});e.current=zr(window,v,m)},[c,o]),f=Wt(function(m,v){t.current.type!=="IDLE"&&Lt(),t.current={type:"PENDING",point:v,actions:m},d()},[d]);ir(function(){return s(),function(){e.current()}},[s])}function aq(){}const rq={[XU]:!0,[YU]:!0,[WU]:!0,[KU]:!0};function sq(n,t){function e(){t(),n.cancel()}function i(){t(),n.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===bA){a.preventDefault(),e();return}if(a.keyCode===XR){a.preventDefault(),i();return}if(a.keyCode===JU){a.preventDefault(),n.moveDown();return}if(a.keyCode===QU){a.preventDefault(),n.moveUp();return}if(a.keyCode===ZU){a.preventDefault(),n.moveRight();return}if(a.keyCode===$U){a.preventDefault(),n.moveLeft();return}if(rq[a.keyCode]){a.preventDefault();return}KR(a)}},{eventName:"mousedown",fn:e},{eventName:"mouseup",fn:e},{eventName:"click",fn:e},{eventName:"touchstart",fn:e},{eventName:"resize",fn:e},{eventName:"wheel",fn:e,options:{passive:!0}},{eventName:y1,fn:e}]}function oq(n){const t=X.useRef(aq),e=Ye(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==XR)return;const o=n.findClosestDraggableId(s);if(!o)return;const c=n.tryGetLock(o,g,{sourceEvent:s});if(!c)return;s.preventDefault();let d=!0;const f=c.snapLift();t.current();function g(){d||Lt(),d=!1,t.current(),i()}t.current=zr(window,sq(f,g),{capture:!0,passive:!1})}}),[n]),i=Wt(function(){const s={passive:!1,capture:!0};t.current=zr(window,[e],s)},[e]);ir(function(){return i(),function(){t.current()}},[i])}const Ux={type:"IDLE"},lq=120,cq=.15;function uq({cancel:n,getPhase:t}){return[{eventName:"orientationchange",fn:n},{eventName:"resize",fn:n},{eventName:"contextmenu",fn:e=>{e.preventDefault()}},{eventName:"keydown",fn:e=>{if(t().type!=="DRAGGING"){n();return}e.keyCode===bA&&e.preventDefault(),n()}},{eventName:y1,fn:n}]}function dq({cancel:n,completed:t,getPhase:e}){return[{eventName:"touchmove",options:{capture:!1},fn:i=>{const a=e();if(a.type!=="DRAGGING"){n();return}a.hasMoved=!0;const{clientX:s,clientY:o}=i.touches[0],c={x:s,y:o};i.preventDefault(),a.actions.move(c)}},{eventName:"touchend",fn:i=>{const a=e();if(a.type!=="DRAGGING"){n();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:i=>{if(e().type!=="DRAGGING"){n();return}i.preventDefault(),n()}},{eventName:"touchforcechange",fn:i=>{const a=e();a.type==="IDLE"&&Lt();const s=i.touches[0];if(!s||!(s.force>=cq))return;const c=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){c&&n();return}if(c){if(a.hasMoved){i.preventDefault();return}n();return}i.preventDefault()}},{eventName:y1,fn:n}]}function hq(n){const t=X.useRef(Ux),e=X.useRef(yc),i=Wt(function(){return t.current},[]),a=Wt(function(x){t.current=x},[]),s=Ye(()=>({eventName:"touchstart",fn:function(x){if(x.defaultPrevented)return;const S=n.findClosestDraggableId(x);if(!S)return;const _=n.tryGetLock(S,c,{sourceEvent:x});if(!_)return;const C=x.touches[0],{clientX:D,clientY:T}=C,w={x:D,y:T};e.current(),m(_,w)}}),[n]),o=Wt(function(){const x={capture:!0,passive:!1};e.current=zr(window,[s],x)},[s]),c=Wt(()=>{const v=t.current;v.type!=="IDLE"&&(v.type==="PENDING"&&clearTimeout(v.longPressTimerId),a(Ux),e.current(),o())},[o,a]),d=Wt(()=>{const v=t.current;c(),v.type==="DRAGGING"&&v.actions.cancel({shouldBlockNextClick:!0}),v.type==="PENDING"&&v.actions.abort()},[c]),f=Wt(function(){const x={capture:!0,passive:!1},S={cancel:d,completed:c,getPhase:i},_=zr(window,dq(S),x),C=zr(window,uq(S),x);e.current=function(){_(),C()}},[d,i,c]),g=Wt(function(){const x=i();x.type!=="PENDING"&&Lt();const S=x.actions.fluidLift(x.point);a({type:"DRAGGING",actions:S,hasMoved:!1})},[i,a]),m=Wt(function(x,S){i().type!=="IDLE"&&Lt();const _=setTimeout(g,lq);a({type:"PENDING",point:S,actions:x,longPressTimerId:_}),f()},[f,i,a,g]);ir(function(){return o(),function(){e.current();const S=i();S.type==="PENDING"&&(clearTimeout(S.longPressTimerId),a(Ux))}},[i,o,a]),ir(function(){return zr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const fq=["input","button","textarea","select","option","optgroup","video","audio"];function $R(n,t){if(t==null)return!1;if(fq.includes(t.tagName.toLowerCase()))return!0;const i=t.getAttribute("contenteditable");return i==="true"||i===""?!0:t===n?!1:$R(n,t.parentElement)}function pq(n,t){const e=t.target;return m1(e)?$R(n,e):!1}var gq=n=>xs(n.getBoundingClientRect()).center;function mq(n){return n instanceof VR(n).Element}const vq=(()=>{const n="matches";return typeof document>"u"?n:[n,"msMatchesSelector","webkitMatchesSelector"].find(i=>i in Element.prototype)||n})();function QR(n,t){return n==null?null:n[vq](t)?n:QR(n.parentElement,t)}function yq(n,t){return n.closest?n.closest(t):QR(n,t)}function bq(n){return`[${Yh.contextId}="${n}"]`}function xq(n,t){const e=t.target;if(!mq(e))return null;const i=bq(n),a=yq(e,i);return!a||!m1(a)?null:a}function Sq(n,t){const e=xq(n,t);return e?e.getAttribute(Yh.draggableId):null}function _q(n,t){const e=`[${PS.contextId}="${n}"]`,a=qR(document,e).find(s=>s.getAttribute(PS.id)===t);return!a||!m1(a)?null:a}function Aq(n){n.preventDefault()}function ev({expected:n,phase:t,isLockActive:e,shouldWarn:i}){return!(!e()||n!==t)}function ZR({lockAPI:n,store:t,registry:e,draggableId:i}){if(n.isClaimed())return!1;const a=e.draggable.findById(i);return!(!a||!a.options.isEnabled||!HR(t.getState(),i))}function Eq({lockAPI:n,contextId:t,store:e,registry:i,draggableId:a,forceSensorStop:s,sourceEvent:o}){if(!ZR({lockAPI:n,store:e,registry:i,draggableId:a}))return null;const d=i.draggable.getById(a),f=_q(t,d.descriptor.id);if(!f||o&&!d.options.canDragInteractiveElements&&pq(f,o))return null;const g=n.claim(s||yc);let m="PRE_DRAG";function v(){return d.options.shouldRespectForcePress}function x(){return n.isActive(g)}function S(O,L){ev({expected:O,phase:m,isLockActive:x,shouldWarn:!0})&&e.dispatch(L())}const _=S.bind(null,"DRAGGING");function C(O){function L(){n.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(L(),Lt()),e.dispatch(yj(O.liftActionArgs)),m="DRAGGING";function I(B,F={shouldBlockNextClick:!1}){if(O.cleanup(),F.shouldBlockNextClick){const z=zr(window,[{eventName:"click",fn:Aq,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}L(),e.dispatch(NR({reason:B}))}return{isActive:()=>ev({expected:"DRAGGING",phase:m,isLockActive:x,shouldWarn:!1}),shouldRespectForcePress:v,drop:B=>I("DROP",B),cancel:B=>I("CANCEL",B),...O.actions}}function D(O){const L=Xg(B=>{_(()=>OR({client:B}))});return{...C({liftActionArgs:{id:a,clientSelection:O,movementMode:"FLUID"},cleanup:()=>L.cancel(),actions:{move:L}}),move:L}}function T(){const O={moveUp:()=>_(Tj),moveRight:()=>_(Mj),moveDown:()=>_(Rj),moveLeft:()=>_(Dj)};return C({liftActionArgs:{id:a,clientSelection:gq(f),movementMode:"SNAP"},cleanup:yc,actions:O})}function w(){ev({expected:"PRE_DRAG",phase:m,isLockActive:x,shouldWarn:!0})&&n.release()}return{isActive:()=>ev({expected:"PRE_DRAG",phase:m,isLockActive:x,shouldWarn:!1}),shouldRespectForcePress:v,fluidLift:D,snapLift:T,abort:w}}const wq=[iq,oq,hq];function Cq({contextId:n,store:t,registry:e,customSensors:i,enableDefaultSensors:a}){const s=[...a?wq:[],...i||[]],o=X.useState(()=>UU())[0],c=Wt(function(C,D){Jg(C)&&!Jg(D)&&o.tryAbandon()},[o]);ir(function(){let C=t.getState();return t.subscribe(()=>{const T=t.getState();c(C,T),C=T})},[o,t,c]),ir(()=>o.tryAbandon,[o.tryAbandon]);const d=Wt(_=>ZR({lockAPI:o,registry:e,store:t,draggableId:_}),[o,e,t]),f=Wt((_,C,D)=>Eq({lockAPI:o,registry:e,contextId:n,store:t,draggableId:_,forceSensorStop:C||null,sourceEvent:D&&D.sourceEvent?D.sourceEvent:null}),[n,o,e,t]),g=Wt(_=>Sq(n,_),[n]),m=Wt(_=>{const C=e.draggable.findById(_);return C?C.options:null},[e.draggable]),v=Wt(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(uA()))},[o,t]),x=Wt(()=>o.isClaimed(),[o]),S=Ye(()=>({canGetLock:d,tryGetLock:f,findClosestDraggableId:g,findOptionsForDraggable:m,tryReleaseLock:v,isLockClaimed:x}),[d,f,g,m,v,x]);for(let _=0;_<s.length;_++)s[_](S)}const Tq=n=>({onBeforeCapture:t=>{const e=()=>{n.onBeforeCapture&&n.onBeforeCapture(t)};im.flushSync(e)},onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragEnd:n.onDragEnd,onDragUpdate:n.onDragUpdate}),Rq=n=>({...Zg,...n.autoScrollerOptions,durationDampening:{...Zg.durationDampening,...n.autoScrollerOptions}});function kp(n){return n.current||Lt(),n.current}function Mq(n){const{contextId:t,setCallbacks:e,sensors:i,nonce:a,dragHandleUsageInstructions:s}=n,o=X.useRef(null),c=YR(n),d=Wt(()=>Tq(c.current),[c]),f=Wt(()=>Rq(c.current),[c]),g=IU(t),m=jU({contextId:t,text:s}),v=NU(t,a),x=Wt(z=>{kp(o).dispatch(z)},[]),S=Ye(()=>tC({publishWhileDragging:xj,updateDroppableScroll:_j,updateDroppableIsEnabled:Aj,updateDroppableIsCombineEnabled:Ej,collectionStarting:Sj},x),[x]),_=BU(),C=Ye(()=>uU(_,S),[_,S]),D=Ye(()=>TU({scrollWindow:dU,scrollDroppable:C.scrollDroppable,getAutoScrollerOptions:f,...tC({move:OR},x)}),[C.scrollDroppable,x,f]),T=PU(t),w=Ye(()=>sU({announce:g,autoScroller:D,dimensionMarshal:C,focusMarshal:T,getResponders:d,styleMarshal:v}),[g,D,C,T,d,v]);o.current=w;const R=Wt(()=>{const z=kp(o);z.getState().phase!=="IDLE"&&z.dispatch(uA())},[]),O=Wt(()=>{const z=kp(o).getState();return z.phase==="DROP_ANIMATING"?!0:z.phase==="IDLE"?!1:z.isDragging},[]),L=Ye(()=>({isDragging:O,tryAbort:R}),[O,R]);e(L);const I=Wt(z=>HR(kp(o).getState(),z),[]),B=Wt(()=>Tu(kp(o).getState()),[]),F=Ye(()=>({marshal:C,focus:T,contextId:t,canLift:I,isMovementAllowed:B,dragHandleUsageInstructionsId:m,registry:_}),[t,C,m,T,I,B,_]);return Cq({contextId:t,store:w,registry:_,customSensors:i||null,enableDefaultSensors:n.enableDefaultSensors!==!1}),X.useEffect(()=>R,[R]),q.createElement(v1.Provider,{value:F},q.createElement(tG,{context:vA,store:w},n.children))}function Dq(){return q.useId()}function Oq(n){const t=Dq(),e=n.dragHandleUsageInstructions||vv.dragHandleUsageInstructions;return q.createElement(oG,null,i=>q.createElement(Mq,{nonce:n.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:e,enableDefaultSensors:n.enableDefaultSensors,sensors:n.sensors,onBeforeCapture:n.onBeforeCapture,onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragUpdate:n.onDragUpdate,onDragEnd:n.onDragEnd,autoScrollerOptions:n.autoScrollerOptions},n.children))}const MC={dragging:5e3,dropAnimating:4500},Nq=(n,t)=>t?Gg.drop(t.duration):n?Gg.snap:Gg.fluid,Lq=(n,t)=>{if(n)return t?Qg.opacity.drop:Qg.opacity.combining},Pq=n=>n.forceShouldAnimate!=null?n.forceShouldAnimate:n.mode==="SNAP";function kq(n){const e=n.dimension.client,{offset:i,combineWith:a,dropping:s}=n,o=!!a,c=Pq(n),d=!!s,f=d?NS.drop(i,o):NS.moveTo(i);return{position:"fixed",top:e.marginBox.top,left:e.marginBox.left,boxSizing:"border-box",width:e.borderBox.width,height:e.borderBox.height,transition:Nq(c,s),transform:f,opacity:Lq(o,d),zIndex:d?MC.dropAnimating:MC.dragging,pointerEvents:"none"}}function Bq(n){return{transform:NS.moveTo(n.offset),transition:n.shouldAnimateDisplacement?void 0:"none"}}function zq(n){return n.type==="DRAGGING"?kq(n):Bq(n)}function Fq(n,t,e=Ei){const i=window.getComputedStyle(t),a=t.getBoundingClientRect(),s=rR(a,i),o=Ov(s,e),c={client:s,tagName:t.tagName.toLowerCase(),display:i.display},d={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:n,placeholder:c,displaceBy:d,client:s,page:o}}function Iq(n){const t=yA("draggable"),{descriptor:e,registry:i,getDraggableRef:a,canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:c}=n,d=Ye(()=>({canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:c}),[s,c,o]),f=Wt(x=>{const S=a();return S||Lt(),Fq(e,S,x)},[e,a]),g=Ye(()=>({uniqueId:t,descriptor:e,options:d,getDimension:f}),[e,f,d,t]),m=X.useRef(g),v=X.useRef(!0);ir(()=>(i.draggable.register(m.current),()=>i.draggable.unregister(m.current)),[i.draggable]),ir(()=>{if(v.current){v.current=!1;return}const x=m.current;m.current=g,i.draggable.update(g,x)},[g,i.draggable])}var xA=q.createContext(null);function zv(n){const t=X.useContext(n);return t||Lt(),t}function Hq(n){n.preventDefault()}const Gq=n=>{const t=X.useRef(null),e=Wt((L=null)=>{t.current=L},[]),i=Wt(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:s,registry:o}=zv(v1),{type:c,droppableId:d}=zv(xA),f=Ye(()=>({id:n.draggableId,index:n.index,type:c,droppableId:d}),[n.draggableId,n.index,c,d]),{children:g,draggableId:m,isEnabled:v,shouldRespectForcePress:x,canDragInteractiveElements:S,isClone:_,mapped:C,dropAnimationFinished:D}=n;if(!_){const L=Ye(()=>({descriptor:f,registry:o,getDraggableRef:i,canDragInteractiveElements:S,shouldRespectForcePress:x,isEnabled:v}),[f,o,i,S,x,v]);Iq(L)}const T=Ye(()=>v?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:Hq}:null,[a,s,m,v]),w=Wt(L=>{C.type==="DRAGGING"&&C.dropping&&L.propertyName==="transform"&&im.flushSync(D)},[D,C]),R=Ye(()=>{const L=zq(C),I=C.type==="DRAGGING"&&C.dropping?w:void 0;return{innerRef:e,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":m,style:L,onTransitionEnd:I},dragHandleProps:T}},[a,T,m,C,w,e]),O=Ye(()=>({draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}),[f.droppableId,f.id,f.index,f.type]);return q.createElement(q.Fragment,null,g(R,C.snapshot,O))};var JR=(n,t)=>n===t,t9=n=>{const{combine:t,destination:e}=n;return e?e.droppableId:t?t.droppableId:null};const jq=n=>n.combine?n.combine.draggableId:null,Uq=n=>n.at&&n.at.type==="COMBINE"?n.at.combine.draggableId:null;function qq(){const n=Ai((a,s)=>({x:a,y:s})),t=Ai((a,s,o=null,c=null,d=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!d,dropAnimation:d,mode:a,draggingOver:o,combineWith:c,combineTargetFor:null})),e=Ai((a,s,o,c,d=null,f=null,g=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:f,mode:s,offset:a,dimension:o,forceShouldAnimate:g,snapshot:t(s,c,d,f,null)}}));return(a,s)=>{if(Jg(a)){if(a.critical.draggable.id!==s.draggableId)return null;const o=a.current.client.offset,c=a.dimensions.draggables[s.draggableId],d=nr(a.impact),f=Uq(a.impact),g=a.forceShouldAnimate;return e(n(o.x,o.y),a.movementMode,c,s.isClone,d,f,g)}if(a.phase==="DROP_ANIMATING"){const o=a.completed;if(o.result.draggableId!==s.draggableId)return null;const c=s.isClone,d=a.dimensions.draggables[s.draggableId],f=o.result,g=f.mode,m=t9(f),v=jq(f),S={duration:a.dropDuration,curve:hA.drop,moveTo:a.newHomeClientOffset,opacity:v?Qg.opacity.drop:null,scale:v?Qg.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:d,dropping:S,draggingOver:m,combineWith:v,mode:g,forceShouldAnimate:null,snapshot:t(g,c,m,v,S)}}}return null}}function e9(n=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:n,combineWith:null}}const Vq={mapped:{type:"SECONDARY",offset:Ei,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:e9(null)}};function Yq(){const n=Ai((o,c)=>({x:o,y:c})),t=Ai(e9),e=Ai((o,c=null,d)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:c,shouldAnimateDisplacement:d,snapshot:t(c)}})),i=o=>o?e(Ei,o,!0):null,a=(o,c,d,f)=>{const g=d.displaced.visible[o],m=!!(f.inVirtualList&&f.effected[o]),v=f1(d),x=v&&v.draggableId===o?c:null;if(!g){if(!m)return i(x);if(d.displaced.invisible[o])return null;const C=Jh(f.displacedBy.point),D=n(C.x,C.y);return e(D,x,!0)}if(m)return i(x);const S=d.displacedBy.point,_=n(S.x,S.y);return e(_,x,g.shouldAnimate)};return(o,c)=>{if(Jg(o))return o.critical.draggable.id===c.draggableId?null:a(c.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const d=o.completed;return d.result.draggableId===c.draggableId?null:a(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null}}const Xq=()=>{const n=qq(),t=Yq();return(i,a)=>n(i,a)||t(i,a)||Vq},Kq={dropAnimationFinished:LR},Wq=aR(Xq,Kq,null,{context:vA,areStatePropsEqual:JR})(Gq);function n9(n){return zv(xA).isUsingCloneFor===n.draggableId&&!n.isClone?null:q.createElement(Wq,n)}function i9(n){const t=typeof n.isDragDisabled=="boolean"?!n.isDragDisabled:!0,e=!!n.disableInteractiveElementBlocking,i=!!n.shouldRespectForcePress;return q.createElement(n9,Nv({},n,{isClone:!1,isEnabled:t,canDragInteractiveElements:e,shouldRespectForcePress:i}))}const a9=n=>t=>n===t,$q=a9("scroll"),Qq=a9("auto"),DC=(n,t)=>t(n.overflowX)||t(n.overflowY),Zq=n=>{const t=window.getComputedStyle(n),e={overflowX:t.overflowX,overflowY:t.overflowY};return DC(e,$q)||DC(e,Qq)},Jq=()=>!1,r9=n=>n==null?null:n===document.body?Jq()?n:null:n===document.documentElement?null:Zq(n)?n:r9(n.parentElement);var kS=n=>({x:n.scrollLeft,y:n.scrollTop});const s9=n=>n?window.getComputedStyle(n).position==="fixed"?!0:s9(n.parentElement):!1;var tV=n=>{const t=r9(n),e=s9(n);return{closestScrollable:t,isFixedOnPage:e}},eV=({descriptor:n,isEnabled:t,isCombineEnabled:e,isFixedOnPage:i,direction:a,client:s,page:o,closest:c})=>{const d=(()=>{if(!c)return null;const{scrollSize:v,client:x}=c,S=zR({scrollHeight:v.scrollHeight,scrollWidth:v.scrollWidth,height:x.paddingBox.height,width:x.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:x,scrollSize:v,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:S,diff:{value:Ei,displacement:Ei}}}})(),f=a==="vertical"?rA:mR,g=qh({page:o,withPlaceholder:null,axis:f,frame:d});return{descriptor:n,isCombineEnabled:e,isFixedOnPage:i,axis:f,isEnabled:t,client:s,page:o,frame:d,subject:g}};const nV=(n,t)=>{const e=sR(n);if(!t||n!==t)return e;const i=e.paddingBox.top-t.scrollTop,a=e.paddingBox.left-t.scrollLeft,s=i+t.scrollHeight,o=a+t.scrollWidth,d=eA({top:i,right:o,bottom:s,left:a},e.border);return nA({borderBox:d,margin:e.margin,border:e.border,padding:e.padding})};var iV=({ref:n,descriptor:t,env:e,windowScroll:i,direction:a,isDropDisabled:s,isCombineEnabled:o,shouldClipSubject:c})=>{const d=e.closestScrollable,f=nV(n,d),g=Ov(f,i),m=(()=>{if(!d)return null;const x=sR(d),S={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:x,page:Ov(x,i),scroll:kS(d),scrollSize:S,shouldClipSubject:c}})();return eV({descriptor:t,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:e.isFixedOnPage,direction:a,client:f,page:g,closest:m})};const aV={passive:!1},rV={passive:!0};var OC=n=>n.shouldPublishImmediately?aV:rV;const nv=n=>n&&n.env.closestScrollable||null;function sV(n){const t=X.useRef(null),e=zv(v1),i=yA("droppable"),{registry:a,marshal:s}=e,o=YR(n),c=Ye(()=>({id:n.droppableId,type:n.type,mode:n.mode}),[n.droppableId,n.mode,n.type]),d=X.useRef(c),f=Ye(()=>Ai((R,O)=>{t.current||Lt();const L={x:R,y:O};s.updateDroppableScroll(c.id,L)}),[c.id,s]),g=Wt(()=>{const R=t.current;return!R||!R.env.closestScrollable?Ei:kS(R.env.closestScrollable)},[]),m=Wt(()=>{const R=g();f(R.x,R.y)},[g,f]),v=Ye(()=>Xg(m),[m]),x=Wt(()=>{const R=t.current,O=nv(R);if(R&&O||Lt(),R.scrollOptions.shouldPublishImmediately){m();return}v()},[v,m]),S=Wt((R,O)=>{t.current&&Lt();const L=o.current,I=L.getDroppableRef();I||Lt();const B=tV(I),F={ref:I,descriptor:c,env:B,scrollOptions:O};t.current=F;const z=iV({ref:I,descriptor:c,env:B,windowScroll:R,direction:L.direction,isDropDisabled:L.isDropDisabled,isCombineEnabled:L.isCombineEnabled,shouldClipSubject:!L.ignoreContainerClipping}),j=B.closestScrollable;return j&&(j.setAttribute(wC.contextId,e.contextId),j.addEventListener("scroll",x,OC(F.scrollOptions))),z},[e.contextId,c,x,o]),_=Wt(()=>{const R=t.current,O=nv(R);return R&&O||Lt(),kS(O)},[]),C=Wt(()=>{const R=t.current;R||Lt();const O=nv(R);t.current=null,O&&(v.cancel(),O.removeAttribute(wC.contextId),O.removeEventListener("scroll",x,OC(R.scrollOptions)))},[x,v]),D=Wt(R=>{const O=t.current;O||Lt();const L=nv(O);L||Lt(),L.scrollTop+=R.y,L.scrollLeft+=R.x},[]),T=Ye(()=>({getDimensionAndWatchScroll:S,getScrollWhileDragging:_,dragStopped:C,scroll:D}),[C,S,_,D]),w=Ye(()=>({uniqueId:i,descriptor:c,callbacks:T}),[T,c,i]);ir(()=>(d.current=w.descriptor,a.droppable.register(w),()=>{t.current&&C(),a.droppable.unregister(w)}),[T,c,C,w,s,a.droppable]),ir(()=>{t.current&&s.updateDroppableIsEnabled(d.current.id,!n.isDropDisabled)},[n.isDropDisabled,s]),ir(()=>{t.current&&s.updateDroppableIsCombineEnabled(d.current.id,n.isCombineEnabled)},[n.isCombineEnabled,s])}function qx(){}const NC={width:0,height:0,margin:pG},oV=({isAnimatingOpenOnMount:n,placeholder:t,animate:e})=>n||e==="close"?NC:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},lV=({isAnimatingOpenOnMount:n,placeholder:t,animate:e})=>{const i=oV({isAnimatingOpenOnMount:n,placeholder:t,animate:e});return{display:t.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:e!=="none"?Gg.placeholder:null}},cV=n=>{const t=X.useRef(null),e=Wt(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:i,onTransitionEnd:a,onClose:s,contextId:o}=n,[c,d]=X.useState(n.animate==="open");X.useEffect(()=>c?i!=="open"?(e(),d(!1),qx):t.current?qx:(t.current=setTimeout(()=>{t.current=null,d(!1)}),e):qx,[i,c,e]);const f=Wt(m=>{m.propertyName==="height"&&(a(),i==="close"&&s())},[i,s,a]),g=lV({isAnimatingOpenOnMount:c,animate:n.animate,placeholder:n.placeholder});return q.createElement(n.placeholder.tagName,{style:g,"data-rfd-placeholder-context-id":o,onTransitionEnd:f,ref:n.innerRef})};var uV=q.memo(cV);class dV extends q.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,e){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:e.isVisible?{isVisible:!0,data:e.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const hV=n=>{const t=X.useContext(v1);t||Lt();const{contextId:e,isMovementAllowed:i}=t,a=X.useRef(null),s=X.useRef(null),{children:o,droppableId:c,type:d,mode:f,direction:g,ignoreContainerClipping:m,isDropDisabled:v,isCombineEnabled:x,snapshot:S,useClone:_,updateViewportMaxScroll:C,getContainerForClone:D}=n,T=Wt(()=>a.current,[]),w=Wt((j=null)=>{a.current=j},[]);Wt(()=>s.current,[]);const R=Wt((j=null)=>{s.current=j},[]),O=Wt(()=>{i()&&C({maxScroll:IR()})},[i,C]);sV({droppableId:c,type:d,mode:f,direction:g,isDropDisabled:v,isCombineEnabled:x,ignoreContainerClipping:m,getDroppableRef:T});const L=Ye(()=>q.createElement(dV,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},({onClose:j,data:Z,animate:nt})=>q.createElement(uV,{placeholder:Z,onClose:j,innerRef:R,animate:nt,contextId:e,onTransitionEnd:O})),[e,O,n.placeholder,n.shouldAnimatePlaceholder,R]),I=Ye(()=>({innerRef:w,placeholder:L,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":e}}),[e,c,L,w]),B=_?_.dragging.draggableId:null,F=Ye(()=>({droppableId:c,type:d,isUsingCloneFor:B}),[c,B,d]);function z(){if(!_)return null;const{dragging:j,render:Z}=_,nt=q.createElement(n9,{draggableId:j.draggableId,index:j.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(it,et)=>Z(it,et,j));return xO.createPortal(nt,D())}return q.createElement(xA.Provider,{value:F},o(I,S),z())};function fV(){return document.body||Lt(),document.body}const LC={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:fV},o9=n=>{let t={...n},e;for(e in LC)n[e]===void 0&&(t={...t,[e]:LC[e]});return t},Vx=(n,t)=>n===t.droppable.type,PC=(n,t)=>t.draggables[n.draggable.id],pV=()=>{const n={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...n,shouldAnimatePlaceholder:!1},e=Ai(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),i=Ai((s,o,c,d,f,g)=>{const m=f.descriptor.id;if(f.descriptor.droppableId===s){const S=g?{render:g,dragging:e(f.descriptor)}:null,_={isDraggingOver:c,draggingOverWith:c?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!1,snapshot:_,useClone:S}}if(!o)return t;if(!d)return n;const x={isDraggingOver:c,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!0,snapshot:x,useClone:null}});return(s,o)=>{const c=o9(o),d=c.droppableId,f=c.type,g=!c.isDropDisabled,m=c.renderClone;if(Jg(s)){const v=s.critical;if(!Vx(f,v))return t;const x=PC(v,s.dimensions),S=nr(s.impact)===d;return i(d,g,S,S,x,m)}if(s.phase==="DROP_ANIMATING"){const v=s.completed;if(!Vx(f,v.critical))return t;const x=PC(v.critical,s.dimensions);return i(d,g,t9(v.result)===d,nr(v.impact)===d,x,m)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const v=s.completed;if(!Vx(f,v.critical))return t;const x=nr(v.impact)===d,S=!!(v.impact.at&&v.impact.at.type==="COMBINE"),_=v.critical.droppable.id===d;return x?S?n:t:_?n:t}return t}},gV={updateViewportMaxScroll:Cj},l9=aR(pV,gV,(n,t,e)=>({...o9(e),...n,...t}),{context:vA,areStatePropsEqual:JR})(hV);function mV({obj:n,idx:t,layerLocked:e,selectedShapeIds:i,setSelectedShape:a,toggleShapeVisibility:s,removeShape:o,editingId:c,setEditingId:d,editingValue:f,setEditingValue:g,handleRenameShape:m,objects:v}){return J.jsx(i9,{draggableId:n.id,isDragDisabled:e,index:t,children:x=>J.jsxs("li",{ref:x.innerRef,...x.draggableProps,...x.dragHandleProps,onClick:S=>{S.stopPropagation(),a(n.id)},className:xa("flex items-center group rounded px-2 py-1 transition",{"bg-blue-600 text-white font-bold shadow":i.includes(n.id),"hover:bg-blue-800":!i.includes(n.id)}),children:[J.jsxs("div",{className:"flex-1 flex items-center gap-2 truncate",children:[J.jsx("button",{className:"hover:text-blue-300 transition",onClick:S=>{S.stopPropagation(),s(n.id)},children:n.visible!==!1?J.jsx(qT,{size:15}):J.jsx(UT,{size:15})}),J.jsx("span",{className:"text-xs truncate",onDoubleClick:S=>{S.stopPropagation(),d(n.id),g(n.name||n.type||n.id.slice(0,8))},onTouchStart:S=>{let _=setTimeout(()=>{d(n.id),g(n.name||n.type||n.id.slice(0,8))},500);S.target.ontouchend=()=>clearTimeout(_),S.target.ontouchmove=()=>clearTimeout(_)},children:c===n.id?J.jsx("input",{autoFocus:!0,value:f,onChange:S=>g(S.target.value),onBlur:()=>m(n.id),onKeyDown:S=>{S.key==="Enter"&&m(n.id),S.key==="Escape"&&(d(null),g(""))},className:"px-2 py-1 text-xs bg-slate-800 rounded text-white w-24",style:{minWidth:60,maxWidth:180}}):n.name||n.type||n.id.slice(0,8)})]}),!e&&J.jsxs(J.Fragment,{children:[J.jsx("button",{className:"ml-2 text-blue-300 hover:text-blue-500 p-1 rounded disabled:opacity-30",title:"Subir",onClick:()=>It.getState().bringShapeForward(n.id),disabled:t===v.length-1,children:J.jsx(xS,{size:18})}),J.jsx("button",{className:"ml-1 text-blue-300 hover:text-blue-500 p-1 rounded disabled:opacity-30",title:"Bajar",onClick:()=>It.getState().sendShapeBackward(n.id),disabled:t===0,children:J.jsx(GT,{size:18})}),J.jsx("button",{className:"ml-2 text-red-400 hover:text-red-600",title:"Eliminar elemento",onClick:()=>o(n.id),children:J.jsx(o_,{size:18})})]})]})},n.id)}function vV({layer:n,idx:t,isActive:e,isOpen:i,objects:a,layers:s,selectedShapeIds:o,setActiveLayer:c,setEditingId:d,editingId:f,editingValue:g,setEditingValue:m,handleRenameLayer:v,moveLayerUp:x,moveLayerDown:S,toggleLayerVisibility:_,toggleLayerLock:C,removeLayer:D,setLayerOpacity:T,toggleLayerOpen:w,setSelectedShape:R,toggleShapeVisibility:O,removeShape:L,handleRenameShape:I}){const B=n.locked;return J.jsx(i9,{draggableId:n.id,isDragDisabled:B,index:t,children:F=>J.jsxs("li",{ref:F.innerRef,...F.draggableProps,...F.dragHandleProps,className:xa("rounded-xl p-3 border shadow group transition-all duration-200 relative",{"bg-blue-950/70 border-blue-600 shadow-lg":e,"bg-slate-800/60 border-slate-700 hover:bg-slate-800/80":!e,"ring-2 ring-blue-500/70":e}),tabIndex:0,onClick:()=>c(n.id),children:[J.jsxs("div",{className:"flex items-center justify-between",children:[J.jsx("span",{onDoubleClick:z=>{z.stopPropagation(),d(n.id),m(n.name)},onTouchStart:z=>{let j=setTimeout(()=>{d(n.id),m(n.name)},500);z.target.ontouchend=()=>clearTimeout(j),z.target.ontouchmove=()=>clearTimeout(j)},children:f===n.id?J.jsx("input",{autoFocus:!0,value:g,onChange:z=>m(z.target.value),onBlur:()=>v(n.id),onKeyDown:z=>{z.key==="Enter"&&v(n.id),z.key==="Escape"&&(d(null),m(""))},className:"px-2 py-1 bg-slate-800 rounded text-white w-32",style:{minWidth:80,maxWidth:180}}):n.name}),J.jsx("div",{className:"flex items-center gap-2 w-fit",children:!n.locked&&J.jsxs(J.Fragment,{children:[J.jsx("button",{className:"p-1 hover:bg-blue-800/40 rounded",onClick:z=>{z.stopPropagation(),x(n.id)},disabled:t===0,children:J.jsx(GT,{size:16})}),J.jsx("button",{className:"p-1 hover:bg-blue-800/40 rounded",onClick:z=>{z.stopPropagation(),S(n.id)},disabled:t===s.length-1,children:J.jsx(xS,{size:16})})]})})]}),J.jsxs("div",{className:"flex items-center justify-between mt-2",children:[J.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[J.jsx("button",{className:"hover:text-blue-300 transition",onClick:z=>{z.stopPropagation(),_(n.id)},children:n.visible?J.jsx(qT,{size:17}):J.jsx(UT,{size:17})}),J.jsx("button",{className:"hover:text-blue-300 transition",onClick:z=>{z.stopPropagation(),C(n.id)},children:n.locked?J.jsx(DD,{size:17}):J.jsx(RD,{size:17})})]}),J.jsx("div",{className:"flex items-center gap-1",children:!n.locked&&J.jsx("button",{onClick:z=>{z.stopPropagation(),window.confirm("Eliminar capa y todos sus objetos?")&&D(n.id)},title:"Eliminar capa",className:"ml-2 text-red-400 hover:text-red-600",children:J.jsx(o_,{size:17})})})]}),J.jsxs("div",{className:"mt-3 flex flex-col gap-2 text-xs opacity-80",children:[J.jsxs("div",{className:"flex items-center justify-between flex-1",children:[J.jsx("span",{children:"Opacidad"}),J.jsxs("span",{children:[n.opacity?Math.round(n.opacity*100):100,"%"]})]}),J.jsx("div",{className:"flex items-center gap-2",children:J.jsx("input",{type:"range",min:10,max:100,step:1,value:n.opacity?n.opacity*100:100,onChange:z=>T(n.id,Number(z.target.value)/100),className:"flex-1 accent-blue-500 bg-transparent",style:{accentColor:"#3b82f6",width:80}})})]}),J.jsxs("button",{className:"p-1 px-2 flex items-center gap-2 text-xs mt-1 rounded hover:bg-blue-800 transition",onClick:z=>{z.stopPropagation(),w(n.id)},children:[i?J.jsx(xS,{size:17}):J.jsx(eD,{size:17}),J.jsxs("span",{children:[a.length," objetos"]})]}),i&&J.jsx(l9,{droppableId:n.id,type:"shape",children:z=>J.jsxs("ul",{ref:z.innerRef,...z.droppableProps,className:"ml-7 mt-2 space-y-1",children:[a.map((j,Z)=>J.jsx(mV,{obj:j,idx:Z,layerLocked:B,selectedShapeIds:o,setSelectedShape:R,toggleShapeVisibility:O,removeShape:L,editingId:f,setEditingId:d,editingValue:g,setEditingValue:m,handleRenameShape:I,objects:a},j.id)),z.placeholder]})})]})},n.id)}function yV(){const[n,t]=X.useState([]),e=X.useCallback(a=>{t(s=>s.includes(a)?s.filter(o=>o!==a):[...s,a])},[]),i=X.useCallback(a=>n.includes(a),[n]);return{openLayers:n,toggleLayerOpen:e,isLayerOpen:i}}function bV(){const[n,t]=X.useState(null),[e,i]=X.useState(""),a=It(z=>z.layers),s=It(z=>z.activeLayerId),o=It(z=>z.setActiveLayer),c=It(z=>z.toggleLayerVisibility),d=It(z=>z.toggleLayerLock),f=It(z=>z.addLayer),g=It(z=>z.removeLayer),m=It(z=>z.moveLayerUp),v=It(z=>z.moveLayerDown),x=It(z=>z.setLayerOpacity),S=It(z=>z.removeShape),_=It(z=>z.shapes),C=It(z=>z.selectedShapeIds),D=It(z=>z.setSelectedShape),T=It(z=>z.toggleShapeVisibility),w=It(z=>z.layersPanelVisible),R=Z_({maxWidth:768}),{toggleLayerOpen:O,isLayerOpen:L}=yV(),I=X.useCallback(z=>{const{destination:j,source:Z,draggableId:nt,type:it}=z;if(j){if(it==="layer"){if(Z.index!==j.index){let et=Z.index;for(;et>j.index;)It.getState().moveLayerUp(a[et].id),et--;for(;et<j.index;)It.getState().moveLayerDown(a[et].id),et++}return}if(it==="shape"){const et=Z.droppableId,Q=j.droppableId,k=nt;_.filter($=>$.layerId===et);const U=_.filter($=>$.layerId===Q);It.setState($=>{let H=[...$.shapes];const V=H.findIndex(ut=>ut.id===k&&ut.layerId===et);if(V===-1)return{};const[at]=H.splice(V,1);at.layerId=Q;const K=H.findIndex((ut,xt)=>ut.layerId===Q&&U[j.index]&&ut.id===U[j.index].id);if(K===-1||U.length===0){let ut=-1;for(let xt=H.length-1;xt>=0;xt--)if(H[xt].layerId===Q){ut=xt;break}H.splice(ut+1,0,at)}else H.splice(K,0,at);return{shapes:H}})}}},[a,_]),B=z=>{e.trim()&&It.getState().renameLayer(z,e.trim()),t(null),i("")},F=z=>{e.trim()&&It.getState().renameShape(z,e.trim()),t(null),i("")};return J.jsx("div",{className:xa("fixed z-50 transition-all duration-300",{"inset-x-0 mx-auto top-24":R,"top-24 left-24 md:left-4":!R,"pointer-events-none opacity-0 -translate-x-8":!w,"pointer-events-auto opacity-100 translate-x-0":w}),style:{width:R?"95vw":"23rem",minWidth:R?160:300,maxWidth:R?350:450,...R?{bottom:"auto",right:"auto"}:{}},children:J.jsxs("aside",{className:"w-full bg-slate-900/95 text-white shadow-2xl p-4 rounded-2xl border border-blue-900 backdrop-blur-lg",children:[J.jsxs("div",{className:"flex items-center justify-between mb-4",children:[J.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[J.jsx("span",{children:J.jsxs("svg",{className:"inline mr-1",width:22,height:22,fill:"none",stroke:"currentColor",strokeWidth:2,children:[J.jsx("rect",{x:"3",y:"6",width:"16",height:"13",rx:"2"}),J.jsx("rect",{x:"6",y:"3",width:"10",height:"4",rx:"2"})]})}),"Capas"]}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx("button",{onClick:()=>{const z=prompt("Nombre de la nueva capa:");z&&z.trim()&&f(z.trim())},title:"Agregar capa",className:"text-green-400 hover:text-green-300",children:J.jsx(aD,{size:22})}),J.jsx("button",{onClick:()=>It.getState().hideLayersPanel(),title:"Cerrar panel de capas",className:"ml-2 text-slate-400 hover:text-red-500 p-1 rounded transition",children:J.jsx(l_,{size:22})})]})]}),J.jsx("div",{className:"overflow-y-auto",style:{maxHeight:R?"55vh":"78dvh"},children:J.jsx(Oq,{onDragEnd:I,children:J.jsx(l9,{droppableId:"LAYERS-DND",type:"layer",children:z=>J.jsxs("ul",{...z.droppableProps,ref:z.innerRef,className:xa("space-y-4",{"space-y-2":R}),children:[a.map((j,Z)=>{const nt=j.id===s,it=_.filter(Q=>Q.layerId===j.id),et=L(j.id);return J.jsx(vV,{layer:j,idx:Z,isActive:nt,isOpen:et,objects:it,layers:a,selectedShapeIds:C,setActiveLayer:o,setEditingId:t,editingId:n,editingValue:e,setEditingValue:i,handleRenameLayer:B,moveLayerUp:m,moveLayerDown:v,toggleLayerVisibility:c,toggleLayerLock:d,removeLayer:g,setLayerOpacity:x,toggleLayerOpen:O,setSelectedShape:D,toggleShapeVisibility:T,removeShape:S,handleRenameShape:F},j.id)}),z.placeholder]})})})})]})})}var yv={exports:{}},Bp={},Yx={},Xx={},kC;function Re(){return kC||(kC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._registerNode=n.Konva=n.glob=void 0;const t=Math.PI/180;function e(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}n.glob=typeof Fh<"u"?Fh:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},n.Konva={_global:n.glob,version:"9.3.21",isBrowser:e(),isUnminified:/param/.test((function(a){}).toString()),dblClickWindow:400,getAngle(a){return n.Konva.angleDeg?a*t:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return n.Konva.DD.isDragging},isTransforming(){var a;return(a=n.Konva.Transformer)===null||a===void 0?void 0:a.isTransforming()},isDragReady(){return!!n.Konva.DD.node},releaseCanvasOnDestroy:!0,document:n.glob.document,_injectGlobal(a){n.glob.Konva=a}};const i=a=>{n.Konva[a.prototype.getClassName()]=a};n._registerNode=i,n.Konva._injectGlobal(n.Konva)}(Xx)),Xx}var Kx={},BC;function Un(){return BC||(BC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.Transform=void 0;const t=Re();class e{constructor(R=[1,0,0,1,0,0]){this.dirty=!1,this.m=R&&R.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new e(this.m)}copyInto(R){R.m[0]=this.m[0],R.m[1]=this.m[1],R.m[2]=this.m[2],R.m[3]=this.m[3],R.m[4]=this.m[4],R.m[5]=this.m[5]}point(R){const O=this.m;return{x:O[0]*R.x+O[2]*R.y+O[4],y:O[1]*R.x+O[3]*R.y+O[5]}}translate(R,O){return this.m[4]+=this.m[0]*R+this.m[2]*O,this.m[5]+=this.m[1]*R+this.m[3]*O,this}scale(R,O){return this.m[0]*=R,this.m[1]*=R,this.m[2]*=O,this.m[3]*=O,this}rotate(R){const O=Math.cos(R),L=Math.sin(R),I=this.m[0]*O+this.m[2]*L,B=this.m[1]*O+this.m[3]*L,F=this.m[0]*-L+this.m[2]*O,z=this.m[1]*-L+this.m[3]*O;return this.m[0]=I,this.m[1]=B,this.m[2]=F,this.m[3]=z,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(R,O){const L=this.m[0]+this.m[2]*O,I=this.m[1]+this.m[3]*O,B=this.m[2]+this.m[0]*R,F=this.m[3]+this.m[1]*R;return this.m[0]=L,this.m[1]=I,this.m[2]=B,this.m[3]=F,this}multiply(R){const O=this.m[0]*R.m[0]+this.m[2]*R.m[1],L=this.m[1]*R.m[0]+this.m[3]*R.m[1],I=this.m[0]*R.m[2]+this.m[2]*R.m[3],B=this.m[1]*R.m[2]+this.m[3]*R.m[3],F=this.m[0]*R.m[4]+this.m[2]*R.m[5]+this.m[4],z=this.m[1]*R.m[4]+this.m[3]*R.m[5]+this.m[5];return this.m[0]=O,this.m[1]=L,this.m[2]=I,this.m[3]=B,this.m[4]=F,this.m[5]=z,this}invert(){const R=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),O=this.m[3]*R,L=-this.m[1]*R,I=-this.m[2]*R,B=this.m[0]*R,F=R*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),z=R*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=O,this.m[1]=L,this.m[2]=I,this.m[3]=B,this.m[4]=F,this.m[5]=z,this}getMatrix(){return this.m}decompose(){const R=this.m[0],O=this.m[1],L=this.m[2],I=this.m[3],B=this.m[4],F=this.m[5],z=R*I-O*L,j={x:B,y:F,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(R!=0||O!=0){const Z=Math.sqrt(R*R+O*O);j.rotation=O>0?Math.acos(R/Z):-Math.acos(R/Z),j.scaleX=Z,j.scaleY=z/Z,j.skewX=(R*L+O*I)/z,j.skewY=0}else if(L!=0||I!=0){const Z=Math.sqrt(L*L+I*I);j.rotation=Math.PI/2-(I>0?Math.acos(-L/Z):-Math.acos(L/Z)),j.scaleX=z/Z,j.scaleY=Z,j.skewX=0,j.skewY=(R*L+O*I)/z}return j.rotation=n.Util._getRotation(j.rotation),j}}n.Transform=e;const i="[object Array]",a="[object Number]",s="[object String]",o="[object Boolean]",c=Math.PI/180,d=180/Math.PI,f="#",g="",m="0",v="Konva warning: ",x="Konva error: ",S="rgb(",_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},C=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let D=[];const T=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};n.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===i},_isNumber(w){return Object.prototype.toString.call(w)===a&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===s},_isBoolean(w){return Object.prototype.toString.call(w)===o},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;const R=w[0];return R==="#"||R==="."||R===R.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){D.push(w),D.length===1&&T(function(){const R=D;D=[],R.forEach(function(O){O()})})},createCanvasElement(){const w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,R){const O=n.Util.createImageElement();O.onload=function(){R(O)},O.src=w},_rgbToHex(w,R,O){return((1<<24)+(w<<16)+(R<<8)+O).toString(16).slice(1)},_hexToRgb(w){w=w.replace(f,g);const R=parseInt(w,16);return{r:R>>16&255,g:R>>8&255,b:R&255}},getRandomColor(){let w=(Math.random()*16777215<<0).toString(16);for(;w.length<6;)w=m+w;return f+w},getRGB(w){let R;return w in _?(R=_[w],{r:R[0],g:R[1],b:R[2]}):w[0]===f?this._hexToRgb(w.substring(1)):w.substr(0,4)===S?(R=C.exec(w.replace(/ /g,"")),{r:parseInt(R[1],10),g:parseInt(R[2],10),b:parseInt(R[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",n.Util._namedColorToRBA(w)||n.Util._hex3ColorToRGBA(w)||n.Util._hex4ColorToRGBA(w)||n.Util._hex6ColorToRGBA(w)||n.Util._hex8ColorToRGBA(w)||n.Util._rgbColorToRGBA(w)||n.Util._rgbaColorToRGBA(w)||n.Util._hslColorToRGBA(w)},_namedColorToRBA(w){const R=_[w.toLowerCase()];return R?{r:R[0],g:R[1],b:R[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];const R=w.split(/ *, */).map(Number);return{r:R[0],g:R[1],b:R[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];const R=w.split(/ *, */).map((O,L)=>O.slice(-1)==="%"?L===3?parseInt(O)/100:parseInt(O)/100*255:Number(O));return{r:R[0],g:R[1],b:R[2],a:R[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[R,...O]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),L=Number(O[0])/360,I=Number(O[1])/100,B=Number(O[2])/100;let F,z,j;if(I===0)return j=B*255,{r:Math.round(j),g:Math.round(j),b:Math.round(j),a:1};B<.5?F=B*(1+I):F=B+I-B*I;const Z=2*B-F,nt=[0,0,0];for(let it=0;it<3;it++)z=L+1/3*-(it-1),z<0&&z++,z>1&&z--,6*z<1?j=Z+(F-Z)*6*z:2*z<1?j=F:3*z<2?j=Z+(F-Z)*(2/3-z)*6:j=Z,nt[it]=j*255;return{r:Math.round(nt[0]),g:Math.round(nt[1]),b:Math.round(nt[2]),a:1}}},haveIntersection(w,R){return!(R.x>w.x+w.width||R.x+R.width<w.x||R.y>w.y+w.height||R.y+R.height<w.y)},cloneObject(w){const R={};for(const O in w)this._isPlainObject(w[O])?R[O]=this.cloneObject(w[O]):this._isArray(w[O])?R[O]=this.cloneArray(w[O]):R[O]=w[O];return R},cloneArray(w){return w.slice(0)},degToRad(w){return w*c},radToDeg(w){return w*d},_degToRad(w){return n.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),n.Util.degToRad(w)},_radToDeg(w){return n.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),n.Util.radToDeg(w)},_getRotation(w){return t.Konva.angleDeg?n.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(x+w)},error(w){console.error(x+w)},warn(w){t.Konva.showWarnings&&console.warn(v+w)},each(w,R){for(const O in w)R(O,w[O])},_inRange(w,R,O){return R<=w&&w<O},_getProjectionToSegment(w,R,O,L,I,B){let F,z,j;const Z=(w-O)*(w-O)+(R-L)*(R-L);if(Z==0)F=w,z=R,j=(I-O)*(I-O)+(B-L)*(B-L);else{const nt=((I-w)*(O-w)+(B-R)*(L-R))/Z;nt<0?(F=w,z=R,j=(w-I)*(w-I)+(R-B)*(R-B)):nt>1?(F=O,z=L,j=(O-I)*(O-I)+(L-B)*(L-B)):(F=w+nt*(O-w),z=R+nt*(L-R),j=(F-I)*(F-I)+(z-B)*(z-B))}return[F,z,j]},_getProjectionToLine(w,R,O){const L=n.Util.cloneObject(w);let I=Number.MAX_VALUE;return R.forEach(function(B,F){if(!O&&F===R.length-1)return;const z=R[(F+1)%R.length],j=n.Util._getProjectionToSegment(B.x,B.y,z.x,z.y,w.x,w.y),Z=j[0],nt=j[1],it=j[2];it<I&&(L.x=Z,L.y=nt,I=it)}),L},_prepareArrayForTween(w,R,O){const L=[],I=[];if(w.length>R.length){const F=R;R=w,w=F}for(let F=0;F<w.length;F+=2)L.push({x:w[F],y:w[F+1]});for(let F=0;F<R.length;F+=2)I.push({x:R[F],y:R[F+1]});const B=[];return I.forEach(function(F){const z=n.Util._getProjectionToLine(F,L,O);B.push(z.x),B.push(z.y)}),B},_prepareToStringify(w){let R;w.visitedByCircularReferenceRemoval=!0;for(const O in w)if(w.hasOwnProperty(O)&&w[O]&&typeof w[O]=="object"){if(R=Object.getOwnPropertyDescriptor(w,O),w[O].visitedByCircularReferenceRemoval||n.Util._isElement(w[O]))if(R.configurable)delete w[O];else return null;else if(n.Util._prepareToStringify(w[O])===null)if(R.configurable)delete w[O];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,R){for(const O in R)w[O]=R[O];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){t.Konva.releaseCanvasOnDestroy&&w.forEach(R=>{R.width=0,R.height=0})},drawRoundedRectPath(w,R,O,L){let I=0,B=0,F=0,z=0;typeof L=="number"?I=B=F=z=Math.min(L,R/2,O/2):(I=Math.min(L[0]||0,R/2,O/2),B=Math.min(L[1]||0,R/2,O/2),z=Math.min(L[2]||0,R/2,O/2),F=Math.min(L[3]||0,R/2,O/2)),w.moveTo(I,0),w.lineTo(R-B,0),w.arc(R-B,B,B,Math.PI*3/2,0,!1),w.lineTo(R,O-z),w.arc(R-z,O-z,z,0,Math.PI/2,!1),w.lineTo(F,O),w.arc(F,O-F,F,Math.PI/2,Math.PI,!1),w.lineTo(0,I),w.arc(I,I,I,Math.PI,Math.PI*3/2,!1)}}}(Kx)),Kx}var zp={},nl={},il={},zC;function c9(){if(zC)return il;zC=1,Object.defineProperty(il,"__esModule",{value:!0}),il.HitContext=il.SceneContext=il.Context=void 0;const n=Un(),t=Re();function e(D){const T=[],w=D.length,R=n.Util;for(let O=0;O<w;O++){let L=D[O];R._isNumber(L)?L=Math.round(L*1e3)/1e3:R._isString(L)||(L=L+""),T.push(L)}return T}const i=",",a="(",s=")",o="([",c="])",d=";",f="()",g="=",m=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],v=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],x=100;let S=class{constructor(T){this.canvas=T,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(T){T.fillEnabled()&&this._fill(T)}_fill(T){}strokeShape(T){T.hasStroke()&&this._stroke(T)}_stroke(T){}fillStrokeShape(T){T.attrs.fillAfterStrokeEnabled?(this.strokeShape(T),this.fillShape(T)):(this.fillShape(T),this.strokeShape(T))}getTrace(T,w){let R=this.traceArr,O=R.length,L="",I,B,F,z;for(I=0;I<O;I++)B=R[I],F=B.method,F?(z=B.args,L+=F,T?L+=f:n.Util._isArray(z[0])?L+=o+z.join(i)+c:(w&&(z=z.map(j=>typeof j=="number"?Math.floor(j):j)),L+=a+z.join(i)+s)):(L+=B.property,T||(L+=g+B.val)),L+=d;return L}clearTrace(){this.traceArr=[]}_trace(T){let w=this.traceArr,R;w.push(T),R=w.length,R>=x&&w.shift()}reset(){const T=this.getCanvas().getPixelRatio();this.setTransform(1*T,0,0,1*T,0,0)}getCanvas(){return this.canvas}clear(T){const w=this.getCanvas();T?this.clearRect(T.x||0,T.y||0,T.width||0,T.height||0):this.clearRect(0,0,w.getWidth()/w.pixelRatio,w.getHeight()/w.pixelRatio)}_applyLineCap(T){const w=T.attrs.lineCap;w&&this.setAttr("lineCap",w)}_applyOpacity(T){const w=T.getAbsoluteOpacity();w!==1&&this.setAttr("globalAlpha",w)}_applyLineJoin(T){const w=T.attrs.lineJoin;w&&this.setAttr("lineJoin",w)}setAttr(T,w){this._context[T]=w}arc(T,w,R,O,L,I){this._context.arc(T,w,R,O,L,I)}arcTo(T,w,R,O,L){this._context.arcTo(T,w,R,O,L)}beginPath(){this._context.beginPath()}bezierCurveTo(T,w,R,O,L,I){this._context.bezierCurveTo(T,w,R,O,L,I)}clearRect(T,w,R,O){this._context.clearRect(T,w,R,O)}clip(...T){this._context.clip.apply(this._context,T)}closePath(){this._context.closePath()}createImageData(T,w){const R=arguments;if(R.length===2)return this._context.createImageData(T,w);if(R.length===1)return this._context.createImageData(T)}createLinearGradient(T,w,R,O){return this._context.createLinearGradient(T,w,R,O)}createPattern(T,w){return this._context.createPattern(T,w)}createRadialGradient(T,w,R,O,L,I){return this._context.createRadialGradient(T,w,R,O,L,I)}drawImage(T,w,R,O,L,I,B,F,z){const j=arguments,Z=this._context;j.length===3?Z.drawImage(T,w,R):j.length===5?Z.drawImage(T,w,R,O,L):j.length===9&&Z.drawImage(T,w,R,O,L,I,B,F,z)}ellipse(T,w,R,O,L,I,B,F){this._context.ellipse(T,w,R,O,L,I,B,F)}isPointInPath(T,w,R,O){return R?this._context.isPointInPath(R,T,w,O):this._context.isPointInPath(T,w,O)}fill(...T){this._context.fill.apply(this._context,T)}fillRect(T,w,R,O){this._context.fillRect(T,w,R,O)}strokeRect(T,w,R,O){this._context.strokeRect(T,w,R,O)}fillText(T,w,R,O){O?this._context.fillText(T,w,R,O):this._context.fillText(T,w,R)}measureText(T){return this._context.measureText(T)}getImageData(T,w,R,O){return this._context.getImageData(T,w,R,O)}lineTo(T,w){this._context.lineTo(T,w)}moveTo(T,w){this._context.moveTo(T,w)}rect(T,w,R,O){this._context.rect(T,w,R,O)}roundRect(T,w,R,O,L){this._context.roundRect(T,w,R,O,L)}putImageData(T,w,R){this._context.putImageData(T,w,R)}quadraticCurveTo(T,w,R,O){this._context.quadraticCurveTo(T,w,R,O)}restore(){this._context.restore()}rotate(T){this._context.rotate(T)}save(){this._context.save()}scale(T,w){this._context.scale(T,w)}setLineDash(T){this._context.setLineDash?this._context.setLineDash(T):"mozDash"in this._context?this._context.mozDash=T:"webkitLineDash"in this._context&&(this._context.webkitLineDash=T)}getLineDash(){return this._context.getLineDash()}setTransform(T,w,R,O,L,I){this._context.setTransform(T,w,R,O,L,I)}stroke(T){T?this._context.stroke(T):this._context.stroke()}strokeText(T,w,R,O){this._context.strokeText(T,w,R,O)}transform(T,w,R,O,L,I){this._context.transform(T,w,R,O,L,I)}translate(T,w){this._context.translate(T,w)}_enableTrace(){let T=this,w=m.length,R=this.setAttr,O,L;const I=function(B){let F=T[B],z;T[B]=function(){return L=e(Array.prototype.slice.call(arguments,0)),z=F.apply(T,arguments),T._trace({method:B,args:L}),z}};for(O=0;O<w;O++)I(m[O]);T.setAttr=function(){R.apply(T,arguments);const B=arguments[0];let F=arguments[1];(B==="shadowOffsetX"||B==="shadowOffsetY"||B==="shadowBlur")&&(F=F/this.canvas.getPixelRatio()),T._trace({property:B,val:F})}}_applyGlobalCompositeOperation(T){const w=T.attrs.globalCompositeOperation;!w||w==="source-over"||this.setAttr("globalCompositeOperation",w)}};il.Context=S,v.forEach(function(D){Object.defineProperty(S.prototype,D,{get(){return this._context[D]},set(T){this._context[D]=T}})});class _ extends S{constructor(T,{willReadFrequently:w=!1}={}){super(T),this._context=T._canvas.getContext("2d",{willReadFrequently:w})}_fillColor(T){const w=T.fill();this.setAttr("fillStyle",w),T._fillFunc(this)}_fillPattern(T){this.setAttr("fillStyle",T._getFillPattern()),T._fillFunc(this)}_fillLinearGradient(T){const w=T._getLinearGradient();w&&(this.setAttr("fillStyle",w),T._fillFunc(this))}_fillRadialGradient(T){const w=T._getRadialGradient();w&&(this.setAttr("fillStyle",w),T._fillFunc(this))}_fill(T){const w=T.fill(),R=T.getFillPriority();if(w&&R==="color"){this._fillColor(T);return}const O=T.getFillPatternImage();if(O&&R==="pattern"){this._fillPattern(T);return}const L=T.getFillLinearGradientColorStops();if(L&&R==="linear-gradient"){this._fillLinearGradient(T);return}const I=T.getFillRadialGradientColorStops();if(I&&R==="radial-gradient"){this._fillRadialGradient(T);return}w?this._fillColor(T):O?this._fillPattern(T):L?this._fillLinearGradient(T):I&&this._fillRadialGradient(T)}_strokeLinearGradient(T){const w=T.getStrokeLinearGradientStartPoint(),R=T.getStrokeLinearGradientEndPoint(),O=T.getStrokeLinearGradientColorStops(),L=this.createLinearGradient(w.x,w.y,R.x,R.y);if(O){for(let I=0;I<O.length;I+=2)L.addColorStop(O[I],O[I+1]);this.setAttr("strokeStyle",L)}}_stroke(T){const w=T.dash(),R=T.getStrokeScaleEnabled();if(T.hasStroke()){if(!R){this.save();const L=this.getCanvas().getPixelRatio();this.setTransform(L,0,0,L,0,0)}this._applyLineCap(T),w&&T.dashEnabled()&&(this.setLineDash(w),this.setAttr("lineDashOffset",T.dashOffset())),this.setAttr("lineWidth",T.strokeWidth()),T.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),T.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(T):this.setAttr("strokeStyle",T.stroke()),T._strokeFunc(this),R||this.restore()}}_applyShadow(T){var w,R,O;const L=(w=T.getShadowRGBA())!==null&&w!==void 0?w:"black",I=(R=T.getShadowBlur())!==null&&R!==void 0?R:5,B=(O=T.getShadowOffset())!==null&&O!==void 0?O:{x:0,y:0},F=T.getAbsoluteScale(),z=this.canvas.getPixelRatio(),j=F.x*z,Z=F.y*z;this.setAttr("shadowColor",L),this.setAttr("shadowBlur",I*Math.min(Math.abs(j),Math.abs(Z))),this.setAttr("shadowOffsetX",B.x*j),this.setAttr("shadowOffsetY",B.y*Z)}}il.SceneContext=_;class C extends S{constructor(T){super(T),this._context=T._canvas.getContext("2d",{willReadFrequently:!0})}_fill(T){this.save(),this.setAttr("fillStyle",T.colorKey),T._fillFuncHit(this),this.restore()}strokeShape(T){T.hasHitStroke()&&this._stroke(T)}_stroke(T){if(T.hasHitStroke()){const w=T.getStrokeScaleEnabled();if(!w){this.save();const L=this.getCanvas().getPixelRatio();this.setTransform(L,0,0,L,0,0)}this._applyLineCap(T);const R=T.hitStrokeWidth(),O=R==="auto"?T.strokeWidth():R;this.setAttr("lineWidth",O),this.setAttr("strokeStyle",T.colorKey),T._strokeFuncHit(this),w||this.restore()}}}return il.HitContext=C,il}var FC;function b1(){if(FC)return nl;FC=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.HitCanvas=nl.SceneCanvas=nl.Canvas=void 0;const n=Un(),t=c9(),e=Re();let i;function a(){if(i)return i;const d=n.Util.createCanvasElement(),f=d.getContext("2d");return i=function(){const g=e.Konva._global.devicePixelRatio||1,m=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;return g/m}(),n.Util.releaseCanvas(d),i}let s=class{constructor(f){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const m=(f||{}).pixelRatio||e.Konva.pixelRatio||a();this.pixelRatio=m,this._canvas=n.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(f){const g=this.pixelRatio;this.pixelRatio=f,this.setSize(this.getWidth()/g,this.getHeight()/g)}setWidth(f){this.width=this._canvas.width=f*this.pixelRatio,this._canvas.style.width=f+"px";const g=this.pixelRatio;this.getContext()._context.scale(g,g)}setHeight(f){this.height=this._canvas.height=f*this.pixelRatio,this._canvas.style.height=f+"px";const g=this.pixelRatio;this.getContext()._context.scale(g,g)}getWidth(){return this.width}getHeight(){return this.height}setSize(f,g){this.setWidth(f||0),this.setHeight(g||0)}toDataURL(f,g){try{return this._canvas.toDataURL(f,g)}catch{try{return this._canvas.toDataURL()}catch(v){return n.Util.error("Unable to get data URL. "+v.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};nl.Canvas=s;class o extends s{constructor(f={width:0,height:0,willReadFrequently:!1}){super(f),this.context=new t.SceneContext(this,{willReadFrequently:f.willReadFrequently}),this.setSize(f.width,f.height)}}nl.SceneCanvas=o;class c extends s{constructor(f={width:0,height:0}){super(f),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(f.width,f.height)}}return nl.HitCanvas=c,nl}var Wx={},IC;function SA(){return IC||(IC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DD=void 0;const t=Re(),e=Un();n.DD={get isDragging(){let i=!1;return n.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){let i;return n.DD._dragElements.forEach(a=>{i=a.node}),i},_dragElements:new Map,_drag(i){const a=[];n.DD._dragElements.forEach((s,o)=>{const{node:c}=s,d=c.getStage();d.setPointersPositions(i),s.pointerId===void 0&&(s.pointerId=e.Util._getFirstPointerId(i));const f=d._changedPointerPositions.find(g=>g.id===s.pointerId);if(f){if(s.dragStatus!=="dragging"){const g=c.dragDistance();if(Math.max(Math.abs(f.x-s.startPointerPos.x),Math.abs(f.y-s.startPointerPos.y))<g||(c.startDrag({evt:i}),!c.isDragging()))return}c._setDragPosition(i,s),a.push(c)}}),a.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:i},!0)})},_endDragBefore(i){const a=[];n.DD._dragElements.forEach(s=>{const{node:o}=s,c=o.getStage();if(i&&c.setPointersPositions(i),!c._changedPointerPositions.find(g=>g.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(n.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const f=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;f&&a.indexOf(f)===-1&&a.push(f)}),a.forEach(s=>{s.draw()})},_endDragAfter(i){n.DD._dragElements.forEach((a,s)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:i},!0),a.dragStatus!=="dragging"&&n.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",n.DD._endDragBefore,!0),window.addEventListener("touchend",n.DD._endDragBefore,!0),window.addEventListener("touchcancel",n.DD._endDragBefore,!0),window.addEventListener("mousemove",n.DD._drag),window.addEventListener("touchmove",n.DD._drag),window.addEventListener("mouseup",n.DD._endDragAfter,!1),window.addEventListener("touchend",n.DD._endDragAfter,!1),window.addEventListener("touchcancel",n.DD._endDragAfter,!1))}(Wx)),Wx}var $x={},ka={},HC;function Fe(){if(HC)return ka;HC=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.RGBComponent=i,ka.alphaComponent=a,ka.getNumberValidator=s,ka.getNumberOrArrayOfNumbersValidator=o,ka.getNumberOrAutoValidator=c,ka.getStringValidator=d,ka.getStringOrGradientValidator=f,ka.getFunctionValidator=g,ka.getNumberArrayValidator=m,ka.getBooleanValidator=v,ka.getComponentValidator=x;const n=Re(),t=Un();function e(S){return t.Util._isString(S)?'"'+S+'"':Object.prototype.toString.call(S)==="[object Number]"||t.Util._isBoolean(S)?S:Object.prototype.toString.call(S)}function i(S){return S>255?255:S<0?0:Math.round(S)}function a(S){return S>1?1:S<1e-4?1e-4:S}function s(){if(n.Konva.isUnminified)return function(S,_){return t.Util._isNumber(S)||t.Util.warn(e(S)+' is a not valid value for "'+_+'" attribute. The value should be a number.'),S}}function o(S){if(n.Konva.isUnminified)return function(_,C){let D=t.Util._isNumber(_),T=t.Util._isArray(_)&&_.length==S;return!D&&!T&&t.Util.warn(e(_)+' is a not valid value for "'+C+'" attribute. The value should be a number or Array<number>('+S+")"),_}}function c(){if(n.Konva.isUnminified)return function(S,_){return t.Util._isNumber(S)||S==="auto"||t.Util.warn(e(S)+' is a not valid value for "'+_+'" attribute. The value should be a number or "auto".'),S}}function d(){if(n.Konva.isUnminified)return function(S,_){return t.Util._isString(S)||t.Util.warn(e(S)+' is a not valid value for "'+_+'" attribute. The value should be a string.'),S}}function f(){if(n.Konva.isUnminified)return function(S,_){const C=t.Util._isString(S),D=Object.prototype.toString.call(S)==="[object CanvasGradient]"||S&&S.addColorStop;return C||D||t.Util.warn(e(S)+' is a not valid value for "'+_+'" attribute. The value should be a string or a native gradient.'),S}}function g(){if(n.Konva.isUnminified)return function(S,_){return t.Util._isFunction(S)||t.Util.warn(e(S)+' is a not valid value for "'+_+'" attribute. The value should be a function.'),S}}function m(){if(n.Konva.isUnminified)return function(S,_){const C=Int8Array?Object.getPrototypeOf(Int8Array):null;return C&&S instanceof C||(t.Util._isArray(S)?S.forEach(function(D){t.Util._isNumber(D)||t.Util.warn('"'+_+'" attribute has non numeric element '+D+". Make sure that all elements are numbers.")}):t.Util.warn(e(S)+' is a not valid value for "'+_+'" attribute. The value should be a array of numbers.')),S}}function v(){if(n.Konva.isUnminified)return function(S,_){return S===!0||S===!1||t.Util.warn(e(S)+' is a not valid value for "'+_+'" attribute. The value should be a boolean.'),S}}function x(S){if(n.Konva.isUnminified)return function(_,C){return _==null||t.Util.isObject(_)||t.Util.warn(e(_)+' is a not valid value for "'+C+'" attribute. The value should be an object with properties '+S),_}}return ka}var GC;function ke(){return GC||(GC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Factory=void 0;const t=Un(),e=Fe(),i="get",a="set";n.Factory={addGetterSetter(s,o,c,d,f){n.Factory.addGetter(s,o,c),n.Factory.addSetter(s,o,d,f),n.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,c){const d=i+t.Util._capitalize(o);s.prototype[d]=s.prototype[d]||function(){const f=this.attrs[o];return f===void 0?c:f}},addSetter(s,o,c,d){const f=a+t.Util._capitalize(o);s.prototype[f]||n.Factory.overWriteSetter(s,o,c,d)},overWriteSetter(s,o,c,d){const f=a+t.Util._capitalize(o);s.prototype[f]=function(g){return c&&g!==void 0&&g!==null&&(g=c.call(this,g,o)),this._setAttr(o,g),d&&d.call(this),this}},addComponentsGetterSetter(s,o,c,d,f){const g=c.length,m=t.Util._capitalize,v=i+m(o),x=a+m(o);s.prototype[v]=function(){const _={};for(let C=0;C<g;C++){const D=c[C];_[D]=this.getAttr(o+m(D))}return _};const S=(0,e.getComponentValidator)(c);s.prototype[x]=function(_){const C=this.attrs[o];d&&(_=d.call(this,_,o)),S&&S.call(this,_,o);for(const D in _)_.hasOwnProperty(D)&&this._setAttr(o+m(D),_[D]);return _||c.forEach(D=>{this._setAttr(o+m(D),void 0)}),this._fireChangeEvent(o,C,_),f&&f.call(this),this},n.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){const c=t.Util._capitalize(o),d=a+c,f=i+c;s.prototype[o]=function(){return arguments.length?(this[d](arguments[0]),this):this[f]()}},addDeprecatedGetterSetter(s,o,c,d){t.Util.error("Adding deprecated "+o);const f=i+t.Util._capitalize(o),g=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[f]=function(){t.Util.error(g);const m=this.attrs[o];return m===void 0?c:m},n.Factory.addSetter(s,o,d,function(){t.Util.error(g)}),n.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){t.Util.each(o,function(c,d){const f=s.prototype[d],g=i+t.Util._capitalize(c),m=a+t.Util._capitalize(c);function v(){f.apply(this,arguments),t.Util.error('"'+c+'" method is deprecated and will be removed soon. Use ""'+d+'" instead.')}s.prototype[c]=v,s.prototype[g]=v,s.prototype[m]=v})},afterSetFilter(){this._filterUpToDate=!1}}}($x)),$x}var jC;function Qn(){if(jC)return zp;jC=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.Node=void 0;const n=b1(),t=SA(),e=ke(),i=Re(),a=Un(),s=Fe(),o="absoluteOpacity",c="allEventListeners",d="absoluteTransform",f="absoluteScale",g="canvas",m="Change",v="children",x="konva",S="listening",_="mouseenter",C="mouseleave",D="pointerenter",T="pointerleave",w="touchenter",R="touchleave",O="set",L="Shape",I=" ",B="stage",F="transform",z="Stage",j="visible",Z=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(I);let nt=1;class it{constructor(k){this._id=nt++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(k),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(k){(k===F||k===d)&&this._cache.get(k)?this._cache.get(k).dirty=!0:k?this._cache.delete(k):this._cache.clear()}_getCache(k,U){let $=this._cache.get(k);return($===void 0||(k===F||k===d)&&$.dirty===!0)&&($=U.call(this),this._cache.set(k,$)),$}_calculate(k,U,$){if(!this._attachedDepsListeners.get(k)){const H=U.map(V=>V+"Change.konva").join(I);this.on(H,()=>{this._clearCache(k)}),this._attachedDepsListeners.set(k,!0)}return this._getCache(k,$)}_getCanvasCache(){return this._cache.get(g)}_clearSelfAndDescendantCache(k){this._clearCache(k),k===d&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(g)){const{scene:k,filter:U,hit:$,buffer:H}=this._cache.get(g);a.Util.releaseCanvas(k,U,$,H),this._cache.delete(g)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(k){const U=k||{};let $={};(U.x===void 0||U.y===void 0||U.width===void 0||U.height===void 0)&&($=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let H=Math.ceil(U.width||$.width),V=Math.ceil(U.height||$.height),at=U.pixelRatio,K=U.x===void 0?Math.floor($.x):U.x,ut=U.y===void 0?Math.floor($.y):U.y,xt=U.offset||0,ot=U.drawBorder||!1,tt=U.hitCanvasPixelRatio||1;if(!H||!V){a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ct=Math.abs(Math.round($.x)-K)>.5?1:0,At=Math.abs(Math.round($.y)-ut)>.5?1:0;H+=xt*2+ct,V+=xt*2+At,K-=xt,ut-=xt;const Mt=new n.SceneCanvas({pixelRatio:at,width:H,height:V}),Pt=new n.SceneCanvas({pixelRatio:at,width:0,height:0,willReadFrequently:!0}),Bt=new n.HitCanvas({pixelRatio:tt,width:H,height:V}),Gt=Mt.getContext(),de=Bt.getContext(),Nt=new n.SceneCanvas({width:Mt.width/Mt.pixelRatio+Math.abs(K),height:Mt.height/Mt.pixelRatio+Math.abs(ut),pixelRatio:Mt.pixelRatio}),we=Nt.getContext();return Bt.isCache=!0,Mt.isCache=!0,this._cache.delete(g),this._filterUpToDate=!1,U.imageSmoothingEnabled===!1&&(Mt.getContext()._context.imageSmoothingEnabled=!1,Pt.getContext()._context.imageSmoothingEnabled=!1),Gt.save(),de.save(),we.save(),Gt.translate(-K,-ut),de.translate(-K,-ut),we.translate(-K,-ut),Nt.x=K,Nt.y=ut,this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(f),this.drawScene(Mt,this,Nt),this.drawHit(Bt,this),this._isUnderCache=!1,Gt.restore(),de.restore(),ot&&(Gt.save(),Gt.beginPath(),Gt.rect(0,0,H,V),Gt.closePath(),Gt.setAttr("strokeStyle","red"),Gt.setAttr("lineWidth",5),Gt.stroke(),Gt.restore()),this._cache.set(g,{scene:Mt,filter:Pt,hit:Bt,buffer:Nt,x:K,y:ut}),this._requestDraw(),this}isCached(){return this._cache.has(g)}getClientRect(k){throw new Error('abstract "getClientRect" method call')}_transformedRect(k,U){const $=[{x:k.x,y:k.y},{x:k.x+k.width,y:k.y},{x:k.x+k.width,y:k.y+k.height},{x:k.x,y:k.y+k.height}];let H=1/0,V=1/0,at=-1/0,K=-1/0;const ut=this.getAbsoluteTransform(U);return $.forEach(function(xt){const ot=ut.point(xt);H===void 0&&(H=at=ot.x,V=K=ot.y),H=Math.min(H,ot.x),V=Math.min(V,ot.y),at=Math.max(at,ot.x),K=Math.max(K,ot.y)}),{x:H,y:V,width:at-H,height:K-V}}_drawCachedSceneCanvas(k){k.save(),k._applyOpacity(this),k._applyGlobalCompositeOperation(this);const U=this._getCanvasCache();k.translate(U.x,U.y);const $=this._getCachedSceneCanvas(),H=$.pixelRatio;k.drawImage($._canvas,0,0,$.width/H,$.height/H),k.restore()}_drawCachedHitCanvas(k){const U=this._getCanvasCache(),$=U.hit;k.save(),k.translate(U.x,U.y),k.drawImage($._canvas,0,0,$.width/$.pixelRatio,$.height/$.pixelRatio),k.restore()}_getCachedSceneCanvas(){let k=this.filters(),U=this._getCanvasCache(),$=U.scene,H=U.filter,V=H.getContext(),at,K,ut,xt;if(k){if(!this._filterUpToDate){const ot=$.pixelRatio;H.setSize($.width/$.pixelRatio,$.height/$.pixelRatio);try{for(at=k.length,V.clear(),V.drawImage($._canvas,0,0,$.getWidth()/ot,$.getHeight()/ot),K=V.getImageData(0,0,H.getWidth(),H.getHeight()),ut=0;ut<at;ut++){if(xt=k[ut],typeof xt!="function"){a.Util.error("Filter should be type of function, but got "+typeof xt+" instead. Please check correct filters");continue}xt.call(this,K),V.putImageData(K,0,0)}}catch(tt){a.Util.error("Unable to apply filter. "+tt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return H}return $}on(k,U){if(this._cache&&this._cache.delete(c),arguments.length===3)return this._delegate.apply(this,arguments);const $=k.split(I);for(let H=0;H<$.length;H++){const at=$[H].split("."),K=at[0],ut=at[1]||"";this.eventListeners[K]||(this.eventListeners[K]=[]),this.eventListeners[K].push({name:ut,handler:U})}return this}off(k,U){let $=(k||"").split(I),H=$.length,V,at,K,ut,xt,ot;if(this._cache&&this._cache.delete(c),!k)for(at in this.eventListeners)this._off(at);for(V=0;V<H;V++)if(K=$[V],ut=K.split("."),xt=ut[0],ot=ut[1],xt)this.eventListeners[xt]&&this._off(xt,ot,U);else for(at in this.eventListeners)this._off(at,ot,U);return this}dispatchEvent(k){const U={target:this,type:k.type,evt:k};return this.fire(k.type,U),this}addEventListener(k,U){return this.on(k,function($){U.call(this,$.evt)}),this}removeEventListener(k){return this.off(k),this}_delegate(k,U,$){const H=this;this.on(k,function(V){const at=V.target.findAncestors(U,!0,H);for(let K=0;K<at.length;K++)V=a.Util.cloneObject(V),V.currentTarget=at[K],$.call(at[K],V)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(B),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(S)}_remove(){this._clearCaches();const k=this.getParent();k&&k.children&&(k.children.splice(this.index,1),k._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(k){const U="get"+a.Util._capitalize(k);return a.Util._isFunction(this[U])?this[U]():this.attrs[k]}getAncestors(){let k=this.getParent(),U=[];for(;k;)U.push(k),k=k.getParent();return U}getAttrs(){return this.attrs||{}}setAttrs(k){return this._batchTransformChanges(()=>{let U,$;if(!k)return this;for(U in k)U!==v&&($=O+a.Util._capitalize(U),a.Util._isFunction(this[$])?this[$](k[U]):this._setAttr(U,k[U]))}),this}isListening(){return this._getCache(S,this._isListening)}_isListening(k){if(!this.listening())return!1;const $=this.getParent();return $&&$!==k&&this!==k?$._isListening(k):!0}isVisible(){return this._getCache(j,this._isVisible)}_isVisible(k){if(!this.visible())return!1;const $=this.getParent();return $&&$!==k&&this!==k?$._isVisible(k):!0}shouldDrawHit(k,U=!1){if(k)return this._isVisible(k)&&this._isListening(k);const $=this.getLayer();let H=!1;t.DD._dragElements.forEach(at=>{at.dragStatus==="dragging"&&(at.node.nodeType==="Stage"||at.node.getLayer()===$)&&(H=!0)});const V=!U&&!i.Konva.hitOnDragEnabled&&(H||i.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!V}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let k=this.getDepth(),U=this,$=0,H,V,at,K;function ut(ot){for(H=[],V=ot.length,at=0;at<V;at++)K=ot[at],$++,K.nodeType!==L&&(H=H.concat(K.getChildren().slice())),K._id===U._id&&(at=V);H.length>0&&H[0].getDepth()<=k&&ut(H)}const xt=this.getStage();return U.nodeType!==z&&xt&&ut(xt.getChildren()),$}getDepth(){let k=0,U=this.parent;for(;U;)k++,U=U.parent;return k}_batchTransformChanges(k){this._batchingTransformChange=!0,k(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(F),this._clearSelfAndDescendantCache(d)),this._needClearTransformCache=!1}setPosition(k){return this._batchTransformChanges(()=>{this.x(k.x),this.y(k.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const k=this.getStage();if(!k)return null;const U=k.getPointerPosition();if(!U)return null;const $=this.getAbsoluteTransform().copy();return $.invert(),$.point(U)}getAbsolutePosition(k){let U=!1,$=this.parent;for(;$;){if($.isCached()){U=!0;break}$=$.parent}U&&!k&&(k=!0);const H=this.getAbsoluteTransform(k).getMatrix(),V=new a.Transform,at=this.offset();return V.m=H.slice(),V.translate(at.x,at.y),V.getTranslation()}setAbsolutePosition(k){const{x:U,y:$,...H}=this._clearTransform();this.attrs.x=U,this.attrs.y=$,this._clearCache(F);const V=this._getAbsoluteTransform().copy();return V.invert(),V.translate(k.x,k.y),k={x:this.attrs.x+V.getTranslation().x,y:this.attrs.y+V.getTranslation().y},this._setTransform(H),this.setPosition({x:k.x,y:k.y}),this._clearCache(F),this._clearSelfAndDescendantCache(d),this}_setTransform(k){let U;for(U in k)this.attrs[U]=k[U]}_clearTransform(){const k={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,k}move(k){let U=k.x,$=k.y,H=this.x(),V=this.y();return U!==void 0&&(H+=U),$!==void 0&&(V+=$),this.setPosition({x:H,y:V}),this}_eachAncestorReverse(k,U){let $=[],H=this.getParent(),V,at;if(!(U&&U._id===this._id)){for($.unshift(this);H&&(!U||H._id!==U._id);)$.unshift(H),H=H.parent;for(V=$.length,at=0;at<V;at++)k($[at])}}rotate(k){return this.rotation(this.rotation()+k),this}moveToTop(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const k=this.index,U=this.parent.getChildren().length;return k<U-1?(this.parent.children.splice(k,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;const k=this.index,U=this.parent.getChildren().length;return k<U-1?(this.parent.children.splice(k,1),this.parent.children.splice(k+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;const k=this.index;return k>0?(this.parent.children.splice(k,1),this.parent.children.splice(k-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const k=this.index;return k>0?(this.parent.children.splice(k,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(k){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(k<0||k>=this.parent.children.length)&&a.Util.warn("Unexpected value "+k+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const U=this.index;return this.parent.children.splice(U,1),this.parent.children.splice(k,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let k=this.opacity();const U=this.getParent();return U&&!U._isUnderCache&&(k*=U.getAbsoluteOpacity()),k}moveTo(k){return this.getParent()!==k&&(this._remove(),k.add(this)),this}toObject(){let k=this.getAttrs(),U,$,H,V,at;const K={attrs:{},className:this.getClassName()};for(U in k)$=k[U],at=a.Util.isObject($)&&!a.Util._isPlainObject($)&&!a.Util._isArray($),!at&&(H=typeof this[U]=="function"&&this[U],delete k[U],V=H?H.call(this):null,k[U]=$,V!==$&&(K.attrs[U]=$));return a.Util._prepareToStringify(K)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(k,U,$){const H=[];U&&this._isMatch(k)&&H.push(this);let V=this.parent;for(;V;){if(V===$)return H;V._isMatch(k)&&H.push(V),V=V.parent}return H}isAncestorOf(k){return!1}findAncestor(k,U,$){return this.findAncestors(k,U,$)[0]}_isMatch(k){if(!k)return!1;if(typeof k=="function")return k(this);let U=k.replace(/ /g,"").split(","),$=U.length,H,V;for(H=0;H<$;H++)if(V=U[H],a.Util.isValidSelector(V)||(a.Util.warn('Selector "'+V+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),V.charAt(0)==="#"){if(this.id()===V.slice(1))return!0}else if(V.charAt(0)==="."){if(this.hasName(V.slice(1)))return!0}else if(this.className===V||this.nodeType===V)return!0;return!1}getLayer(){const k=this.getParent();return k?k.getLayer():null}getStage(){return this._getCache(B,this._getStage)}_getStage(){const k=this.getParent();return k?k.getStage():null}fire(k,U={},$){return U.target=U.target||this,$?this._fireAndBubble(k,U):this._fire(k,U),this}getAbsoluteTransform(k){return k?this._getAbsoluteTransform(k):this._getCache(d,this._getAbsoluteTransform)}_getAbsoluteTransform(k){let U;if(k)return U=new a.Transform,this._eachAncestorReverse(function($){const H=$.transformsEnabled();H==="all"?U.multiply($.getTransform()):H==="position"&&U.translate($.x()-$.offsetX(),$.y()-$.offsetY())},k),U;{U=this._cache.get(d)||new a.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(U):U.reset();const $=this.transformsEnabled();if($==="all")U.multiply(this.getTransform());else if($==="position"){const H=this.attrs.x||0,V=this.attrs.y||0,at=this.attrs.offsetX||0,K=this.attrs.offsetY||0;U.translate(H-at,V-K)}return U.dirty=!1,U}}getAbsoluteScale(k){let U=this;for(;U;)U._isUnderCache&&(k=U),U=U.getParent();const H=this.getAbsoluteTransform(k).decompose();return{x:H.scaleX,y:H.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(F,this._getTransform)}_getTransform(){var k,U;const $=this._cache.get(F)||new a.Transform;$.reset();const H=this.x(),V=this.y(),at=i.Konva.getAngle(this.rotation()),K=(k=this.attrs.scaleX)!==null&&k!==void 0?k:1,ut=(U=this.attrs.scaleY)!==null&&U!==void 0?U:1,xt=this.attrs.skewX||0,ot=this.attrs.skewY||0,tt=this.attrs.offsetX||0,ct=this.attrs.offsetY||0;return(H!==0||V!==0)&&$.translate(H,V),at!==0&&$.rotate(at),(xt!==0||ot!==0)&&$.skew(xt,ot),(K!==1||ut!==1)&&$.scale(K,ut),(tt!==0||ct!==0)&&$.translate(-1*tt,-1*ct),$.dirty=!1,$}clone(k){let U=a.Util.cloneObject(this.attrs),$,H,V,at,K;for($ in k)U[$]=k[$];const ut=new this.constructor(U);for($ in this.eventListeners)for(H=this.eventListeners[$],V=H.length,at=0;at<V;at++)K=H[at],K.name.indexOf(x)<0&&(ut.eventListeners[$]||(ut.eventListeners[$]=[]),ut.eventListeners[$].push(K));return ut}_toKonvaCanvas(k){k=k||{};const U=this.getClientRect(),$=this.getStage(),H=k.x!==void 0?k.x:Math.floor(U.x),V=k.y!==void 0?k.y:Math.floor(U.y),at=k.pixelRatio||1,K=new n.SceneCanvas({width:k.width||Math.ceil(U.width)||($?$.width():0),height:k.height||Math.ceil(U.height)||($?$.height():0),pixelRatio:at}),ut=K.getContext(),xt=new n.SceneCanvas({width:K.width/K.pixelRatio+Math.abs(H),height:K.height/K.pixelRatio+Math.abs(V),pixelRatio:K.pixelRatio});return k.imageSmoothingEnabled===!1&&(ut._context.imageSmoothingEnabled=!1),ut.save(),(H||V)&&ut.translate(-1*H,-1*V),this.drawScene(K,void 0,xt),ut.restore(),K}toCanvas(k){return this._toKonvaCanvas(k)._canvas}toDataURL(k){k=k||{};const U=k.mimeType||null,$=k.quality||null,H=this._toKonvaCanvas(k).toDataURL(U,$);return k.callback&&k.callback(H),H}toImage(k){return new Promise((U,$)=>{try{const H=k?.callback;H&&delete k.callback,a.Util._urlToImage(this.toDataURL(k),function(V){U(V),H?.(V)})}catch(H){$(H)}})}toBlob(k){return new Promise((U,$)=>{try{const H=k?.callback;H&&delete k.callback,this.toCanvas(k).toBlob(V=>{U(V),H?.(V)},k?.mimeType,k?.quality)}catch(H){$(H)}})}setSize(k){return this.width(k.width),this.height(k.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance}_off(k,U,$){let H=this.eventListeners[k],V,at,K;for(V=0;V<H.length;V++)if(at=H[V].name,K=H[V].handler,(at!=="konva"||U==="konva")&&(!U||at===U)&&(!$||$===K)){if(H.splice(V,1),H.length===0){delete this.eventListeners[k];break}V--}}_fireChangeEvent(k,U,$){this._fire(k+m,{oldVal:U,newVal:$})}addName(k){if(!this.hasName(k)){const U=this.name(),$=U?U+" "+k:k;this.name($)}return this}hasName(k){if(!k)return!1;const U=this.name();return U?(U||"").split(/\s/g).indexOf(k)!==-1:!1}removeName(k){const U=(this.name()||"").split(/\s/g),$=U.indexOf(k);return $!==-1&&(U.splice($,1),this.name(U.join(" "))),this}setAttr(k,U){const $=this[O+a.Util._capitalize(k)];return a.Util._isFunction($)?$.call(this,U):this._setAttr(k,U),this}_requestDraw(){if(i.Konva.autoDrawEnabled){const k=this.getLayer()||this.getStage();k?.batchDraw()}}_setAttr(k,U){const $=this.attrs[k];$===U&&!a.Util.isObject(U)||(U==null?delete this.attrs[k]:this.attrs[k]=U,this._shouldFireChangeEvents&&this._fireChangeEvent(k,$,U),this._requestDraw())}_setComponentAttr(k,U,$){let H;$!==void 0&&(H=this.attrs[k],H||(this.attrs[k]=this.getAttr(k)),this.attrs[k][U]=$,this._fireChangeEvent(k,H,$))}_fireAndBubble(k,U,$){U&&this.nodeType===L&&(U.target=this);const H=[_,C,D,T,w,R];if(!(H.indexOf(k)!==-1&&($&&(this===$||this.isAncestorOf&&this.isAncestorOf($))||this.nodeType==="Stage"&&!$))){this._fire(k,U);const at=H.indexOf(k)!==-1&&$&&$.isAncestorOf&&$.isAncestorOf(this)&&!$.isAncestorOf(this.parent);(U&&!U.cancelBubble||!U)&&this.parent&&this.parent.isListening()&&!at&&($&&$.parent?this._fireAndBubble.call(this.parent,k,U,$):this._fireAndBubble.call(this.parent,k,U))}}_getProtoListeners(k){var U,$,H;const V=(U=this._cache.get(c))!==null&&U!==void 0?U:{};let at=V?.[k];if(at===void 0){at=[];let K=Object.getPrototypeOf(this);for(;K;){const ut=(H=($=K.eventListeners)===null||$===void 0?void 0:$[k])!==null&&H!==void 0?H:[];at.push(...ut),K=Object.getPrototypeOf(K)}V[k]=at,this._cache.set(c,V)}return at}_fire(k,U){U=U||{},U.currentTarget=this,U.type=k;const $=this._getProtoListeners(k);if($)for(let V=0;V<$.length;V++)$[V].handler.call(this,U);const H=this.eventListeners[k];if(H)for(let V=0;V<H.length;V++)H[V].handler.call(this,U)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(k){const U=k?k.pointerId:void 0,$=this.getStage(),H=this.getAbsolutePosition();if(!$)return;const V=$._getPointerById(U)||$._changedPointerPositions[0]||H;t.DD._dragElements.set(this._id,{node:this,startPointerPos:V,offset:{x:V.x-H.x,y:V.y-H.y},dragStatus:"ready",pointerId:U})}startDrag(k,U=!0){t.DD._dragElements.has(this._id)||this._createDragElement(k);const $=t.DD._dragElements.get(this._id);$.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:k&&k.evt},U)}_setDragPosition(k,U){const $=this.getStage()._getPointerById(U.pointerId);if(!$)return;let H={x:$.x-U.offset.x,y:$.y-U.offset.y};const V=this.dragBoundFunc();if(V!==void 0){const at=V.call(this,H,k);at?H=at:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==H.x||this._lastPos.y!==H.y)&&(this.setAbsolutePosition(H),this._requestDraw()),this._lastPos=H}stopDrag(k){const U=t.DD._dragElements.get(this._id);U&&(U.dragStatus="stopped"),t.DD._endDragBefore(k),t.DD._endDragAfter(k)}setDraggable(k){this._setAttr("draggable",k),this._dragChange()}isDragging(){const k=t.DD._dragElements.get(this._id);return k?k.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(k){if(!(!(k.evt.button!==void 0)||i.Konva.dragButtons.indexOf(k.evt.button)>=0)||this.isDragging())return;let H=!1;t.DD._dragElements.forEach(V=>{this.isAncestorOf(V.node)&&(H=!0)}),H||this._createDragElement(k)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const U=t.DD._dragElements.get(this._id),$=U&&U.dragStatus==="dragging",H=U&&U.dragStatus==="ready";$?this.stopDrag():H&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(k={x:0,y:0}){const U=this.getStage();if(!U)return!1;const $={x:-k.x,y:-k.y,width:U.width()+2*k.x,height:U.height()+2*k.y};return a.Util.haveIntersection($,this.getClientRect())}static create(k,U){return a.Util._isString(k)&&(k=JSON.parse(k)),this._createNode(k,U)}static _createNode(k,U){let $=it.prototype.getClassName.call(k),H=k.children,V,at,K;U&&(k.attrs.container=U),i.Konva[$]||(a.Util.warn('Can not find a node with class name "'+$+'". Fallback to "Shape".'),$="Shape");const ut=i.Konva[$];if(V=new ut(k.attrs),H)for(at=H.length,K=0;K<at;K++)V.add(it._createNode(H[K]));return V}}zp.Node=it,it.prototype.nodeType="Node",it.prototype._attrsAffectingSize=[],it.prototype.eventListeners={},it.prototype.on.call(it.prototype,Z,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(F),this._clearSelfAndDescendantCache(d)}),it.prototype.on.call(it.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(j)}),it.prototype.on.call(it.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(S)}),it.prototype.on.call(it.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const et=e.Factory.addGetterSetter;return et(it,"zIndex"),et(it,"absolutePosition"),et(it,"position"),et(it,"x",0,(0,s.getNumberValidator)()),et(it,"y",0,(0,s.getNumberValidator)()),et(it,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),et(it,"opacity",1,(0,s.getNumberValidator)()),et(it,"name","",(0,s.getStringValidator)()),et(it,"id","",(0,s.getStringValidator)()),et(it,"rotation",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(it,"scale",["x","y"]),et(it,"scaleX",1,(0,s.getNumberValidator)()),et(it,"scaleY",1,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(it,"skew",["x","y"]),et(it,"skewX",0,(0,s.getNumberValidator)()),et(it,"skewY",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(it,"offset",["x","y"]),et(it,"offsetX",0,(0,s.getNumberValidator)()),et(it,"offsetY",0,(0,s.getNumberValidator)()),et(it,"dragDistance",void 0,(0,s.getNumberValidator)()),et(it,"width",0,(0,s.getNumberValidator)()),et(it,"height",0,(0,s.getNumberValidator)()),et(it,"listening",!0,(0,s.getBooleanValidator)()),et(it,"preventDefault",!0,(0,s.getBooleanValidator)()),et(it,"filters",void 0,function(Q){return this._filterUpToDate=!1,Q}),et(it,"visible",!0,(0,s.getBooleanValidator)()),et(it,"transformsEnabled","all",(0,s.getStringValidator)()),et(it,"size"),et(it,"dragBoundFunc"),et(it,"draggable",!1,(0,s.getBooleanValidator)()),e.Factory.backCompat(it,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),zp}var Fp={},UC;function x1(){if(UC)return Fp;UC=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.Container=void 0;const n=ke(),t=Qn(),e=Fe();let i=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){const o=this.children||[];return s?o.filter(s):o}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let c=0;c<s.length;c++)this.add(s[c]);return this}const o=s[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const o=this._generalFind(s,!0);return o.length>0?o[0]:void 0}_generalFind(s,o){const c=[];return this._descendants(d=>{const f=d._isMatch(s);return f&&c.push(d),!!(f&&o)}),c}_descendants(s){let o=!1;const c=this.getChildren();for(const d of c){if(o=s(d),o)return!0;if(d.hasChildren()&&(o=d._descendants(s),o))return!0}return!1}toObject(){const s=t.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(o=>{s.children.push(o.toObject())}),s}isAncestorOf(s){let o=s.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(s){const o=t.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(c){o.add(c.clone())}),o}getAllIntersections(s){const o=[];return this.find("Shape").forEach(c=>{c.isVisible()&&c.intersects(s)&&o.push(c)}),o}_clearSelfAndDescendantCache(s){var o;super._clearSelfAndDescendantCache(s),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(c){c._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(o,c){o.index=c}),this._requestDraw()}drawScene(s,o,c){const d=this.getLayer(),f=s||d&&d.getCanvas(),g=f&&f.getContext(),m=this._getCanvasCache(),v=m&&m.scene,x=f&&f.isCache;if(!this.isVisible()&&!x)return this;if(v){g.save();const S=this.getAbsoluteTransform(o).getMatrix();g.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedSceneCanvas(g),g.restore()}else this._drawChildren("drawScene",f,o,c);return this}drawHit(s,o){if(!this.shouldDrawHit(o))return this;const c=this.getLayer(),d=s||c&&c.hitCanvas,f=d&&d.getContext(),g=this._getCanvasCache();if(g&&g.hit){f.save();const v=this.getAbsoluteTransform(o).getMatrix();f.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(f),f.restore()}else this._drawChildren("drawHit",d,o);return this}_drawChildren(s,o,c,d){var f;const g=o&&o.getContext(),m=this.clipWidth(),v=this.clipHeight(),x=this.clipFunc(),S=typeof m=="number"&&typeof v=="number"||x,_=c===this;if(S){g.save();const D=this.getAbsoluteTransform(c);let T=D.getMatrix();g.transform(T[0],T[1],T[2],T[3],T[4],T[5]),g.beginPath();let w;if(x)w=x.call(this,g,this);else{const R=this.clipX(),O=this.clipY();g.rect(R||0,O||0,m,v)}g.clip.apply(g,w),T=D.copy().invert().getMatrix(),g.transform(T[0],T[1],T[2],T[3],T[4],T[5])}const C=!_&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";C&&(g.save(),g._applyGlobalCompositeOperation(this)),(f=this.children)===null||f===void 0||f.forEach(function(D){D[s](o,c,d)}),C&&g.restore(),S&&g.restore()}getClientRect(s={}){var o;const c=s.skipTransform,d=s.relativeTo;let f,g,m,v,x={x:1/0,y:1/0,width:0,height:0};const S=this;(o=this.children)===null||o===void 0||o.forEach(function(D){if(!D.visible())return;const T=D.getClientRect({relativeTo:S,skipShadow:s.skipShadow,skipStroke:s.skipStroke});T.width===0&&T.height===0||(f===void 0?(f=T.x,g=T.y,m=T.x+T.width,v=T.y+T.height):(f=Math.min(f,T.x),g=Math.min(g,T.y),m=Math.max(m,T.x+T.width),v=Math.max(v,T.y+T.height)))});const _=this.find("Shape");let C=!1;for(let D=0;D<_.length;D++)if(_[D]._isVisible(this)){C=!0;break}return C&&f!==void 0?x={x:f,y:g,width:m-f,height:v-g}:x={x:0,y:0,width:0,height:0},c?x:this._transformedRect(x,d)}};return Fp.Container=i,n.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),n.Factory.addGetterSetter(i,"clipX",void 0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipY",void 0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipWidth",void 0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipHeight",void 0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipFunc"),Fp}var Qx={},dc={},qC;function u9(){if(qC)return dc;qC=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.getCapturedShape=i,dc.createEvent=a,dc.hasPointerCapture=s,dc.setPointerCapture=o,dc.releaseCapture=c;const n=Re(),t=new Map,e=n.Konva._global.PointerEvent!==void 0;function i(d){return t.get(d)}function a(d){return{evt:d,pointerId:d.pointerId}}function s(d,f){return t.get(d)===f}function o(d,f){c(d),f.getStage()&&(t.set(d,f),e&&f._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))}function c(d,f){const g=t.get(d);if(!g)return;const m=g.getStage();m&&m.content,t.delete(d),e&&g._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}return dc}var VC;function xV(){return VC||(VC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=n.stages=void 0;const t=Un(),e=ke(),i=x1(),a=Re(),s=b1(),o=SA(),c=Re(),d=u9(),f="Stage",g="string",m="px",v="mouseout",x="mouseleave",S="mouseover",_="mouseenter",C="mousemove",D="mousedown",T="mouseup",w="pointermove",R="pointerdown",O="pointerup",L="pointercancel",I="lostpointercapture",B="pointerout",F="pointerleave",z="pointerover",j="pointerenter",Z="contextmenu",nt="touchstart",it="touchend",et="touchmove",Q="touchcancel",k="wheel",U=5,$=[[_,"_pointerenter"],[D,"_pointerdown"],[C,"_pointermove"],[T,"_pointerup"],[x,"_pointerleave"],[nt,"_pointerdown"],[et,"_pointermove"],[it,"_pointerup"],[Q,"_pointercancel"],[S,"_pointerover"],[k,"_wheel"],[Z,"_contextmenu"],[R,"_pointerdown"],[w,"_pointermove"],[O,"_pointerup"],[L,"_pointercancel"],[F,"_pointerleave"],[I,"_lostpointercapture"]],H={mouse:{[B]:v,[F]:x,[z]:S,[j]:_,[w]:C,[R]:D,[O]:T,[L]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[B]:"touchout",[F]:"touchleave",[z]:"touchover",[j]:"touchenter",[w]:et,[R]:nt,[O]:it,[L]:Q,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[B]:B,[F]:F,[z]:z,[j]:j,[w]:w,[R]:R,[O]:O,[L]:L,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},V=ot=>ot.indexOf("pointer")>=0?"pointer":ot.indexOf("touch")>=0?"touch":"mouse",at=ot=>{const tt=V(ot);if(tt==="pointer")return a.Konva.pointerEventsEnabled&&H.pointer;if(tt==="touch")return H.touch;if(tt==="mouse")return H.mouse};function K(ot={}){return(ot.clipFunc||ot.clipWidth||ot.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ot}const ut="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";n.stages=[];class xt extends i.Container{constructor(tt){super(K(tt)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),n.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{K(this.attrs)}),this._checkVisibility()}_validateAdd(tt){const ct=tt.getType()==="Layer",At=tt.getType()==="FastLayer";ct||At||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const tt=this.visible()?"":"none";this.content.style.display=tt}setContainer(tt){if(typeof tt===g){let ct;if(tt.charAt(0)==="."){const At=tt.slice(1);tt=document.getElementsByClassName(At)[0]}else tt.charAt(0)!=="#"?ct=tt:ct=tt.slice(1),tt=document.getElementById(ct);if(!tt)throw"Can not find container in document with id "+ct}return this._setAttr("container",tt),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),tt.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const tt=this.children,ct=tt.length;for(let At=0;At<ct;At++)tt[At].clear();return this}clone(tt){return tt||(tt={}),tt.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,tt)}destroy(){super.destroy();const tt=this.content;tt&&t.Util._isInDocument(tt)&&this.container().removeChild(tt);const ct=n.stages.indexOf(this);return ct>-1&&n.stages.splice(ct,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const tt=this._pointerPositions[0]||this._changedPointerPositions[0];return tt?{x:tt.x,y:tt.y}:(t.Util.warn(ut),null)}_getPointerById(tt){return this._pointerPositions.find(ct=>ct.id===tt)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(tt){tt=tt||{},tt.x=tt.x||0,tt.y=tt.y||0,tt.width=tt.width||this.width(),tt.height=tt.height||this.height();const ct=new s.SceneCanvas({width:tt.width,height:tt.height,pixelRatio:tt.pixelRatio||1}),At=ct.getContext()._context,Mt=this.children;return(tt.x||tt.y)&&At.translate(-1*tt.x,-1*tt.y),Mt.forEach(function(Pt){if(!Pt.isVisible())return;const Bt=Pt._toKonvaCanvas(tt);At.drawImage(Bt._canvas,tt.x,tt.y,Bt.getWidth()/Bt.getPixelRatio(),Bt.getHeight()/Bt.getPixelRatio())}),ct}getIntersection(tt){if(!tt)return null;const ct=this.children,At=ct.length,Mt=At-1;for(let Pt=Mt;Pt>=0;Pt--){const Bt=ct[Pt].getIntersection(tt);if(Bt)return Bt}return null}_resizeDOM(){const tt=this.width(),ct=this.height();this.content&&(this.content.style.width=tt+m,this.content.style.height=ct+m),this.bufferCanvas.setSize(tt,ct),this.bufferHitCanvas.setSize(tt,ct),this.children.forEach(At=>{At.setSize({width:tt,height:ct}),At.draw()})}add(tt,...ct){if(arguments.length>1){for(let Mt=0;Mt<arguments.length;Mt++)this.add(arguments[Mt]);return this}super.add(tt);const At=this.children.length;return At>U&&t.Util.warn("The stage has "+At+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),tt.setSize({width:this.width(),height:this.height()}),tt.draw(),a.Konva.isBrowser&&this.content.appendChild(tt.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(tt){return d.hasPointerCapture(tt,this)}setPointerCapture(tt){d.setPointerCapture(tt,this)}releaseCapture(tt){d.releaseCapture(tt,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&$.forEach(([tt,ct])=>{this.content.addEventListener(tt,At=>{this[ct](At)},{passive:!1})})}_pointerenter(tt){this.setPointersPositions(tt);const ct=at(tt.type);ct&&this._fire(ct.pointerenter,{evt:tt,target:this,currentTarget:this})}_pointerover(tt){this.setPointersPositions(tt);const ct=at(tt.type);ct&&this._fire(ct.pointerover,{evt:tt,target:this,currentTarget:this})}_getTargetShape(tt){let ct=this[tt+"targetShape"];return ct&&!ct.getStage()&&(ct=null),ct}_pointerleave(tt){const ct=at(tt.type),At=V(tt.type);if(!ct)return;this.setPointersPositions(tt);const Mt=this._getTargetShape(At),Pt=!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled;Mt&&Pt?(Mt._fireAndBubble(ct.pointerout,{evt:tt}),Mt._fireAndBubble(ct.pointerleave,{evt:tt}),this._fire(ct.pointerleave,{evt:tt,target:this,currentTarget:this}),this[At+"targetShape"]=null):Pt&&(this._fire(ct.pointerleave,{evt:tt,target:this,currentTarget:this}),this._fire(ct.pointerout,{evt:tt,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(tt){const ct=at(tt.type),At=V(tt.type);if(!ct)return;this.setPointersPositions(tt);let Mt=!1;this._changedPointerPositions.forEach(Pt=>{const Bt=this.getIntersection(Pt);if(o.DD.justDragged=!1,a.Konva["_"+At+"ListenClick"]=!0,!Bt||!Bt.isListening()){this[At+"ClickStartShape"]=void 0;return}a.Konva.capturePointerEventsEnabled&&Bt.setPointerCapture(Pt.id),this[At+"ClickStartShape"]=Bt,Bt._fireAndBubble(ct.pointerdown,{evt:tt,pointerId:Pt.id}),Mt=!0;const Gt=tt.type.indexOf("touch")>=0;Bt.preventDefault()&&tt.cancelable&&Gt&&tt.preventDefault()}),Mt||this._fire(ct.pointerdown,{evt:tt,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(tt){const ct=at(tt.type),At=V(tt.type);if(!ct||(a.Konva.isDragging()&&o.DD.node.preventDefault()&&tt.cancelable&&tt.preventDefault(),this.setPointersPositions(tt),!(!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled)))return;const Pt={};let Bt=!1;const Gt=this._getTargetShape(At);this._changedPointerPositions.forEach(de=>{const Nt=d.getCapturedShape(de.id)||this.getIntersection(de),we=de.id,kt={evt:tt,pointerId:we},Ae=Gt!==Nt;if(Ae&&Gt&&(Gt._fireAndBubble(ct.pointerout,{...kt},Nt),Gt._fireAndBubble(ct.pointerleave,{...kt},Nt)),Nt){if(Pt[Nt._id])return;Pt[Nt._id]=!0}Nt&&Nt.isListening()?(Bt=!0,Ae&&(Nt._fireAndBubble(ct.pointerover,{...kt},Gt),Nt._fireAndBubble(ct.pointerenter,{...kt},Gt),this[At+"targetShape"]=Nt),Nt._fireAndBubble(ct.pointermove,{...kt})):Gt&&(this._fire(ct.pointerover,{evt:tt,target:this,currentTarget:this,pointerId:we}),this[At+"targetShape"]=null)}),Bt||this._fire(ct.pointermove,{evt:tt,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(tt){const ct=at(tt.type),At=V(tt.type);if(!ct)return;this.setPointersPositions(tt);const Mt=this[At+"ClickStartShape"],Pt=this[At+"ClickEndShape"],Bt={};let Gt=!1;this._changedPointerPositions.forEach(de=>{const Nt=d.getCapturedShape(de.id)||this.getIntersection(de);if(Nt){if(Nt.releaseCapture(de.id),Bt[Nt._id])return;Bt[Nt._id]=!0}const we=de.id,kt={evt:tt,pointerId:we};let Ae=!1;a.Konva["_"+At+"InDblClickWindow"]?(Ae=!0,clearTimeout(this[At+"DblTimeout"])):o.DD.justDragged||(a.Konva["_"+At+"InDblClickWindow"]=!0,clearTimeout(this[At+"DblTimeout"])),this[At+"DblTimeout"]=setTimeout(function(){a.Konva["_"+At+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),Nt&&Nt.isListening()?(Gt=!0,this[At+"ClickEndShape"]=Nt,Nt._fireAndBubble(ct.pointerup,{...kt}),a.Konva["_"+At+"ListenClick"]&&Mt&&Mt===Nt&&(Nt._fireAndBubble(ct.pointerclick,{...kt}),Ae&&Pt&&Pt===Nt&&Nt._fireAndBubble(ct.pointerdblclick,{...kt}))):(this[At+"ClickEndShape"]=null,a.Konva["_"+At+"ListenClick"]&&this._fire(ct.pointerclick,{evt:tt,target:this,currentTarget:this,pointerId:we}),Ae&&this._fire(ct.pointerdblclick,{evt:tt,target:this,currentTarget:this,pointerId:we}))}),Gt||this._fire(ct.pointerup,{evt:tt,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+At+"ListenClick"]=!1,tt.cancelable&&At!=="touch"&&At!=="pointer"&&tt.preventDefault()}_contextmenu(tt){this.setPointersPositions(tt);const ct=this.getIntersection(this.getPointerPosition());ct&&ct.isListening()?ct._fireAndBubble(Z,{evt:tt}):this._fire(Z,{evt:tt,target:this,currentTarget:this})}_wheel(tt){this.setPointersPositions(tt);const ct=this.getIntersection(this.getPointerPosition());ct&&ct.isListening()?ct._fireAndBubble(k,{evt:tt}):this._fire(k,{evt:tt,target:this,currentTarget:this})}_pointercancel(tt){this.setPointersPositions(tt);const ct=d.getCapturedShape(tt.pointerId)||this.getIntersection(this.getPointerPosition());ct&&ct._fireAndBubble(O,d.createEvent(tt)),d.releaseCapture(tt.pointerId)}_lostpointercapture(tt){d.releaseCapture(tt.pointerId)}setPointersPositions(tt){const ct=this._getContentPosition();let At=null,Mt=null;tt=tt||window.event,tt.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(tt.touches,Pt=>{this._pointerPositions.push({id:Pt.identifier,x:(Pt.clientX-ct.left)/ct.scaleX,y:(Pt.clientY-ct.top)/ct.scaleY})}),Array.prototype.forEach.call(tt.changedTouches||tt.touches,Pt=>{this._changedPointerPositions.push({id:Pt.identifier,x:(Pt.clientX-ct.left)/ct.scaleX,y:(Pt.clientY-ct.top)/ct.scaleY})})):(At=(tt.clientX-ct.left)/ct.scaleX,Mt=(tt.clientY-ct.top)/ct.scaleY,this.pointerPos={x:At,y:Mt},this._pointerPositions=[{x:At,y:Mt,id:t.Util._getFirstPointerId(tt)}],this._changedPointerPositions=[{x:At,y:Mt,id:t.Util._getFirstPointerId(tt)}])}_setPointerPosition(tt){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(tt)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const tt=this.content.getBoundingClientRect();return{top:tt.top,left:tt.left,scaleX:tt.width/this.content.clientWidth||1,scaleY:tt.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!a.Konva.isBrowser)return;const tt=this.container();if(!tt)throw"Stage has no container. A container is required.";tt.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),tt.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(tt){tt.batchDraw()}),this}}n.Stage=xt,xt.prototype.nodeType=f,(0,c._registerNode)(xt),e.Factory.addGetterSetter(xt,"container"),a.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{n.stages.forEach(ot=>{ot.batchDraw()})})}(Qx)),Qx}var Ip={},Zx={},YC;function wi(){return YC||(YC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Shape=n.shapes=void 0;const t=Re(),e=Un(),i=ke(),a=Qn(),s=Fe(),o=Re(),c=u9(),d="hasShadow",f="shadowRGBA",g="patternImage",m="linearGradient",v="radialGradient";let x;function S(){return x||(x=e.Util.createCanvasElement().getContext("2d"),x)}n.shapes={};function _(F){const z=this.attrs.fillRule;z?F.fill(z):F.fill()}function C(F){F.stroke()}function D(F){const z=this.attrs.fillRule;z?F.fill(z):F.fill()}function T(F){F.stroke()}function w(){this._clearCache(d)}function R(){this._clearCache(f)}function O(){this._clearCache(g)}function L(){this._clearCache(m)}function I(){this._clearCache(v)}class B extends a.Node{constructor(z){super(z);let j;for(;j=e.Util.getRandomColor(),!(j&&!(j in n.shapes)););this.colorKey=j,n.shapes[j]=this}getContext(){return e.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return e.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(d,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(g,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const j=S().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(j&&j.setTransform){const Z=new e.Transform;Z.translate(this.fillPatternX(),this.fillPatternY()),Z.rotate(t.Konva.getAngle(this.fillPatternRotation())),Z.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Z.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const nt=Z.getMatrix(),it=typeof DOMMatrix>"u"?{a:nt[0],b:nt[1],c:nt[2],d:nt[3],e:nt[4],f:nt[5]}:new DOMMatrix(nt);j.setTransform(it)}return j}}_getLinearGradient(){return this._getCache(m,this.__getLinearGradient)}__getLinearGradient(){const z=this.fillLinearGradientColorStops();if(z){const j=S(),Z=this.fillLinearGradientStartPoint(),nt=this.fillLinearGradientEndPoint(),it=j.createLinearGradient(Z.x,Z.y,nt.x,nt.y);for(let et=0;et<z.length;et+=2)it.addColorStop(z[et],z[et+1]);return it}}_getRadialGradient(){return this._getCache(v,this.__getRadialGradient)}__getRadialGradient(){const z=this.fillRadialGradientColorStops();if(z){const j=S(),Z=this.fillRadialGradientStartPoint(),nt=this.fillRadialGradientEndPoint(),it=j.createRadialGradient(Z.x,Z.y,this.fillRadialGradientStartRadius(),nt.x,nt.y,this.fillRadialGradientEndRadius());for(let et=0;et<z.length;et+=2)it.addColorStop(z[et],z[et+1]);return it}}getShadowRGBA(){return this._getCache(f,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const z=e.Util.colorToRGBA(this.shadowColor());if(z)return"rgba("+z.r+","+z.g+","+z.b+","+z.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const z=this.hitStrokeWidth();return z==="auto"?this.hasStroke():this.strokeEnabled()&&!!z}intersects(z){const j=this.getStage();if(!j)return!1;const Z=j.bufferHitCanvas;return Z.getContext().clear(),this.drawHit(Z,void 0,!0),Z.context.getImageData(Math.round(z.x),Math.round(z.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete n.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(z){var j;if(!((j=this.attrs.perfectDrawEnabled)!==null&&j!==void 0?j:!0))return!1;const nt=z||this.hasFill(),it=this.hasStroke(),et=this.getAbsoluteOpacity()!==1;if(nt&&it&&et)return!0;const Q=this.hasShadow(),k=this.shadowForStrokeEnabled();return!!(nt&&it&&Q&&k)}setStrokeHitEnabled(z){e.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),z?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const z=this.size();return{x:this._centroid?-z.width/2:0,y:this._centroid?-z.height/2:0,width:z.width,height:z.height}}getClientRect(z={}){let j=!1,Z=this.getParent();for(;Z;){if(Z.isCached()){j=!0;break}Z=Z.getParent()}const nt=z.skipTransform,it=z.relativeTo||j&&this.getStage()||void 0,et=this.getSelfRect(),k=!z.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,U=et.width+k,$=et.height+k,H=!z.skipShadow&&this.hasShadow(),V=H?this.shadowOffsetX():0,at=H?this.shadowOffsetY():0,K=U+Math.abs(V),ut=$+Math.abs(at),xt=H&&this.shadowBlur()||0,ot=K+xt*2,tt=ut+xt*2,ct={width:ot,height:tt,x:-(k/2+xt)+Math.min(V,0)+et.x,y:-(k/2+xt)+Math.min(at,0)+et.y};return nt?ct:this._transformedRect(ct,it)}drawScene(z,j,Z){const nt=this.getLayer(),it=z||nt.getCanvas(),et=it.getContext(),Q=this._getCanvasCache(),k=this.getSceneFunc(),U=this.hasShadow();let $;const H=j===this;if(!this.isVisible()&&!H)return this;if(Q){et.save();const V=this.getAbsoluteTransform(j).getMatrix();return et.transform(V[0],V[1],V[2],V[3],V[4],V[5]),this._drawCachedSceneCanvas(et),et.restore(),this}if(!k)return this;if(et.save(),this._useBufferCanvas()){$=this.getStage();const V=Z||$.bufferCanvas,at=V.getContext();at.clear(),at.save(),at._applyLineJoin(this);const K=this.getAbsoluteTransform(j).getMatrix();at.transform(K[0],K[1],K[2],K[3],K[4],K[5]),k.call(this,at,this),at.restore();const ut=V.pixelRatio;U&&et._applyShadow(this),et._applyOpacity(this),et._applyGlobalCompositeOperation(this),et.drawImage(V._canvas,V.x||0,V.y||0,V.width/ut,V.height/ut)}else{if(et._applyLineJoin(this),!H){const V=this.getAbsoluteTransform(j).getMatrix();et.transform(V[0],V[1],V[2],V[3],V[4],V[5]),et._applyOpacity(this),et._applyGlobalCompositeOperation(this)}U&&et._applyShadow(this),k.call(this,et,this)}return et.restore(),this}drawHit(z,j,Z=!1){if(!this.shouldDrawHit(j,Z))return this;const nt=this.getLayer(),it=z||nt.hitCanvas,et=it&&it.getContext(),Q=this.hitFunc()||this.sceneFunc(),k=this._getCanvasCache(),U=k&&k.hit;if(this.colorKey||e.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),U){et.save();const H=this.getAbsoluteTransform(j).getMatrix();return et.transform(H[0],H[1],H[2],H[3],H[4],H[5]),this._drawCachedHitCanvas(et),et.restore(),this}if(!Q)return this;if(et.save(),et._applyLineJoin(this),!(this===j)){const H=this.getAbsoluteTransform(j).getMatrix();et.transform(H[0],H[1],H[2],H[3],H[4],H[5])}return Q.call(this,et,this),et.restore(),this}drawHitFromCache(z=0){const j=this._getCanvasCache(),Z=this._getCachedSceneCanvas(),nt=j.hit,it=nt.getContext(),et=nt.getWidth(),Q=nt.getHeight();it.clear(),it.drawImage(Z._canvas,0,0,et,Q);try{const k=it.getImageData(0,0,et,Q),U=k.data,$=U.length,H=e.Util._hexToRgb(this.colorKey);for(let V=0;V<$;V+=4)U[V+3]>z?(U[V]=H.r,U[V+1]=H.g,U[V+2]=H.b,U[V+3]=255):U[V+3]=0;it.putImageData(k,0,0)}catch(k){e.Util.error("Unable to draw hit graph from cached scene canvas. "+k.message)}return this}hasPointerCapture(z){return c.hasPointerCapture(z,this)}setPointerCapture(z){c.setPointerCapture(z,this)}releaseCapture(z){c.releaseCapture(z,this)}}n.Shape=B,B.prototype._fillFunc=_,B.prototype._strokeFunc=C,B.prototype._fillFuncHit=D,B.prototype._strokeFuncHit=T,B.prototype._centroid=!1,B.prototype.nodeType="Shape",(0,o._registerNode)(B),B.prototype.eventListeners={},B.prototype.on.call(B.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),B.prototype.on.call(B.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",R),B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",O),B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",L),B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",I),i.Factory.addGetterSetter(B,"stroke",void 0,(0,s.getStringOrGradientValidator)()),i.Factory.addGetterSetter(B,"strokeWidth",2,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(B,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(B,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(B,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(B,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(B,"lineJoin"),i.Factory.addGetterSetter(B,"lineCap"),i.Factory.addGetterSetter(B,"sceneFunc"),i.Factory.addGetterSetter(B,"hitFunc"),i.Factory.addGetterSetter(B,"dash"),i.Factory.addGetterSetter(B,"dashOffset",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"shadowColor",void 0,(0,s.getStringValidator)()),i.Factory.addGetterSetter(B,"shadowBlur",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"shadowOpacity",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(B,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(B,"shadowOffsetX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"shadowOffsetY",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"fillPatternImage"),i.Factory.addGetterSetter(B,"fill",void 0,(0,s.getStringOrGradientValidator)()),i.Factory.addGetterSetter(B,"fillPatternX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"fillPatternY",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(B,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(B,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(B,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(B,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(B,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(B,"fillEnabled",!0),i.Factory.addGetterSetter(B,"strokeEnabled",!0),i.Factory.addGetterSetter(B,"shadowEnabled",!0),i.Factory.addGetterSetter(B,"dashEnabled",!0),i.Factory.addGetterSetter(B,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(B,"fillPriority","color"),i.Factory.addComponentsGetterSetter(B,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(B,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(B,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(B,"fillPatternScaleX",1,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(B,"fillPatternScaleY",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(B,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(B,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(B,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(B,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(B,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(B,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(B,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(B,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(B,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(B,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(B,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(B,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(B,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(B,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(B,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(B,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(B,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(B,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(B,"fillPatternRotation",0),i.Factory.addGetterSetter(B,"fillRule",void 0,(0,s.getStringValidator)()),i.Factory.backCompat(B,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Zx)),Zx}var XC;function d9(){if(XC)return Ip;XC=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.Layer=void 0;const n=Un(),t=x1(),e=Qn(),i=ke(),a=b1(),s=Fe(),o=wi(),c=Re(),d="#",f="beforeDraw",g="draw",m=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],v=m.length;class x extends t.Container{constructor(_){super(_),this.canvas=new a.SceneCanvas,this.hitCanvas=new a.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(_){return this.getContext().clear(_),this.getHitCanvas().getContext().clear(_),this}setZIndex(_){super.setZIndex(_);const C=this.getStage();return C&&C.content&&(C.content.removeChild(this.getNativeCanvasElement()),_<C.children.length-1?C.content.insertBefore(this.getNativeCanvasElement(),C.children[_+1].getCanvas()._canvas):C.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){e.Node.prototype.moveToTop.call(this);const _=this.getStage();return _&&_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!e.Node.prototype.moveUp.call(this))return!1;const C=this.getStage();return!C||!C.content?!1:(C.content.removeChild(this.getNativeCanvasElement()),this.index<C.children.length-1?C.content.insertBefore(this.getNativeCanvasElement(),C.children[this.index+1].getCanvas()._canvas):C.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(e.Node.prototype.moveDown.call(this)){const _=this.getStage();if(_){const C=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),C[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(e.Node.prototype.moveToBottom.call(this)){const _=this.getStage();if(_){const C=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),C[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const _=this.getNativeCanvasElement();return e.Node.prototype.remove.call(this),_&&_.parentNode&&n.Util._isInDocument(_)&&_.parentNode.removeChild(_),this}getStage(){return this.parent}setSize({width:_,height:C}){return this.canvas.setSize(_,C),this.hitCanvas.setSize(_,C),this._setSmoothEnabled(),this}_validateAdd(_){const C=_.getType();C!=="Group"&&C!=="Shape"&&n.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(_){return _=_||{},_.width=_.width||this.getWidth(),_.height=_.height||this.getHeight(),_.x=_.x!==void 0?_.x:this.x(),_.y=_.y!==void 0?_.y:this.y(),e.Node.prototype._toKonvaCanvas.call(this,_)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){n.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){n.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,n.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(_){if(!this.isListening()||!this.isVisible())return null;let C=1,D=!1;for(;;){for(let T=0;T<v;T++){const w=m[T],R=this._getIntersection({x:_.x+w.x*C,y:_.y+w.y*C}),O=R.shape;if(O)return O;if(D=!!R.antialiased,!R.antialiased)break}if(D)C+=1;else return null}}_getIntersection(_){const C=this.hitCanvas.pixelRatio,D=this.hitCanvas.context.getImageData(Math.round(_.x*C),Math.round(_.y*C),1,1).data,T=D[3];if(T===255){const w=n.Util._rgbToHex(D[0],D[1],D[2]),R=o.shapes[d+w];return R?{shape:R}:{antialiased:!0}}else if(T>0)return{antialiased:!0};return{}}drawScene(_,C,D){const T=this.getLayer(),w=_||T&&T.getCanvas();return this._fire(f,{node:this}),this.clearBeforeDraw()&&w.getContext().clear(),t.Container.prototype.drawScene.call(this,w,C,D),this._fire(g,{node:this}),this}drawHit(_,C){const D=this.getLayer(),T=_||D&&D.hitCanvas;return D&&D.clearBeforeDraw()&&D.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,T,C),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(_){n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(_)}getHitGraphEnabled(_){return n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const _=this.parent;!!this.hitCanvas._canvas.parentNode?_.content.removeChild(this.hitCanvas._canvas):_.content.appendChild(this.hitCanvas._canvas)}destroy(){return n.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Ip.Layer=x,x.prototype.nodeType="Layer",(0,c._registerNode)(x),i.Factory.addGetterSetter(x,"imageSmoothingEnabled",!0),i.Factory.addGetterSetter(x,"clearBeforeDraw",!0),i.Factory.addGetterSetter(x,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),Ip}var Hp={},KC;function SV(){if(KC)return Hp;KC=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.FastLayer=void 0;const n=Un(),t=d9(),e=Re();let i=class extends t.Layer{constructor(s){super(s),this.listening(!1),n.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Hp.FastLayer=i,i.prototype.nodeType="FastLayer",(0,e._registerNode)(i),Hp}var Gp={},WC;function _A(){if(WC)return Gp;WC=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.Group=void 0;const n=Un(),t=x1(),e=Re();class i extends t.Container{_validateAdd(s){const o=s.getType();o!=="Group"&&o!=="Shape"&&n.Util.throw("You may only add groups and shapes to groups.")}}return Gp.Group=i,i.prototype.nodeType="Group",(0,e._registerNode)(i),Gp}var jp={},$C;function AA(){if($C)return jp;$C=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.Animation=void 0;const n=Re(),t=Un(),e=function(){return n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return new Date().getTime()}}();let i=class Lh{constructor(s,o){this.id=Lh.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:e(),frameRate:0},this.func=s,this.setLayers(o)}setLayers(s){let o=[];return s&&(o=Array.isArray(s)?s:[s]),this.layers=o,this}getLayers(){return this.layers}addLayer(s){const o=this.layers,c=o.length;for(let d=0;d<c;d++)if(o[d]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const o=Lh.animations,c=o.length;for(let d=0;d<c;d++)if(o[d].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=e(),Lh._addAnimation(this),this}stop(){return Lh._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const o=s.id,c=this.animations,d=c.length;for(let f=0;f<d;f++)if(c[f].id===o){this.animations.splice(f,1);break}}static _runFrames(){const s={},o=this.animations;for(let c=0;c<o.length;c++){const d=o[c],f=d.layers,g=d.func;d._updateFrameObject(e());const m=f.length;let v;if(g?v=g.call(d,d.frame)!==!1:v=!0,!!v)for(let x=0;x<m;x++){const S=f[x];S._id!==void 0&&(s[S._id]=S)}}for(const c in s)s.hasOwnProperty(c)&&s[c].batchDraw()}static _animationLoop(){const s=Lh;s.animations.length?(s._runFrames(),t.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return jp.Animation=i,i.animations=[],i.animIdCounter=0,i.animRunning=!1,jp}var Jx={},QC;function _V(){return QC||(QC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Easings=n.Tween=void 0;const t=Un(),e=AA(),i=Qn(),a=Re(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,c=2,d=3,f=["fill","stroke","shadowColor"];let g=0;class m{constructor(S,_,C,D,T,w,R){this.prop=S,this.propFunc=_,this.begin=D,this._pos=D,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=R,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=C,this._change=T-this.begin,this.pause()}fire(S){const _=this[S];_&&_()}setTime(S){S>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():S<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=S,this.update())}getTime(){return this._time}setPosition(S){this.prevPos=this._pos,this.propFunc(S),this._pos=S}getPosition(S){return S===void 0&&(S=this._time),this.func(S,this.begin,this._change,this.duration)}play(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(S){this.pause(),this._time=S,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const S=this.getTimer()-this._startTime;this.state===c?this.setTime(S):this.state===d&&this.setTime(this.duration-S)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class v{constructor(S){const _=this,C=S.node,D=C._id,T=S.easing||n.Easings.Linear,w=!!S.yoyo;let R,O;typeof S.duration>"u"?R=.3:S.duration===0?R=.001:R=S.duration,this.node=C,this._id=g++;const L=C.getLayer()||(C instanceof a.Konva.Stage?C.getLayers():null);L||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new e.Animation(function(){_.tween.onEnterFrame()},L),this.tween=new m(O,function(I){_._tweenFunc(I)},T,0,1,R*1e3,w),this._addListeners(),v.attrs[D]||(v.attrs[D]={}),v.attrs[D][this._id]||(v.attrs[D][this._id]={}),v.tweens[D]||(v.tweens[D]={});for(O in S)s[O]===void 0&&this._addAttr(O,S[O]);this.reset(),this.onFinish=S.onFinish,this.onReset=S.onReset,this.onUpdate=S.onUpdate}_addAttr(S,_){const C=this.node,D=C._id;let T,w,R,O,L;const I=v.tweens[D][S];I&&delete v.attrs[D][I][S];let B=C.getAttr(S);if(t.Util._isArray(_))if(T=[],w=Math.max(_.length,B.length),S==="points"&&_.length!==B.length&&(_.length>B.length?(O=B,B=t.Util._prepareArrayForTween(B,_,C.closed())):(R=_,_=t.Util._prepareArrayForTween(_,B,C.closed()))),S.indexOf("fill")===0)for(let F=0;F<w;F++)if(F%2===0)T.push(_[F]-B[F]);else{const z=t.Util.colorToRGBA(B[F]);L=t.Util.colorToRGBA(_[F]),B[F]=z,T.push({r:L.r-z.r,g:L.g-z.g,b:L.b-z.b,a:L.a-z.a})}else for(let F=0;F<w;F++)T.push(_[F]-B[F]);else f.indexOf(S)!==-1?(B=t.Util.colorToRGBA(B),L=t.Util.colorToRGBA(_),T={r:L.r-B.r,g:L.g-B.g,b:L.b-B.b,a:L.a-B.a}):T=_-B;v.attrs[D][this._id][S]={start:B,diff:T,end:_,trueEnd:R,trueStart:O},v.tweens[D][S]=this._id}_tweenFunc(S){const _=this.node,C=v.attrs[_._id][this._id];let D,T,w,R,O,L,I,B;for(D in C){if(T=C[D],w=T.start,R=T.diff,B=T.end,t.Util._isArray(w))if(O=[],I=Math.max(w.length,B.length),D.indexOf("fill")===0)for(L=0;L<I;L++)L%2===0?O.push((w[L]||0)+R[L]*S):O.push("rgba("+Math.round(w[L].r+R[L].r*S)+","+Math.round(w[L].g+R[L].g*S)+","+Math.round(w[L].b+R[L].b*S)+","+(w[L].a+R[L].a*S)+")");else for(L=0;L<I;L++)O.push((w[L]||0)+R[L]*S);else f.indexOf(D)!==-1?O="rgba("+Math.round(w.r+R.r*S)+","+Math.round(w.g+R.g*S)+","+Math.round(w.b+R.b*S)+","+(w.a+R.a*S)+")":O=w+R*S;_.setAttr(D,O)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const S=this.node,_=v.attrs[S._id][this._id];_.points&&_.points.trueEnd&&S.setAttr("points",_.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const S=this.node,_=v.attrs[S._id][this._id];_.points&&_.points.trueStart&&S.points(_.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(S){return this.tween.seek(S*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const S=this.node._id,_=this._id,C=v.tweens[S];this.pause(),this.anim&&this.anim.stop();for(const D in C)delete v.tweens[S][D];delete v.attrs[S][_],Object.keys(v.tweens[S]).length===0&&delete v.tweens[S],Object.keys(v.attrs[S]).length===0&&delete v.attrs[S]}}n.Tween=v,v.attrs={},v.tweens={},i.Node.prototype.to=function(x){const S=x.onFinish;x.node=this,x.onFinish=function(){this.destroy(),S&&S()},new v(x).play()},n.Easings={BackEaseIn(x,S,_,C){return _*(x/=C)*x*((1.70158+1)*x-1.70158)+S},BackEaseOut(x,S,_,C){return _*((x=x/C-1)*x*((1.70158+1)*x+1.70158)+1)+S},BackEaseInOut(x,S,_,C){let D=1.70158;return(x/=C/2)<1?_/2*(x*x*(((D*=1.525)+1)*x-D))+S:_/2*((x-=2)*x*(((D*=1.525)+1)*x+D)+2)+S},ElasticEaseIn(x,S,_,C,D,T){let w=0;return x===0?S:(x/=C)===1?S+_:(T||(T=C*.3),!D||D<Math.abs(_)?(D=_,w=T/4):w=T/(2*Math.PI)*Math.asin(_/D),-(D*Math.pow(2,10*(x-=1))*Math.sin((x*C-w)*(2*Math.PI)/T))+S)},ElasticEaseOut(x,S,_,C,D,T){let w=0;return x===0?S:(x/=C)===1?S+_:(T||(T=C*.3),!D||D<Math.abs(_)?(D=_,w=T/4):w=T/(2*Math.PI)*Math.asin(_/D),D*Math.pow(2,-10*x)*Math.sin((x*C-w)*(2*Math.PI)/T)+_+S)},ElasticEaseInOut(x,S,_,C,D,T){let w=0;return x===0?S:(x/=C/2)===2?S+_:(T||(T=C*(.3*1.5)),!D||D<Math.abs(_)?(D=_,w=T/4):w=T/(2*Math.PI)*Math.asin(_/D),x<1?-.5*(D*Math.pow(2,10*(x-=1))*Math.sin((x*C-w)*(2*Math.PI)/T))+S:D*Math.pow(2,-10*(x-=1))*Math.sin((x*C-w)*(2*Math.PI)/T)*.5+_+S)},BounceEaseOut(x,S,_,C){return(x/=C)<1/2.75?_*(7.5625*x*x)+S:x<2/2.75?_*(7.5625*(x-=1.5/2.75)*x+.75)+S:x<2.5/2.75?_*(7.5625*(x-=2.25/2.75)*x+.9375)+S:_*(7.5625*(x-=2.625/2.75)*x+.984375)+S},BounceEaseIn(x,S,_,C){return _-n.Easings.BounceEaseOut(C-x,0,_,C)+S},BounceEaseInOut(x,S,_,C){return x<C/2?n.Easings.BounceEaseIn(x*2,0,_,C)*.5+S:n.Easings.BounceEaseOut(x*2-C,0,_,C)*.5+_*.5+S},EaseIn(x,S,_,C){return _*(x/=C)*x+S},EaseOut(x,S,_,C){return-_*(x/=C)*(x-2)+S},EaseInOut(x,S,_,C){return(x/=C/2)<1?_/2*x*x+S:-_/2*(--x*(x-2)-1)+S},StrongEaseIn(x,S,_,C){return _*(x/=C)*x*x*x*x+S},StrongEaseOut(x,S,_,C){return _*((x=x/C-1)*x*x*x*x+1)+S},StrongEaseInOut(x,S,_,C){return(x/=C/2)<1?_/2*x*x*x*x*x+S:_/2*((x-=2)*x*x*x*x+2)+S},Linear(x,S,_,C){return _*x/C+S}}}(Jx)),Jx}var ZC;function BS(){return ZC||(ZC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;const t=Re(),e=Un(),i=Qn(),a=x1(),s=xV(),o=d9(),c=SV(),d=_A(),f=SA(),g=wi(),m=AA(),v=_V(),x=c9(),S=b1();n.Konva=e.Util._assign(t.Konva,{Util:e.Util,Transform:e.Transform,Node:i.Node,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:c.FastLayer,Group:d.Group,DD:f.DD,Shape:g.Shape,shapes:g.shapes,Animation:m.Animation,Tween:v.Tween,Easings:v.Easings,Context:x.Context,Canvas:S.Canvas}),n.default=n.Konva}(Yx)),Yx}var Up={},JC;function AV(){if(JC)return Up;JC=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.Arc=void 0;const n=ke(),t=wi(),e=Re(),i=Fe(),a=Re();let s=class extends t.Shape{_sceneFunc(c){const d=e.Konva.getAngle(this.angle()),f=this.clockwise();c.beginPath(),c.arc(0,0,this.outerRadius(),0,d,f),c.arc(0,0,this.innerRadius(),d,0,!f),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}getSelfRect(){const c=this.innerRadius(),d=this.outerRadius(),f=this.clockwise(),g=e.Konva.getAngle(f?360-this.angle():this.angle()),m=Math.cos(Math.min(g,Math.PI)),v=1,x=Math.sin(Math.min(Math.max(Math.PI,g),3*Math.PI/2)),S=Math.sin(Math.min(g,Math.PI/2)),_=m*(m>0?c:d),C=v*d,D=x*(x>0?c:d),T=S*(S>0?d:c);return{x:_,y:f?-1*T:D,width:C-_,height:T-D}}};return Up.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,a._registerNode)(s),n.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"angle",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"clockwise",!1,(0,i.getBooleanValidator)()),Up}var qp={},Vp={},t6;function h9(){if(t6)return Vp;t6=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.Line=void 0;const n=ke(),t=Re(),e=wi(),i=Fe();function a(c,d,f,g,m,v,x){const S=Math.sqrt(Math.pow(f-c,2)+Math.pow(g-d,2)),_=Math.sqrt(Math.pow(m-f,2)+Math.pow(v-g,2)),C=x*S/(S+_),D=x*_/(S+_),T=f-C*(m-c),w=g-C*(v-d),R=f+D*(m-c),O=g+D*(v-d);return[T,w,R,O]}function s(c,d){const f=c.length,g=[];for(let m=2;m<f-2;m+=2){const v=a(c[m-2],c[m-1],c[m],c[m+1],c[m+2],c[m+3],d);isNaN(v[0])||(g.push(v[0]),g.push(v[1]),g.push(c[m]),g.push(c[m+1]),g.push(v[2]),g.push(v[3]))}return g}class o extends e.Shape{constructor(d){super(d),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(d){const f=this.points(),g=f.length,m=this.tension(),v=this.closed(),x=this.bezier();if(!g)return;let S=0;if(d.beginPath(),d.moveTo(f[0],f[1]),m!==0&&g>4){const _=this.getTensionPoints(),C=_.length;for(S=v?0:4,v||d.quadraticCurveTo(_[0],_[1],_[2],_[3]);S<C-2;)d.bezierCurveTo(_[S++],_[S++],_[S++],_[S++],_[S++],_[S++]);v||d.quadraticCurveTo(_[C-2],_[C-1],f[g-2],f[g-1])}else if(x)for(S=2;S<g;)d.bezierCurveTo(f[S++],f[S++],f[S++],f[S++],f[S++],f[S++]);else for(S=2;S<g;S+=2)d.lineTo(f[S],f[S+1]);v?(d.closePath(),d.fillStrokeShape(this)):d.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const d=this.points(),f=d.length,g=this.tension(),m=a(d[f-2],d[f-1],d[0],d[1],d[2],d[3],g),v=a(d[f-4],d[f-3],d[f-2],d[f-1],d[0],d[1],g),x=s(d,g);return[m[2],m[3]].concat(x).concat([v[0],v[1],d[f-2],d[f-1],v[2],v[3],m[0],m[1],d[0],d[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let d=this.points();if(d.length<4)return{x:d[0]||0,y:d[1]||0,width:0,height:0};this.tension()!==0?d=[d[0],d[1],...this._getTensionPoints(),d[d.length-2],d[d.length-1]]:d=this.points();let f=d[0],g=d[0],m=d[1],v=d[1],x,S;for(let _=0;_<d.length/2;_++)x=d[_*2],S=d[_*2+1],f=Math.min(f,x),g=Math.max(g,x),m=Math.min(m,S),v=Math.max(v,S);return{x:f,y:m,width:g-f,height:v-m}}}return Vp.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(o),n.Factory.addGetterSetter(o,"closed",!1),n.Factory.addGetterSetter(o,"bezier",!1),n.Factory.addGetterSetter(o,"tension",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(o,"points",[],(0,i.getNumberArrayValidator)()),Vp}var Yp={},tS={},e6;function EV(){return e6||(e6=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.t2length=n.getQuadraticArcLength=n.getCubicArcLength=n.binomialCoefficients=n.cValues=n.tValues=void 0,n.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],n.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],n.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(o,c,d)=>{let f,g;const v=d/2;f=0;for(let x=0;x<20;x++)g=v*n.tValues[20][x]+v,f+=n.cValues[20][x]*i(o,c,g);return v*f};n.getCubicArcLength=t;const e=(o,c,d)=>{d===void 0&&(d=1);const f=o[0]-2*o[1]+o[2],g=c[0]-2*c[1]+c[2],m=2*o[1]-2*o[0],v=2*c[1]-2*c[0],x=4*(f*f+g*g),S=4*(f*m+g*v),_=m*m+v*v;if(x===0)return d*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(c[2]-c[0],2));const C=S/(2*x),D=_/x,T=d+C,w=D-C*C,R=T*T+w>0?Math.sqrt(T*T+w):0,O=C*C+w>0?Math.sqrt(C*C+w):0,L=C+Math.sqrt(C*C+w)!==0?w*Math.log(Math.abs((T+R)/(C+O))):0;return Math.sqrt(x)/2*(T*R-C*O+L)};n.getQuadraticArcLength=e;function i(o,c,d){const f=a(1,d,o),g=a(1,d,c),m=f*f+g*g;return Math.sqrt(m)}const a=(o,c,d)=>{const f=d.length-1;let g,m;if(f===0)return 0;if(o===0){m=0;for(let v=0;v<=f;v++)m+=n.binomialCoefficients[f][v]*Math.pow(1-c,f-v)*Math.pow(c,v)*d[v];return m}else{g=new Array(f);for(let v=0;v<f;v++)g[v]=f*(d[v+1]-d[v]);return a(o-1,c,g)}},s=(o,c,d)=>{let f=1,g=o/c,m=(o-d(g))/c,v=0;for(;f>.001;){const x=d(g+m),S=Math.abs(o-x)/c;if(S<f)f=S,g+=m;else{const _=d(g-m),C=Math.abs(o-_)/c;C<f?(f=C,g-=m):m/=2}if(v++,v>500)break}return g};n.t2length=s}(tS)),tS}var n6;function EA(){if(n6)return Yp;n6=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.Path=void 0;const n=ke(),t=Re(),e=wi(),i=EV();let a=class Ba extends e.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ba.parsePathData(this.data()),this.pathLength=Ba.getPathLength(this.dataArray)}_sceneFunc(o){const c=this.dataArray;o.beginPath();let d=!1;for(let f=0;f<c.length;f++){const g=c[f].command,m=c[f].points;switch(g){case"L":o.lineTo(m[0],m[1]);break;case"M":o.moveTo(m[0],m[1]);break;case"C":o.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]);break;case"Q":o.quadraticCurveTo(m[0],m[1],m[2],m[3]);break;case"A":const v=m[0],x=m[1],S=m[2],_=m[3],C=m[4],D=m[5],T=m[6],w=m[7],R=S>_?S:_,O=S>_?1:S/_,L=S>_?_/S:1;o.translate(v,x),o.rotate(T),o.scale(O,L),o.arc(0,0,R,C,C+D,1-w),o.scale(1/O,1/L),o.rotate(-T),o.translate(-v,-x);break;case"z":d=!0,o.closePath();break}}!d&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(x){if(x.command==="A"){const S=x.points[4],_=x.points[5],C=x.points[4]+_;let D=Math.PI/180;if(Math.abs(S-C)<D&&(D=Math.abs(S-C)),_<0)for(let T=S-D;T>C;T-=D){const w=Ba.getPointOnEllipticalArc(x.points[0],x.points[1],x.points[2],x.points[3],T,0);o.push(w.x,w.y)}else for(let T=S+D;T<C;T+=D){const w=Ba.getPointOnEllipticalArc(x.points[0],x.points[1],x.points[2],x.points[3],T,0);o.push(w.x,w.y)}}else if(x.command==="C")for(let S=0;S<=1;S+=.01){const _=Ba.getPointOnCubicBezier(S,x.start.x,x.start.y,x.points[0],x.points[1],x.points[2],x.points[3],x.points[4],x.points[5]);o.push(_.x,_.y)}else o=o.concat(x.points)});let c=o[0],d=o[0],f=o[1],g=o[1],m,v;for(let x=0;x<o.length/2;x++)m=o[x*2],v=o[x*2+1],isNaN(m)||(c=Math.min(c,m),d=Math.max(d,m)),isNaN(v)||(f=Math.min(f,v),g=Math.max(g,v));return{x:c,y:f,width:d-c,height:g-f}}getLength(){return this.pathLength}getPointAtLength(o){return Ba.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,c,d,f){return Math.sqrt((d-o)*(d-o)+(f-c)*(f-c))}static getPathLength(o){let c=0;for(let d=0;d<o.length;++d)c+=o[d].pathLength;return c}static getPointAtLengthOfDataArray(o,c){let d,f=0,g=c.length;if(!g)return null;for(;f<g&&o>c[f].pathLength;)o-=c[f].pathLength,++f;if(f===g)return d=c[f-1].points.slice(-2),{x:d[0],y:d[1]};if(o<.01)return c[f].command==="M"?(d=c[f].points.slice(0,2),{x:d[0],y:d[1]}):{x:c[f].start.x,y:c[f].start.y};const m=c[f],v=m.points;switch(m.command){case"L":return Ba.getPointOnLine(o,m.start.x,m.start.y,v[0],v[1]);case"C":return Ba.getPointOnCubicBezier((0,i.t2length)(o,Ba.getPathLength(c),R=>(0,i.getCubicArcLength)([m.start.x,v[0],v[2],v[4]],[m.start.y,v[1],v[3],v[5]],R)),m.start.x,m.start.y,v[0],v[1],v[2],v[3],v[4],v[5]);case"Q":return Ba.getPointOnQuadraticBezier((0,i.t2length)(o,Ba.getPathLength(c),R=>(0,i.getQuadraticArcLength)([m.start.x,v[0],v[2]],[m.start.y,v[1],v[3]],R)),m.start.x,m.start.y,v[0],v[1],v[2],v[3]);case"A":const x=v[0],S=v[1],_=v[2],C=v[3],D=v[5],T=v[6];let w=v[4];return w+=D*o/m.pathLength,Ba.getPointOnEllipticalArc(x,S,_,C,w,T)}return null}static getPointOnLine(o,c,d,f,g,m,v){m=m??c,v=v??d;const x=this.getLineLength(c,d,f,g);if(x<1e-10)return{x:c,y:d};if(f===c)return{x:m,y:v+(g>d?o:-o)};const S=(g-d)/(f-c),_=Math.sqrt(o*o/(1+S*S))*(f<c?-1:1),C=S*_;if(Math.abs(v-d-S*(m-c))<1e-10)return{x:m+_,y:v+C};const D=((m-c)*(f-c)+(v-d)*(g-d))/(x*x),T=c+D*(f-c),w=d+D*(g-d),R=this.getLineLength(m,v,T,w),O=Math.sqrt(o*o-R*R),L=Math.sqrt(O*O/(1+S*S))*(f<c?-1:1),I=S*L;return{x:T+L,y:w+I}}static getPointOnCubicBezier(o,c,d,f,g,m,v,x,S){function _(O){return O*O*O}function C(O){return 3*O*O*(1-O)}function D(O){return 3*O*(1-O)*(1-O)}function T(O){return(1-O)*(1-O)*(1-O)}const w=x*_(o)+m*C(o)+f*D(o)+c*T(o),R=S*_(o)+v*C(o)+g*D(o)+d*T(o);return{x:w,y:R}}static getPointOnQuadraticBezier(o,c,d,f,g,m,v){function x(T){return T*T}function S(T){return 2*T*(1-T)}function _(T){return(1-T)*(1-T)}const C=m*x(o)+f*S(o)+c*_(o),D=v*x(o)+g*S(o)+d*_(o);return{x:C,y:D}}static getPointOnEllipticalArc(o,c,d,f,g,m){const v=Math.cos(m),x=Math.sin(m),S={x:d*Math.cos(g),y:f*Math.sin(g)};return{x:o+(S.x*v-S.y*x),y:c+(S.x*x+S.y*v)}}static parsePathData(o){if(!o)return[];let c=o;const d=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];c=c.replace(new RegExp(" ","g"),",");for(let C=0;C<d.length;C++)c=c.replace(new RegExp(d[C],"g"),"|"+d[C]);const f=c.split("|"),g=[],m=[];let v=0,x=0;const S=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let _;for(let C=1;C<f.length;C++){let D=f[C],T=D.charAt(0);for(D=D.slice(1),m.length=0;_=S.exec(D);)m.push(_[0]);const w=[];for(let R=0,O=m.length;R<O;R++){if(m[R]==="00"){w.push(0,0);continue}const L=parseFloat(m[R]);isNaN(L)?w.push(0):w.push(L)}for(;w.length>0&&!isNaN(w[0]);){let R="",O=[];const L=v,I=x;let B,F,z,j,Z,nt,it,et,Q,k;switch(T){case"l":v+=w.shift(),x+=w.shift(),R="L",O.push(v,x);break;case"L":v=w.shift(),x=w.shift(),O.push(v,x);break;case"m":const U=w.shift(),$=w.shift();if(v+=U,x+=$,R="M",g.length>2&&g[g.length-1].command==="z"){for(let H=g.length-2;H>=0;H--)if(g[H].command==="M"){v=g[H].points[0]+U,x=g[H].points[1]+$;break}}O.push(v,x),T="l";break;case"M":v=w.shift(),x=w.shift(),R="M",O.push(v,x),T="L";break;case"h":v+=w.shift(),R="L",O.push(v,x);break;case"H":v=w.shift(),R="L",O.push(v,x);break;case"v":x+=w.shift(),R="L",O.push(v,x);break;case"V":x=w.shift(),R="L",O.push(v,x);break;case"C":O.push(w.shift(),w.shift(),w.shift(),w.shift()),v=w.shift(),x=w.shift(),O.push(v,x);break;case"c":O.push(v+w.shift(),x+w.shift(),v+w.shift(),x+w.shift()),v+=w.shift(),x+=w.shift(),R="C",O.push(v,x);break;case"S":F=v,z=x,B=g[g.length-1],B.command==="C"&&(F=v+(v-B.points[2]),z=x+(x-B.points[3])),O.push(F,z,w.shift(),w.shift()),v=w.shift(),x=w.shift(),R="C",O.push(v,x);break;case"s":F=v,z=x,B=g[g.length-1],B.command==="C"&&(F=v+(v-B.points[2]),z=x+(x-B.points[3])),O.push(F,z,v+w.shift(),x+w.shift()),v+=w.shift(),x+=w.shift(),R="C",O.push(v,x);break;case"Q":O.push(w.shift(),w.shift()),v=w.shift(),x=w.shift(),O.push(v,x);break;case"q":O.push(v+w.shift(),x+w.shift()),v+=w.shift(),x+=w.shift(),R="Q",O.push(v,x);break;case"T":F=v,z=x,B=g[g.length-1],B.command==="Q"&&(F=v+(v-B.points[0]),z=x+(x-B.points[1])),v=w.shift(),x=w.shift(),R="Q",O.push(F,z,v,x);break;case"t":F=v,z=x,B=g[g.length-1],B.command==="Q"&&(F=v+(v-B.points[0]),z=x+(x-B.points[1])),v+=w.shift(),x+=w.shift(),R="Q",O.push(F,z,v,x);break;case"A":j=w.shift(),Z=w.shift(),nt=w.shift(),it=w.shift(),et=w.shift(),Q=v,k=x,v=w.shift(),x=w.shift(),R="A",O=this.convertEndpointToCenterParameterization(Q,k,v,x,it,et,j,Z,nt);break;case"a":j=w.shift(),Z=w.shift(),nt=w.shift(),it=w.shift(),et=w.shift(),Q=v,k=x,v+=w.shift(),x+=w.shift(),R="A",O=this.convertEndpointToCenterParameterization(Q,k,v,x,it,et,j,Z,nt);break}g.push({command:R||T,points:O,start:{x:L,y:I},pathLength:this.calcLength(L,I,R||T,O)})}(T==="z"||T==="Z")&&g.push({command:"z",points:[],start:void 0,pathLength:0})}return g}static calcLength(o,c,d,f){let g,m,v,x;const S=Ba;switch(d){case"L":return S.getLineLength(o,c,f[0],f[1]);case"C":return(0,i.getCubicArcLength)([o,f[0],f[2],f[4]],[c,f[1],f[3],f[5]],1);case"Q":return(0,i.getQuadraticArcLength)([o,f[0],f[2]],[c,f[1],f[3]],1);case"A":g=0;const _=f[4],C=f[5],D=f[4]+C;let T=Math.PI/180;if(Math.abs(_-D)<T&&(T=Math.abs(_-D)),m=S.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],_,0),C<0)for(x=_-T;x>D;x-=T)v=S.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],x,0),g+=S.getLineLength(m.x,m.y,v.x,v.y),m=v;else for(x=_+T;x<D;x+=T)v=S.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],x,0),g+=S.getLineLength(m.x,m.y,v.x,v.y),m=v;return v=S.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],D,0),g+=S.getLineLength(m.x,m.y,v.x,v.y),g}return 0}static convertEndpointToCenterParameterization(o,c,d,f,g,m,v,x,S){const _=S*(Math.PI/180),C=Math.cos(_)*(o-d)/2+Math.sin(_)*(c-f)/2,D=-1*Math.sin(_)*(o-d)/2+Math.cos(_)*(c-f)/2,T=C*C/(v*v)+D*D/(x*x);T>1&&(v*=Math.sqrt(T),x*=Math.sqrt(T));let w=Math.sqrt((v*v*(x*x)-v*v*(D*D)-x*x*(C*C))/(v*v*(D*D)+x*x*(C*C)));g===m&&(w*=-1),isNaN(w)&&(w=0);const R=w*v*D/x,O=w*-x*C/v,L=(o+d)/2+Math.cos(_)*R-Math.sin(_)*O,I=(c+f)/2+Math.sin(_)*R+Math.cos(_)*O,B=function(et){return Math.sqrt(et[0]*et[0]+et[1]*et[1])},F=function(et,Q){return(et[0]*Q[0]+et[1]*Q[1])/(B(et)*B(Q))},z=function(et,Q){return(et[0]*Q[1]<et[1]*Q[0]?-1:1)*Math.acos(F(et,Q))},j=z([1,0],[(C-R)/v,(D-O)/x]),Z=[(C-R)/v,(D-O)/x],nt=[(-1*C-R)/v,(-1*D-O)/x];let it=z(Z,nt);return F(Z,nt)<=-1&&(it=Math.PI),F(Z,nt)>=1&&(it=0),m===0&&it>0&&(it=it-2*Math.PI),m===1&&it<0&&(it=it+2*Math.PI),[L,I,v,x,j,it,_,m]}};return Yp.Path=a,a.prototype.className="Path",a.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(a),n.Factory.addGetterSetter(a,"data"),Yp}var i6;function wV(){if(i6)return qp;i6=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.Arrow=void 0;const n=ke(),t=h9(),e=Fe(),i=Re(),a=EA();class s extends t.Line{_sceneFunc(c){super._sceneFunc(c);const d=Math.PI*2,f=this.points();let g=f;const m=this.tension()!==0&&f.length>4;m&&(g=this.getTensionPoints());const v=this.pointerLength(),x=f.length;let S,_;if(m){const T=[g[g.length-4],g[g.length-3],g[g.length-2],g[g.length-1],f[x-2],f[x-1]],w=a.Path.calcLength(g[g.length-4],g[g.length-3],"C",T),R=a.Path.getPointOnQuadraticBezier(Math.min(1,1-v/w),T[0],T[1],T[2],T[3],T[4],T[5]);S=f[x-2]-R.x,_=f[x-1]-R.y}else S=f[x-2]-f[x-4],_=f[x-1]-f[x-3];const C=(Math.atan2(_,S)+d)%d,D=this.pointerWidth();this.pointerAtEnding()&&(c.save(),c.beginPath(),c.translate(f[x-2],f[x-1]),c.rotate(C),c.moveTo(0,0),c.lineTo(-v,D/2),c.lineTo(-v,-D/2),c.closePath(),c.restore(),this.__fillStroke(c)),this.pointerAtBeginning()&&(c.save(),c.beginPath(),c.translate(f[0],f[1]),m?(S=(g[0]+g[2])/2-f[0],_=(g[1]+g[3])/2-f[1]):(S=f[2]-f[0],_=f[3]-f[1]),c.rotate((Math.atan2(-_,-S)+d)%d),c.moveTo(0,0),c.lineTo(-v,D/2),c.lineTo(-v,-D/2),c.closePath(),c.restore(),this.__fillStroke(c))}__fillStroke(c){const d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,c.setLineDash([])),c.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)}getSelfRect(){const c=super.getSelfRect(),d=this.pointerWidth()/2;return{x:c.x,y:c.y-d,width:c.width,height:c.height+d*2}}}return qp.Arrow=s,s.prototype.className="Arrow",(0,i._registerNode)(s),n.Factory.addGetterSetter(s,"pointerLength",10,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(s,"pointerWidth",10,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(s,"pointerAtBeginning",!1),n.Factory.addGetterSetter(s,"pointerAtEnding",!0),qp}var Xp={},a6;function CV(){if(a6)return Xp;a6=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.Circle=void 0;const n=ke(),t=wi(),e=Fe(),i=Re();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}return Xp.Circle=a,a.prototype._centroid=!0,a.prototype.className="Circle",a.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"radius",0,(0,e.getNumberValidator)()),Xp}var Kp={},r6;function TV(){if(r6)return Kp;r6=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.Ellipse=void 0;const n=ke(),t=wi(),e=Fe(),i=Re();let a=class extends t.Shape{_sceneFunc(o){const c=this.radiusX(),d=this.radiusY();o.beginPath(),o.save(),c!==d&&o.scale(1,d/c),o.arc(0,0,c,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return Kp.Ellipse=a,a.prototype.className="Ellipse",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,i._registerNode)(a),n.Factory.addComponentsGetterSetter(a,"radius",["x","y"]),n.Factory.addGetterSetter(a,"radiusX",0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(a,"radiusY",0,(0,e.getNumberValidator)()),Kp}var Wp={},s6;function RV(){if(s6)return Wp;s6=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.Image=void 0;const n=Un(),t=ke(),e=wi(),i=Re(),a=Fe();class s extends e.Shape{constructor(c){super(c),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",d=>{this._removeImageLoad(d.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const c=this.image();c&&c.complete||c&&c.readyState===4||c&&c.addEventListener&&c.addEventListener("load",this._loadListener)}_removeImageLoad(c){c&&c.removeEventListener&&c.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const c=!!this.cornerRadius(),d=this.hasShadow();return c&&d?!0:super._useBufferCanvas(!0)}_sceneFunc(c){const d=this.getWidth(),f=this.getHeight(),g=this.cornerRadius(),m=this.attrs.image;let v;if(m){const x=this.attrs.cropWidth,S=this.attrs.cropHeight;x&&S?v=[m,this.cropX(),this.cropY(),x,S,0,0,d,f]:v=[m,0,0,d,f]}(this.hasFill()||this.hasStroke()||g)&&(c.beginPath(),g?n.Util.drawRoundedRectPath(c,d,f,g):c.rect(0,0,d,f),c.closePath(),c.fillStrokeShape(this)),m&&(g&&c.clip(),c.drawImage.apply(c,v))}_hitFunc(c){const d=this.width(),f=this.height(),g=this.cornerRadius();c.beginPath(),g?n.Util.drawRoundedRectPath(c,d,f,g):c.rect(0,0,d,f),c.closePath(),c.fillStrokeShape(this)}getWidth(){var c,d;return(c=this.attrs.width)!==null&&c!==void 0?c:(d=this.image())===null||d===void 0?void 0:d.width}getHeight(){var c,d;return(c=this.attrs.height)!==null&&c!==void 0?c:(d=this.image())===null||d===void 0?void 0:d.height}static fromURL(c,d,f=null){const g=n.Util.createImageElement();g.onload=function(){const m=new s({image:g});d(m)},g.onerror=f,g.crossOrigin="Anonymous",g.src=c}}return Wp.Image=s,s.prototype.className="Image",(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(s,"image"),t.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(s,"cropX",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropY",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropWidth",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropHeight",0,(0,a.getNumberValidator)()),Wp}var Cu={},o6;function MV(){if(o6)return Cu;o6=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.Tag=Cu.Label=void 0;const n=ke(),t=wi(),e=_A(),i=Fe(),a=Re(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",c="none",d="up",f="right",g="down",m="left",v=s.length;let x=class extends e.Group{constructor(C){super(C),this.on("add.konva",function(D){this._addListeners(D.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(C){let D=this,T;const w=function(){D._sync()};for(T=0;T<v;T++)C.on(s[T]+o,w)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let C=this.getText(),D=this.getTag(),T,w,R,O,L,I,B;if(C&&D){switch(T=C.width(),w=C.height(),R=D.pointerDirection(),O=D.pointerWidth(),B=D.pointerHeight(),L=0,I=0,R){case d:L=T/2,I=-1*B;break;case f:L=T+O,I=w/2;break;case g:L=T/2,I=w+B;break;case m:L=-1*O,I=w/2;break}D.setAttrs({x:-1*L,y:-1*I,width:T,height:w}),C.setAttrs({x:-1*L,y:-1*I})}}};Cu.Label=x,x.prototype.className="Label",(0,a._registerNode)(x);class S extends t.Shape{_sceneFunc(C){const D=this.width(),T=this.height(),w=this.pointerDirection(),R=this.pointerWidth(),O=this.pointerHeight(),L=this.cornerRadius();let I=0,B=0,F=0,z=0;typeof L=="number"?I=B=F=z=Math.min(L,D/2,T/2):(I=Math.min(L[0]||0,D/2,T/2),B=Math.min(L[1]||0,D/2,T/2),z=Math.min(L[2]||0,D/2,T/2),F=Math.min(L[3]||0,D/2,T/2)),C.beginPath(),C.moveTo(I,0),w===d&&(C.lineTo((D-R)/2,0),C.lineTo(D/2,-1*O),C.lineTo((D+R)/2,0)),C.lineTo(D-B,0),C.arc(D-B,B,B,Math.PI*3/2,0,!1),w===f&&(C.lineTo(D,(T-O)/2),C.lineTo(D+R,T/2),C.lineTo(D,(T+O)/2)),C.lineTo(D,T-z),C.arc(D-z,T-z,z,0,Math.PI/2,!1),w===g&&(C.lineTo((D+R)/2,T),C.lineTo(D/2,T+O),C.lineTo((D-R)/2,T)),C.lineTo(F,T),C.arc(F,T-F,F,Math.PI/2,Math.PI,!1),w===m&&(C.lineTo(0,(T+O)/2),C.lineTo(-1*R,T/2),C.lineTo(0,(T-O)/2)),C.lineTo(0,I),C.arc(I,I,I,Math.PI,Math.PI*3/2,!1),C.closePath(),C.fillStrokeShape(this)}getSelfRect(){let C=0,D=0,T=this.pointerWidth(),w=this.pointerHeight(),R=this.pointerDirection(),O=this.width(),L=this.height();return R===d?(D-=w,L+=w):R===g?L+=w:R===m?(C-=T*1.5,O+=T):R===f&&(O+=T*1.5),{x:C,y:D,width:O,height:L}}}return Cu.Tag=S,S.prototype.className="Tag",(0,a._registerNode)(S),n.Factory.addGetterSetter(S,"pointerDirection",c),n.Factory.addGetterSetter(S,"pointerWidth",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(S,"pointerHeight",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(S,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),Cu}var $p={},l6;function f9(){if(l6)return $p;l6=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.Rect=void 0;const n=ke(),t=wi(),e=Re(),i=Un(),a=Fe();class s extends t.Shape{_sceneFunc(c){const d=this.cornerRadius(),f=this.width(),g=this.height();c.beginPath(),d?i.Util.drawRoundedRectPath(c,f,g,d):c.rect(0,0,f,g),c.closePath(),c.fillStrokeShape(this)}}return $p.Rect=s,s.prototype.className="Rect",(0,e._registerNode)(s),n.Factory.addGetterSetter(s,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),$p}var Qp={},c6;function DV(){if(c6)return Qp;c6=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.RegularPolygon=void 0;const n=ke(),t=wi(),e=Fe(),i=Re();let a=class extends t.Shape{_sceneFunc(o){const c=this._getPoints();o.beginPath(),o.moveTo(c[0].x,c[0].y);for(let d=1;d<c.length;d++)o.lineTo(c[d].x,c[d].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,c=this.attrs.radius||0,d=[];for(let f=0;f<o;f++)d.push({x:c*Math.sin(f*2*Math.PI/o),y:-1*c*Math.cos(f*2*Math.PI/o)});return d}getSelfRect(){const o=this._getPoints();let c=o[0].x,d=o[0].y,f=o[0].x,g=o[0].y;return o.forEach(m=>{c=Math.min(c,m.x),d=Math.max(d,m.x),f=Math.min(f,m.y),g=Math.max(g,m.y)}),{x:c,y:f,width:d-c,height:g-f}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return Qp.RegularPolygon=a,a.prototype.className="RegularPolygon",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"radius",0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(a,"sides",0,(0,e.getNumberValidator)()),Qp}var Zp={},u6;function OV(){if(u6)return Zp;u6=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.Ring=void 0;const n=ke(),t=wi(),e=Fe(),i=Re(),a=Math.PI*2;let s=class extends t.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.innerRadius(),0,a,!1),c.moveTo(this.outerRadius(),0),c.arc(0,0,this.outerRadius(),a,0,!0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}};return Zp.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(s),n.Factory.addGetterSetter(s,"innerRadius",0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(s,"outerRadius",0,(0,e.getNumberValidator)()),Zp}var Jp={},d6;function NV(){if(d6)return Jp;d6=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.Sprite=void 0;const n=ke(),t=wi(),e=AA(),i=Fe(),a=Re();let s=class extends t.Shape{constructor(c){super(c),this._updated=!0,this.anim=new e.Animation(()=>{const d=this._updated;return this._updated=!1,d}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(c){const d=this.animation(),f=this.frameIndex(),g=f*4,m=this.animations()[d],v=this.frameOffsets(),x=m[g+0],S=m[g+1],_=m[g+2],C=m[g+3],D=this.image();if((this.hasFill()||this.hasStroke())&&(c.beginPath(),c.rect(0,0,_,C),c.closePath(),c.fillStrokeShape(this)),D)if(v){const T=v[d],w=f*2;c.drawImage(D,x,S,_,C,T[w+0],T[w+1],_,C)}else c.drawImage(D,x,S,_,C,0,0,_,C)}_hitFunc(c){const d=this.animation(),f=this.frameIndex(),g=f*4,m=this.animations()[d],v=this.frameOffsets(),x=m[g+2],S=m[g+3];if(c.beginPath(),v){const _=v[d],C=f*2;c.rect(_[C+0],_[C+1],x,S)}else c.rect(0,0,x,S);c.closePath(),c.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const c=this;this.interval=setInterval(function(){c._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const c=this.getLayer();this.anim.setLayers(c),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const c=this.frameIndex(),d=this.animation(),f=this.animations(),g=f[d],m=g.length/4;c<m-1?this.frameIndex(c+1):this.frameIndex(0)}};return Jp.Sprite=s,s.prototype.className="Sprite",(0,a._registerNode)(s),n.Factory.addGetterSetter(s,"animation"),n.Factory.addGetterSetter(s,"animations"),n.Factory.addGetterSetter(s,"frameOffsets"),n.Factory.addGetterSetter(s,"image"),n.Factory.addGetterSetter(s,"frameIndex",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"frameRate",17,(0,i.getNumberValidator)()),n.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Jp}var tg={},h6;function LV(){if(h6)return tg;h6=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.Star=void 0;const n=ke(),t=wi(),e=Fe(),i=Re();let a=class extends t.Shape{_sceneFunc(o){const c=this.innerRadius(),d=this.outerRadius(),f=this.numPoints();o.beginPath(),o.moveTo(0,0-d);for(let g=1;g<f*2;g++){const m=g%2===0?d:c,v=m*Math.sin(g*Math.PI/f),x=-1*m*Math.cos(g*Math.PI/f);o.lineTo(v,x)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return tg.Star=a,a.prototype.className="Star",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"numPoints",5,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(a,"innerRadius",0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(a,"outerRadius",0,(0,e.getNumberValidator)()),tg}var gh={},f6;function p9(){if(f6)return gh;f6=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.Text=void 0,gh.stringToArray=o;const n=Un(),t=ke(),e=wi(),i=Re(),a=Fe(),s=Re();function o(at){return[...at].reduce((K,ut,xt,ot)=>{if(new RegExp("\\p{Emoji}","u").test(ut)){const tt=ot[xt+1];tt&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(tt)?(K.push(ut+tt),ot[xt+1]=""):K.push(ut)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(ut+(ot[xt+1]||""))?K.push(ut+ot[xt+1]):xt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(ut)?K[K.length-1]+=ut:ut&&K.push(ut);return K},[])}const c="auto",d="center",f="inherit",g="justify",m="Change.konva",v="2d",x="-",S="left",_="text",C="Text",D="top",T="bottom",w="middle",R="normal",O="px ",L=" ",I="right",B="rtl",F="word",z="char",j="none",Z="",nt=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],it=nt.length;function et(at){return at.split(",").map(K=>{K=K.trim();const ut=K.indexOf(" ")>=0,xt=K.indexOf('"')>=0||K.indexOf("'")>=0;return ut&&!xt&&(K=`"${K}"`),K}).join(", ")}let Q;function k(){return Q||(Q=n.Util.createCanvasElement().getContext(v),Q)}function U(at){at.fillText(this._partialText,this._partialTextX,this._partialTextY)}function $(at){at.setAttr("miterLimit",2),at.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function H(at){return at=at||{},!at.fillLinearGradientColorStops&&!at.fillRadialGradientColorStops&&!at.fillPatternImage&&(at.fill=at.fill||"black"),at}class V extends e.Shape{constructor(K){super(H(K)),this._partialTextX=0,this._partialTextY=0;for(let ut=0;ut<it;ut++)this.on(nt[ut]+m,this._setTextData);this._setTextData()}_sceneFunc(K){const ut=this.textArr,xt=ut.length;if(!this.text())return;let ot=this.padding(),tt=this.fontSize(),ct=this.lineHeight()*tt,At=this.verticalAlign(),Mt=this.direction(),Pt=0,Bt=this.align(),Gt=this.getWidth(),de=this.letterSpacing(),Nt=this.fill(),we=this.textDecoration(),kt=we.indexOf("underline")!==-1,Ae=we.indexOf("line-through")!==-1,rn;Mt=Mt===f?K.direction:Mt;let sn=ct/2,vn=w;if(i.Konva._fixTextRendering){const $t=this.measureSize("M");vn="alphabetic",sn=($t.fontBoundingBoxAscent-$t.fontBoundingBoxDescent)/2+ct/2}for(Mt===B&&K.setAttr("direction",Mt),K.setAttr("font",this._getContextFont()),K.setAttr("textBaseline",vn),K.setAttr("textAlign",S),At===w?Pt=(this.getHeight()-xt*ct-ot*2)/2:At===T&&(Pt=this.getHeight()-xt*ct-ot*2),K.translate(ot,Pt+ot),rn=0;rn<xt;rn++){let $t=0,Ce=0;const Dt=ut[rn],Ht=Dt.text,ee=Dt.width,Xt=Dt.lastInParagraph;if(K.save(),Bt===I?$t+=Gt-ee-ot*2:Bt===d&&($t+=(Gt-ee-ot*2)/2),kt){K.save(),K.beginPath();const ie=i.Konva._fixTextRendering?Math.round(tt/4):Math.round(tt/2),Me=$t,Ze=sn+Ce+ie;K.moveTo(Me,Ze);const yn=Bt===g&&!Xt?Gt-ot*2:ee;K.lineTo(Me+Math.round(yn),Ze),K.lineWidth=tt/15;const si=this._getLinearGradient();K.strokeStyle=si||Nt,K.stroke(),K.restore()}if(Ae){K.save(),K.beginPath();const ie=i.Konva._fixTextRendering?-Math.round(tt/4):0;K.moveTo($t,sn+Ce+ie);const Me=Bt===g&&!Xt?Gt-ot*2:ee;K.lineTo($t+Math.round(Me),sn+Ce+ie),K.lineWidth=tt/15;const Ze=this._getLinearGradient();K.strokeStyle=Ze||Nt,K.stroke(),K.restore()}if(Mt!==B&&(de!==0||Bt===g)){const ie=Ht.split(" ").length-1,Me=o(Ht);for(let Ze=0;Ze<Me.length;Ze++){const yn=Me[Ze];yn===" "&&!Xt&&Bt===g&&($t+=(Gt-ot*2-ee)/ie),this._partialTextX=$t,this._partialTextY=sn+Ce,this._partialText=yn,K.fillStrokeShape(this),$t+=this.measureSize(yn).width+de}}else de!==0&&K.setAttr("letterSpacing",`${de}px`),this._partialTextX=$t,this._partialTextY=sn+Ce,this._partialText=Ht,K.fillStrokeShape(this);K.restore(),xt>1&&(sn+=ct)}}_hitFunc(K){const ut=this.getWidth(),xt=this.getHeight();K.beginPath(),K.rect(0,0,ut,xt),K.closePath(),K.fillStrokeShape(this)}setText(K){const ut=n.Util._isString(K)?K:K==null?"":K+"";return this._setAttr(_,ut),this}getWidth(){return this.attrs.width===c||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===c||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(K){var ut,xt,ot,tt,ct,At,Mt,Pt,Bt,Gt,de;let Nt=k(),we=this.fontSize(),kt;Nt.save(),Nt.font=this._getContextFont(),kt=Nt.measureText(K),Nt.restore();const Ae=we/100;return{actualBoundingBoxAscent:(ut=kt.actualBoundingBoxAscent)!==null&&ut!==void 0?ut:71.58203125*Ae,actualBoundingBoxDescent:(xt=kt.actualBoundingBoxDescent)!==null&&xt!==void 0?xt:0,actualBoundingBoxLeft:(ot=kt.actualBoundingBoxLeft)!==null&&ot!==void 0?ot:-7.421875*Ae,actualBoundingBoxRight:(tt=kt.actualBoundingBoxRight)!==null&&tt!==void 0?tt:75.732421875*Ae,alphabeticBaseline:(ct=kt.alphabeticBaseline)!==null&&ct!==void 0?ct:0,emHeightAscent:(At=kt.emHeightAscent)!==null&&At!==void 0?At:100*Ae,emHeightDescent:(Mt=kt.emHeightDescent)!==null&&Mt!==void 0?Mt:-20*Ae,fontBoundingBoxAscent:(Pt=kt.fontBoundingBoxAscent)!==null&&Pt!==void 0?Pt:91*Ae,fontBoundingBoxDescent:(Bt=kt.fontBoundingBoxDescent)!==null&&Bt!==void 0?Bt:21*Ae,hangingBaseline:(Gt=kt.hangingBaseline)!==null&&Gt!==void 0?Gt:72.80000305175781*Ae,ideographicBaseline:(de=kt.ideographicBaseline)!==null&&de!==void 0?de:-21*Ae,width:kt.width,height:we}}_getContextFont(){return this.fontStyle()+L+this.fontVariant()+L+(this.fontSize()+O)+et(this.fontFamily())}_addTextLine(K){this.align()===g&&(K=K.trim());const xt=this._getTextWidth(K);return this.textArr.push({text:K,width:xt,lastInParagraph:!1})}_getTextWidth(K){const ut=this.letterSpacing(),xt=K.length;return k().measureText(K).width+ut*xt}_setTextData(){let K=this.text().split(`
`),ut=+this.fontSize(),xt=0,ot=this.lineHeight()*ut,tt=this.attrs.width,ct=this.attrs.height,At=tt!==c&&tt!==void 0,Mt=ct!==c&&ct!==void 0,Pt=this.padding(),Bt=tt-Pt*2,Gt=ct-Pt*2,de=0,Nt=this.wrap(),we=Nt!==j,kt=Nt!==z&&we,Ae=this.ellipsis();this.textArr=[],k().font=this._getContextFont();const rn=Ae?this._getTextWidth(Z):0;for(let sn=0,vn=K.length;sn<vn;++sn){let $t=K[sn],Ce=this._getTextWidth($t);if(At&&Ce>Bt)for(;$t.length>0;){let Dt=0,Ht=o($t).length,ee="",Xt=0;for(;Dt<Ht;){const ie=Dt+Ht>>>1,Me=o($t),Ze=Me.slice(0,ie+1).join(""),yn=this._getTextWidth(Ze);(Ae&&Mt&&de+ot>Gt?yn+rn:yn)<=Bt?(Dt=ie+1,ee=Ze,Xt=yn):Ht=ie}if(ee){if(kt){const Ze=o($t),yn=o(ee),si=Ze[yn.length],En=si===L||si===x;let Rt;if(En&&Xt<=Bt)Rt=yn.length;else{const qt=yn.lastIndexOf(L),$e=yn.lastIndexOf(x);Rt=Math.max(qt,$e)+1}Rt>0&&(Dt=Rt,ee=Ze.slice(0,Dt).join(""),Xt=this._getTextWidth(ee))}if(ee=ee.trimRight(),this._addTextLine(ee),xt=Math.max(xt,Xt),de+=ot,this._shouldHandleEllipsis(de)){this._tryToAddEllipsisToLastLine();break}if($t=o($t).slice(Dt).join("").trimLeft(),$t.length>0&&(Ce=this._getTextWidth($t),Ce<=Bt)){this._addTextLine($t),de+=ot,xt=Math.max(xt,Ce);break}}else break}else this._addTextLine($t),de+=ot,xt=Math.max(xt,Ce),this._shouldHandleEllipsis(de)&&sn<vn-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Mt&&de+ot>Gt)break}this.textHeight=ut,this.textWidth=xt}_shouldHandleEllipsis(K){const ut=+this.fontSize(),xt=this.lineHeight()*ut,ot=this.attrs.height,tt=ot!==c&&ot!==void 0,ct=this.padding(),At=ot-ct*2;return!(this.wrap()!==j)||tt&&K+xt>At}_tryToAddEllipsisToLastLine(){const K=this.attrs.width,ut=K!==c&&K!==void 0,xt=this.padding(),ot=K-xt*2,tt=this.ellipsis(),ct=this.textArr[this.textArr.length-1];!ct||!tt||(ut&&(this._getTextWidth(ct.text+Z)<ot||(ct.text=ct.text.slice(0,ct.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ct.text+Z))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const K=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,ut=this.hasShadow();return K&&ut?!0:super._useBufferCanvas()}}return gh.Text=V,V.prototype._fillFunc=U,V.prototype._strokeFunc=$,V.prototype.className=C,V.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(V),t.Factory.overWriteSetter(V,"width",(0,a.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(V,"height",(0,a.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(V,"direction",f),t.Factory.addGetterSetter(V,"fontFamily","Arial"),t.Factory.addGetterSetter(V,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(V,"fontStyle",R),t.Factory.addGetterSetter(V,"fontVariant",R),t.Factory.addGetterSetter(V,"padding",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(V,"align",S),t.Factory.addGetterSetter(V,"verticalAlign",D),t.Factory.addGetterSetter(V,"lineHeight",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(V,"wrap",F),t.Factory.addGetterSetter(V,"ellipsis",!1,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(V,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(V,"text","",(0,a.getStringValidator)()),t.Factory.addGetterSetter(V,"textDecoration",""),gh}var eg={},p6;function PV(){if(p6)return eg;p6=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.TextPath=void 0;const n=Un(),t=ke(),e=wi(),i=EA(),a=p9(),s=Fe(),o=Re(),c="",d="normal";function f(v){v.fillText(this.partialText,0,0)}function g(v){v.strokeText(this.partialText,0,0)}let m=class extends e.Shape{constructor(x){super(x),this.dummyCanvas=n.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return i.Path.getPathLength(this.dataArray)}_getPointAtLength(x){if(!this.attrs.data)return null;const S=this.pathLength;return x-1>S?null:i.Path.getPointAtLengthOfDataArray(x,this.dataArray)}_readDataAttribute(){this.dataArray=i.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(x){x.setAttr("font",this._getContextFont()),x.setAttr("textBaseline",this.textBaseline()),x.setAttr("textAlign","left"),x.save();const S=this.textDecoration(),_=this.fill(),C=this.fontSize(),D=this.glyphInfo;S==="underline"&&x.beginPath();for(let T=0;T<D.length;T++){x.save();const w=D[T].p0;x.translate(w.x,w.y),x.rotate(D[T].rotation),this.partialText=D[T].text,x.fillStrokeShape(this),S==="underline"&&(T===0&&x.moveTo(0,C/2+1),x.lineTo(C,C/2+1)),x.restore()}S==="underline"&&(x.strokeStyle=_,x.lineWidth=C/20,x.stroke()),x.restore()}_hitFunc(x){x.beginPath();const S=this.glyphInfo;if(S.length>=1){const _=S[0].p0;x.moveTo(_.x,_.y)}for(let _=0;_<S.length;_++){const C=S[_].p1;x.lineTo(C.x,C.y)}x.setAttr("lineWidth",this.fontSize()),x.setAttr("strokeStyle",this.colorKey),x.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(x){return a.Text.prototype.setText.call(this,x)}_getContextFont(){return a.Text.prototype._getContextFont.call(this)}_getTextSize(x){const _=this.dummyCanvas.getContext("2d");_.save(),_.font=this._getContextFont();const C=_.measureText(x);return _.restore(),{width:C.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:x,height:S}=this._getTextSize(this.attrs.text);if(this.textWidth=x,this.textHeight=S,this.glyphInfo=[],!this.attrs.data)return null;const _=this.letterSpacing(),C=this.align(),D=this.kerningFunc(),T=Math.max(this.textWidth+((this.attrs.text||"").length-1)*_,0);let w=0;C==="center"&&(w=Math.max(0,this.pathLength/2-T/2)),C==="right"&&(w=Math.max(0,this.pathLength-T));const R=(0,a.stringToArray)(this.text());let O=w;for(let L=0;L<R.length;L++){const I=this._getPointAtLength(O);if(!I)return;let B=this._getTextSize(R[L]).width+_;if(R[L]===" "&&C==="justify"){const it=this.text().split(" ").length-1;B+=(this.pathLength-T)/it}const F=this._getPointAtLength(O+B);if(!F)return;const z=i.Path.getLineLength(I.x,I.y,F.x,F.y);let j=0;if(D)try{j=D(R[L-1],R[L])*this.fontSize()}catch{j=0}I.x+=j,F.x+=j,this.textWidth+=j;const Z=i.Path.getPointOnLine(j+z/2,I.x,I.y,F.x,F.y),nt=Math.atan2(F.y-I.y,F.x-I.x);this.glyphInfo.push({transposeX:Z.x,transposeY:Z.y,text:R[L],rotation:nt,p0:I,p1:F}),O+=B}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const x=[];this.glyphInfo.forEach(function(O){x.push(O.p0.x),x.push(O.p0.y),x.push(O.p1.x),x.push(O.p1.y)});let S=x[0]||0,_=x[0]||0,C=x[1]||0,D=x[1]||0,T,w;for(let O=0;O<x.length/2;O++)T=x[O*2],w=x[O*2+1],S=Math.min(S,T),_=Math.max(_,T),C=Math.min(C,w),D=Math.max(D,w);const R=this.fontSize();return{x:S-R/2,y:C-R/2,width:_-S+R,height:D-C+R}}destroy(){return n.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return eg.TextPath=m,m.prototype._fillFunc=f,m.prototype._strokeFunc=g,m.prototype._fillFuncHit=f,m.prototype._strokeFuncHit=g,m.prototype.className="TextPath",m.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(m),t.Factory.addGetterSetter(m,"data"),t.Factory.addGetterSetter(m,"fontFamily","Arial"),t.Factory.addGetterSetter(m,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(m,"fontStyle",d),t.Factory.addGetterSetter(m,"align","left"),t.Factory.addGetterSetter(m,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(m,"textBaseline","middle"),t.Factory.addGetterSetter(m,"fontVariant",d),t.Factory.addGetterSetter(m,"text",c),t.Factory.addGetterSetter(m,"textDecoration",""),t.Factory.addGetterSetter(m,"kerningFunc",void 0),eg}var ng={},g6;function kV(){if(g6)return ng;g6=1,Object.defineProperty(ng,"__esModule",{value:!0}),ng.Transformer=void 0;const n=Un(),t=ke(),e=Qn(),i=wi(),a=f9(),s=_A(),o=Re(),c=Fe(),d=Re(),f="tr-konva",g=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(B=>B+`.${f}`).join(" "),m="nodesRect",v=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],x={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},S="ontouchstart"in o.Konva._global;function _(B,F,z){if(B==="rotater")return z;F+=n.Util.degToRad(x[B]||0);const j=(n.Util.radToDeg(F)%360+360)%360;return n.Util._inRange(j,315+22.5,360)||n.Util._inRange(j,0,22.5)?"ns-resize":n.Util._inRange(j,45-22.5,45+22.5)?"nesw-resize":n.Util._inRange(j,90-22.5,90+22.5)?"ew-resize":n.Util._inRange(j,135-22.5,135+22.5)?"nwse-resize":n.Util._inRange(j,180-22.5,180+22.5)?"ns-resize":n.Util._inRange(j,225-22.5,225+22.5)?"nesw-resize":n.Util._inRange(j,270-22.5,270+22.5)?"ew-resize":n.Util._inRange(j,315-22.5,315+22.5)?"nwse-resize":(n.Util.error("Transformer has unknown angle for cursor detection: "+j),"pointer")}const C=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function D(B){return{x:B.x+B.width/2*Math.cos(B.rotation)+B.height/2*Math.sin(-B.rotation),y:B.y+B.height/2*Math.cos(B.rotation)+B.width/2*Math.sin(B.rotation)}}function T(B,F,z){const j=z.x+(B.x-z.x)*Math.cos(F)-(B.y-z.y)*Math.sin(F),Z=z.y+(B.x-z.x)*Math.sin(F)+(B.y-z.y)*Math.cos(F);return{...B,rotation:B.rotation+F,x:j,y:Z}}function w(B,F){const z=D(B);return T(B,F,z)}function R(B,F,z){let j=F;for(let Z=0;Z<B.length;Z++){const nt=o.Konva.getAngle(B[Z]),it=Math.abs(nt-F)%(Math.PI*2);Math.min(it,Math.PI*2-it)<z&&(j=nt)}return j}let O=0;class L extends s.Group{constructor(F){super(F),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(g,this.update),this.getNode()&&this.update()}attachTo(F){return this.setNode(F),this}setNode(F){return n.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([F])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return f+this._id}setNodes(F=[]){this._nodes&&this._nodes.length&&this.detach();const z=F.filter(Z=>Z.isAncestorOf(this)?(n.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=F=z,F.length===1&&this.useSingleNodeRotation()?this.rotation(F[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(Z=>{const nt=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(Z._attrsAffectingSize.length){const it=Z._attrsAffectingSize.map(et=>et+"Change."+this._getEventNamespace()).join(" ");Z.on(it,nt)}Z.on(v.map(it=>it+`.${this._getEventNamespace()}`).join(" "),nt),Z.on(`absoluteTransformChange.${this._getEventNamespace()}`,nt),this._proxyDrag(Z)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(F){let z;F.on(`dragstart.${this._getEventNamespace()}`,j=>{z=F.getAbsolutePosition(),!this.isDragging()&&F!==this.findOne(".back")&&this.startDrag(j,!1)}),F.on(`dragmove.${this._getEventNamespace()}`,j=>{if(!z)return;const Z=F.getAbsolutePosition(),nt=Z.x-z.x,it=Z.y-z.y;this.nodes().forEach(et=>{if(et===F||et.isDragging())return;const Q=et.getAbsolutePosition();et.setAbsolutePosition({x:Q.x+nt,y:Q.y+it}),et.startDrag(j)}),z=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(F=>{F.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(m),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(m,this.__getNodeRect)}__getNodeShape(F,z=this.rotation(),j){const Z=F.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),nt=F.getAbsoluteScale(j),it=F.getAbsolutePosition(j),et=Z.x*nt.x-F.offsetX()*nt.x,Q=Z.y*nt.y-F.offsetY()*nt.y,k=(o.Konva.getAngle(F.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),U={x:it.x+et*Math.cos(k)+Q*Math.sin(-k),y:it.y+Q*Math.cos(k)+et*Math.sin(k),width:Z.width*nt.x,height:Z.height*nt.y,rotation:k};return T(U,-o.Konva.getAngle(z),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const z=[];this.nodes().map(k=>{const U=k.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),$=[{x:U.x,y:U.y},{x:U.x+U.width,y:U.y},{x:U.x+U.width,y:U.y+U.height},{x:U.x,y:U.y+U.height}],H=k.getAbsoluteTransform();$.forEach(function(V){const at=H.point(V);z.push(at)})});const j=new n.Transform;j.rotate(-o.Konva.getAngle(this.rotation()));let Z=1/0,nt=1/0,it=-1/0,et=-1/0;z.forEach(function(k){const U=j.point(k);Z===void 0&&(Z=it=U.x,nt=et=U.y),Z=Math.min(Z,U.x),nt=Math.min(nt,U.y),it=Math.max(it,U.x),et=Math.max(et,U.y)}),j.invert();const Q=j.point({x:Z,y:nt});return{x:Q.x,y:Q.y,width:it-Z,height:et-nt,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),C.forEach(F=>{this._createAnchor(F)}),this._createAnchor("rotater")}_createAnchor(F){const z=new a.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:F+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:S?10:"auto"}),j=this;z.on("mousedown touchstart",function(Z){j._handleMouseDown(Z)}),z.on("dragstart",Z=>{z.stopDrag(),Z.cancelBubble=!0}),z.on("dragend",Z=>{Z.cancelBubble=!0}),z.on("mouseenter",()=>{const Z=o.Konva.getAngle(this.rotation()),nt=this.rotateAnchorCursor(),it=_(F,Z,nt);z.getStage().content&&(z.getStage().content.style.cursor=it),this._cursorChange=!0}),z.on("mouseout",()=>{z.getStage().content&&(z.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(z)}_createBack(){const F=new i.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(z,j){const Z=j.getParent(),nt=Z.padding();z.beginPath(),z.rect(-nt,-nt,j.width()+nt*2,j.height()+nt*2),z.moveTo(j.width()/2,-nt),Z.rotateEnabled()&&Z.rotateLineVisible()&&z.lineTo(j.width()/2,-Z.rotateAnchorOffset()*n.Util._sign(j.height())-nt),z.fillStrokeShape(j)},hitFunc:(z,j)=>{if(!this.shouldOverdrawWholeArea())return;const Z=this.padding();z.beginPath(),z.rect(-Z,-Z,j.width()+Z*2,j.height()+Z*2),z.fillStrokeShape(j)}});this.add(F),this._proxyDrag(F),F.on("dragstart",z=>{z.cancelBubble=!0}),F.on("dragmove",z=>{z.cancelBubble=!0}),F.on("dragend",z=>{z.cancelBubble=!0}),this.on("dragmove",z=>{this.update()})}_handleMouseDown(F){if(this._transforming)return;this._movingAnchorName=F.target.name().split(" ")[0];const z=this._getNodeRect(),j=z.width,Z=z.height,nt=Math.sqrt(Math.pow(j,2)+Math.pow(Z,2));this.sin=Math.abs(Z/nt),this.cos=Math.abs(j/nt),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const it=F.target.getAbsolutePosition(),et=F.target.getStage().getPointerPosition();this._anchorDragOffset={x:et.x-it.x,y:et.y-it.y},O++,this._fire("transformstart",{evt:F.evt,target:this.getNode()}),this._nodes.forEach(Q=>{Q._fire("transformstart",{evt:F.evt,target:Q})})}_handleMouseMove(F){let z,j,Z;const nt=this.findOne("."+this._movingAnchorName),it=nt.getStage();it.setPointersPositions(F);const et=it.getPointerPosition();let Q={x:et.x-this._anchorDragOffset.x,y:et.y-this._anchorDragOffset.y};const k=nt.getAbsolutePosition();this.anchorDragBoundFunc()&&(Q=this.anchorDragBoundFunc()(k,Q,F)),nt.setAbsolutePosition(Q);const U=nt.getAbsolutePosition();if(k.x===U.x&&k.y===U.y)return;if(this._movingAnchorName==="rotater"){const ot=this._getNodeRect();z=nt.x()-ot.width/2,j=-nt.y()+ot.height/2;let tt=Math.atan2(-j,z)+Math.PI/2;ot.height<0&&(tt-=Math.PI);const At=o.Konva.getAngle(this.rotation())+tt,Mt=o.Konva.getAngle(this.rotationSnapTolerance()),Bt=R(this.rotationSnaps(),At,Mt)-ot.rotation,Gt=w(ot,Bt);this._fitNodesInto(Gt,F);return}const $=this.shiftBehavior();let H;$==="inverted"?H=this.keepRatio()&&!F.shiftKey:$==="none"?H=this.keepRatio():H=this.keepRatio()||F.shiftKey;let V=this.centeredScaling()||F.altKey;if(this._movingAnchorName==="top-left"){if(H){const ot=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};Z=Math.sqrt(Math.pow(ot.x-nt.x(),2)+Math.pow(ot.y-nt.y(),2));const tt=this.findOne(".top-left").x()>ot.x?-1:1,ct=this.findOne(".top-left").y()>ot.y?-1:1;z=Z*this.cos*tt,j=Z*this.sin*ct,this.findOne(".top-left").x(ot.x-z),this.findOne(".top-left").y(ot.y-j)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(nt.y());else if(this._movingAnchorName==="top-right"){if(H){const ot=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};Z=Math.sqrt(Math.pow(nt.x()-ot.x,2)+Math.pow(ot.y-nt.y(),2));const tt=this.findOne(".top-right").x()<ot.x?-1:1,ct=this.findOne(".top-right").y()>ot.y?-1:1;z=Z*this.cos*tt,j=Z*this.sin*ct,this.findOne(".top-right").x(ot.x+z),this.findOne(".top-right").y(ot.y-j)}var at=nt.position();this.findOne(".top-left").y(at.y),this.findOne(".bottom-right").x(at.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(nt.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(nt.x());else if(this._movingAnchorName==="bottom-left"){if(H){const ot=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};Z=Math.sqrt(Math.pow(ot.x-nt.x(),2)+Math.pow(nt.y()-ot.y,2));const tt=ot.x<nt.x()?-1:1,ct=nt.y()<ot.y?-1:1;z=Z*this.cos*tt,j=Z*this.sin*ct,nt.x(ot.x-z),nt.y(ot.y+j)}at=nt.position(),this.findOne(".top-left").x(at.x),this.findOne(".bottom-right").y(at.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(nt.y());else if(this._movingAnchorName==="bottom-right"){if(H){const ot=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};Z=Math.sqrt(Math.pow(nt.x()-ot.x,2)+Math.pow(nt.y()-ot.y,2));const tt=this.findOne(".bottom-right").x()<ot.x?-1:1,ct=this.findOne(".bottom-right").y()<ot.y?-1:1;z=Z*this.cos*tt,j=Z*this.sin*ct,this.findOne(".bottom-right").x(ot.x+z),this.findOne(".bottom-right").y(ot.y+j)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(V=this.centeredScaling()||F.altKey,V){const ot=this.findOne(".top-left"),tt=this.findOne(".bottom-right"),ct=ot.x(),At=ot.y(),Mt=this.getWidth()-tt.x(),Pt=this.getHeight()-tt.y();tt.move({x:-ct,y:-At}),ot.move({x:Mt,y:Pt})}const K=this.findOne(".top-left").getAbsolutePosition();z=K.x,j=K.y;const ut=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),xt=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:z,y:j,width:ut,height:xt,rotation:o.Konva.getAngle(this.rotation())},F)}_handleMouseUp(F){this._removeEvents(F)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(F){var z;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const j=this.getNode();O--,this._fire("transformend",{evt:F,target:j}),(z=this.getLayer())===null||z===void 0||z.batchDraw(),j&&this._nodes.forEach(Z=>{var nt;Z._fire("transformend",{evt:F,target:Z}),(nt=Z.getLayer())===null||nt===void 0||nt.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(F,z){const j=this._getNodeRect(),Z=1;if(n.Util._inRange(F.width,-this.padding()*2-Z,Z)){this.update();return}if(n.Util._inRange(F.height,-this.padding()*2-Z,Z)){this.update();return}const nt=new n.Transform;if(nt.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&F.width<0&&this._movingAnchorName.indexOf("left")>=0){const H=nt.point({x:-this.padding()*2,y:0});F.x+=H.x,F.y+=H.y,F.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y}else if(this._movingAnchorName&&F.width<0&&this._movingAnchorName.indexOf("right")>=0){const H=nt.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,F.width+=this.padding()*2}if(this._movingAnchorName&&F.height<0&&this._movingAnchorName.indexOf("top")>=0){const H=nt.point({x:0,y:-this.padding()*2});F.x+=H.x,F.y+=H.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,F.height+=this.padding()*2}else if(this._movingAnchorName&&F.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const H=nt.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,F.height+=this.padding()*2}if(this.boundBoxFunc()){const H=this.boundBoxFunc()(j,F);H?F=H:n.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const it=1e7,et=new n.Transform;et.translate(j.x,j.y),et.rotate(j.rotation),et.scale(j.width/it,j.height/it);const Q=new n.Transform,k=F.width/it,U=F.height/it;this.flipEnabled()===!1?(Q.translate(F.x,F.y),Q.rotate(F.rotation),Q.translate(F.width<0?F.width:0,F.height<0?F.height:0),Q.scale(Math.abs(k),Math.abs(U))):(Q.translate(F.x,F.y),Q.rotate(F.rotation),Q.scale(k,U));const $=Q.multiply(et.invert());this._nodes.forEach(H=>{var V;const at=H.getParent().getAbsoluteTransform(),K=H.getTransform().copy();K.translate(H.offsetX(),H.offsetY());const ut=new n.Transform;ut.multiply(at.copy().invert()).multiply($).multiply(at).multiply(K);const xt=ut.decompose();H.setAttrs(xt),(V=H.getLayer())===null||V===void 0||V.batchDraw()}),this.rotation(n.Util._getRotation(F.rotation)),this._nodes.forEach(H=>{this._fire("transform",{evt:z,target:H}),H._fire("transform",{evt:z,target:H})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(F,z){this.findOne(F).setAttrs(z)}update(){var F;const z=this._getNodeRect();this.rotation(n.Util._getRotation(z.rotation));const j=z.width,Z=z.height,nt=this.enabledAnchors(),it=this.resizeEnabled(),et=this.padding(),Q=this.anchorSize(),k=this.find("._anchor");k.forEach($=>{$.setAttrs({width:Q,height:Q,offsetX:Q/2,offsetY:Q/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:Q/2+et,offsetY:Q/2+et,visible:it&&nt.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:j/2,y:0,offsetY:Q/2+et,visible:it&&nt.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:j,y:0,offsetX:Q/2-et,offsetY:Q/2+et,visible:it&&nt.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:Z/2,offsetX:Q/2+et,visible:it&&nt.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:j,y:Z/2,offsetX:Q/2-et,visible:it&&nt.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:Z,offsetX:Q/2+et,offsetY:Q/2-et,visible:it&&nt.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:j/2,y:Z,offsetY:Q/2-et,visible:it&&nt.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:j,y:Z,offsetX:Q/2-et,offsetY:Q/2-et,visible:it&&nt.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:j/2,y:-this.rotateAnchorOffset()*n.Util._sign(Z)-et,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:j,height:Z,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const U=this.anchorStyleFunc();U&&k.forEach($=>{U($)}),(F=this.getLayer())===null||F===void 0||F.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const F=this.findOne("."+this._movingAnchorName);F&&F.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return e.Node.prototype.toObject.call(this)}clone(F){return e.Node.prototype.clone.call(this,F)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ng.Transformer=L,L.isTransforming=()=>O>0;function I(B){return B instanceof Array||n.Util.warn("enabledAnchors value should be an array"),B instanceof Array&&B.forEach(function(F){C.indexOf(F)===-1&&n.Util.warn("Unknown anchor name: "+F+". Available names are: "+C.join(", "))}),B||[]}return L.prototype.className="Transformer",(0,d._registerNode)(L),t.Factory.addGetterSetter(L,"enabledAnchors",C,I),t.Factory.addGetterSetter(L,"flipEnabled",!0,(0,c.getBooleanValidator)()),t.Factory.addGetterSetter(L,"resizeEnabled",!0),t.Factory.addGetterSetter(L,"anchorSize",10,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(L,"rotateEnabled",!0),t.Factory.addGetterSetter(L,"rotateLineVisible",!0),t.Factory.addGetterSetter(L,"rotationSnaps",[]),t.Factory.addGetterSetter(L,"rotateAnchorOffset",50,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(L,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(L,"rotationSnapTolerance",5,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(L,"borderEnabled",!0),t.Factory.addGetterSetter(L,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(L,"anchorStrokeWidth",1,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(L,"anchorFill","white"),t.Factory.addGetterSetter(L,"anchorCornerRadius",0,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(L,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(L,"borderStrokeWidth",1,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(L,"borderDash"),t.Factory.addGetterSetter(L,"keepRatio",!0),t.Factory.addGetterSetter(L,"shiftBehavior","default"),t.Factory.addGetterSetter(L,"centeredScaling",!1),t.Factory.addGetterSetter(L,"ignoreStroke",!1),t.Factory.addGetterSetter(L,"padding",0,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(L,"nodes"),t.Factory.addGetterSetter(L,"node"),t.Factory.addGetterSetter(L,"boundBoxFunc"),t.Factory.addGetterSetter(L,"anchorDragBoundFunc"),t.Factory.addGetterSetter(L,"anchorStyleFunc"),t.Factory.addGetterSetter(L,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(L,"useSingleNodeRotation",!0),t.Factory.backCompat(L,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),ng}var ig={},m6;function BV(){if(m6)return ig;m6=1,Object.defineProperty(ig,"__esModule",{value:!0}),ig.Wedge=void 0;const n=ke(),t=wi(),e=Re(),i=Fe(),a=Re();let s=class extends t.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.radius(),0,e.Konva.getAngle(this.angle()),this.clockwise()),c.lineTo(0,0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(c){this.radius(c/2)}setHeight(c){this.radius(c/2)}};return ig.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(s),n.Factory.addGetterSetter(s,"radius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"angle",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"clockwise",!1),n.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),ig}var ag={},v6;function zV(){if(v6)return ag;v6=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.Blur=void 0;const n=ke(),t=Qn(),e=Fe();function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(d,f){const g=d.data,m=d.width,v=d.height;let x,S,_,C,D,T,w,R,O,L,I,B,F,z,j,Z,nt,it,et,Q;const k=f+f+1,U=m-1,$=v-1,H=f+1,V=H*(H+1)/2,at=new i,K=a[f],ut=s[f];let xt=null,ot=at,tt=null,ct=null;for(let At=1;At<k;At++)ot=ot.next=new i,At===H&&(xt=ot);ot.next=at,_=S=0;for(let At=0;At<v;At++){B=F=z=j=C=D=T=w=0,R=H*(Z=g[S]),O=H*(nt=g[S+1]),L=H*(it=g[S+2]),I=H*(et=g[S+3]),C+=V*Z,D+=V*nt,T+=V*it,w+=V*et,ot=at;for(let Mt=0;Mt<H;Mt++)ot.r=Z,ot.g=nt,ot.b=it,ot.a=et,ot=ot.next;for(let Mt=1;Mt<H;Mt++)x=S+((U<Mt?U:Mt)<<2),C+=(ot.r=Z=g[x])*(Q=H-Mt),D+=(ot.g=nt=g[x+1])*Q,T+=(ot.b=it=g[x+2])*Q,w+=(ot.a=et=g[x+3])*Q,B+=Z,F+=nt,z+=it,j+=et,ot=ot.next;tt=at,ct=xt;for(let Mt=0;Mt<m;Mt++)g[S+3]=et=w*K>>ut,et!==0?(et=255/et,g[S]=(C*K>>ut)*et,g[S+1]=(D*K>>ut)*et,g[S+2]=(T*K>>ut)*et):g[S]=g[S+1]=g[S+2]=0,C-=R,D-=O,T-=L,w-=I,R-=tt.r,O-=tt.g,L-=tt.b,I-=tt.a,x=_+((x=Mt+f+1)<U?x:U)<<2,B+=tt.r=g[x],F+=tt.g=g[x+1],z+=tt.b=g[x+2],j+=tt.a=g[x+3],C+=B,D+=F,T+=z,w+=j,tt=tt.next,R+=Z=ct.r,O+=nt=ct.g,L+=it=ct.b,I+=et=ct.a,B-=Z,F-=nt,z-=it,j-=et,ct=ct.next,S+=4;_+=m}for(let At=0;At<m;At++){F=z=j=B=D=T=w=C=0,S=At<<2,R=H*(Z=g[S]),O=H*(nt=g[S+1]),L=H*(it=g[S+2]),I=H*(et=g[S+3]),C+=V*Z,D+=V*nt,T+=V*it,w+=V*et,ot=at;for(let Pt=0;Pt<H;Pt++)ot.r=Z,ot.g=nt,ot.b=it,ot.a=et,ot=ot.next;let Mt=m;for(let Pt=1;Pt<=f;Pt++)S=Mt+At<<2,C+=(ot.r=Z=g[S])*(Q=H-Pt),D+=(ot.g=nt=g[S+1])*Q,T+=(ot.b=it=g[S+2])*Q,w+=(ot.a=et=g[S+3])*Q,B+=Z,F+=nt,z+=it,j+=et,ot=ot.next,Pt<$&&(Mt+=m);S=At,tt=at,ct=xt;for(let Pt=0;Pt<v;Pt++)x=S<<2,g[x+3]=et=w*K>>ut,et>0?(et=255/et,g[x]=(C*K>>ut)*et,g[x+1]=(D*K>>ut)*et,g[x+2]=(T*K>>ut)*et):g[x]=g[x+1]=g[x+2]=0,C-=R,D-=O,T-=L,w-=I,R-=tt.r,O-=tt.g,L-=tt.b,I-=tt.a,x=At+((x=Pt+H)<$?x:$)*m<<2,C+=B+=tt.r=g[x],D+=F+=tt.g=g[x+1],T+=z+=tt.b=g[x+2],w+=j+=tt.a=g[x+3],tt=tt.next,R+=Z=ct.r,O+=nt=ct.g,L+=it=ct.b,I+=et=ct.a,B-=Z,F-=nt,z-=it,j-=et,ct=ct.next,S+=m}}const c=function(f){const g=Math.round(this.blurRadius());g>0&&o(f,g)};return ag.Blur=c,n.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),ag}var rg={},y6;function FV(){if(y6)return rg;y6=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.Brighten=void 0;const n=ke(),t=Qn(),e=Fe(),i=function(a){const s=this.brightness()*255,o=a.data,c=o.length;for(let d=0;d<c;d+=4)o[d]+=s,o[d+1]+=s,o[d+2]+=s};return rg.Brighten=i,n.Factory.addGetterSetter(t.Node,"brightness",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),rg}var sg={},b6;function IV(){if(b6)return sg;b6=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.Contrast=void 0;const n=ke(),t=Qn(),e=Fe(),i=function(a){const s=Math.pow((this.contrast()+100)/100,2),o=a.data,c=o.length;let d=150,f=150,g=150;for(let m=0;m<c;m+=4)d=o[m],f=o[m+1],g=o[m+2],d/=255,d-=.5,d*=s,d+=.5,d*=255,f/=255,f-=.5,f*=s,f+=.5,f*=255,g/=255,g-=.5,g*=s,g+=.5,g*=255,d=d<0?0:d>255?255:d,f=f<0?0:f>255?255:f,g=g<0?0:g>255?255:g,o[m]=d,o[m+1]=f,o[m+2]=g};return sg.Contrast=i,n.Factory.addGetterSetter(t.Node,"contrast",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),sg}var og={},x6;function HV(){if(x6)return og;x6=1,Object.defineProperty(og,"__esModule",{value:!0}),og.Emboss=void 0;const n=ke(),t=Qn(),e=Un(),i=Fe(),a=function(s){const o=this.embossStrength()*10,c=this.embossWhiteLevel()*255,d=this.embossDirection(),f=this.embossBlend(),g=s.data,m=s.width,v=s.height,x=m*4;let S=0,_=0,C=v;switch(d){case"top-left":S=-1,_=-1;break;case"top":S=-1,_=0;break;case"top-right":S=-1,_=1;break;case"right":S=0,_=1;break;case"bottom-right":S=1,_=1;break;case"bottom":S=1,_=0;break;case"bottom-left":S=1,_=-1;break;case"left":S=0,_=-1;break;default:e.Util.error("Unknown emboss direction: "+d)}do{const D=(C-1)*x;let T=S;C+T<1&&(T=0),C+T>v&&(T=0);const w=(C-1+T)*m*4;let R=m;do{const O=D+(R-1)*4;let L=_;R+L<1&&(L=0),R+L>m&&(L=0);const I=w+(R-1+L)*4,B=g[O]-g[I],F=g[O+1]-g[I+1],z=g[O+2]-g[I+2];let j=B;const Z=j>0?j:-j,nt=F>0?F:-F,it=z>0?z:-z;if(nt>Z&&(j=F),it>Z&&(j=z),j*=o,f){const et=g[O]+j,Q=g[O+1]+j,k=g[O+2]+j;g[O]=et>255?255:et<0?0:et,g[O+1]=Q>255?255:Q<0?0:Q,g[O+2]=k>255?255:k<0?0:k}else{let et=c-j;et<0?et=0:et>255&&(et=255),g[O]=g[O+1]=g[O+2]=et}}while(--R)}while(--C)};return og.Emboss=a,n.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,n.Factory.afterSetFilter),og}var lg={},S6;function GV(){if(S6)return lg;S6=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.Enhance=void 0;const n=ke(),t=Qn(),e=Fe();function i(s,o,c,d,f){const g=c-o,m=f-d;if(g===0)return d+m/2;if(m===0)return d;let v=(s-o)/g;return v=m*v+d,v}const a=function(s){const o=s.data,c=o.length;let d=o[0],f=d,g,m=o[1],v=m,x,S=o[2],_=S,C;const D=this.enhance();if(D===0)return;for(let B=0;B<c;B+=4)g=o[B+0],g<d?d=g:g>f&&(f=g),x=o[B+1],x<m?m=x:x>v&&(v=x),C=o[B+2],C<S?S=C:C>_&&(_=C);f===d&&(f=255,d=0),v===m&&(v=255,m=0),_===S&&(_=255,S=0);let T,w,R,O,L,I;if(D>0)T=f+D*(255-f),w=d-D*(d-0),R=v+D*(255-v),O=m-D*(m-0),L=_+D*(255-_),I=S-D*(S-0);else{const B=(f+d)*.5;T=f+D*(f-B),w=d+D*(d-B);const F=(v+m)*.5;R=v+D*(v-F),O=m+D*(m-F);const z=(_+S)*.5;L=_+D*(_-z),I=S+D*(S-z)}for(let B=0;B<c;B+=4)o[B+0]=i(o[B+0],d,f,w,T),o[B+1]=i(o[B+1],m,v,O,R),o[B+2]=i(o[B+2],S,_,I,L)};return lg.Enhance=a,n.Factory.addGetterSetter(t.Node,"enhance",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),lg}var cg={},_6;function jV(){if(_6)return cg;_6=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.Grayscale=void 0;const n=function(t){const e=t.data,i=e.length;for(let a=0;a<i;a+=4){const s=.34*e[a]+.5*e[a+1]+.16*e[a+2];e[a]=s,e[a+1]=s,e[a+2]=s}};return cg.Grayscale=n,cg}var ug={},A6;function UV(){if(A6)return ug;A6=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.HSL=void 0;const n=ke(),t=Qn(),e=Fe();n.Factory.addGetterSetter(t.Node,"hue",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"saturation",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"luminance",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter);const i=function(a){const s=a.data,o=s.length,c=1,d=Math.pow(2,this.saturation()),f=Math.abs(this.hue()+360)%360,g=this.luminance()*127,m=c*d*Math.cos(f*Math.PI/180),v=c*d*Math.sin(f*Math.PI/180),x=.299*c+.701*m+.167*v,S=.587*c-.587*m+.33*v,_=.114*c-.114*m-.497*v,C=.299*c-.299*m-.328*v,D=.587*c+.413*m+.035*v,T=.114*c-.114*m+.293*v,w=.299*c-.3*m+1.25*v,R=.587*c-.586*m-1.05*v,O=.114*c+.886*m-.2*v;let L,I,B,F;for(let z=0;z<o;z+=4)L=s[z+0],I=s[z+1],B=s[z+2],F=s[z+3],s[z+0]=x*L+S*I+_*B+g,s[z+1]=C*L+D*I+T*B+g,s[z+2]=w*L+R*I+O*B+g,s[z+3]=F};return ug.HSL=i,ug}var dg={},E6;function qV(){if(E6)return dg;E6=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.HSV=void 0;const n=ke(),t=Qn(),e=Fe(),i=function(a){const s=a.data,o=s.length,c=Math.pow(2,this.value()),d=Math.pow(2,this.saturation()),f=Math.abs(this.hue()+360)%360,g=c*d*Math.cos(f*Math.PI/180),m=c*d*Math.sin(f*Math.PI/180),v=.299*c+.701*g+.167*m,x=.587*c-.587*g+.33*m,S=.114*c-.114*g-.497*m,_=.299*c-.299*g-.328*m,C=.587*c+.413*g+.035*m,D=.114*c-.114*g+.293*m,T=.299*c-.3*g+1.25*m,w=.587*c-.586*g-1.05*m,R=.114*c+.886*g-.2*m;for(let O=0;O<o;O+=4){const L=s[O+0],I=s[O+1],B=s[O+2],F=s[O+3];s[O+0]=v*L+x*I+S*B,s[O+1]=_*L+C*I+D*B,s[O+2]=T*L+w*I+R*B,s[O+3]=F}};return dg.HSV=i,n.Factory.addGetterSetter(t.Node,"hue",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"saturation",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"value",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),dg}var hg={},w6;function VV(){if(w6)return hg;w6=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.Invert=void 0;const n=function(t){const e=t.data,i=e.length;for(let a=0;a<i;a+=4)e[a]=255-e[a],e[a+1]=255-e[a+1],e[a+2]=255-e[a+2]};return hg.Invert=n,hg}var fg={},C6;function YV(){if(C6)return fg;C6=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.Kaleidoscope=void 0;const n=ke(),t=Qn(),e=Un(),i=Fe(),a=function(c,d,f){const g=c.data,m=d.data,v=c.width,x=c.height,S=f.polarCenterX||v/2,_=f.polarCenterY||x/2;let C=Math.sqrt(S*S+_*_),D=v-S,T=x-_;const w=Math.sqrt(D*D+T*T);C=w>C?w:C;const R=x,O=v,L=360/O*Math.PI/180;for(let I=0;I<O;I+=1){const B=Math.sin(I*L),F=Math.cos(I*L);for(let z=0;z<R;z+=1){D=Math.floor(S+C*z/R*F),T=Math.floor(_+C*z/R*B);let j=(T*v+D)*4;const Z=g[j+0],nt=g[j+1],it=g[j+2],et=g[j+3];j=(I+z*v)*4,m[j+0]=Z,m[j+1]=nt,m[j+2]=it,m[j+3]=et}}},s=function(c,d,f){const g=c.data,m=d.data,v=c.width,x=c.height,S=f.polarCenterX||v/2,_=f.polarCenterY||x/2;let C=Math.sqrt(S*S+_*_),D=v-S,T=x-_;const w=Math.sqrt(D*D+T*T);C=w>C?w:C;const R=x,O=v,L=0;let I,B;for(D=0;D<v;D+=1)for(T=0;T<x;T+=1){const F=D-S,z=T-_,j=Math.sqrt(F*F+z*z)*R/C;let Z=(Math.atan2(z,F)*180/Math.PI+360+L)%360;Z=Z*O/360,I=Math.floor(Z),B=Math.floor(j);let nt=(B*v+I)*4;const it=g[nt+0],et=g[nt+1],Q=g[nt+2],k=g[nt+3];nt=(T*v+D)*4,m[nt+0]=it,m[nt+1]=et,m[nt+2]=Q,m[nt+3]=k}},o=function(c){const d=c.width,f=c.height;let g,m,v,x,S,_,C,D,T,w,R=Math.round(this.kaleidoscopePower());const O=Math.round(this.kaleidoscopeAngle()),L=Math.floor(d*(O%360)/360);if(R<1)return;const I=e.Util.createCanvasElement();I.width=d,I.height=f;const B=I.getContext("2d").getImageData(0,0,d,f);e.Util.releaseCanvas(I),a(c,B,{polarCenterX:d/2,polarCenterY:f/2});let F=d/Math.pow(2,R);for(;F<=8;)F=F*2,R-=1;F=Math.ceil(F);let z=F,j=0,Z=z,nt=1;for(L+F>d&&(j=z,Z=0,nt=-1),m=0;m<f;m+=1)for(g=j;g!==Z;g+=nt)v=Math.round(g+L)%d,T=(d*m+v)*4,S=B.data[T+0],_=B.data[T+1],C=B.data[T+2],D=B.data[T+3],w=(d*m+g)*4,B.data[w+0]=S,B.data[w+1]=_,B.data[w+2]=C,B.data[w+3]=D;for(m=0;m<f;m+=1)for(z=Math.floor(F),x=0;x<R;x+=1){for(g=0;g<z+1;g+=1)T=(d*m+g)*4,S=B.data[T+0],_=B.data[T+1],C=B.data[T+2],D=B.data[T+3],w=(d*m+z*2-g-1)*4,B.data[w+0]=S,B.data[w+1]=_,B.data[w+2]=C,B.data[w+3]=D;z*=2}s(B,c,{})};return fg.Kaleidoscope=o,n.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),fg}var pg={},T6;function XV(){if(T6)return pg;T6=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.Mask=void 0;const n=ke(),t=Qn(),e=Fe();function i(v,x,S){let _=(S*v.width+x)*4;const C=[];return C.push(v.data[_++],v.data[_++],v.data[_++],v.data[_++]),C}function a(v,x){return Math.sqrt(Math.pow(v[0]-x[0],2)+Math.pow(v[1]-x[1],2)+Math.pow(v[2]-x[2],2))}function s(v){const x=[0,0,0];for(let S=0;S<v.length;S++)x[0]+=v[S][0],x[1]+=v[S][1],x[2]+=v[S][2];return x[0]/=v.length,x[1]/=v.length,x[2]/=v.length,x}function o(v,x){const S=i(v,0,0),_=i(v,v.width-1,0),C=i(v,0,v.height-1),D=i(v,v.width-1,v.height-1),T=x||10;if(a(S,_)<T&&a(_,D)<T&&a(D,C)<T&&a(C,S)<T){const w=s([_,S,D,C]),R=[];for(let O=0;O<v.width*v.height;O++){const L=a(w,[v.data[O*4],v.data[O*4+1],v.data[O*4+2]]);R[O]=L<T?0:255}return R}}function c(v,x){for(let S=0;S<v.width*v.height;S++)v.data[4*S+3]=x[S]}function d(v,x,S){const _=[1,1,1,1,0,1,1,1,1],C=Math.round(Math.sqrt(_.length)),D=Math.floor(C/2),T=[];for(let w=0;w<S;w++)for(let R=0;R<x;R++){const O=w*x+R;let L=0;for(let I=0;I<C;I++)for(let B=0;B<C;B++){const F=w+I-D,z=R+B-D;if(F>=0&&F<S&&z>=0&&z<x){const j=F*x+z,Z=_[I*C+B];L+=v[j]*Z}}T[O]=L===255*8?255:0}return T}function f(v,x,S){const _=[1,1,1,1,1,1,1,1,1],C=Math.round(Math.sqrt(_.length)),D=Math.floor(C/2),T=[];for(let w=0;w<S;w++)for(let R=0;R<x;R++){const O=w*x+R;let L=0;for(let I=0;I<C;I++)for(let B=0;B<C;B++){const F=w+I-D,z=R+B-D;if(F>=0&&F<S&&z>=0&&z<x){const j=F*x+z,Z=_[I*C+B];L+=v[j]*Z}}T[O]=L>=255*4?255:0}return T}function g(v,x,S){const _=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],C=Math.round(Math.sqrt(_.length)),D=Math.floor(C/2),T=[];for(let w=0;w<S;w++)for(let R=0;R<x;R++){const O=w*x+R;let L=0;for(let I=0;I<C;I++)for(let B=0;B<C;B++){const F=w+I-D,z=R+B-D;if(F>=0&&F<S&&z>=0&&z<x){const j=F*x+z,Z=_[I*C+B];L+=v[j]*Z}}T[O]=L}return T}const m=function(v){const x=this.threshold();let S=o(v,x);return S&&(S=d(S,v.width,v.height),S=f(S,v.width,v.height),S=g(S,v.width,v.height),c(v,S)),v};return pg.Mask=m,n.Factory.addGetterSetter(t.Node,"threshold",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),pg}var gg={},R6;function KV(){if(R6)return gg;R6=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.Noise=void 0;const n=ke(),t=Qn(),e=Fe(),i=function(a){const s=this.noise()*255,o=a.data,c=o.length,d=s/2;for(let f=0;f<c;f+=4)o[f+0]+=d-2*d*Math.random(),o[f+1]+=d-2*d*Math.random(),o[f+2]+=d-2*d*Math.random()};return gg.Noise=i,n.Factory.addGetterSetter(t.Node,"noise",.2,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),gg}var mg={},M6;function WV(){if(M6)return mg;M6=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.Pixelate=void 0;const n=ke(),t=Un(),e=Qn(),i=Fe(),a=function(s){let o=Math.ceil(this.pixelSize()),c=s.width,d=s.height,f=Math.ceil(c/o),g=Math.ceil(d/o),m=s.data;if(o<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let v=0;v<f;v+=1)for(let x=0;x<g;x+=1){let S=0,_=0,C=0,D=0;const T=v*o,w=T+o,R=x*o,O=R+o;let L=0;for(let I=T;I<w;I+=1)if(!(I>=c))for(let B=R;B<O;B+=1){if(B>=d)continue;const F=(c*B+I)*4;S+=m[F+0],_+=m[F+1],C+=m[F+2],D+=m[F+3],L+=1}S=S/L,_=_/L,C=C/L,D=D/L;for(let I=T;I<w;I+=1)if(!(I>=c))for(let B=R;B<O;B+=1){if(B>=d)continue;const F=(c*B+I)*4;m[F+0]=S,m[F+1]=_,m[F+2]=C,m[F+3]=D}}};return mg.Pixelate=a,n.Factory.addGetterSetter(e.Node,"pixelSize",8,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),mg}var vg={},D6;function $V(){if(D6)return vg;D6=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.Posterize=void 0;const n=ke(),t=Qn(),e=Fe(),i=function(a){const s=Math.round(this.levels()*254)+1,o=a.data,c=o.length,d=255/s;for(let f=0;f<c;f+=1)o[f]=Math.floor(o[f]/d)*d};return vg.Posterize=i,n.Factory.addGetterSetter(t.Node,"levels",.5,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),vg}var yg={},O6;function QV(){if(O6)return yg;O6=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.RGB=void 0;const n=ke(),t=Qn(),e=Fe(),i=function(a){const s=a.data,o=s.length,c=this.red(),d=this.green(),f=this.blue();for(let g=0;g<o;g+=4){const m=(.34*s[g]+.5*s[g+1]+.16*s[g+2])/255;s[g]=m*c,s[g+1]=m*d,s[g+2]=m*f,s[g+3]=s[g+3]}};return yg.RGB=i,n.Factory.addGetterSetter(t.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),n.Factory.addGetterSetter(t.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),n.Factory.addGetterSetter(t.Node,"blue",0,e.RGBComponent,n.Factory.afterSetFilter),yg}var bg={},N6;function ZV(){if(N6)return bg;N6=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.RGBA=void 0;const n=ke(),t=Qn(),e=Fe(),i=function(a){const s=a.data,o=s.length,c=this.red(),d=this.green(),f=this.blue(),g=this.alpha();for(let m=0;m<o;m+=4){const v=1-g;s[m]=c*g+s[m]*v,s[m+1]=d*g+s[m+1]*v,s[m+2]=f*g+s[m+2]*v}};return bg.RGBA=i,n.Factory.addGetterSetter(t.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),n.Factory.addGetterSetter(t.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),n.Factory.addGetterSetter(t.Node,"blue",0,e.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a}),bg}var xg={},L6;function JV(){if(L6)return xg;L6=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.Sepia=void 0;const n=function(t){const e=t.data,i=e.length;for(let a=0;a<i;a+=4){const s=e[a+0],o=e[a+1],c=e[a+2];e[a+0]=Math.min(255,s*.393+o*.769+c*.189),e[a+1]=Math.min(255,s*.349+o*.686+c*.168),e[a+2]=Math.min(255,s*.272+o*.534+c*.131)}};return xg.Sepia=n,xg}var Sg={},P6;function tY(){if(P6)return Sg;P6=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.Solarize=void 0;const n=function(t){const e=t.data,i=t.width,a=t.height,s=i*4;let o=a;do{const c=(o-1)*s;let d=i;do{const f=c+(d-1)*4;let g=e[f],m=e[f+1],v=e[f+2];g>127&&(g=255-g),m>127&&(m=255-m),v>127&&(v=255-v),e[f]=g,e[f+1]=m,e[f+2]=v}while(--d)}while(--o)};return Sg.Solarize=n,Sg}var _g={},k6;function eY(){if(k6)return _g;k6=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.Threshold=void 0;const n=ke(),t=Qn(),e=Fe(),i=function(a){const s=this.threshold()*255,o=a.data,c=o.length;for(let d=0;d<c;d+=1)o[d]=o[d]<s?0:255};return _g.Threshold=i,n.Factory.addGetterSetter(t.Node,"threshold",.5,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),_g}var B6;function nY(){if(B6)return Bp;B6=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.Konva=void 0;const n=BS(),t=AV(),e=wV(),i=CV(),a=TV(),s=RV(),o=MV(),c=h9(),d=EA(),f=f9(),g=DV(),m=OV(),v=NV(),x=LV(),S=p9(),_=PV(),C=kV(),D=BV(),T=zV(),w=FV(),R=IV(),O=HV(),L=GV(),I=jV(),B=UV(),F=qV(),z=VV(),j=YV(),Z=XV(),nt=KV(),it=WV(),et=$V(),Q=QV(),k=ZV(),U=JV(),$=tY(),H=eY();return Bp.Konva=n.Konva.Util._assign(n.Konva,{Arc:t.Arc,Arrow:e.Arrow,Circle:i.Circle,Ellipse:a.Ellipse,Image:s.Image,Label:o.Label,Tag:o.Tag,Line:c.Line,Path:d.Path,Rect:f.Rect,RegularPolygon:g.RegularPolygon,Ring:m.Ring,Sprite:v.Sprite,Star:x.Star,Text:S.Text,TextPath:_.TextPath,Transformer:C.Transformer,Wedge:D.Wedge,Filters:{Blur:T.Blur,Brighten:w.Brighten,Contrast:R.Contrast,Emboss:O.Emboss,Enhance:L.Enhance,Grayscale:I.Grayscale,HSL:B.HSL,HSV:F.HSV,Invert:z.Invert,Kaleidoscope:j.Kaleidoscope,Mask:Z.Mask,Noise:nt.Noise,Pixelate:it.Pixelate,Posterize:et.Posterize,RGB:Q.RGB,RGBA:k.RGBA,Sepia:U.Sepia,Solarize:$.Solarize,Threshold:H.Threshold}}),Bp}var iY=yv.exports,z6;function aY(){if(z6)return yv.exports;z6=1,Object.defineProperty(iY,"__esModule",{value:!0});const n=nY();return yv.exports=n.Konva,yv.exports}aY();var iv={exports:{}},F6;function rY(){return F6||(F6=1,function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var e=BS();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return e.Konva}});const i=BS();n.exports=i.Konva}(iv,iv.exports)),iv.exports}var sY=rY();const Fv=rr(sY);var eS={exports:{}},nS={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I6;function oY(){return I6||(I6=1,function(n){n.exports=function(t){function e(u,h,b,E){return new V1(u,h,b,E)}function i(){}function a(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){var h=u,b=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(b=h.return),u=h.return;while(u)}return h.tag===3?b:null}function o(u){if(s(u)!==u)throw Error(a(188))}function c(u){var h=u.alternate;if(!h){if(h=s(u),h===null)throw Error(a(188));return h!==u?null:u}for(var b=u,E=h;;){var N=b.return;if(N===null)break;var P=N.alternate;if(P===null){if(E=N.return,E!==null){b=E;continue}break}if(N.child===P.child){for(P=N.child;P;){if(P===b)return o(N),u;if(P===E)return o(N),h;P=P.sibling}throw Error(a(188))}if(b.return!==E.return)b=N,E=P;else{for(var W=!1,st=N.child;st;){if(st===b){W=!0,b=N,E=P;break}if(st===E){W=!0,E=N,b=P;break}st=st.sibling}if(!W){for(st=P.child;st;){if(st===b){W=!0,b=P,E=N;break}if(st===E){W=!0,E=P,b=N;break}st=st.sibling}if(!W)throw Error(a(189))}}if(b.alternate!==E)throw Error(a(190))}if(b.tag!==3)throw Error(a(188));return b.stateNode.current===b?u:h}function d(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=d(u),h!==null)return h;u=u.sibling}return null}function f(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(h=f(u),h!==null))return h;u=u.sibling}return null}function g(u){return u===null||typeof u!="object"?null:(u=Fd&&u[Fd]||u["@@iterator"],typeof u=="function"?u:null)}function m(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===tu?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case qo:return"Fragment";case zd:return"Profiler";case $c:return"StrictMode";case Zc:return"Suspense";case Jc:return"SuspenseList";case Vo:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case Is:return"Portal";case as:return(u.displayName||"Context")+".Provider";case If:return(u._context.displayName||"Context")+".Consumer";case xr:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Sr:return h=u.displayName||null,h!==null?h:m(u.type)||"Memo";case Oi:h=u._payload,u=u._init;try{return m(u(h))}catch{}}return null}function v(u){return{current:u}}function x(u){0>us||(u.current=cs[us],cs[us]=null,us--)}function S(u,h){us++,cs[us]=u.current,u.current=h}function _(u){return u>>>=0,u===0?32:31-(E0(u)/Xd|0)|0}function C(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function D(u,h,b){var E=u.pendingLanes;if(E===0)return 0;var N=0,P=u.suspendedLanes,W=u.pingedLanes;u=u.warmLanes;var st=E&134217727;return st!==0?(E=st&~P,E!==0?N=C(E):(W&=st,W!==0?N=C(W):b||(b=st&~u,b!==0&&(N=C(b))))):(st=E&~P,st!==0?N=C(st):W!==0?N=C(W):b||(b=E&~u,b!==0&&(N=C(b)))),N===0?0:h!==0&&h!==N&&(h&P)===0&&(P=N&-N,b=h&-h,P>=b||P===32&&(b&4194048)!==0)?h:N}function T(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function w(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R(){var u=hu;return hu<<=1,(hu&4194048)===0&&(hu=256),u}function O(){var u=Yl;return Yl<<=1,(Yl&62914560)===0&&(Yl=4194304),u}function L(u){for(var h=[],b=0;31>b;b++)h.push(u);return h}function I(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function B(u,h,b,E,N,P){var W=u.pendingLanes;u.pendingLanes=b,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=b,u.entangledLanes&=b,u.errorRecoveryDisabledLanes&=b,u.shellSuspendCounter=0;var st=u.entanglements,ft=u.expirationTimes,Ct=u.hiddenUpdates;for(b=W&~b;0<b;){var Ot=31-Qi(b),zt=1<<Ot;st[Ot]=0,ft[Ot]=-1;var Ft=Ct[Ot];if(Ft!==null)for(Ct[Ot]=null,Ot=0;Ot<Ft.length;Ot++){var me=Ft[Ot];me!==null&&(me.lane&=-536870913)}b&=~zt}E!==0&&F(u,E,0),P!==0&&N===0&&u.tag!==0&&(u.suspendedLanes|=P&~(W&~h))}function F(u,h,b){u.pendingLanes|=h,u.suspendedLanes&=~h;var E=31-Qi(h);u.entangledLanes|=h,u.entanglements[E]=u.entanglements[E]|1073741824|b&4194090}function z(u,h){var b=u.entangledLanes|=h;for(u=u.entanglements;b;){var E=31-Qi(b),N=1<<E;N&h|u[E]&h&&(u[E]|=h),b&=~N}}function j(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Z(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function nt(u){if(typeof R0=="function"&&M0(u),Li&&typeof Li.setStrictMode=="function")try{Li.setStrictMode(qs,u)}catch{}}function it(u){if($d===void 0)try{throw Error()}catch(b){var h=b.stack.trim().match(/\n( *(at )?)/);$d=h&&h[1]||"",dp=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$d+u+dp}function et(u,h){if(!u||Qd)return"";Qd=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(h){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(me){var Ft=me}Reflect.construct(u,[],zt)}else{try{zt.call()}catch(me){Ft=me}u.call(zt.prototype)}}else{try{throw Error()}catch(me){Ft=me}(zt=u())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(me){if(me&&Ft&&typeof me.stack=="string")return[me.stack,Ft.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=E.DetermineComponentFrameRoot(),W=P[0],st=P[1];if(W&&st){var ft=W.split(`
`),Ct=st.split(`
`);for(N=E=0;E<ft.length&&!ft[E].includes("DetermineComponentFrameRoot");)E++;for(;N<Ct.length&&!Ct[N].includes("DetermineComponentFrameRoot");)N++;if(E===ft.length||N===Ct.length)for(E=ft.length-1,N=Ct.length-1;1<=E&&0<=N&&ft[E]!==Ct[N];)N--;for(;1<=E&&0<=N;E--,N--)if(ft[E]!==Ct[N]){if(E!==1||N!==1)do if(E--,N--,0>N||ft[E]!==Ct[N]){var Ot=`
`+ft[E].replace(" at new "," at ");return u.displayName&&Ot.includes("<anonymous>")&&(Ot=Ot.replace("<anonymous>",u.displayName)),Ot}while(1<=E&&0<=N);break}}}finally{Qd=!1,Error.prepareStackTrace=b}return(b=u?u.displayName||u.name:"")?it(b):""}function Q(u){switch(u.tag){case 26:case 27:case 5:return it(u.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return et(u.type,!1);case 11:return et(u.type.render,!1);case 1:return et(u.type,!0);case 31:return it("Activity");default:return""}}function k(u){try{var h="";do h+=Q(u),u=u.return;while(u);return h}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function U(u,h){if(typeof u=="object"&&u!==null){var b=Zd.get(u);return b!==void 0?b:(h={value:u,source:h,stack:k(h)},Zd.set(u,h),h)}return{value:u,source:h,stack:k(h)}}function $(u,h){Vs[Ys++]=Xl,Vs[Ys++]=pu,pu=u,Xl=h}function H(u,h,b){Pi[Zi++]=Ya,Pi[Zi++]=wr,Pi[Zi++]=Xs,Xs=u;var E=Ya;u=wr;var N=32-Qi(E)-1;E&=~(1<<N),b+=1;var P=32-Qi(h)+N;if(30<P){var W=N-N%5;P=(E&(1<<W)-1).toString(32),E>>=W,N-=W,Ya=1<<32-Qi(h)+N|b<<N|E,wr=P+u}else Ya=1<<P|b<<N|E,wr=u}function V(u){u.return!==null&&($(u,1),H(u,1,0))}function at(u){for(;u===pu;)pu=Vs[--Ys],Vs[Ys]=null,Xl=Vs[--Ys],Vs[Ys]=null;for(;u===Xs;)Xs=Pi[--Zi],Pi[Zi]=null,wr=Pi[--Zi],Pi[Zi]=null,Ya=Pi[--Zi],Pi[Zi]=null}function K(u,h){S(Ks,h),S(Wo,u),S(bn,null),u=Gf(h),x(bn),S(bn,u)}function ut(){x(bn),x(Wo),x(Ks)}function xt(u){u.memoizedState!==null&&S(gu,u);var h=bn.current,b=jf(h,u.type);h!==b&&(S(Wo,u),S(bn,b))}function ot(u){Wo.current===u&&(x(bn),x(Wo)),gu.current===u&&(x(gu),ss?Ar._currentValue=$i:Ar._currentValue2=$i)}function tt(u){var h=Error(a(418,""));throw Gt(U(h,u)),hp}function ct(u,h){if(!Ki)throw Error(a(175));b0(u.stateNode,u.type,u.memoizedProps,h,u)||tt(u)}function At(u){for(Cn=u.return;Cn;)switch(Cn.tag){case 5:case 13:Ve=!1;return;case 27:case 3:Ve=!0;return;default:Cn=Cn.return}}function Mt(u){if(!Ki||u!==Cn)return!1;if(!Be)return At(u),Be=!0,!1;var h=u.tag;if(Te?h!==3&&h!==27&&(h!==5||rp(u.type)&&!rs(u.type,u.memoizedProps))&&In&&tt(u):h!==3&&(h!==5||rp(u.type)&&!rs(u.type,u.memoizedProps))&&In&&tt(u),At(u),h===13){if(!Ki)throw Error(a(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));In=qd(u)}else In=Te&&h===27?np(u.type,In):Cn?p0(u.stateNode):null;return!0}function Pt(){Ki&&(In=Cn=null,Be=!1)}function Bt(){var u=Xa;return u!==null&&(Si===null?Si=u:Si.push.apply(Si,u),Xa=null),u}function Gt(u){Xa===null?Xa=[u]:Xa.push(u)}function de(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}function Nt(u,h,b){ss?(S(mu,h._currentValue),h._currentValue=b):(S(mu,h._currentValue2),h._currentValue2=b)}function we(u){var h=mu.current;ss?u._currentValue=h:u._currentValue2=h,x(mu)}function kt(u,h,b){for(;u!==null;){var E=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),u===b)break;u=u.return}}function Ae(u,h,b,E){var N=u.child;for(N!==null&&(N.return=u);N!==null;){var P=N.dependencies;if(P!==null){var W=N.child;P=P.firstContext;t:for(;P!==null;){var st=P;P=N;for(var ft=0;ft<h.length;ft++)if(st.context===h[ft]){P.lanes|=b,st=P.alternate,st!==null&&(st.lanes|=b),kt(P.return,b,u),E||(W=null);break t}P=st.next}}else if(N.tag===18){if(W=N.return,W===null)throw Error(a(341));W.lanes|=b,P=W.alternate,P!==null&&(P.lanes|=b),kt(W,b,u),W=null}else W=N.child;if(W!==null)W.return=N;else for(W=N;W!==null;){if(W===u){W=null;break}if(N=W.sibling,N!==null){N.return=W.return,W=N;break}W=W.return}N=W}}function rn(u,h,b,E){u=null;for(var N=h,P=!1;N!==null;){if(!P){if((N.flags&524288)!==0)P=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var W=N.alternate;if(W===null)throw Error(a(387));if(W=W.memoizedProps,W!==null){var st=N.type;ca(N.pendingProps.value,W.value)||(u!==null?u.push(st):u=[st])}}else if(N===gu.current){if(W=N.alternate,W===null)throw Error(a(387));W.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(u!==null?u.push(Ar):u=[Ar])}N=N.return}u!==null&&Ae(h,u,b,E),h.flags|=262144}function sn(u){for(u=u.firstContext;u!==null;){var h=u.context;if(!ca(ss?h._currentValue:h._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function vn(u){Ka=u,yi=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function $t(u){return Dt(Ka,u)}function Ce(u,h){return Ka===null&&vn(u),Dt(u,h)}function Dt(u,h){var b=ss?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:b,next:null},yi===null){if(u===null)throw Error(a(308));yi=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else yi=yi.next=h;return b}function Ht(){return{controller:new D0,data:new Map,refCount:0}}function ee(u){u.refCount--,u.refCount===0&&O0(vu,function(){u.controller.abort()})}function Xt(u){u!==Ws&&u.next===null&&(Ws===null?yu=Ws=u:Ws=Ws.next=u),Kl=!0,Jd||(Jd=!0,Rt())}function ie(u,h){if(!bu&&Kl){bu=!0;do for(var b=!1,E=yu;E!==null;){if(u!==0){var N=E.pendingLanes;if(N===0)var P=0;else{var W=E.suspendedLanes,st=E.pingedLanes;P=(1<<31-Qi(42|u)+1)-1,P&=N&~(W&~st),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(b=!0,En(E,P))}else P=Se,P=D(E,E===He?P:0,E.cancelPendingCommit!==null||E.timeoutHandle!==Ra),(P&3)===0||T(E,P)||(b=!0,En(E,P));E=E.next}while(b);bu=!1}}function Me(){Ze()}function Ze(){Kl=Jd=!1;var u=0;ds!==0&&(qf()&&(u=ds),ds=0);for(var h=en(),b=null,E=yu;E!==null;){var N=E.next,P=yn(E,h);P===0?(E.next=null,b===null?yu=N:b.next=N,N===null&&(Ws=b)):(b=E,(u!==0||(P&3)!==0)&&(Kl=!0)),E=N}ie(u)}function yn(u,h){for(var b=u.suspendedLanes,E=u.pingedLanes,N=u.expirationTimes,P=u.pendingLanes&-62914561;0<P;){var W=31-Qi(P),st=1<<W,ft=N[W];ft===-1?((st&b)===0||(st&E)!==0)&&(N[W]=w(st,h)):ft<=h&&(u.expiredLanes|=st),P&=~st}if(h=He,b=Se,b=D(u,u===h?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==Ra),E=u.callbackNode,b===0||u===h&&(We===2||We===9)||u.cancelPendingCommit!==null)return E!==null&&E!==null&&Kd(E),u.callbackNode=null,u.callbackPriority=0;if((b&3)===0||T(u,b)){if(h=b&-b,h===u.callbackPriority)return h;switch(E!==null&&Kd(E),Z(b)){case 2:case 8:b=C0;break;case 32:b=Wd;break;case 268435456:b=T0;break;default:b=Wd}return E=si.bind(null,u),b=fu(b,E),u.callbackPriority=h,u.callbackNode=b,h}return E!==null&&E!==null&&Kd(E),u.callbackPriority=2,u.callbackNode=null,2}function si(u,h){if(Xn!==0&&Xn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var b=u.callbackNode;if(Ta()&&u.callbackNode!==b)return null;var E=Se;return E=D(u,u===He?E:0,u.cancelPendingCommit!==null||u.timeoutHandle!==Ra),E===0?null:(Kc(u,E,h),yn(u,en()),u.callbackNode!=null&&u.callbackNode===b?si.bind(null,u):null)}function En(u,h){if(Ta())return null;Kc(u,h,!0)}function Rt(){Xf?Km(function(){(Jt&6)!==0?fu(ei,Me):Ze()}):fu(ei,Me)}function qt(){return ds===0&&(ds=R()),ds}function $e(u,h){if(Wl===null){var b=Wl=[];Wa=0,dn=qt(),$s={status:"pending",value:void 0,then:function(E){b.push(E)}}}return Wa++,h.then(Sn,Sn),h}function Sn(){if(--Wa===0&&Wl!==null){$s!==null&&($s.status="fulfilled");var u=Wl;Wl=null,dn=0,$s=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function sr(u,h){var b=[],E={status:"pending",value:null,reason:null,then:function(N){b.push(N)}};return u.then(function(){E.status="fulfilled",E.value=h;for(var N=0;N<b.length;N++)(0,b[N])(h)},function(N){for(E.status="rejected",E.reason=N,N=0;N<b.length;N++)(0,b[N])(void 0)}),E}function Gr(){var u=An.current;return u!==null?u:He.pooledCache}function Ci(u,h){h===null?S(An,An.current):S(An,h.pool)}function or(){var u=Gr();return u===null?null:{parent:ss?Ke._currentValue:Ke._currentValue2,pool:u}}function Ti(u,h){if(ca(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var b=Object.keys(u),E=Object.keys(h);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var N=b[E];if(!Q1.call(h,N)||!ca(u[N],h[N]))return!1}return!0}function jr(u){return u=u.status,u==="fulfilled"||u==="rejected"}function _a(){}function Ur(u,h,b){switch(b=u[b],b===void 0?u.push(h):b!==h&&(h.then(_a,_a),h=b),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,vl(u),u;default:if(typeof h.status=="string")h.then(_a,_a);else{if(u=He,u!==null&&100<u.shellSuspendCounter)throw Error(a(482));u=h,u.status="pending",u.then(function(E){if(h.status==="pending"){var N=h;N.status="fulfilled",N.value=E}},function(E){if(h.status==="pending"){var N=h;N.status="rejected",N.reason=E}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,vl(u),u}throw Ji=h,$l}}function ml(){if(Ji===null)throw Error(a(459));var u=Ji;return Ji=null,u}function vl(u){if(u===$l||u===cn)throw Error(a(483))}function _o(){for(var u=$o,h=pp=$o=0;h<u;){var b=ua[h];ua[h++]=null;var E=ua[h];ua[h++]=null;var N=ua[h];ua[h++]=null;var P=ua[h];if(ua[h++]=null,E!==null&&N!==null){var W=E.pending;W===null?N.next=N:(N.next=W.next,W.next=N),E.pending=N}P!==0&&Ri(b,N,P)}}function yl(u,h,b,E){ua[$o++]=u,ua[$o++]=h,ua[$o++]=b,ua[$o++]=E,pp|=E,u.lanes|=E,u=u.alternate,u!==null&&(u.lanes|=E)}function qn(u,h,b,E){return yl(u,h,b,E),qr(u)}function on(u,h){return yl(u,null,null,h),qr(u)}function Ri(u,h,b){u.lanes|=b;var E=u.alternate;E!==null&&(E.lanes|=b);for(var N=!1,P=u.return;P!==null;)P.childLanes|=b,E=P.alternate,E!==null&&(E.childLanes|=b),P.tag===22&&(u=P.stateNode,u===null||u._visibility&1||(N=!0)),u=P,P=P.return;return u.tag===3?(P=u.stateNode,N&&h!==null&&(N=31-Qi(b),u=P.hiddenUpdates,E=u[N],E===null?u[N]=[h]:E.push(h),h.lane=b|536870912),P):null}function qr(u){if(50<so)throw so=0,rh=null,Error(a(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}function Rc(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nf(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function ws(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Vr(u,h,b){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(Jt&2)!==0){var N=E.pending;return N===null?h.next=h:(h.next=N.next,N.next=h),E.pending=h,h=qr(u),Ri(u,null,b),h}return yl(u,E,h,b),qr(u)}function Yr(u,h,b){if(h=h.updateQueue,h!==null&&(h=h.shared,(b&4194048)!==0)){var E=h.lanes;E&=u.pendingLanes,b|=E,h.lanes=b,z(u,b)}}function Mc(u,h){var b=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var N=null,P=null;if(b=b.firstBaseUpdate,b!==null){do{var W={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};P===null?N=P=W:P=P.next=W,b=b.next}while(b!==null);P===null?N=P=h:P=P.next=h}else N=P=h;b={baseState:E.baseState,firstBaseUpdate:N,lastBaseUpdate:P,shared:E.shared,callbacks:E.callbacks},u.updateQueue=b;return}u=b.lastBaseUpdate,u===null?b.firstBaseUpdate=h:u.next=h,b.lastBaseUpdate=h}function lr(){if(ki){var u=$s;if(u!==null)throw u}}function cr(u,h,b,E){ki=!1;var N=u.updateQueue;Cr=!1;var P=N.firstBaseUpdate,W=N.lastBaseUpdate,st=N.shared.pending;if(st!==null){N.shared.pending=null;var ft=st,Ct=ft.next;ft.next=null,W===null?P=Ct:W.next=Ct,W=ft;var Ot=u.alternate;Ot!==null&&(Ot=Ot.updateQueue,st=Ot.lastBaseUpdate,st!==W&&(st===null?Ot.firstBaseUpdate=Ct:st.next=Ct,Ot.lastBaseUpdate=ft))}if(P!==null){var zt=N.baseState;W=0,Ot=Ct=ft=null,st=P;do{var Ft=st.lane&-536870913,me=Ft!==st.lane;if(me?(Se&Ft)===Ft:(E&Ft)===Ft){Ft!==0&&Ft===dn&&(ki=!0),Ot!==null&&(Ot=Ot.next={lane:0,tag:st.tag,payload:st.payload,callback:null,next:null});t:{var Oa=u,oo=st;Ft=h;var Na=b;switch(oo.tag){case 1:if(Oa=oo.payload,typeof Oa=="function"){zt=Oa.call(Na,zt,Ft);break t}zt=Oa;break t;case 3:Oa.flags=Oa.flags&-65537|128;case 0:if(Oa=oo.payload,Ft=typeof Oa=="function"?Oa.call(Na,zt,Ft):Oa,Ft==null)break t;zt=jo({},zt,Ft);break t;case 2:Cr=!0}}Ft=st.callback,Ft!==null&&(u.flags|=64,me&&(u.flags|=8192),me=N.callbacks,me===null?N.callbacks=[Ft]:me.push(Ft))}else me={lane:Ft,tag:st.tag,payload:st.payload,callback:st.callback,next:null},Ot===null?(Ct=Ot=me,ft=zt):Ot=Ot.next=me,W|=Ft;if(st=st.next,st===null){if(st=N.shared.pending,st===null)break;me=st,st=me.next,me.next=null,N.lastBaseUpdate=me,N.shared.pending=null}}while(!0);Ot===null&&(ft=zt),N.baseState=ft,N.firstBaseUpdate=Ct,N.lastBaseUpdate=Ot,P===null&&(N.shared.lanes=0),jn|=W,u.lanes=W,u.memoizedState=zt}}function bl(u,h){if(typeof u!="function")throw Error(a(191,u));u.call(h)}function Ao(u,h){var b=u.callbacks;if(b!==null)for(u.callbacks=null,u=0;u<b.length;u++)bl(b[u],h)}function Vn(u,h){u=Pn,S(xu,u),S(bi,h),Pn=u|h.baseLanes}function td(){S(xu,Pn),S(bi,bi.current)}function ed(){Pn=xu.current,x(bi),x(xu)}function ln(){throw Error(a(321))}function Cs(u,h){if(h===null)return!1;for(var b=0;b<h.length&&b<u.length;b++)if(!ca(u[b],h[b]))return!1;return!0}function af(u,h,b,E,N,P){return Hn=P,ve=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Zt.H=u===null||u.memoizedState===null?Qo:gp,hs=!1,P=b(E,N),hs=!1,Qs&&(P=sf(h,b,E,N)),rf(u),P}function rf(u){Zt.H=Zs;var h=Ne!==null&&Ne.next!==null;if(Hn=0,hn=Ne=ve=null,$a=!1,Ql=0,Qa=null,h)throw Error(a(300));u===null||le||(u=u.dependencies,u!==null&&sn(u)&&(le=!0))}function sf(u,h,b,E){ve=u;var N=0;do{if(Qs&&(Qa=null),Ql=0,Qs=!1,25<=N)throw Error(a(301));if(N+=1,hn=Ne=null,u.updateQueue!=null){var P=u.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}Zt.H=N0,P=h(b,E)}while(Qs);return P}function I1(){var u=Zt.H,h=u.useState()[0];return h=typeof h.then=="function"?Eo(h):h,u=u.useState()[0],(Ne!==null?Ne.memoizedState:null)!==u&&(ve.flags|=1024),h}function xl(){var u=da!==0;return da=0,u}function Sl(u,h,b){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~b}function ja(u){if($a){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}$a=!1}Hn=0,hn=Ne=ve=null,Qs=!1,Ql=da=0,Qa=null}function hi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?ve.memoizedState=hn=u:hn=hn.next=u,hn}function Ln(){if(Ne===null){var u=ve.alternate;u=u!==null?u.memoizedState:null}else u=Ne.next;var h=hn===null?ve.memoizedState:hn.next;if(h!==null)hn=h,Ne=u;else{if(u===null)throw ve.alternate===null?Error(a(467)):Error(a(310));Ne=u,u={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},hn===null?ve.memoizedState=hn=u:hn=hn.next=u}return hn}function Ts(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(u){var h=Ql;return Ql+=1,Qa===null&&(Qa=[]),u=Ur(Qa,u,h),h=ve,(hn===null?h.memoizedState:hn.next)===null&&(h=h.alternate,Zt.H=h===null||h.memoizedState===null?Qo:gp),u}function _l(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Eo(u);if(u.$$typeof===as)return $t(u)}throw Error(a(438,String(u)))}function of(u){var h=null,b=ve.updateQueue;if(b!==null&&(h=b.memoCache),h==null){var E=ve.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(h={data:E.data.map(function(N){return N.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),b===null&&(b=Ts(),ve.updateQueue=b),b.memoCache=h,b=h.data[h.index],b===void 0)for(b=h.data[h.index]=Array(u),E=0;E<u;E++)b[E]=Hf;return h.index++,b}function ur(u,h){return typeof h=="function"?h(u):h}function Mi(u){var h=Ln();return nd(h,Ne,u)}function nd(u,h,b){var E=u.queue;if(E===null)throw Error(a(311));E.lastRenderedReducer=b;var N=u.baseQueue,P=E.pending;if(P!==null){if(N!==null){var W=N.next;N.next=P.next,P.next=W}h.baseQueue=N=P,E.pending=null}if(P=u.baseState,N===null)u.memoizedState=P;else{h=N.next;var st=W=null,ft=null,Ct=h,Ot=!1;do{var zt=Ct.lane&-536870913;if(zt!==Ct.lane?(Se&zt)===zt:(Hn&zt)===zt){var Ft=Ct.revertLane;if(Ft===0)ft!==null&&(ft=ft.next={lane:0,revertLane:0,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),zt===dn&&(Ot=!0);else if((Hn&Ft)===Ft){Ct=Ct.next,Ft===dn&&(Ot=!0);continue}else zt={lane:0,revertLane:Ct.revertLane,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},ft===null?(st=ft=zt,W=P):ft=ft.next=zt,ve.lanes|=Ft,jn|=Ft;zt=Ct.action,hs&&b(P,zt),P=Ct.hasEagerState?Ct.eagerState:b(P,zt)}else Ft={lane:zt,revertLane:Ct.revertLane,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},ft===null?(st=ft=Ft,W=P):ft=ft.next=Ft,ve.lanes|=zt,jn|=zt;Ct=Ct.next}while(Ct!==null&&Ct!==h);if(ft===null?W=P:ft.next=st,!ca(P,u.memoizedState)&&(le=!0,Ot&&(b=$s,b!==null)))throw b;u.memoizedState=P,u.baseState=W,u.baseQueue=ft,E.lastRenderedState=P}return N===null&&(E.lanes=0),[u.memoizedState,E.dispatch]}function lf(u){var h=Ln(),b=h.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=u;var E=b.dispatch,N=b.pending,P=h.memoizedState;if(N!==null){b.pending=null;var W=N=N.next;do P=u(P,W.action),W=W.next;while(W!==N);ca(P,h.memoizedState)||(le=!0),h.memoizedState=P,h.baseQueue===null&&(h.baseState=P),b.lastRenderedState=P}return[P,E]}function Dc(u,h,b){var E=ve,N=Ln(),P=Be;if(P){if(b===void 0)throw Error(a(407));b=b()}else b=h();var W=!ca((Ne||N).memoizedState,b);W&&(N.memoizedState=b,le=!0),N=N.queue;var st=bm.bind(null,E,N,u);if(To(2048,8,st,[u]),N.getSnapshot!==h||W||hn!==null&&hn.memoizedState.tag&1){if(E.flags|=2048,Rs(9,Xr(),Oc.bind(null,E,N,b,h),null),He===null)throw Error(a(349));P||(Hn&124)!==0||cf(E,h,b)}return b}function cf(u,h,b){u.flags|=16384,u={getSnapshot:h,value:b},h=ve.updateQueue,h===null?(h=Ts(),ve.updateQueue=h,h.stores=[u]):(b=h.stores,b===null?h.stores=[u]:b.push(u))}function Oc(u,h,b,E){h.value=b,h.getSnapshot=E,ia(h)&&id(u)}function bm(u,h,b){return b(function(){ia(h)&&id(u)})}function ia(u){var h=u.getSnapshot;u=u.value;try{var b=h();return!ca(u,b)}catch{return!0}}function id(u){var h=on(u,2);h!==null&&gi(h,u,2)}function ad(u){var h=hi();if(typeof u=="function"){var b=u;if(u=b(),hs){nt(!0);try{b()}finally{nt(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:u},h}function rd(u,h,b,E){return u.baseState=b,nd(u,Ne,typeof E=="function"?E:ur)}function Al(u,h,b,E,N){if(zc(u))throw Error(a(485));if(u=h.action,u!==null){var P={payload:N,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){P.listeners.push(W)}};Zt.T!==null?b(!0):P.isTransition=!1,E(P),b=h.pending,b===null?(P.next=h.pending=P,uf(h,P)):(P.next=b.next,h.pending=b.next=P)}}function uf(u,h){var b=h.action,E=h.payload,N=u.state;if(h.isTransition){var P=Zt.T,W={};Zt.T=W;try{var st=b(N,E),ft=Zt.S;ft!==null&&ft(W,st),df(u,h,st)}catch(Ct){hf(u,h,Ct)}finally{Zt.T=P}}else try{P=b(N,E),df(u,h,P)}catch(Ct){hf(u,h,Ct)}}function df(u,h,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){wo(u,h,E)},function(E){return hf(u,h,E)}):wo(u,h,b)}function wo(u,h,b){h.status="fulfilled",h.value=b,ff(h),u.state=b,h=u.pending,h!==null&&(b=h.next,b===h?u.pending=null:(b=b.next,h.next=b,uf(u,b)))}function hf(u,h,b){var E=u.pending;if(u.pending=null,E!==null){E=E.next;do h.status="rejected",h.reason=b,ff(h),h=h.next;while(h!==E)}u.action=null}function ff(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function pf(u,h){return h}function sd(u,h){if(Be){var b=He.formState;if(b!==null){t:{var E=ve;if(Be){if(In){var N=h0(In,Ve);if(N){In=p0(N),E=f0(N);break t}}tt(E)}E=!1}E&&(h=b[0])}}b=hi(),b.memoizedState=b.baseState=h,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pf,lastRenderedState:h},b.queue=E,b=ud.bind(null,ve,E),E.dispatch=b,E=ad(!1);var P=Rl.bind(null,ve,!1,E.queue);return E=hi(),N={state:h,dispatch:null,action:u,pending:null},E.queue=N,b=Al.bind(null,ve,N,P,b),N.dispatch=b,E.memoizedState=u,[h,b,!1]}function xm(u){var h=Ln();return Sm(h,Ne,u)}function Sm(u,h,b){if(h=nd(u,h,pf)[0],u=Mi(ur)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var E=Eo(h)}catch(W){throw W===$l?cn:W}else E=h;h=Ln();var N=h.queue,P=N.dispatch;return b!==h.memoizedState&&(ve.flags|=2048,Rs(9,Xr(),od.bind(null,N,b),null)),[E,P,u]}function od(u,h){u.action=h}function ld(u){var h=Ln(),b=Ne;if(b!==null)return Sm(h,b,u);Ln(),h=h.memoizedState,b=Ln();var E=b.queue.dispatch;return b.memoizedState=u,[h,E,!1]}function Rs(u,h,b,E){return u={tag:u,create:b,deps:E,inst:h,next:null},h=ve.updateQueue,h===null&&(h=Ts(),ve.updateQueue=h),b=h.lastEffect,b===null?h.lastEffect=u.next=u:(E=b.next,b.next=u,u.next=E,h.lastEffect=u),u}function Xr(){return{destroy:void 0,resource:void 0}}function Co(){return Ln().memoizedState}function Nc(u,h,b,E){var N=hi();E=E===void 0?null:E,ve.flags|=u,N.memoizedState=Rs(1|h,Xr(),b,E)}function To(u,h,b,E){var N=Ln();E=E===void 0?null:E;var P=N.memoizedState.inst;Ne!==null&&E!==null&&Cs(E,Ne.memoizedState.deps)?N.memoizedState=Rs(h,P,b,E):(ve.flags|=u,N.memoizedState=Rs(1|h,P,b,E))}function gf(u,h){Nc(8390656,8,u,h)}function El(u,h){To(2048,8,u,h)}function dr(u,h){return To(4,2,u,h)}function cd(u,h){return To(4,4,u,h)}function wl(u,h){if(typeof h=="function"){u=u();var b=h(u);return function(){typeof b=="function"?b():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function Kr(u,h,b){b=b!=null?b.concat([u]):null,To(4,4,wl.bind(null,h,u),b)}function Lc(){}function Pc(u,h){var b=Ln();h=h===void 0?null:h;var E=b.memoizedState;return h!==null&&Cs(h,E[1])?E[0]:(b.memoizedState=[u,h],u)}function mf(u,h){var b=Ln();h=h===void 0?null:h;var E=b.memoizedState;if(h!==null&&Cs(h,E[1]))return E[0];if(E=u(),hs){nt(!0);try{u()}finally{nt(!1)}}return b.memoizedState=[E,h],E}function Cl(u,h,b){return b===void 0||(Hn&1073741824)!==0?u.memoizedState=h:(u.memoizedState=b,u=Bo(),ve.lanes|=u,jn|=u,b)}function kc(u,h,b,E){return ca(b,h)?b:bi.current!==null?(u=Cl(u,b,E),ca(u,h)||(le=!0),u):(Hn&42)===0?(le=!0,u.memoizedState=b):(u=Bo(),ve.lanes|=u,jn|=u,h)}function vf(u,h,b,E,N){var P=Va();ti(P!==0&&8>P?P:8);var W=Zt.T,st={};Zt.T=st,Rl(u,!1,h,b);try{var ft=N(),Ct=Zt.S;if(Ct!==null&&Ct(st,ft),ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var Ot=sr(ft,E);$r(u,h,Ot,Jn(u))}else $r(u,h,E,Jn(u))}catch(zt){$r(u,h,{then:function(){},status:"rejected",reason:zt},Jn())}finally{ti(P),Zt.T=W}}function Di(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:$i,baseState:$i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:$i},next:null};var b={};return h.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:b},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function Wr(){return $t(Ar)}function Bc(){return Ln().memoizedState}function Tl(){return Ln().memoizedState}function H1(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var b=Jn();u=ws(b);var E=Vr(h,u,b);E!==null&&(gi(E,h,b),Yr(E,h,b)),h={cache:Ht()},u.payload=h;return}h=h.return}}function yf(u,h,b){var E=Jn();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},zc(u)?_m(h,b):(b=qn(u,h,b,E),b!==null&&(gi(b,u,E),Am(b,h,E)))}function ud(u,h,b){var E=Jn();$r(u,h,b,E)}function $r(u,h,b,E){var N={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(zc(u))_m(h,N);else{var P=u.alternate;if(u.lanes===0&&(P===null||P.lanes===0)&&(P=h.lastRenderedReducer,P!==null))try{var W=h.lastRenderedState,st=P(W,b);if(N.hasEagerState=!0,N.eagerState=st,ca(st,W))return yl(u,h,N,0),He===null&&_o(),!1}catch{}finally{}if(b=qn(u,h,N,E),b!==null)return gi(b,u,E),Am(b,h,E),!0}return!1}function Rl(u,h,b,E){if(E={lane:2,revertLane:qt(),action:E,hasEagerState:!1,eagerState:null,next:null},zc(u)){if(h)throw Error(a(479))}else h=qn(u,b,E,2),h!==null&&gi(h,u,2)}function zc(u){var h=u.alternate;return u===ve||h!==null&&h===ve}function _m(u,h){Qs=$a=!0;var b=u.pending;b===null?h.next=h:(h.next=b.next,b.next=h),u.pending=h}function Am(u,h,b){if((b&4194048)!==0){var E=h.lanes;E&=u.pendingLanes,b|=E,h.lanes=b,z(u,b)}}function dd(u){var h=Zl;return Zl+=1,Tr===null&&(Tr=[]),Ur(Tr,u,h)}function Ro(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function hd(u,h){throw h.$$typeof===qm?Error(a(525)):(u=Object.prototype.toString.call(h),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function Em(u){var h=u._init;return h(u._payload)}function wm(u){function h(mt,dt){if(u){var bt=mt.deletions;bt===null?(mt.deletions=[dt],mt.flags|=16):bt.push(dt)}}function b(mt,dt){if(!u)return null;for(;dt!==null;)h(mt,dt),dt=dt.sibling;return null}function E(mt){for(var dt=new Map;mt!==null;)mt.key!==null?dt.set(mt.key,mt):dt.set(mt.index,mt),mt=mt.sibling;return dt}function N(mt,dt){return mt=ns(mt,dt),mt.index=0,mt.sibling=null,mt}function P(mt,dt,bt){return mt.index=bt,u?(bt=mt.alternate,bt!==null?(bt=bt.index,bt<dt?(mt.flags|=67108866,dt):bt):(mt.flags|=67108866,dt)):(mt.flags|=1048576,dt)}function W(mt){return u&&mt.alternate===null&&(mt.flags|=67108866),mt}function st(mt,dt,bt,Tt){return dt===null||dt.tag!==6?(dt=Ho(bt,mt.mode,Tt),dt.return=mt,dt):(dt=N(dt,bt),dt.return=mt,dt)}function ft(mt,dt,bt,Tt){var jt=bt.type;return jt===qo?Ot(mt,dt,bt.props.children,Tt,bt.key):dt!==null&&(dt.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Oi&&Em(jt)===dt.type)?(dt=N(dt,bt.props),Ro(dt,bt),dt.return=mt,dt):(dt=zl(bt.type,bt.key,bt.props,null,mt.mode,Tt),Ro(dt,bt),dt.return=mt,dt)}function Ct(mt,dt,bt,Tt){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==bt.containerInfo||dt.stateNode.implementation!==bt.implementation?(dt=Wc(bt,mt.mode,Tt),dt.return=mt,dt):(dt=N(dt,bt.children||[]),dt.return=mt,dt)}function Ot(mt,dt,bt,Tt,jt){return dt===null||dt.tag!==7?(dt=qa(bt,mt.mode,Tt,jt),dt.return=mt,dt):(dt=N(dt,bt),dt.return=mt,dt)}function zt(mt,dt,bt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return dt=Ho(""+dt,mt.mode,bt),dt.return=mt,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case Uo:return bt=zl(dt.type,dt.key,dt.props,null,mt.mode,bt),Ro(bt,dt),bt.return=mt,bt;case Is:return dt=Wc(dt,mt.mode,bt),dt.return=mt,dt;case Oi:var Tt=dt._init;return dt=Tt(dt._payload),zt(mt,dt,bt)}if(Hs(dt)||g(dt))return dt=qa(dt,mt.mode,bt,null),dt.return=mt,dt;if(typeof dt.then=="function")return zt(mt,dd(dt),bt);if(dt.$$typeof===as)return zt(mt,Ce(mt,dt),bt);hd(mt,dt)}return null}function Ft(mt,dt,bt,Tt){var jt=dt!==null?dt.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return jt!==null?null:st(mt,dt,""+bt,Tt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case Uo:return bt.key===jt?ft(mt,dt,bt,Tt):null;case Is:return bt.key===jt?Ct(mt,dt,bt,Tt):null;case Oi:return jt=bt._init,bt=jt(bt._payload),Ft(mt,dt,bt,Tt)}if(Hs(bt)||g(bt))return jt!==null?null:Ot(mt,dt,bt,Tt,null);if(typeof bt.then=="function")return Ft(mt,dt,dd(bt),Tt);if(bt.$$typeof===as)return Ft(mt,dt,Ce(mt,bt),Tt);hd(mt,bt)}return null}function me(mt,dt,bt,Tt,jt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return mt=mt.get(bt)||null,st(dt,mt,""+Tt,jt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case Uo:return mt=mt.get(Tt.key===null?bt:Tt.key)||null,ft(dt,mt,Tt,jt);case Is:return mt=mt.get(Tt.key===null?bt:Tt.key)||null,Ct(dt,mt,Tt,jt);case Oi:var Je=Tt._init;return Tt=Je(Tt._payload),me(mt,dt,bt,Tt,jt)}if(Hs(Tt)||g(Tt))return mt=mt.get(bt)||null,Ot(dt,mt,Tt,jt,null);if(typeof Tt.then=="function")return me(mt,dt,bt,dd(Tt),jt);if(Tt.$$typeof===as)return me(mt,dt,bt,Ce(dt,Tt),jt);hd(dt,Tt)}return null}function Oa(mt,dt,bt,Tt){for(var jt=null,Je=null,ae=dt,Ge=dt=0,Kn=null;ae!==null&&Ge<bt.length;Ge++){ae.index>Ge?(Kn=ae,ae=null):Kn=ae.sibling;var je=Ft(mt,ae,bt[Ge],Tt);if(je===null){ae===null&&(ae=Kn);break}u&&ae&&je.alternate===null&&h(mt,ae),dt=P(je,dt,Ge),Je===null?jt=je:Je.sibling=je,Je=je,ae=Kn}if(Ge===bt.length)return b(mt,ae),Be&&$(mt,Ge),jt;if(ae===null){for(;Ge<bt.length;Ge++)ae=zt(mt,bt[Ge],Tt),ae!==null&&(dt=P(ae,dt,Ge),Je===null?jt=ae:Je.sibling=ae,Je=ae);return Be&&$(mt,Ge),jt}for(ae=E(ae);Ge<bt.length;Ge++)Kn=me(ae,mt,Ge,bt[Ge],Tt),Kn!==null&&(u&&Kn.alternate!==null&&ae.delete(Kn.key===null?Ge:Kn.key),dt=P(Kn,dt,Ge),Je===null?jt=Kn:Je.sibling=Kn,Je=Kn);return u&&ae.forEach(function(gs){return h(mt,gs)}),Be&&$(mt,Ge),jt}function oo(mt,dt,bt,Tt){if(bt==null)throw Error(a(151));for(var jt=null,Je=null,ae=dt,Ge=dt=0,Kn=null,je=bt.next();ae!==null&&!je.done;Ge++,je=bt.next()){ae.index>Ge?(Kn=ae,ae=null):Kn=ae.sibling;var gs=Ft(mt,ae,je.value,Tt);if(gs===null){ae===null&&(ae=Kn);break}u&&ae&&gs.alternate===null&&h(mt,ae),dt=P(gs,dt,Ge),Je===null?jt=gs:Je.sibling=gs,Je=gs,ae=Kn}if(je.done)return b(mt,ae),Be&&$(mt,Ge),jt;if(ae===null){for(;!je.done;Ge++,je=bt.next())je=zt(mt,je.value,Tt),je!==null&&(dt=P(je,dt,Ge),Je===null?jt=je:Je.sibling=je,Je=je);return Be&&$(mt,Ge),jt}for(ae=E(ae);!je.done;Ge++,je=bt.next())je=me(ae,mt,Ge,je.value,Tt),je!==null&&(u&&je.alternate!==null&&ae.delete(je.key===null?Ge:je.key),dt=P(je,dt,Ge),Je===null?jt=je:Je.sibling=je,Je=je);return u&&ae.forEach(function(Z1){return h(mt,Z1)}),Be&&$(mt,Ge),jt}function Na(mt,dt,bt,Tt){if(typeof bt=="object"&&bt!==null&&bt.type===qo&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case Uo:t:{for(var jt=bt.key;dt!==null;){if(dt.key===jt){if(jt=bt.type,jt===qo){if(dt.tag===7){b(mt,dt.sibling),Tt=N(dt,bt.props.children),Tt.return=mt,mt=Tt;break t}}else if(dt.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Oi&&Em(jt)===dt.type){b(mt,dt.sibling),Tt=N(dt,bt.props),Ro(Tt,bt),Tt.return=mt,mt=Tt;break t}b(mt,dt);break}else h(mt,dt);dt=dt.sibling}bt.type===qo?(Tt=qa(bt.props.children,mt.mode,Tt,bt.key),Tt.return=mt,mt=Tt):(Tt=zl(bt.type,bt.key,bt.props,null,mt.mode,Tt),Ro(Tt,bt),Tt.return=mt,mt=Tt)}return W(mt);case Is:t:{for(jt=bt.key;dt!==null;){if(dt.key===jt)if(dt.tag===4&&dt.stateNode.containerInfo===bt.containerInfo&&dt.stateNode.implementation===bt.implementation){b(mt,dt.sibling),Tt=N(dt,bt.children||[]),Tt.return=mt,mt=Tt;break t}else{b(mt,dt);break}else h(mt,dt);dt=dt.sibling}Tt=Wc(bt,mt.mode,Tt),Tt.return=mt,mt=Tt}return W(mt);case Oi:return jt=bt._init,bt=jt(bt._payload),Na(mt,dt,bt,Tt)}if(Hs(bt))return Oa(mt,dt,bt,Tt);if(g(bt)){if(jt=g(bt),typeof jt!="function")throw Error(a(150));return bt=jt.call(bt),oo(mt,dt,bt,Tt)}if(typeof bt.then=="function")return Na(mt,dt,dd(bt),Tt);if(bt.$$typeof===as)return Na(mt,dt,Ce(mt,bt),Tt);hd(mt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint"?(bt=""+bt,dt!==null&&dt.tag===6?(b(mt,dt.sibling),Tt=N(dt,bt),Tt.return=mt,mt=Tt):(b(mt,dt),Tt=Ho(bt,mt.mode,Tt),Tt.return=mt,mt=Tt),W(mt)):b(mt,dt)}return function(mt,dt,bt,Tt){try{Zl=0;var jt=Na(mt,dt,bt,Tt);return Tr=null,jt}catch(ae){if(ae===$l||ae===cn)throw ae;var Je=e(29,ae,null,mt.mode);return Je.lanes=Tt,Je.return=mt,Je}finally{}}}function Ms(u){var h=u.alternate;S(oe,oe.current&1),S(Ma,u),Rr===null&&(h===null||bi.current!==null||h.memoizedState!==null)&&(Rr=u)}function Cm(u){if(u.tag===22){if(S(oe,oe.current),S(Ma,u),Rr===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(Rr=u)}}else Qr()}function Qr(){S(oe,oe.current),S(Ma,Ma.current)}function Zr(u){x(Ma),Rr===u&&(Rr=null),x(oe)}function fd(u){for(var h=u;h!==null;){if(h.tag===13){var b=h.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||ou(b)||Ud(b)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function bf(u,h,b,E){h=u.memoizedState,b=b(E,h),b=b==null?h:jo({},h,b),u.memoizedState=b,u.lanes===0&&(u.updateQueue.baseState=b)}function Tm(u,h,b,E,N,P,W){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,P,W):h.prototype&&h.prototype.isPureReactComponent?!Ti(b,E)||!Ti(N,P):!0}function pd(u,h,b,E){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(b,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(b,E),h.state!==u&&nn.enqueueReplaceState(h,h.state,null)}function Mo(u,h){var b=h;if("ref"in h){b={};for(var E in h)E!=="ref"&&(b[E]=h[E])}if(u=u.defaultProps){b===h&&(b=jo({},b));for(var N in u)b[N]===void 0&&(b[N]=u[N])}return b}function gd(u,h){try{var b=u.onUncaughtError;b(h.value,{componentStack:h.stack})}catch(E){setTimeout(function(){throw E})}}function Rm(u,h,b){try{var E=u.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function md(u,h,b){return b=ws(b),b.tag=3,b.payload={element:null},b.callback=function(){gd(u,h)},b}function Mm(u){return u=ws(u),u.tag=3,u}function Dm(u,h,b,E){var N=b.type.getDerivedStateFromError;if(typeof N=="function"){var P=E.value;u.payload=function(){return N(P)},u.callback=function(){Rm(h,b,E)}}var W=b.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(u.callback=function(){Rm(h,b,E),typeof N!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var st=E.stack;this.componentDidCatch(E.value,{componentStack:st!==null?st:""})})}function G1(u,h,b,E,N){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(h=b.alternate,h!==null&&rn(h,b,N,!0),b=Ma.current,b!==null){switch(b.tag){case 13:return Rr===null?_n():b.alternate===null&&Tn===0&&(Tn=3),b.flags&=-257,b.flags|=65536,b.lanes=N,E===li?b.flags|=16384:(h=b.updateQueue,h===null?b.updateQueue=new Set([E]):h.add(E),Io(u,E,N)),!1;case 22:return b.flags|=65536,E===li?b.flags|=16384:(h=b.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=h):(b=h.retryQueue,b===null?h.retryQueue=new Set([E]):b.add(E)),Io(u,E,N)),!1}throw Error(a(435,b.tag))}return Io(u,E,N),_n(),!1}if(Be)return h=Ma.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=N,E!==hp&&(u=Error(a(422),{cause:E}),Gt(U(u,b)))):(E!==hp&&(h=Error(a(423),{cause:E}),Gt(U(h,b))),u=u.current.alternate,u.flags|=65536,N&=-N,u.lanes|=N,E=U(E,b),N=md(u.stateNode,E,N),Mc(u,N),Tn!==4&&(Tn=2)),!1;var P=Error(a(520),{cause:E});if(P=U(P,b),io===null?io=[P]:io.push(P),Tn!==4&&(Tn=2),h===null)return!0;E=U(E,b),b=h;do{switch(b.tag){case 3:return b.flags|=65536,u=N&-N,b.lanes|=u,u=md(b.stateNode,E,u),Mc(b,u),!1;case 1:if(h=b.type,P=b.stateNode,(b.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Or===null||!Or.has(P))))return b.flags|=65536,N&=-N,b.lanes|=N,N=Mm(N),Dm(N,u,b,E),Mc(b,N),!1}b=b.return}while(b!==null);return!1}function oi(u,h,b,E){h.child=u===null?mp(h,null,b,E):fs(h,u.child,b,E)}function Om(u,h,b,E,N){b=b.render;var P=h.ref;if("ref"in E){var W={};for(var st in E)st!=="ref"&&(W[st]=E[st])}else W=E;return vn(h),E=af(u,h,b,W,P,N),st=xl(),u!==null&&!le?(Sl(u,h,N),aa(u,h,N)):(Be&&st&&V(h),h.flags|=1,oi(u,h,E,N),h.child)}function Nm(u,h,b,E,N){if(u===null){var P=b.type;return typeof P=="function"&&!Bf(P)&&P.defaultProps===void 0&&b.compare===null?(h.tag=15,h.type=P,Lm(u,h,P,E,N)):(u=zl(b.type,null,E,h,h.mode,N),u.ref=h.ref,u.return=h,h.child=u)}if(P=u.child,!Oo(u,N)){var W=P.memoizedProps;if(b=b.compare,b=b!==null?b:Ti,b(W,E)&&u.ref===h.ref)return aa(u,h,N)}return h.flags|=1,u=ns(P,E),u.ref=h.ref,u.return=h,h.child=u}function Lm(u,h,b,E,N){if(u!==null){var P=u.memoizedProps;if(Ti(P,E)&&u.ref===h.ref)if(le=!1,h.pendingProps=E=P,Oo(u,N))(u.flags&131072)!==0&&(le=!0);else return h.lanes=u.lanes,aa(u,h,N)}return Do(u,h,b,E,N)}function Pm(u,h,b){var E=h.pendingProps,N=E.children,P=u!==null?u.memoizedState:null;if(E.mode==="hidden"){if((h.flags&128)!==0){if(E=P!==null?P.baseLanes|b:b,u!==null){for(N=h.child=u.child,P=0;N!==null;)P=P|N.lanes|N.childLanes,N=N.sibling;h.childLanes=P&~E}else h.childLanes=0,h.child=null;return km(u,h,E,b)}if((b&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&Ci(h,P!==null?P.cachePool:null),P!==null?Vn(h,P):td(),Cm(h);else return h.lanes=h.childLanes=536870912,km(u,h,P!==null?P.baseLanes|b:b,b)}else P!==null?(Ci(h,P.cachePool),Vn(h,P),Qr(),h.memoizedState=null):(u!==null&&Ci(h,null),td(),Qr());return oi(u,h,N,b),h.child}function km(u,h,b,E){var N=Gr();return N=N===null?null:{parent:ss?Ke._currentValue:Ke._currentValue2,pool:N},h.memoizedState={baseLanes:b,cachePool:N},u!==null&&Ci(h,null),td(),Cm(h),u!==null&&rn(u,h,E,!0),null}function Ml(u,h){var b=h.ref;if(b===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(a(284));(u===null||u.ref!==b)&&(h.flags|=4194816)}}function Do(u,h,b,E,N){return vn(h),b=af(u,h,b,E,void 0,N),E=xl(),u!==null&&!le?(Sl(u,h,N),aa(u,h,N)):(Be&&E&&V(h),h.flags|=1,oi(u,h,b,N),h.child)}function Bm(u,h,b,E,N,P){return vn(h),h.updateQueue=null,b=sf(h,E,b,N),rf(u),E=xl(),u!==null&&!le?(Sl(u,h,P),aa(u,h,P)):(Be&&E&&V(h),h.flags|=1,oi(u,h,b,P),h.child)}function xf(u,h,b,E,N){if(vn(h),h.stateNode===null){var P=Ko,W=b.contextType;typeof W=="object"&&W!==null&&(P=$t(W)),P=new b(E,P),h.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=nn,h.stateNode=P,P._reactInternals=h,P=h.stateNode,P.props=E,P.state=h.memoizedState,P.refs={},Rc(h),W=b.contextType,P.context=typeof W=="object"&&W!==null?$t(W):Ko,P.state=h.memoizedState,W=b.getDerivedStateFromProps,typeof W=="function"&&(bf(h,b,W,E),P.state=h.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(W=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),W!==P.state&&nn.enqueueReplaceState(P,P.state,null),cr(h,E,P,N),lr(),P.state=h.memoizedState),typeof P.componentDidMount=="function"&&(h.flags|=4194308),E=!0}else if(u===null){P=h.stateNode;var st=h.memoizedProps,ft=Mo(b,st);P.props=ft;var Ct=P.context,Ot=b.contextType;W=Ko,typeof Ot=="object"&&Ot!==null&&(W=$t(Ot));var zt=b.getDerivedStateFromProps;Ot=typeof zt=="function"||typeof P.getSnapshotBeforeUpdate=="function",st=h.pendingProps!==st,Ot||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(st||Ct!==W)&&pd(h,P,E,W),Cr=!1;var Ft=h.memoizedState;P.state=Ft,cr(h,E,P,N),lr(),Ct=h.memoizedState,st||Ft!==Ct||Cr?(typeof zt=="function"&&(bf(h,b,zt,E),Ct=h.memoizedState),(ft=Cr||Tm(h,b,ft,E,Ft,Ct,W))?(Ot||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(h.flags|=4194308)):(typeof P.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=Ct),P.props=E,P.state=Ct,P.context=W,E=ft):(typeof P.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{P=h.stateNode,nf(u,h),W=h.memoizedProps,Ot=Mo(b,W),P.props=Ot,zt=h.pendingProps,Ft=P.context,Ct=b.contextType,ft=Ko,typeof Ct=="object"&&Ct!==null&&(ft=$t(Ct)),st=b.getDerivedStateFromProps,(Ct=typeof st=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(W!==zt||Ft!==ft)&&pd(h,P,E,ft),Cr=!1,Ft=h.memoizedState,P.state=Ft,cr(h,E,P,N),lr();var me=h.memoizedState;W!==zt||Ft!==me||Cr||u!==null&&u.dependencies!==null&&sn(u.dependencies)?(typeof st=="function"&&(bf(h,b,st,E),me=h.memoizedState),(Ot=Cr||Tm(h,b,Ot,E,Ft,me,ft)||u!==null&&u.dependencies!==null&&sn(u.dependencies))?(Ct||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(E,me,ft),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(E,me,ft)),typeof P.componentDidUpdate=="function"&&(h.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof P.componentDidUpdate!="function"||W===u.memoizedProps&&Ft===u.memoizedState||(h.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||W===u.memoizedProps&&Ft===u.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=me),P.props=E,P.state=me,P.context=ft,E=Ot):(typeof P.componentDidUpdate!="function"||W===u.memoizedProps&&Ft===u.memoizedState||(h.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||W===u.memoizedProps&&Ft===u.memoizedState||(h.flags|=1024),E=!1)}return P=E,Ml(u,h),E=(h.flags&128)!==0,P||E?(P=h.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:P.render(),h.flags|=1,u!==null&&E?(h.child=fs(h,u.child,null,N),h.child=fs(h,null,b,N)):oi(u,h,b,N),h.memoizedState=P.state,u=h.child):u=aa(u,h,N),u}function Sf(u,h,b,E){return Pt(),h.flags|=256,oi(u,h,b,E),h.child}function vd(u){return{baseLanes:u,cachePool:or()}}function yd(u,h,b){return u=u!==null?u.childLanes&~b:0,h&&(u|=Da),u}function _f(u,h,b){var E=h.pendingProps,N=!1,P=(h.flags&128)!==0,W;if((W=P)||(W=u!==null&&u.memoizedState===null?!1:(oe.current&2)!==0),W&&(N=!0,h.flags&=-129),W=(h.flags&32)!==0,h.flags&=-33,u===null){if(Be){if(N?Ms(h):Qr(),Be){var st=In,ft;(ft=st)&&(st=K1(st,Ve),st!==null?(h.memoizedState={dehydrated:st,treeContext:Xs!==null?{id:Ya,overflow:wr}:null,retryLane:536870912,hydrationErrors:null},ft=e(18,null,null,0),ft.stateNode=st,ft.return=h,h.child=ft,Cn=h,In=null,ft=!0):ft=!1),ft||tt(h)}if(st=h.memoizedState,st!==null&&(st=st.dehydrated,st!==null))return Ud(st)?h.lanes=32:h.lanes=536870912,null;Zr(h)}return st=E.children,E=E.fallback,N?(Qr(),N=h.mode,st=bd({mode:"hidden",children:st},N),E=qa(E,N,b,null),st.return=h,E.return=h,st.sibling=E,h.child=st,N=h.child,N.memoizedState=vd(b),N.childLanes=yd(u,W,b),h.memoizedState=Bi,E):(Ms(h),Ds(h,st))}if(ft=u.memoizedState,ft!==null&&(st=ft.dehydrated,st!==null)){if(P)h.flags&256?(Ms(h),h.flags&=-257,h=Af(u,h,b)):h.memoizedState!==null?(Qr(),h.child=u.child,h.flags|=128,h=null):(Qr(),N=E.fallback,st=h.mode,E=bd({mode:"visible",children:E.children},st),N=qa(N,st,b,null),N.flags|=2,E.return=h,N.return=h,E.sibling=N,h.child=E,fs(h,u.child,null,b),E=h.child,E.memoizedState=vd(b),E.childLanes=yd(u,W,b),h.memoizedState=Bi,h=N);else if(Ms(h),Ud(st))W=d0(st).digest,E=Error(a(419)),E.stack="",E.digest=W,Gt({value:E,source:null,stack:null}),h=Af(u,h,b);else if(le||rn(u,h,b,!1),W=(b&u.childLanes)!==0,le||W){if(W=He,W!==null&&(E=b&-b,E=(E&42)!==0?1:j(E),E=(E&(W.suspendedLanes|b))!==0?0:E,E!==0&&E!==ft.retryLane))throw ft.retryLane=E,on(u,E),gi(W,u,E),Le;ou(st)||_n(),h=Af(u,h,b)}else ou(st)?(h.flags|=192,h.child=u.child,h=null):(u=ft.treeContext,Ki&&(In=ip(st),Cn=h,Be=!0,Xa=null,Ve=!1,u!==null&&(Pi[Zi++]=Ya,Pi[Zi++]=wr,Pi[Zi++]=Xs,Ya=u.id,wr=u.overflow,Xs=h)),h=Ds(h,E.children),h.flags|=4096);return h}return N?(Qr(),N=E.fallback,st=h.mode,ft=u.child,P=ft.sibling,E=ns(ft,{mode:"hidden",children:E.children}),E.subtreeFlags=ft.subtreeFlags&65011712,P!==null?N=ns(P,N):(N=qa(N,st,b,null),N.flags|=2),N.return=h,E.return=h,E.sibling=N,h.child=E,E=N,N=h.child,st=u.child.memoizedState,st===null?st=vd(b):(ft=st.cachePool,ft!==null?(P=ss?Ke._currentValue:Ke._currentValue2,ft=ft.parent!==P?{parent:P,pool:P}:ft):ft=or(),st={baseLanes:st.baseLanes|b,cachePool:ft}),N.memoizedState=st,N.childLanes=yd(u,W,b),h.memoizedState=Bi,E):(Ms(h),b=u.child,u=b.sibling,b=ns(b,{mode:"visible",children:E.children}),b.return=h,b.sibling=null,u!==null&&(W=h.deletions,W===null?(h.deletions=[u],h.flags|=16):W.push(u)),h.child=b,h.memoizedState=null,b)}function Ds(u,h){return h=bd({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function bd(u,h){return u=e(22,u,null,h),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function Af(u,h,b){return fs(h,u.child,null,b),u=Ds(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function zm(u,h,b){u.lanes|=h;var E=u.alternate;E!==null&&(E.lanes|=h),kt(u.return,h,b)}function xd(u,h,b,E,N){var P=u.memoizedState;P===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:N}:(P.isBackwards=h,P.rendering=null,P.renderingStartTime=0,P.last=E,P.tail=b,P.tailMode=N)}function Ef(u,h,b){var E=h.pendingProps,N=E.revealOrder,P=E.tail;if(oi(u,h,E.children,b),E=oe.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)t:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&zm(u,b,h);else if(u.tag===19)zm(u,b,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break t;for(;u.sibling===null;){if(u.return===null||u.return===h)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}switch(S(oe,E),N){case"forwards":for(b=h.child,N=null;b!==null;)u=b.alternate,u!==null&&fd(u)===null&&(N=b),b=b.sibling;b=N,b===null?(N=h.child,h.child=null):(N=b.sibling,b.sibling=null),xd(h,!1,N,b,P);break;case"backwards":for(b=null,N=h.child,h.child=null;N!==null;){if(u=N.alternate,u!==null&&fd(u)===null){h.child=N;break}u=N.sibling,N.sibling=b,b=N,N=u}xd(h,!0,b,null,P);break;case"together":xd(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function aa(u,h,b){if(u!==null&&(h.dependencies=u.dependencies),jn|=h.lanes,(b&h.childLanes)===0)if(u!==null){if(rn(u,h,b,!1),(b&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(a(153));if(h.child!==null){for(u=h.child,b=ns(u,u.pendingProps),h.child=b,b.return=h;u.sibling!==null;)u=u.sibling,b=b.sibling=ns(u,u.pendingProps),b.return=h;b.sibling=null}return h.child}function Oo(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&sn(u)))}function j1(u,h,b){switch(h.tag){case 3:K(h,h.stateNode.containerInfo),Nt(h,Ke,u.memoizedState.cache),Pt();break;case 27:case 5:xt(h);break;case 4:K(h,h.stateNode.containerInfo);break;case 10:Nt(h,h.type,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(Ms(h),h.flags|=128,null):(b&h.child.childLanes)!==0?_f(u,h,b):(Ms(h),u=aa(u,h,b),u!==null?u.sibling:null);Ms(h);break;case 19:var N=(u.flags&128)!==0;if(E=(b&h.childLanes)!==0,E||(rn(u,h,b,!1),E=(b&h.childLanes)!==0),N){if(E)return Ef(u,h,b);h.flags|=128}if(N=h.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),S(oe,oe.current),E)break;return null;case 22:case 23:return h.lanes=0,Pm(u,h,b);case 24:Nt(h,Ke,u.memoizedState.cache)}return aa(u,h,b)}function Fc(u,h,b){if(u!==null)if(u.memoizedProps!==h.pendingProps)le=!0;else{if(!Oo(u,b)&&(h.flags&128)===0)return le=!1,j1(u,h,b);le=(u.flags&131072)!==0}else le=!1,Be&&(h.flags&1048576)!==0&&H(h,Xl,h.index);switch(h.lanes=0,h.tag){case 16:t:{u=h.pendingProps;var E=h.elementType,N=E._init;if(E=N(E._payload),h.type=E,typeof E=="function")Bf(E)?(u=Mo(E,u),h.tag=1,h=xf(null,h,E,u,b)):(h.tag=0,h=Do(null,h,E,u,b));else{if(E!=null){if(N=E.$$typeof,N===xr){h.tag=11,h=Om(null,h,E,u,b);break t}else if(N===Sr){h.tag=14,h=Nm(null,h,E,u,b);break t}}throw h=m(E)||E,Error(a(306,h,""))}}return h;case 0:return Do(u,h,h.type,h.pendingProps,b);case 1:return E=h.type,N=Mo(E,h.pendingProps),xf(u,h,E,N,b);case 3:t:{if(K(h,h.stateNode.containerInfo),u===null)throw Error(a(387));var P=h.pendingProps;N=h.memoizedState,E=N.element,nf(u,h),cr(h,P,null,b);var W=h.memoizedState;if(P=W.cache,Nt(h,Ke,P),P!==N.cache&&Ae(h,[Ke],b,!0),lr(),P=W.element,Ki&&N.isDehydrated)if(N={element:P,isDehydrated:!1,cache:W.cache},h.updateQueue.baseState=N,h.memoizedState=N,h.flags&256){h=Sf(u,h,P,b);break t}else if(P!==E){E=U(Error(a(424)),h),Gt(E),h=Sf(u,h,P,b);break t}else for(Ki&&(In=m0(h.stateNode.containerInfo),Cn=h,Be=!0,Xa=null,Ve=!0),b=mp(h,null,P,b),h.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Pt(),P===E){h=aa(u,h,b);break t}oi(u,h,P,b)}h=h.child}return h;case 26:if(Ni)return Ml(u,h),u===null?(b=uu(h.type,null,h.pendingProps,null))?h.memoizedState=b:Be||(h.stateNode=Er(h.type,h.pendingProps,Ks.current,h)):h.memoizedState=uu(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:if(Te)return xt(h),u===null&&Te&&Be&&(E=h.stateNode=du(h.type,h.pendingProps,Ks.current,bn.current,!1),Cn=h,Ve=!0,In=v0(h.type,E,In)),oi(u,h,h.pendingProps.children,b),Ml(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&Be&&(W1(h.type,h.pendingProps,bn.current),(N=E=In)&&(E=y0(E,h.type,h.pendingProps,Ve),E!==null?(h.stateNode=E,Cn=h,In=g0(E),Ve=!1,N=!0):N=!1),N||tt(h)),xt(h),N=h.type,P=h.pendingProps,W=u!==null?u.memoizedProps:null,E=P.children,rs(N,P)?E=null:W!==null&&rs(N,W)&&(h.flags|=32),h.memoizedState!==null&&(N=af(u,h,I1,null,null,b),ss?Ar._currentValue=N:Ar._currentValue2=N),Ml(u,h),oi(u,h,E,b),h.child;case 6:return u===null&&Be&&(ql(h.pendingProps,bn.current),(u=b=In)&&(b=X1(b,h.pendingProps,Ve),b!==null?(h.stateNode=b,Cn=h,In=null,u=!0):u=!1),u||tt(h)),null;case 13:return _f(u,h,b);case 4:return K(h,h.stateNode.containerInfo),E=h.pendingProps,u===null?h.child=fs(h,null,E,b):oi(u,h,E,b),h.child;case 11:return Om(u,h,h.type,h.pendingProps,b);case 7:return oi(u,h,h.pendingProps,b),h.child;case 8:return oi(u,h,h.pendingProps.children,b),h.child;case 12:return oi(u,h,h.pendingProps.children,b),h.child;case 10:return E=h.pendingProps,Nt(h,h.type,E.value),oi(u,h,E.children,b),h.child;case 9:return N=h.type._context,E=h.pendingProps.children,vn(h),N=$t(N),E=E(N),h.flags|=1,oi(u,h,E,b),h.child;case 14:return Nm(u,h,h.type,h.pendingProps,b);case 15:return Lm(u,h,h.type,h.pendingProps,b);case 19:return Ef(u,h,b);case 31:return E=h.pendingProps,b=h.mode,E={mode:E.mode,children:E.children},u===null?(b=bd(E,b),b.ref=h.ref,h.child=b,b.return=h,h=b):(b=ns(u.child,E),b.ref=h.ref,h.child=b,b.return=h,h=b),h;case 22:return Pm(u,h,b);case 24:return vn(h),E=$t(Ke),u===null?(N=Gr(),N===null&&(N=He,P=Ht(),N.pooledCache=P,P.refCount++,P!==null&&(N.pooledCacheLanes|=b),N=P),h.memoizedState={parent:E,cache:N},Rc(h),Nt(h,Ke,N)):((u.lanes&b)!==0&&(nf(u,h),cr(h,null,null,b),lr()),N=u.memoizedState,P=h.memoizedState,N.parent!==E?(N={parent:E,cache:E},h.memoizedState=N,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=N),Nt(h,Ke,E)):(E=P.cache,Nt(h,Ke,E),E!==N.cache&&Ae(h,[Ke],b,!0))),oi(u,h,h.pendingProps.children,b),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function qi(u){u.flags|=4}function wf(u,h){if(u!==null&&u.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(u=h.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Ic(u,h,b,E){if(De)for(b=h.child;b!==null;){if(b.tag===5||b.tag===6)Mn(u,b.stateNode);else if(!(b.tag===4||Te&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(_r)for(var N=h.child;N!==null;){if(N.tag===5){var P=N.stateNode;b&&E&&(P=Jf(P,N.type,N.memoizedProps)),Mn(u,P)}else if(N.tag===6)P=N.stateNode,b&&E&&(P=tp(P,N.memoizedProps)),Mn(u,P);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)P=N.child,P!==null&&(P.return=N),Ic(u,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===h)break;for(;N.sibling===null;){if(N.return===null||N.return===h)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function Sd(u,h,b,E){var N=!1;if(_r)for(var P=h.child;P!==null;){if(P.tag===5){var W=P.stateNode;b&&E&&(W=Jf(W,P.type,P.memoizedProps)),Qf(u,W)}else if(P.tag===6)W=P.stateNode,b&&E&&(W=tp(W,P.memoizedProps)),Qf(u,W);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)N=P.child,N!==null&&(N.return=P),Sd(u,P,!0,!0),N=!0;else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===h)break;for(;P.sibling===null;){if(P.return===null||P.return===h)return N;P=P.return}P.sibling.return=P.return,P=P.sibling}return N}function Cf(u,h){if(_r&&wf(u,h)){u=h.stateNode;var b=u.containerInfo,E=$f();Sd(E,h,!1,!1),u.pendingChildren=E,qi(h),u0(b,E)}}function _d(u,h,b,E){if(De)u.memoizedProps!==E&&qi(h);else if(_r){var N=u.stateNode,P=u.memoizedProps;if((u=wf(u,h))||P!==E){var W=bn.current;P=su(N,b,P,E,!u,null),P===N?h.stateNode=N:(nu(P,b,E,W)&&qi(h),h.stateNode=P,u?Ic(P,h,!1,!1):qi(h))}else h.stateNode=N}}function Ad(u,h,b){if(Fn(h,b)){if(u.flags|=16777216,!Hd(h,b))if(Dd())u.flags|=8192;else throw Ji=li,th}else u.flags&=-16777217}function Fm(u,h){if(A0(h)){if(u.flags|=16777216,!os(h))if(Dd())u.flags|=8192;else throw Ji=li,th}else u.flags&=-16777217}function Ed(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?O():536870912,u.lanes|=h,fa|=h)}function Hc(u,h){if(!Be)switch(u.tailMode){case"hidden":h=u.tail;for(var b=null;h!==null;)h.alternate!==null&&(b=h),h=h.sibling;b===null?u.tail=null:b.sibling=null;break;case"collapsed":b=u.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function wn(u){var h=u.alternate!==null&&u.alternate.child===u.child,b=0,E=0;if(h)for(var N=u.child;N!==null;)b|=N.lanes|N.childLanes,E|=N.subtreeFlags&65011712,E|=N.flags&65011712,N.return=u,N=N.sibling;else for(N=u.child;N!==null;)b|=N.lanes|N.childLanes,E|=N.subtreeFlags,E|=N.flags,N.return=u,N=N.sibling;return u.subtreeFlags|=E,u.childLanes=b,h}function U1(u,h,b){var E=h.pendingProps;switch(at(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(h),null;case 1:return wn(h),null;case 3:return b=h.stateNode,E=null,u!==null&&(E=u.memoizedState.cache),h.memoizedState.cache!==E&&(h.flags|=2048),we(Ke),ut(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(u===null||u.child===null)&&(Mt(h)?qi(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Bt())),Cf(u,h),wn(h),null;case 26:if(Ni){b=h.type;var N=h.memoizedState;return u===null?(qi(h),N!==null?(wn(h),Fm(h,N)):(wn(h),Ad(h,b,E))):N?N!==u.memoizedState?(qi(h),wn(h),Fm(h,N)):(wn(h),h.flags&=-16777217):(De?u.memoizedProps!==E&&qi(h):_d(u,h,b,E),wn(h),Ad(h,b,E)),null}case 27:if(Te){if(ot(h),b=Ks.current,N=h.type,u!==null&&h.stateNode!=null)De?u.memoizedProps!==E&&qi(h):_d(u,h,N,E);else{if(!E){if(h.stateNode===null)throw Error(a(166));return wn(h),null}u=bn.current,Mt(h)?ct(h,u):(u=du(N,E,b,u,!0),h.stateNode=u,qi(h))}return wn(h),null}case 5:if(ot(h),b=h.type,u!==null&&h.stateNode!=null)_d(u,h,b,E);else{if(!E){if(h.stateNode===null)throw Error(a(166));return wn(h),null}u=bn.current,Mt(h)?ct(h,u):(N=tn(b,E,Ks.current,u,h),Ic(N,h,!1,!1),h.stateNode=N,nu(N,b,E,u)&&qi(h))}return wn(h),Ad(h,h.type,h.pendingProps),null;case 6:if(u&&h.stateNode!=null)b=u.memoizedProps,De?b!==E&&qi(h):_r&&(b!==E?(h.stateNode=js(E,Ks.current,bn.current,h),qi(h)):h.stateNode=u.stateNode);else{if(typeof E!="string"&&h.stateNode===null)throw Error(a(166));if(u=Ks.current,b=bn.current,Mt(h)){if(!Ki)throw Error(a(176));if(u=h.stateNode,b=h.memoizedProps,E=null,N=Cn,N!==null)switch(N.tag){case 27:case 5:E=N.memoizedProps}lu(u,b,h,E)||tt(h)}else h.stateNode=js(E,u,b,h)}return wn(h),null;case 13:if(E=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(N=Mt(h),E!==null&&E.dehydrated!==null){if(u===null){if(!N)throw Error(a(318));if(!Ki)throw Error(a(344));if(N=h.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(a(317));ap(N,h)}else Pt(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;wn(h),N=!1}else N=Bt(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=N),N=!0;if(!N)return h.flags&256?(Zr(h),h):(Zr(h),null)}if(Zr(h),(h.flags&128)!==0)return h.lanes=b,h;if(b=E!==null,u=u!==null&&u.memoizedState!==null,b){E=h.child,N=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(N=E.alternate.memoizedState.cachePool.pool);var P=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(P=E.memoizedState.cachePool.pool),P!==N&&(E.flags|=2048)}return b!==u&&b&&(h.child.flags|=8192),Ed(h,h.updateQueue),wn(h),null;case 4:return ut(),Cf(u,h),u===null&&Xm(h.stateNode.containerInfo),wn(h),null;case 10:return we(h.type),wn(h),null;case 19:if(x(oe),N=h.memoizedState,N===null)return wn(h),null;if(E=(h.flags&128)!==0,P=N.rendering,P===null)if(E)Hc(N,!1);else{if(Tn!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(P=fd(u),P!==null){for(h.flags|=128,Hc(N,!1),u=P.updateQueue,h.updateQueue=u,Ed(h,u),h.subtreeFlags=0,u=b,b=h.child;b!==null;)zn(b,u),b=b.sibling;return S(oe,oe.current&1|2),h.child}u=u.sibling}N.tail!==null&&en()>nc&&(h.flags|=128,E=!0,Hc(N,!1),h.lanes=4194304)}else{if(!E)if(u=fd(P),u!==null){if(h.flags|=128,E=!0,u=u.updateQueue,h.updateQueue=u,Ed(h,u),Hc(N,!0),N.tail===null&&N.tailMode==="hidden"&&!P.alternate&&!Be)return wn(h),null}else 2*en()-N.renderingStartTime>nc&&b!==536870912&&(h.flags|=128,E=!0,Hc(N,!1),h.lanes=4194304);N.isBackwards?(P.sibling=h.child,h.child=P):(u=N.last,u!==null?u.sibling=P:h.child=P,N.last=P)}return N.tail!==null?(h=N.tail,N.rendering=h,N.tail=h.sibling,N.renderingStartTime=en(),h.sibling=null,u=oe.current,S(oe,E?u&1|2:u&1),h):(wn(h),null);case 22:case 23:return Zr(h),ed(),E=h.memoizedState!==null,u!==null?u.memoizedState!==null!==E&&(h.flags|=8192):E&&(h.flags|=8192),E?(b&536870912)!==0&&(h.flags&128)===0&&(wn(h),h.subtreeFlags&6&&(h.flags|=8192)):wn(h),b=h.updateQueue,b!==null&&Ed(h,b.retryQueue),b=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==b&&(h.flags|=2048),u!==null&&x(An),null;case 24:return b=null,u!==null&&(b=u.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),we(Ke),wn(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function ra(u,h){switch(at(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return we(Ke),ut(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return ot(h),null;case 13:if(Zr(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Pt()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return x(oe),null;case 4:return ut(),null;case 10:return we(h.type),null;case 22:case 23:return Zr(h),ed(),u!==null&&x(An),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return we(Ke),null;case 25:return null;default:return null}}function Dl(u,h){switch(at(h),h.tag){case 3:we(Ke),ut();break;case 26:case 27:case 5:ot(h);break;case 4:ut();break;case 13:Zr(h);break;case 19:x(oe);break;case 10:we(h.type);break;case 22:case 23:Zr(h),ed(),u!==null&&x(An);break;case 24:we(Ke)}}function Ol(u,h){try{var b=h.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var N=E.next;b=N;do{if((b.tag&u)===u){E=void 0;var P=b.create,W=b.inst;E=P(),W.destroy=E}b=b.next}while(b!==N)}}catch(st){Xe(h,h.return,st)}}function Jr(u,h,b){try{var E=h.updateQueue,N=E!==null?E.lastEffect:null;if(N!==null){var P=N.next;E=P;do{if((E.tag&u)===u){var W=E.inst,st=W.destroy;if(st!==void 0){W.destroy=void 0,N=h;var ft=b,Ct=st;try{Ct()}catch(Ot){Xe(N,ft,Ot)}}}E=E.next}while(E!==P)}}catch(Ot){Xe(h,h.return,Ot)}}function Tf(u){var h=u.updateQueue;if(h!==null){var b=u.stateNode;try{Ao(h,b)}catch(E){Xe(u,u.return,E)}}}function Rf(u,h,b){b.props=Mo(u.type,u.memoizedProps),b.state=u.memoizedState;try{b.componentWillUnmount()}catch(E){Xe(u,h,E)}}function No(u,h){try{var b=u.ref;if(b!==null){switch(u.tag){case 26:case 27:case 5:var E=Hl(u.stateNode);break;case 30:E=u.stateNode;break;default:E=u.stateNode}typeof b=="function"?u.refCleanup=b(E):b.current=E}}catch(N){Xe(u,h,N)}}function hr(u,h){var b=u.ref,E=u.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(N){Xe(u,h,N)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(N){Xe(u,h,N)}else b.current=null}function Lo(u){var h=u.type,b=u.memoizedProps,E=u.stateNode;try{Wf(E,h,b,u)}catch(N){Xe(u,u.return,N)}}function Gc(u,h,b){try{n0(u.stateNode,u.type,b,h,u)}catch(E){Xe(u,u.return,E)}}function Nl(u){return u.tag===5||u.tag===3||(Ni?u.tag===26:!1)||(Te?u.tag===27&&Xo(u.type):!1)||u.tag===4}function jc(u){t:for(;;){for(;u.sibling===null;){if(u.return===null||Nl(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(Te&&u.tag===27&&Xo(u.type)||u.flags&2||u.child===null||u.tag===4)continue t;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function wd(u,h,b){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?a0(b,u,h):t0(b,u);else if(E!==4&&(Te&&E===27&&Xo(u.type)&&(b=u.stateNode,h=null),u=u.child,u!==null))for(wd(u,h,b),u=u.sibling;u!==null;)wd(u,h,b),u=u.sibling}function fr(u,h,b){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?i0(b,u,h):Jm(b,u);else if(E!==4&&(Te&&E===27&&Xo(u.type)&&(b=u.stateNode),u=u.child,u!==null))for(fr(u,h,b),u=u.sibling;u!==null;)fr(u,h,b),u=u.sibling}function Po(u,h,b){u=u.containerInfo;try{Zf(u,b)}catch(E){Xe(h,h.return,E)}}function Cd(u){var h=u.stateNode,b=u.memoizedProps;try{cp(u.type,b,h,u)}catch(E){Xe(u,u.return,E)}}function Im(u,h){for(Gs(u.containerInfo),xe=h;xe!==null;)if(u=xe,h=u.child,(u.subtreeFlags&1024)!==0&&h!==null)h.return=u,xe=h;else for(;xe!==null;){u=xe;var b=u.alternate;switch(h=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&b!==null){h=void 0;var E=u,N=b.memoizedProps;b=b.memoizedState;var P=E.stateNode;try{var W=Mo(E.type,N,E.elementType===E.type);h=P.getSnapshotBeforeUpdate(W,b),P.__reactInternalSnapshotBeforeUpdate=h}catch(st){Xe(E,E.return,st)}}break;case 3:(h&1024)!==0&&De&&jd(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(a(163))}if(h=u.sibling,h!==null){h.return=u.return,xe=h;break}xe=u.return}}function Os(u,h,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:ts(u,b),E&4&&Ol(5,b);break;case 1:if(ts(u,b),E&4)if(u=b.stateNode,h===null)try{u.componentDidMount()}catch(W){Xe(b,b.return,W)}else{var N=Mo(b.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(N,h,u.__reactInternalSnapshotBeforeUpdate)}catch(W){Xe(b,b.return,W)}}E&64&&Tf(b),E&512&&No(b,b.return);break;case 3:if(ts(u,b),E&64&&(u=b.updateQueue,u!==null)){if(h=null,b.child!==null)switch(b.child.tag){case 27:case 5:h=Hl(b.child.stateNode);break;case 1:h=b.child.stateNode}try{Ao(u,h)}catch(W){Xe(b,b.return,W)}}break;case 27:Te&&h===null&&E&4&&Cd(b);case 26:case 5:ts(u,b),h===null&&E&4&&Lo(b),E&512&&No(b,b.return);break;case 12:ts(u,b);break;case 13:ts(u,b),E&4&&Hm(u,b),E&64&&(u=b.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(b=vi.bind(null,b),ep(u,b))));break;case 22:if(E=b.memoizedState!==null||xi,!E){h=h!==null&&h.memoizedState!==null||fn,N=xi;var P=fn;xi=E,(fn=h)&&!P?Yn(u,b,(b.subtreeFlags&8772)!==0):ts(u,b),xi=N,fn=P}break;case 30:break;default:ts(u,b)}}function Mf(u){var h=u.alternate;h!==null&&(u.alternate=null,Mf(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Wi(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function Aa(u,h,b){for(b=b.child;b!==null;)Td(u,h,b),b=b.sibling}function Td(u,h,b){if(Li&&typeof Li.onCommitFiberUnmount=="function")try{Li.onCommitFiberUnmount(qs,b)}catch{}switch(b.tag){case 26:if(Ni){fn||hr(b,h),Aa(u,h,b),b.memoizedState?op(b.memoizedState):b.stateNode&&la(b.stateNode);break}case 27:if(Te){fn||hr(b,h);var E=un,N=Gn;Xo(b.type)&&(un=b.stateNode,Gn=!1),Aa(u,h,b),Yd(b.stateNode),un=E,Gn=N;break}case 5:fn||hr(b,h);case 6:if(De){if(E=un,N=Gn,un=null,Aa(u,h,b),un=E,Gn=N,un!==null)if(Gn)try{s0(un,b.stateNode)}catch(P){Xe(b,h,P)}else try{r0(un,b.stateNode)}catch(P){Xe(b,h,P)}}else Aa(u,h,b);break;case 18:De&&un!==null&&(Gn?_0(un,b.stateNode):Vd(un,b.stateNode));break;case 4:De?(E=un,N=Gn,un=b.stateNode.containerInfo,Gn=!0,Aa(u,h,b),un=E,Gn=N):(_r&&Po(b.stateNode,b,$f()),Aa(u,h,b));break;case 0:case 11:case 14:case 15:fn||Jr(2,b,h),fn||Jr(4,b,h),Aa(u,h,b);break;case 1:fn||(hr(b,h),E=b.stateNode,typeof E.componentWillUnmount=="function"&&Rf(b,h,E)),Aa(u,h,b);break;case 21:Aa(u,h,b);break;case 22:fn=(E=fn)||b.memoizedState!==null,Aa(u,h,b),fn=E;break;default:Aa(u,h,b)}}function Hm(u,h){if(Ki&&h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{S0(u)}catch(b){Xe(h,h.return,b)}}function q1(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new Mr),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new Mr),h;default:throw Error(a(435,u.tag))}}function Df(u,h){var b=q1(u);h.forEach(function(E){var N=kd.bind(null,u,E);b.has(E)||(b.add(E),E.then(N,N))})}function fi(u,h){var b=h.deletions;if(b!==null)for(var E=0;E<b.length;E++){var N=b[E],P=u,W=h;if(De){var st=W;t:for(;st!==null;){switch(st.tag){case 27:if(Te){if(Xo(st.type)){un=st.stateNode,Gn=!1;break t}break}case 5:un=st.stateNode,Gn=!1;break t;case 3:case 4:un=st.stateNode.containerInfo,Gn=!0;break t}st=st.return}if(un===null)throw Error(a(160));Td(P,W,N),un=null,Gn=!1}else Td(P,W,N);P=N.alternate,P!==null&&(P.return=null),N.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Of(h,u),h=h.sibling}function Of(u,h){var b=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:fi(h,u),pi(u),E&4&&(Jr(3,u,u.return),Ol(3,u),Jr(5,u,u.return));break;case 1:fi(h,u),pi(u),E&512&&(fn||b===null||hr(b,b.return)),E&64&&xi&&(u=u.updateQueue,u!==null&&(E=u.callbacks,E!==null&&(b=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:if(Ni){var N=ha;if(fi(h,u),pi(u),E&512&&(fn||b===null||hr(b,b.return)),E&4){E=b!==null?b.memoizedState:null;var P=u.memoizedState;b===null?P===null?u.stateNode===null?u.stateNode=Vl(N,u.type,u.memoizedProps,u):lp(N,u.type,u.stateNode):u.stateNode=sp(N,P,u.memoizedProps):E!==P?(E===null?b.stateNode!==null&&la(b.stateNode):op(E),P===null?lp(N,u.type,u.stateNode):sp(N,P,u.memoizedProps)):P===null&&u.stateNode!==null&&Gc(u,u.memoizedProps,b.memoizedProps)}break}case 27:if(Te){fi(h,u),pi(u),E&512&&(fn||b===null||hr(b,b.return)),b!==null&&E&4&&Gc(u,u.memoizedProps,b.memoizedProps);break}case 5:if(fi(h,u),pi(u),E&512&&(fn||b===null||hr(b,b.return)),De){if(u.flags&32){N=u.stateNode;try{o0(N)}catch(Ot){Xe(u,u.return,Ot)}}E&4&&u.stateNode!=null&&(N=u.memoizedProps,Gc(u,N,b!==null?b.memoizedProps:N)),E&1024&&(_u=!0)}break;case 6:if(fi(h,u),pi(u),E&4&&De){if(u.stateNode===null)throw Error(a(162));E=u.memoizedProps,b=b!==null?b.memoizedProps:E,N=u.stateNode;try{e0(N,b,E)}catch(Ot){Xe(u,u.return,Ot)}}break;case 3:if(Ni?(Us(),N=ha,ha=Yo(h.containerInfo),fi(h,u),ha=N):fi(h,u),pi(u),E&4){if(De&&Ki&&b!==null&&b.memoizedState.isDehydrated)try{x0(h.containerInfo)}catch(Ot){Xe(u,u.return,Ot)}if(_r){E=h.containerInfo,b=h.pendingChildren;try{Zf(E,b)}catch(Ot){Xe(u,u.return,Ot)}}}_u&&(_u=!1,Ea(u));break;case 4:Ni?(b=ha,ha=Yo(u.stateNode.containerInfo),fi(h,u),pi(u),ha=b):(fi(h,u),pi(u)),E&4&&_r&&Po(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:fi(h,u),pi(u);break;case 13:fi(h,u),pi(u),u.child.flags&8192&&u.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(nh=en()),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,Df(u,E)));break;case 22:N=u.memoizedState!==null;var W=b!==null&&b.memoizedState!==null,st=xi,ft=fn;if(xi=st||N,fn=ft||W,fi(h,u),fn=ft,xi=st,pi(u),E&8192&&(h=u.stateNode,h._visibility=N?h._visibility&-2:h._visibility|1,N&&(b===null||W||xi||fn||Zn(u)),De)){t:if(b=null,De)for(h=u;;){if(h.tag===5||Ni&&h.tag===26){if(b===null){W=b=h;try{P=W.stateNode,N?l0(P):Gd(W.stateNode,W.memoizedProps)}catch(Ot){Xe(W,W.return,Ot)}}}else if(h.tag===6){if(b===null){W=h;try{var Ct=W.stateNode;N?Ul(Ct):c0(Ct,W.memoizedProps)}catch(Ot){Xe(W,W.return,Ot)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break t;for(;h.sibling===null;){if(h.return===null||h.return===u)break t;b===h&&(b=null),h=h.return}b===h&&(b=null),h.sibling.return=h.return,h=h.sibling}}E&4&&(E=u.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,Df(u,b))));break;case 19:fi(h,u),pi(u),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,Df(u,E)));break;case 30:break;case 21:break;default:fi(h,u),pi(u)}}function pi(u){var h=u.flags;if(h&2){try{if(De){for(var b,E=u.return;E!==null;){if(Nl(E)){b=E;break}E=E.return}if(b==null)throw Error(a(160));switch(b.tag){case 27:if(Te){var N=b.stateNode,P=jc(u);fr(u,P,N);break}case 5:var W=b.stateNode;b.flags&32&&(o0(W),b.flags&=-33);var st=jc(u);fr(u,st,W);break;case 3:case 4:var ft=b.stateNode.containerInfo,Ct=jc(u);wd(u,Ct,ft);break;default:throw Error(a(161))}}}catch(Ot){Xe(u,u.return,Ot)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function Ea(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;Ea(h),h.tag===5&&h.flags&1024&&Yf(h.stateNode),u=u.sibling}}function ts(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Os(u,h.alternate,h),h=h.sibling}function Zn(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:Jr(4,h,h.return),Zn(h);break;case 1:hr(h,h.return);var b=h.stateNode;typeof b.componentWillUnmount=="function"&&Rf(h,h.return,b),Zn(h);break;case 27:Te&&Yd(h.stateNode);case 26:case 5:hr(h,h.return),Zn(h);break;case 22:h.memoizedState===null&&Zn(h);break;case 30:Zn(h);break;default:Zn(h)}u=u.sibling}}function Yn(u,h,b){for(b=b&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var E=h.alternate,N=u,P=h,W=P.flags;switch(P.tag){case 0:case 11:case 15:Yn(N,P,b),Ol(4,P);break;case 1:if(Yn(N,P,b),E=P,N=E.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(Ct){Xe(E,E.return,Ct)}if(E=P,N=E.updateQueue,N!==null){var st=E.stateNode;try{var ft=N.shared.hiddenCallbacks;if(ft!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ft.length;N++)bl(ft[N],st)}catch(Ct){Xe(E,E.return,Ct)}}b&&W&64&&Tf(P),No(P,P.return);break;case 27:Te&&Cd(P);case 26:case 5:Yn(N,P,b),b&&E===null&&W&4&&Lo(P),No(P,P.return);break;case 12:Yn(N,P,b);break;case 13:Yn(N,P,b),b&&W&4&&Hm(N,P);break;case 22:P.memoizedState===null&&Yn(N,P,b),No(P,P.return);break;case 30:break;default:Yn(N,P,b)}h=h.sibling}}function Ns(u,h){var b=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==b&&(u!=null&&u.refCount++,b!=null&&ee(b))}function Uc(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&ee(u))}function sa(u,h,b,E){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)qc(u,h,b,E),h=h.sibling}function qc(u,h,b,E){var N=h.flags;switch(h.tag){case 0:case 11:case 15:sa(u,h,b,E),N&2048&&Ol(9,h);break;case 1:sa(u,h,b,E);break;case 3:sa(u,h,b,E),N&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&ee(u)));break;case 12:if(N&2048){sa(u,h,b,E),u=h.stateNode;try{var P=h.memoizedProps,W=P.id,st=P.onPostCommit;typeof st=="function"&&st(W,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ft){Xe(h,h.return,ft)}}else sa(u,h,b,E);break;case 13:sa(u,h,b,E);break;case 23:break;case 22:P=h.stateNode,W=h.alternate,h.memoizedState!==null?P._visibility&2?sa(u,h,b,E):pr(u,h):P._visibility&2?sa(u,h,b,E):(P._visibility|=2,Ls(u,h,b,E,(h.subtreeFlags&10256)!==0)),N&2048&&Ns(W,h);break;case 24:sa(u,h,b,E),N&2048&&Uc(h.alternate,h);break;default:sa(u,h,b,E)}}function Ls(u,h,b,E,N){for(N=N&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var P=u,W=h,st=b,ft=E,Ct=W.flags;switch(W.tag){case 0:case 11:case 15:Ls(P,W,st,ft,N),Ol(8,W);break;case 23:break;case 22:var Ot=W.stateNode;W.memoizedState!==null?Ot._visibility&2?Ls(P,W,st,ft,N):pr(P,W):(Ot._visibility|=2,Ls(P,W,st,ft,N)),N&&Ct&2048&&Ns(W.alternate,W);break;case 24:Ls(P,W,st,ft,N),N&&Ct&2048&&Uc(W.alternate,W);break;default:Ls(P,W,st,ft,N)}h=h.sibling}}function pr(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var b=u,E=h,N=E.flags;switch(E.tag){case 22:pr(b,E),N&2048&&Ns(E.alternate,E);break;case 24:pr(b,E),N&2048&&Uc(E.alternate,E);break;default:pr(b,E)}h=h.sibling}}function Ps(u){if(u.subtreeFlags&ci)for(u=u.child;u!==null;)Vc(u),u=u.sibling}function Vc(u){switch(u.tag){case 26:Ps(u),u.flags&ci&&(u.memoizedState!==null?ls(ha,u.memoizedState,u.memoizedProps):ru(u.type,u.memoizedProps));break;case 5:Ps(u),u.flags&ci&&ru(u.type,u.memoizedProps);break;case 3:case 4:if(Ni){var h=ha;ha=Yo(u.stateNode.containerInfo),Ps(u),ha=h}else Ps(u);break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=ci,ci=16777216,Ps(u),ci=h):Ps(u));break;default:Ps(u)}}function ko(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Yc(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var E=h[b];xe=E,gr(E,u)}ko(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Vi(u),u=u.sibling}function Vi(u){switch(u.tag){case 0:case 11:case 15:Yc(u),u.flags&2048&&Jr(9,u,u.return);break;case 3:Yc(u);break;case 12:Yc(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,Ll(u)):Yc(u);break;default:Yc(u)}}function Ll(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var E=h[b];xe=E,gr(E,u)}ko(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:Jr(8,h,h.return),Ll(h);break;case 22:b=h.stateNode,b._visibility&2&&(b._visibility&=-3,Ll(h));break;default:Ll(h)}u=u.sibling}}function gr(u,h){for(;xe!==null;){var b=xe;switch(b.tag){case 0:case 11:case 15:Jr(8,b,h);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:ee(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,xe=E;else t:for(b=u;xe!==null;){E=xe;var N=E.sibling,P=E.return;if(Mf(E),E===b){xe=null;break t}if(N!==null){N.return=P,xe=N;break t}xe=P}}}function Rd(u){var h=Ym(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(a(364));return h}if(u=Wm(u),u===null)throw Error(a(362));return u.stateNode.current}function Pl(u,h){var b=u.tag;switch(h.$$typeof){case Js:if(u.type===h.value)return!0;break;case ui:t:{for(h=h.value,u=[u,0],b=0;b<u.length;){var E=u[b++],N=E.tag,P=u[b++],W=h[P];if(N!==5&&N!==26&&N!==27||!jl(E)){for(;W!=null&&Pl(E,W);)P++,W=h[P];if(P===h.length){h=!0;break t}else for(E=E.child;E!==null;)u.push(E,P),E=E.sibling}}h=!1}return h;case tc:if((b===5||b===26||b===27)&&Kf(u.stateNode,h.value))return!0;break;case Zo:if((b===5||b===6||b===26||b===27)&&(u=Qm(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case ec:if((b===5||b===26||b===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function es(u){switch(u.$$typeof){case Js:return"<"+(m(u.value)||"Unknown")+">";case ui:return":has("+(es(u)||"")+")";case tc:return'[role="'+u.value+'"]';case Zo:return'"'+u.value+'"';case ec:return'[data-testname="'+u.value+'"]';default:throw Error(a(365))}}function Md(u,h){var b=[];u=[u,0];for(var E=0;E<u.length;){var N=u[E++],P=N.tag,W=u[E++],st=h[W];if(P!==5&&P!==26&&P!==27||!jl(N)){for(;st!=null&&Pl(N,st);)W++,st=h[W];if(W===h.length)b.push(N);else for(N=N.child;N!==null;)u.push(N,W),N=N.sibling}}return b}function Xc(u,h){if(!Gl)throw Error(a(363));u=Rd(u),u=Md(u,h),h=[],u=Array.from(u);for(var b=0;b<u.length;){var E=u[b++],N=E.tag;if(N===5||N===26||N===27)jl(E)||h.push(E.stateNode);else for(E=E.child;E!==null;)u.push(E),E=E.sibling}return h}function Jn(){if((Jt&2)!==0&&Se!==0)return Se&-Se;if(Zt.T!==null){var u=dn;return u!==0?u:qt()}return Uf()}function Bo(){Da===0&&(Da=(Se&536870912)===0||Be?R():536870912);var u=Ma.current;return u!==null&&(u.flags|=32),Da}function gi(u,h,b){(u===He&&(We===2||We===9)||u.cancelPendingCommit!==null)&&(Ca(u,0),Yi(u,Se,Da,!1)),I(u,b),((Jt&2)===0||u!==He)&&(u===He&&((Jt&2)===0&&(no|=b),Tn===4&&Yi(u,Se,Da,!1)),Xt(u))}function Kc(u,h,b){if((Jt&6)!==0)throw Error(a(327));var E=!b&&(h&124)===0&&(h&u.expiredLanes)===0||T(u,h),N=E?vr(u,h):Ie(u,h,!0),P=E;do{if(N===0){Dr&&!E&&Yi(u,h,0,!1);break}else{if(b=u.current.alternate,P&&!wa(b)){N=Ie(u,h,!1),P=!1;continue}if(N===2){if(P=h,u.errorRecoveryDisabledLanes&P)var W=0;else W=u.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){h=W;t:{var st=u;N=io;var ft=Ki&&st.current.memoizedState.isDehydrated;if(ft&&(Ca(st,W).flags|=256),W=Ie(st,W,!1),W!==2){if(Au&&!ft){st.errorRecoveryDisabledLanes|=P,no|=P,N=4;break t}P=Si,Si=N,P!==null&&(Si===null?Si=P:Si.push.apply(Si,P))}N=W}if(P=!1,N!==2)continue}}if(N===1){Ca(u,0),Yi(u,h,0,!0);break}t:{switch(E=u,P=N,P){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:Yi(E,h,Da,!ps);break t;case 2:Si=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(N=nh+300-en(),10<N)){if(Yi(E,h,Da,!ps),D(E,0,!0)!==0)break t;E.timeoutHandle=Id(oa.bind(null,E,b,Si,Eu,ao,h,Da,no,fa,ps,P,2,-0,0),N);break t}oa(E,b,Si,Eu,ao,h,Da,no,fa,ps,P,0,-0,0)}}break}while(!0);Xt(u)}function oa(u,h,b,E,N,P,W,st,ft,Ct,Ot,zt,Ft,me){if(u.timeoutHandle=Ra,zt=h.subtreeFlags,(zt&8192||(zt&16785408)===16785408)&&(au(),Vc(h),zt=Vf(),zt!==null)){u.cancelPendingCommit=zt(kf.bind(null,u,h,P,b,E,N,W,st,ft,Ot,1,Ft,me)),Yi(u,P,W,!Ct);return}kf(u,h,P,b,E,N,W,st,ft)}function wa(u){for(var h=u;;){var b=h.tag;if((b===0||b===11||b===15)&&h.flags&16384&&(b=h.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var N=b[E],P=N.getSnapshot;N=N.value;try{if(!ca(P(),N))return!1}catch{return!1}}if(b=h.child,h.subtreeFlags&16384&&b!==null)b.return=h,h=b;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Yi(u,h,b,E){h&=~eh,h&=~no,u.suspendedLanes|=h,u.pingedLanes&=~h,E&&(u.warmLanes|=h),E=u.expirationTimes;for(var N=h;0<N;){var P=31-Qi(N),W=1<<P;E[P]=-1,N&=~W}b!==0&&F(u,b,h)}function mr(){return(Jt&6)===0?(ie(0),!1):!0}function Ua(){if(he!==null){if(We===0)var u=he.return;else u=he,yi=Ka=null,ja(u),Tr=null,Zl=0,u=he;for(;u!==null;)Dl(u.alternate,u),u=u.return;he=null}}function Ca(u,h){var b=u.timeoutHandle;b!==Ra&&(u.timeoutHandle=Ra,iu(b)),b=u.cancelPendingCommit,b!==null&&(u.cancelPendingCommit=null,b()),Ua(),He=u,he=b=ns(u.current,null),Se=h,We=0,zi=null,ps=!1,Dr=T(u,h),Au=!1,fa=Da=eh=no=jn=Tn=0,Si=io=null,ao=!1,(h&8)!==0&&(h|=h&32);var E=u.entangledLanes;if(E!==0)for(u=u.entanglements,E&=h;0<E;){var N=31-Qi(E),P=1<<N;h|=u[N],E&=~P}return Pn=h,_o(),b}function Nf(u,h){ve=null,Zt.H=Zs,h===$l||h===cn?(h=ml(),We=3):h===th?(h=ml(),We=4):We=h===Le?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,zi=h,he===null&&(Tn=1,gd(u,U(h,u.current)))}function Dd(){var u=Ma.current;return u===null?!0:(Se&4194048)===Se?Rr===null:(Se&62914560)===Se||(Se&536870912)!==0?u===Rr:!1}function Od(){var u=Zt.H;return Zt.H=Zs,u===null?Zs:u}function mi(){var u=Zt.A;return Zt.A=Jl,u}function _n(){Tn=4,ps||(Se&4194048)!==Se&&Ma.current!==null||(Dr=!0),(jn&134217727)===0&&(no&134217727)===0||He===null||Yi(He,Se,Da,!1)}function Ie(u,h,b){var E=Jt;Jt|=2;var N=Od(),P=mi();(He!==u||Se!==h)&&(Eu=null,Ca(u,h)),h=!1;var W=Tn;t:do try{if(We!==0&&he!==null){var st=he,ft=zi;switch(We){case 8:Ua(),W=6;break t;case 3:case 2:case 9:case 6:Ma.current===null&&(h=!0);var Ct=We;if(We=0,zi=null,Fo(u,st,ft,Ct),b&&Dr){W=0;break t}break;default:Ct=We,We=0,zi=null,Fo(u,st,ft,Ct)}}zo(),W=Tn;break}catch(Ot){Nf(u,Ot)}while(!0);return h&&u.shellSuspendCounter++,yi=Ka=null,Jt=E,Zt.H=N,Zt.A=P,he===null&&(He=null,Se=0,_o()),W}function zo(){for(;he!==null;)ks(he)}function vr(u,h){var b=Jt;Jt|=2;var E=Od(),N=mi();He!==u||Se!==h?(Eu=null,nc=en()+500,Ca(u,h)):Dr=T(u,h);t:do try{if(We!==0&&he!==null){h=he;var P=zi;e:switch(We){case 1:We=0,zi=null,Fo(u,h,P,1);break;case 2:case 9:if(jr(P)){We=0,zi=null,Pf(h);break}h=function(){We!==2&&We!==9||He!==u||(We=7),Xt(u)},P.then(h,h);break t;case 3:We=7;break t;case 4:We=5;break t;case 7:jr(P)?(We=0,zi=null,Pf(h)):(We=0,zi=null,Fo(u,h,P,7));break;case 5:var W=null;switch(he.tag){case 26:W=he.memoizedState;case 5:case 27:var st=he,ft=st.type,Ct=st.pendingProps;if(W?os(W):Hd(ft,Ct)){We=0,zi=null;var Ot=st.sibling;if(Ot!==null)he=Ot;else{var zt=st.return;zt!==null?(he=zt,Bs(zt)):he=null}break e}}We=0,zi=null,Fo(u,h,P,5);break;case 6:We=0,zi=null,Fo(u,h,P,6);break;case 8:Ua(),Tn=6;break t;default:throw Error(a(462))}}Lf();break}catch(Ft){Nf(u,Ft)}while(!0);return yi=Ka=null,Zt.H=E,Zt.A=N,Jt=b,he!==null?0:(He=null,Se=0,_o(),Tn)}function Lf(){for(;he!==null&&!$1();)ks(he)}function ks(u){var h=Fc(u.alternate,u,Pn);u.memoizedProps=u.pendingProps,h===null?Bs(u):he=h}function Pf(u){var h=u,b=h.alternate;switch(h.tag){case 15:case 0:h=Bm(b,h,h.pendingProps,h.type,void 0,Se);break;case 11:h=Bm(b,h,h.pendingProps,h.type.render,h.ref,Se);break;case 5:ja(h);default:Dl(b,h),h=he=zn(h,Pn),h=Fc(b,h,Pn)}u.memoizedProps=u.pendingProps,h===null?Bs(u):he=h}function Fo(u,h,b,E){yi=Ka=null,ja(h),Tr=null,Zl=0;var N=h.return;try{if(G1(u,N,h,b,Se)){Tn=1,gd(u,U(b,u.current)),he=null;return}}catch(P){if(N!==null)throw he=N,P;Tn=1,gd(u,U(b,u.current)),he=null;return}h.flags&32768?(Be||E===1?u=!0:Dr||(Se&536870912)!==0?u=!1:(ps=u=!0,(E===2||E===9||E===3||E===6)&&(E=Ma.current,E!==null&&E.tag===13&&(E.flags|=16384))),kl(h,u)):Bs(h)}function Bs(u){var h=u;do{if((h.flags&32768)!==0){kl(h,ps);return}u=h.return;var b=U1(h.alternate,h,Pn);if(b!==null){he=b;return}if(h=h.sibling,h!==null){he=h;return}he=h=u}while(h!==null);Tn===0&&(Tn=5)}function kl(u,h){do{var b=ra(u.alternate,u);if(b!==null){b.flags&=32767,he=b;return}if(b=u.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!h&&(u=u.sibling,u!==null)){he=u;return}he=u=b}while(u!==null);Tn=6,he=null}function kf(u,h,b,E,N,P,W,st,ft){u.cancelPendingCommit=null;do Ta();while(Xn!==0);if((Jt&6)!==0)throw Error(a(327));if(h!==null){if(h===u.current)throw Error(a(177));if(P=h.lanes|h.childLanes,P|=pp,B(u,b,P,W,st,ft),u===He&&(he=He=null,Se=0),ic=h,ro=u,ac=b,ih=P,ah=N,Jo=E,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,Gm(Wd,function(){return br(),null})):(u.callbackNode=null,u.callbackPriority=0),E=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||E){E=Zt.T,Zt.T=null,N=Va(),ti(2),W=Jt,Jt|=4;try{Im(u,h,b)}finally{Jt=W,ti(N),Zt.T=E}}Xn=1,Bl(),Nd(),zs()}}function Bl(){if(Xn===1){Xn=0;var u=ro,h=ic,b=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||b){b=Zt.T,Zt.T=null;var E=Va();ti(2);var N=Jt;Jt|=4;try{Of(h,u),be(u.containerInfo)}finally{Jt=N,ti(E),Zt.T=b}}u.current=h,Xn=2}}function Nd(){if(Xn===2){Xn=0;var u=ro,h=ic,b=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||b){b=Zt.T,Zt.T=null;var E=Va();ti(2);var N=Jt;Jt|=4;try{Os(u,h.alternate,h)}finally{Jt=N,ti(E),Zt.T=b}}Xn=3}}function zs(){if(Xn===4||Xn===3){Xn=0,w0();var u=ro,h=ic,b=ac,E=Jo;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Xn=5:(Xn=0,ic=ro=null,yr(u,u.pendingLanes));var N=u.pendingLanes;if(N===0&&(Or=null),Z(b),h=h.stateNode,Li&&typeof Li.onCommitFiberRoot=="function")try{Li.onCommitFiberRoot(qs,h,void 0,(h.current.flags&128)===128)}catch{}if(E!==null){h=Zt.T,N=Va(),ti(2),Zt.T=null;try{for(var P=u.onRecoverableError,W=0;W<E.length;W++){var st=E[W];P(st.value,{componentStack:st.stack})}}finally{Zt.T=h,ti(N)}}(ac&3)!==0&&Ta(),Xt(u),N=u.pendingLanes,(b&4194090)!==0&&(N&42)!==0?u===rh?so++:(so=0,rh=u):so=0,ie(0)}}function yr(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,ee(h)))}function Ta(u){return Bl(),Nd(),zs(),br()}function br(){if(Xn!==5)return!1;var u=ro,h=ih;ih=0;var b=Z(ac),E=32>b?32:b;b=Zt.T;var N=Va();try{ti(E),Zt.T=null,E=ah,ah=null;var P=ro,W=ac;if(Xn=0,ic=ro=null,ac=0,(Jt&6)!==0)throw Error(a(331));var st=Jt;if(Jt|=4,Vi(P.current),qc(P,P.current,W,E),Jt=st,ie(0,!1),Li&&typeof Li.onPostCommitFiberRoot=="function")try{Li.onPostCommitFiberRoot(qs,P)}catch{}return!0}finally{ti(N),Zt.T=b,yr(u,h)}}function Ld(u,h,b){h=U(b,h),h=md(u.stateNode,h,2),u=Vr(u,h,2),u!==null&&(I(u,2),Xt(u))}function Xe(u,h,b){if(u.tag===3)Ld(u,u,b);else for(;h!==null;){if(h.tag===3){Ld(h,u,b);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Or===null||!Or.has(E))){u=U(b,u),b=Mm(2),E=Vr(h,b,2),E!==null&&(Dm(b,E,h,u),I(E,2),Xt(E));break}}h=h.return}}function Io(u,h,b){var E=u.pingCache;if(E===null){E=u.pingCache=new eo;var N=new Set;E.set(h,N)}else N=E.get(h),N===void 0&&(N=new Set,E.set(h,N));N.has(b)||(Au=!0,N.add(b),u=Pd.bind(null,u,h,b),h.then(u,u))}function Pd(u,h,b){var E=u.pingCache;E!==null&&E.delete(h),u.pingedLanes|=u.suspendedLanes&b,u.warmLanes&=~b,He===u&&(Se&b)===b&&(Tn===4||Tn===3&&(Se&62914560)===Se&&300>en()-nh?(Jt&2)===0&&Ca(u,0):eh|=b,fa===Se&&(fa=0)),Xt(u)}function Fs(u,h){h===0&&(h=O()),u=on(u,h),u!==null&&(I(u,h),Xt(u))}function vi(u){var h=u.memoizedState,b=0;h!==null&&(b=h.retryLane),Fs(u,b)}function kd(u,h){var b=0;switch(u.tag){case 13:var E=u.stateNode,N=u.memoizedState;N!==null&&(b=N.retryLane);break;case 19:E=u.stateNode;break;case 22:E=u.stateNode._retryCache;break;default:throw Error(a(314))}E!==null&&E.delete(h),Fs(u,b)}function Gm(u,h){return fu(u,h)}function V1(u,h,b,E){this.tag=u,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function ns(u,h){var b=u.alternate;return b===null?(b=e(u.tag,h,u.key,u.mode),b.elementType=u.elementType,b.type=u.type,b.stateNode=u.stateNode,b.alternate=u,u.alternate=b):(b.pendingProps=h,b.type=u.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=u.flags&65011712,b.childLanes=u.childLanes,b.lanes=u.lanes,b.child=u.child,b.memoizedProps=u.memoizedProps,b.memoizedState=u.memoizedState,b.updateQueue=u.updateQueue,h=u.dependencies,b.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},b.sibling=u.sibling,b.index=u.index,b.ref=u.ref,b.refCleanup=u.refCleanup,b}function zn(u,h){u.flags&=65011714;var b=u.alternate;return b===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=b.childLanes,u.lanes=b.lanes,u.child=b.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=b.memoizedProps,u.memoizedState=b.memoizedState,u.updateQueue=b.updateQueue,u.type=b.type,h=b.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function zl(u,h,b,E,N,P){var W=0;if(E=u,typeof u=="function")Bf(u)&&(W=1);else if(typeof u=="string")W=Ni&&Te?cu(u,b,bn.current)?26:up(u)?27:5:Ni?cu(u,b,bn.current)?26:5:Te&&up(u)?27:5;else t:switch(u){case Vo:return u=e(31,b,h,N),u.elementType=Vo,u.lanes=P,u;case qo:return qa(b.children,N,P,h);case $c:W=8,N|=24;break;case zd:return u=e(12,b,h,N|2),u.elementType=zd,u.lanes=P,u;case Zc:return u=e(13,b,h,N),u.elementType=Zc,u.lanes=P,u;case Jc:return u=e(19,b,h,N),u.elementType=Jc,u.lanes=P,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case Qc:case as:W=10;break t;case If:W=9;break t;case xr:W=11;break t;case Sr:W=14;break t;case Oi:W=16,E=null;break t}W=29,b=Error(a(130,u===null?"null":typeof u,"")),E=null}return h=e(W,b,h,N),h.elementType=u,h.type=E,h.lanes=P,h}function qa(u,h,b,E){return u=e(7,u,E,h),u.lanes=b,u}function Ho(u,h,b){return u=e(6,u,null,h),u.lanes=b,u}function Wc(u,h,b){return h=e(4,u.children!==null?u.children:[],u.key,h),h.lanes=b,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function Fl(u,h,b,E,N,P,W,st){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ra,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=E,this.onUncaughtError=N,this.onCaughtError=P,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=st,this.incompleteTransitions=new Map}function Go(u,h,b,E,N,P,W,st,ft,Ct,Ot,zt){return u=new Fl(u,h,b,W,st,ft,Ct,zt),h=1,P===!0&&(h|=24),P=e(3,null,null,h),u.current=P,P.stateNode=u,h=Ht(),h.refCount++,u.pooledCache=h,h.refCount++,P.memoizedState={element:E,isDehydrated:b,cache:h},Rc(P),u}function jm(u){return u?(u=Ko,u):Ko}function zf(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=c(h),u=u!==null?d(u):null,u===null?null:Hl(u.stateNode)}function Um(u,h,b,E,N,P){N=jm(N),E.context===null?E.context=N:E.pendingContext=N,E=ws(h),E.payload={element:b},P=P===void 0?null:P,P!==null&&(E.callback=P),b=Vr(u,E,h),b!==null&&(gi(b,u,h),Yr(b,u,h))}function Ff(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var b=u.retryLane;u.retryLane=b!==0&&b<h?b:h}}function is(u,h){Ff(u,h),(u=u.alternate)&&Ff(u,h)}var ye={},Bd=bo(),Xi=a_(),jo=Object.assign,qm=Symbol.for("react.element"),Uo=Symbol.for("react.transitional.element"),Is=Symbol.for("react.portal"),qo=Symbol.for("react.fragment"),$c=Symbol.for("react.strict_mode"),zd=Symbol.for("react.profiler"),Qc=Symbol.for("react.provider"),If=Symbol.for("react.consumer"),as=Symbol.for("react.context"),xr=Symbol.for("react.forward_ref"),Zc=Symbol.for("react.suspense"),Jc=Symbol.for("react.suspense_list"),Sr=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),Vo=Symbol.for("react.activity"),Hf=Symbol.for("react.memo_cache_sentinel"),Fd=Symbol.iterator,tu=Symbol.for("react.client.reference"),Hs=Array.isArray,Zt=Bd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Vm=t.rendererVersion,Il=t.rendererPackageName,eu=t.extraDevToolsConfig,Hl=t.getPublicInstance,Gf=t.getRootHostContext,jf=t.getChildHostContext,Gs=t.prepareForCommit,be=t.resetAfterCommit,tn=t.createInstance;t.cloneMutableInstance;var Mn=t.appendInitialChild,nu=t.finalizeInitialChildren,rs=t.shouldSetTextContent,js=t.createTextInstance;t.cloneMutableTextInstance;var Id=t.scheduleTimeout,iu=t.cancelTimeout,Ra=t.noTimeout,ss=t.isPrimaryRenderer;t.warnsIfNotActing;var De=t.supportsMutation,_r=t.supportsPersistence,Ki=t.supportsHydration,Ym=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var Xm=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var ti=t.setCurrentUpdatePriority,Va=t.getCurrentUpdatePriority,Uf=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var qf=t.shouldAttemptEagerTransition,Wi=t.detachDeletedInstance;t.requestPostPaintCallback;var Fn=t.maySuspendCommit,Hd=t.preloadInstance,au=t.startSuspendingCommit,ru=t.suspendInstance;t.suspendOnActiveViewTransition;var Vf=t.waitForCommitToBeReady,$i=t.NotPendingTransition,Ar=t.HostTransitionContext,Yf=t.resetFormInstance;t.bindToConsole;var Xf=t.supportsMicrotasks,Km=t.scheduleMicrotask,Gl=t.supportsTestSelectors,Wm=t.findFiberRoot,$m=t.getBoundingRect,Qm=t.getTextContent,jl=t.isHiddenSubtree,Kf=t.matchAccessibilityRole,Zm=t.setFocusIfFocusable,Y1=t.setupIntersectionObserver,Jm=t.appendChild,t0=t.appendChildToContainer,e0=t.commitTextUpdate,Wf=t.commitMount,n0=t.commitUpdate,i0=t.insertBefore,a0=t.insertInContainerBefore,r0=t.removeChild,s0=t.removeChildFromContainer,o0=t.resetTextContent,l0=t.hideInstance,Ul=t.hideTextInstance,Gd=t.unhideInstance,c0=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopGestureTransition,t.getCurrentGestureOffset,t.subscribeToGestureDirection,t.createViewTransitionInstance;var jd=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var su=t.cloneInstance,$f=t.createContainerChildSet,Qf=t.appendChildToContainerChildSet,u0=t.finalizeContainerChildren,Zf=t.replaceContainerChildren,Jf=t.cloneHiddenInstance,tp=t.cloneHiddenTextInstance,ou=t.isSuspenseInstancePending,Ud=t.isSuspenseInstanceFallback,d0=t.getSuspenseInstanceFallbackErrorDetails,ep=t.registerSuspenseInstanceRetry,h0=t.canHydrateFormStateMarker,f0=t.isFormStateMarkerMatching,p0=t.getNextHydratableSibling,np=t.getNextHydratableSiblingAfterSingleton,g0=t.getFirstHydratableChild,m0=t.getFirstHydratableChildWithinContainer,ip=t.getFirstHydratableChildWithinSuspenseInstance,v0=t.getFirstHydratableChildWithinSingleton,y0=t.canHydrateInstance,X1=t.canHydrateTextInstance,K1=t.canHydrateSuspenseInstance,b0=t.hydrateInstance,lu=t.hydrateTextInstance,ap=t.hydrateSuspenseInstance,qd=t.getNextHydratableInstanceAfterSuspenseInstance,x0=t.commitHydratedContainer,S0=t.commitHydratedSuspenseInstance,Vd=t.clearSuspenseBoundary,_0=t.clearSuspenseBoundaryFromContainer,rp=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var W1=t.validateHydratableInstance,ql=t.validateHydratableTextInstance,Ni=t.supportsResources,cu=t.isHostHoistableType,Yo=t.getHoistableRoot,uu=t.getResource,sp=t.acquireResource,op=t.releaseResource,Vl=t.hydrateHoistable,lp=t.mountHoistable,la=t.unmountHoistable,Er=t.createHoistableInstance,Us=t.prepareToCommitHoistables,A0=t.mayResourceSuspendCommit,os=t.preloadResource,ls=t.suspendResource,Te=t.supportsSingletons,du=t.resolveSingletonInstance,cp=t.acquireSingletonInstance,Yd=t.releaseSingletonInstance,up=t.isHostSingletonType,Xo=t.isSingletonScope,cs=[],us=-1,Ko={},Qi=Math.clz32?Math.clz32:_,E0=Math.log,Xd=Math.LN2,hu=256,Yl=4194304,fu=Xi.unstable_scheduleCallback,Kd=Xi.unstable_cancelCallback,$1=Xi.unstable_shouldYield,w0=Xi.unstable_requestPaint,en=Xi.unstable_now,ei=Xi.unstable_ImmediatePriority,C0=Xi.unstable_UserBlockingPriority,Wd=Xi.unstable_NormalPriority,T0=Xi.unstable_IdlePriority,R0=Xi.log,M0=Xi.unstable_setDisableYieldValue,qs=null,Li=null,$d,dp,Qd=!1,Zd=new WeakMap,Vs=[],Ys=0,pu=null,Xl=0,Pi=[],Zi=0,Xs=null,Ya=1,wr="",bn=v(null),Wo=v(null),Ks=v(null),gu=v(null),Cn=null,In=null,Be=!1,Xa=null,Ve=!1,hp=Error(a(519)),ca=typeof Object.is=="function"?Object.is:de,mu=v(null),Ka=null,yi=null,D0=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(b,E){u.push(E)}};this.abort=function(){h.aborted=!0,u.forEach(function(b){return b()})}},O0=Xi.unstable_scheduleCallback,vu=Xi.unstable_NormalPriority,Ke={$$typeof:as,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},yu=null,Ws=null,Jd=!1,Kl=!1,bu=!1,ds=0,Wl=null,Wa=0,dn=0,$s=null,fp=Zt.S;Zt.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&$e(u,h),fp!==null&&fp(u,h)};var An=v(null),Q1=Object.prototype.hasOwnProperty,$l=Error(a(460)),th=Error(a(474)),cn=Error(a(542)),li={then:function(){}},Ji=null,ua=[],$o=0,pp=0,Cr=!1,ki=!1,bi=v(null),xu=v(0),Hn=0,ve=null,Ne=null,hn=null,$a=!1,Qs=!1,hs=!1,da=0,Ql=0,Qa=null,Su=0,Zs={readContext:$t,use:_l,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln},Qo={readContext:$t,use:_l,useCallback:function(u,h){return hi().memoizedState=[u,h===void 0?null:h],u},useContext:$t,useEffect:gf,useImperativeHandle:function(u,h,b){b=b!=null?b.concat([u]):null,Nc(4194308,4,wl.bind(null,h,u),b)},useLayoutEffect:function(u,h){return Nc(4194308,4,u,h)},useInsertionEffect:function(u,h){Nc(4,2,u,h)},useMemo:function(u,h){var b=hi();h=h===void 0?null:h;var E=u();if(hs){nt(!0);try{u()}finally{nt(!1)}}return b.memoizedState=[E,h],E},useReducer:function(u,h,b){var E=hi();if(b!==void 0){var N=b(h);if(hs){nt(!0);try{b(h)}finally{nt(!1)}}}else N=h;return E.memoizedState=E.baseState=N,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:N},E.queue=u,u=u.dispatch=yf.bind(null,ve,u),[E.memoizedState,u]},useRef:function(u){var h=hi();return u={current:u},h.memoizedState=u},useState:function(u){u=ad(u);var h=u.queue,b=ud.bind(null,ve,h);return h.dispatch=b,[u.memoizedState,b]},useDebugValue:Lc,useDeferredValue:function(u,h){var b=hi();return Cl(b,u,h)},useTransition:function(){var u=ad(!1);return u=vf.bind(null,ve,u.queue,!0,!1),hi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,b){var E=ve,N=hi();if(Be){if(b===void 0)throw Error(a(407));b=b()}else{if(b=h(),He===null)throw Error(a(349));(Se&124)!==0||cf(E,h,b)}N.memoizedState=b;var P={value:b,getSnapshot:h};return N.queue=P,gf(bm.bind(null,E,P,u),[u]),E.flags|=2048,Rs(9,Xr(),Oc.bind(null,E,P,b,h),null),b},useId:function(){var u=hi(),h=He.identifierPrefix;if(Be){var b=wr,E=Ya;b=(E&~(1<<32-Qi(E)-1)).toString(32)+b,h=""+h+"R"+b,b=da++,0<b&&(h+="H"+b.toString(32)),h+=""}else b=Su++,h=""+h+"r"+b.toString(32)+"";return u.memoizedState=h},useHostTransitionStatus:Wr,useFormState:sd,useActionState:sd,useOptimistic:function(u){var h=hi();h.memoizedState=h.baseState=u;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=b,h=Rl.bind(null,ve,!0,b),b.dispatch=h,[u,h]},useMemoCache:of,useCacheRefresh:function(){return hi().memoizedState=H1.bind(null,ve)}},gp={readContext:$t,use:_l,useCallback:Pc,useContext:$t,useEffect:El,useImperativeHandle:Kr,useInsertionEffect:dr,useLayoutEffect:cd,useMemo:mf,useReducer:Mi,useRef:Co,useState:function(){return Mi(ur)},useDebugValue:Lc,useDeferredValue:function(u,h){var b=Ln();return kc(b,Ne.memoizedState,u,h)},useTransition:function(){var u=Mi(ur)[0],h=Ln().memoizedState;return[typeof u=="boolean"?u:Eo(u),h]},useSyncExternalStore:Dc,useId:Bc,useHostTransitionStatus:Wr,useFormState:xm,useActionState:xm,useOptimistic:function(u,h){var b=Ln();return rd(b,Ne,u,h)},useMemoCache:of,useCacheRefresh:Tl},N0={readContext:$t,use:_l,useCallback:Pc,useContext:$t,useEffect:El,useImperativeHandle:Kr,useInsertionEffect:dr,useLayoutEffect:cd,useMemo:mf,useReducer:lf,useRef:Co,useState:function(){return lf(ur)},useDebugValue:Lc,useDeferredValue:function(u,h){var b=Ln();return Ne===null?Cl(b,u,h):kc(b,Ne.memoizedState,u,h)},useTransition:function(){var u=lf(ur)[0],h=Ln().memoizedState;return[typeof u=="boolean"?u:Eo(u),h]},useSyncExternalStore:Dc,useId:Bc,useHostTransitionStatus:Wr,useFormState:ld,useActionState:ld,useOptimistic:function(u,h){var b=Ln();return Ne!==null?rd(b,Ne,u,h):(b.baseState=u,[u,b.queue.dispatch])},useMemoCache:of,useCacheRefresh:Tl},Tr=null,Zl=0,fs=wm(!0),mp=wm(!1),Ma=v(null),Rr=null,oe=v(0),nn={enqueueSetState:function(u,h,b){u=u._reactInternals;var E=Jn(),N=ws(E);N.payload=h,b!=null&&(N.callback=b),h=Vr(u,N,E),h!==null&&(gi(h,u,E),Yr(h,u,E))},enqueueReplaceState:function(u,h,b){u=u._reactInternals;var E=Jn(),N=ws(E);N.tag=1,N.payload=h,b!=null&&(N.callback=b),h=Vr(u,N,E),h!==null&&(gi(h,u,E),Yr(h,u,E))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var b=Jn(),E=ws(b);E.tag=2,h!=null&&(E.callback=h),h=Vr(u,E,b),h!==null&&(gi(h,u,b),Yr(h,u,b))}},Ee=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Le=Error(a(461)),le=!1,Bi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},xi=!1,fn=!1,_u=!1,Mr=typeof WeakSet=="function"?WeakSet:Set,xe=null,un=null,Gn=!1,ha=null,ci=8192,Jl={getCacheForType:function(u){var h=$t(Ke),b=h.data.get(u);return b===void 0&&(b=u(),h.data.set(u,b)),b}},Js=0,ui=1,tc=2,ec=3,Zo=4;if(typeof Symbol=="function"&&Symbol.for){var to=Symbol.for;Js=to("selector.component"),ui=to("selector.has_pseudo_class"),tc=to("selector.role"),ec=to("selector.test_id"),Zo=to("selector.text")}var eo=typeof WeakMap=="function"?WeakMap:Map,Jt=0,He=null,he=null,Se=0,We=0,zi=null,ps=!1,Dr=!1,Au=!1,Pn=0,Tn=0,jn=0,no=0,eh=0,Da=0,fa=0,io=null,Si=null,ao=!1,nh=0,nc=1/0,Eu=null,Or=null,Xn=0,ro=null,ic=null,ac=0,ih=0,ah=null,Jo=null,so=0,rh=null;return ye.attemptContinuousHydration=function(u){if(u.tag===13){var h=on(u,67108864);h!==null&&gi(h,u,67108864),is(u,67108864)}},ye.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Jn();h=j(h);var b=on(u,h);b!==null&&gi(b,u,h),is(u,h)}},ye.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=C(u.pendingLanes);if(h!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;h;){var b=1<<31-Qi(h);u.entanglements[1]|=b,h&=~b}Xt(u),(Jt&6)===0&&(nc=en()+500,ie(0))}}break;case 13:h=on(u,2),h!==null&&gi(h,u,2),mr(),is(u,2)}},ye.batchedUpdates=function(u,h){return u(h)},ye.createComponentSelector=function(u){return{$$typeof:Js,value:u}},ye.createContainer=function(u,h,b,E,N,P,W,st,ft,Ct){return Go(u,h,!1,null,b,E,P,W,st,ft,Ct,null)},ye.createHasPseudoClassSelector=function(u){return{$$typeof:ui,value:u}},ye.createHydrationContainer=function(u,h,b,E,N,P,W,st,ft,Ct,Ot,zt,Ft){return u=Go(b,E,!0,u,N,P,st,ft,Ct,Ot,zt,Ft),u.context=jm(null),b=u.current,E=Jn(),E=j(E),N=ws(E),N.callback=h??null,Vr(b,N,E),h=E,u.current.lanes=h,I(u,h),Xt(u),u},ye.createPortal=function(u,h,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:E==null?null:""+E,children:u,containerInfo:h,implementation:b}},ye.createRoleSelector=function(u){return{$$typeof:tc,value:u}},ye.createTestNameSelector=function(u){return{$$typeof:ec,value:u}},ye.createTextSelector=function(u){return{$$typeof:Zo,value:u}},ye.defaultOnCaughtError=function(u){console.error(u)},ye.defaultOnRecoverableError=function(u){Ee(u)},ye.defaultOnUncaughtError=function(u){Ee(u)},ye.deferredUpdates=function(u){var h=Zt.T,b=Va();try{return ti(32),Zt.T=null,u()}finally{ti(b),Zt.T=h}},ye.discreteUpdates=function(u,h,b,E,N){var P=Zt.T,W=Va();try{return ti(2),Zt.T=null,u(h,b,E,N)}finally{ti(W),Zt.T=P,Jt===0&&(nc=en()+500)}},ye.findAllNodes=Xc,ye.findBoundingRects=function(u,h){if(!Gl)throw Error(a(363));h=Xc(u,h),u=[];for(var b=0;b<h.length;b++)u.push($m(h[b]));for(h=u.length-1;0<h;h--){b=u[h];for(var E=b.x,N=E+b.width,P=b.y,W=P+b.height,st=h-1;0<=st;st--)if(h!==st){var ft=u[st],Ct=ft.x,Ot=Ct+ft.width,zt=ft.y,Ft=zt+ft.height;if(E>=Ct&&P>=zt&&N<=Ot&&W<=Ft){u.splice(h,1);break}else if(E!==Ct||b.width!==ft.width||Ft<P||zt>W){if(!(P!==zt||b.height!==ft.height||Ot<E||Ct>N)){Ct>E&&(ft.width+=Ct-E,ft.x=E),Ot<N&&(ft.width=N-Ct),u.splice(h,1);break}}else{zt>P&&(ft.height+=zt-P,ft.y=P),Ft<W&&(ft.height=W-zt),u.splice(h,1);break}}}return u},ye.findHostInstance=zf,ye.findHostInstanceWithNoPortals=function(u){return u=c(u),u=u!==null?f(u):null,u===null?null:Hl(u.stateNode)},ye.findHostInstanceWithWarning=function(u){return zf(u)},ye.flushPassiveEffects=Ta,ye.flushSyncFromReconciler=function(u){var h=Jt;Jt|=1;var b=Zt.T,E=Va();try{if(ti(2),Zt.T=null,u)return u()}finally{ti(E),Zt.T=b,Jt=h,(Jt&6)===0&&ie(0)}},ye.flushSyncWork=mr,ye.focusWithin=function(u,h){if(!Gl)throw Error(a(363));for(u=Rd(u),h=Md(u,h),h=Array.from(h),u=0;u<h.length;){var b=h[u++],E=b.tag;if(!jl(b)){if((E===5||E===26||E===27)&&Zm(b.stateNode))return!0;for(b=b.child;b!==null;)h.push(b),b=b.sibling}}return!1},ye.getFindAllNodesFailureDescription=function(u,h){if(!Gl)throw Error(a(363));var b=0,E=[];u=[Rd(u),0];for(var N=0;N<u.length;){var P=u[N++],W=P.tag,st=u[N++],ft=h[st];if((W!==5&&W!==26&&W!==27||!jl(P))&&(Pl(P,ft)&&(E.push(es(ft)),st++,st>b&&(b=st)),st<h.length))for(P=P.child;P!==null;)u.push(P,st),P=P.sibling}if(b<h.length){for(u=[];b<h.length;b++)u.push(es(h[b]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},ye.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Hl(u.child.stateNode);default:return u.child.stateNode}},ye.injectIntoDevTools=function(){var u={bundleType:0,version:Vm,rendererPackageName:Il,currentDispatcherRef:Zt,reconcilerVersion:"19.1.0"};if(eu!==null&&(u.rendererConfig=eu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{qs=h.inject(u),Li=h}catch{}u=!!h.checkDCE}}return u},ye.isAlreadyRendering=function(){return(Jt&6)!==0},ye.observeVisibleRects=function(u,h,b,E){if(!Gl)throw Error(a(363));u=Xc(u,h);var N=Y1(u,b,E).disconnect;return{disconnect:function(){N()}}},ye.shouldError=function(){return null},ye.shouldSuspend=function(){return!1},ye.startHostTransition=function(u,h,b,E){if(u.tag!==5)throw Error(a(476));var N=Di(u).queue;vf(u,N,h,$i,b===null?i:function(){var P=Di(u).next.queue;return $r(u,P,{},Jn()),b(E)})},ye.updateContainer=function(u,h,b,E){var N=h.current,P=Jn();return Um(N,P,u,h,b,E),P},ye.updateContainerSync=function(u,h,b,E){return Um(h.current,2,u,h,b,E),2},ye},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(nS)),nS.exports}var H6;function lY(){return H6||(H6=1,eS.exports=oY()),eS.exports}var cY=lY();const uY=rr(cY);var iS={exports:{}},al={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G6;function dY(){return G6||(G6=1,al.ConcurrentRoot=1,al.ContinuousEventPriority=8,al.DefaultEventPriority=32,al.DiscreteEventPriority=2,al.IdleEventPriority=268435456,al.LegacyRoot=0,al.NoEventPriority=0),al}var j6;function hY(){return j6||(j6=1,iS.exports=dY()),iS.exports}var S1=hY(),fY=Re();const U6={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let q6=!1,V6=!1;const Iv=".react-konva-event",pY=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,gY=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,mY={};function _1(n,t,e=mY){if(!q6&&"zIndex"in t&&(console.warn(gY),q6=!0),!V6&&t.draggable){var i=t.x!==void 0||t.y!==void 0,a=t.onDragEnd||t.onDragMove;i&&!a&&(console.warn(pY),V6=!0)}for(var s in e)if(!U6[s]){var o=s.slice(0,2)==="on",c=e[s]!==t[s];if(o&&c){var d=s.substr(2).toLowerCase();d.substr(0,7)==="content"&&(d="content"+d.substr(7,1).toUpperCase()+d.substr(8)),n.off(d,e[s])}var f=!t.hasOwnProperty(s);f&&n.setAttr(s,void 0)}var g=t._useStrictMode,m={},v=!1;const x={};for(var s in t)if(!U6[s]){var o=s.slice(0,2)==="on",S=e[s]!==t[s];if(o&&S){var d=s.substr(2).toLowerCase();d.substr(0,7)==="content"&&(d="content"+d.substr(7,1).toUpperCase()+d.substr(8)),t[s]&&(x[d]=t[s])}!o&&(t[s]!==e[s]||g&&t[s]!==n.getAttr(s))&&(v=!0,m[s]=t[s])}v&&(n.setAttrs(m),Tc(n));for(var d in x)n.off(d+Iv),n.on(d+Iv,x[d])}function Tc(n){if(!fY.Konva.autoDrawEnabled){var t=n.getLayer()||n.getStage();t&&t.batchDraw()}}var aS=a_();const g9={},vY={};Fv.Node.prototype._applyProps=_1;let m9=S1.DefaultEventPriority;function yY(n,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}n.add(t),Tc(n)}function bY(n,t,e){let i=Fv[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Fv.Group);const a={},s={};for(var o in t)if(o!=="ref"){var c=o.slice(0,2)==="on";c?s[o]=t[o]:a[o]=t[o]}const d=new i(a);return _1(d,s),d}function xY(n,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function SY(n,t,e){return!1}function _Y(n){return n}function AY(){return null}function EY(){return null}function wY(n,t,e,i){return vY}function CY(){}function TY(n){}function RY(n,t){return!1}function MY(){return g9}function DY(){return g9}const OY=setTimeout,NY=clearTimeout,LY=!0,PY=n=>{n()},kY=-1;function BY(n,t){return!1}const zY=!1,FY=!1,IY=!0,HY=!1,GY=!1;function jY(n,t){t.parent===n?t.moveToTop():n.add(t),Tc(n)}function UY(n,t){t.parent===n?t.moveToTop():n.add(t),Tc(n)}function v9(n,t,e){t._remove(),n.add(t),t.setZIndex(e.getZIndex()),Tc(n)}function qY(n,t,e){v9(n,t,e)}function VY(n,t){t.destroy(),t.off(Iv),Tc(n)}function YY(n,t){t.destroy(),t.off(Iv),Tc(n)}function XY(n,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function KY(n,t,e){}function WY(n,t,e,i){_1(n,i,e)}function $Y(n){n.hide(),Tc(n)}function QY(n){}function ZY(n,t){(t.visible==null||t.visible)&&n.show()}function JY(n,t){}function tX(n){}function eX(){}function nX(){return S1.DefaultEventPriority}function iX(){}function aX(){return null}function rX(n){m9=n}function sX(){return m9}function oX(){return S1.DiscreteEventPriority}function lX(){return!1}function cX(){}function uX(){return!1}function dX(){return!0}function hX(){}function fX(){}function pX(){return null}const gX=null;function mX(){}const vX=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:gX,appendChild:jY,appendChildToContainer:UY,appendInitialChild:yY,cancelTimeout:NY,clearContainer:tX,commitMount:KY,commitTextUpdate:XY,commitUpdate:WY,createInstance:bY,createTextInstance:xY,detachDeletedInstance:eX,finalizeInitialChildren:SY,getChildHostContext:DY,getCurrentEventPriority:nX,getCurrentUpdatePriority:sX,getInstanceFromScope:aX,getPublicInstance:_Y,getRootHostContext:MY,hideInstance:$Y,hideTextInstance:QY,idlePriority:aS.unstable_IdlePriority,insertBefore:v9,insertInContainerBefore:qY,isPrimaryRenderer:zY,maySuspendCommit:uX,noTimeout:kY,now:aS.unstable_now,preloadInstance:dX,prepareForCommit:AY,preparePortalMount:EY,prepareScopeUpdate:iX,prepareUpdate:wY,removeChild:VY,removeChildFromContainer:YY,requestPostPaintCallback:cX,resetAfterCommit:CY,resetFormInstance:mX,resetTextContent:TY,resolveUpdatePriority:oX,run:aS.unstable_runWithPriority,scheduleMicrotask:PY,scheduleTimeout:OY,setCurrentUpdatePriority:rX,shouldAttemptEagerTransition:lX,shouldDeprioritizeSubtree:RY,shouldSetTextContent:BY,startSuspendingCommit:hX,supportsHydration:GY,supportsMicrotasks:LY,supportsMutation:IY,supportsPersistence:HY,suspendInstance:fX,unhideInstance:ZY,unhideTextInstance:JY,waitForCommitToBeReady:pX,warnsIfNotActing:FY},Symbol.toStringTag,{value:"Module"}));function y9(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const a=y9(i,t,e);if(a)return a;i=i.sibling}}function b9(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const wA=b9(X.createContext(null));let x9=class extends X.Component{render(){return X.createElement(wA.Provider,{value:this._reactInternals},this.props.children)}};function yX(){const n=X.useContext(wA);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=X.useId();return X.useMemo(()=>{for(const e of[n,n?.alternate]){if(!e)continue;const i=y9(e,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===t)return!0;s=s.next}});if(i)return i}},[n,t])}const bX=Symbol.for("react.context"),xX=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===bX;function SX(){const n=yX(),[t]=X.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;xX(i)&&i!==wA&&!t.has(i)&&t.set(i,X.use(b9(i))),e=e.return}return t}function S9(){const n=SX();return X.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>X.createElement(t,null,X.createElement(e.Provider,{...i,value:n.get(e)})),t=>X.createElement(x9,{...t})),[n])}if(q.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function _X(n){const t=q.useRef({});return q.useLayoutEffect(()=>{t.current=n}),q.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const AX=()=>{const n=q.useRef(0);return q.useMemo(()=>{n.current++},[]),n.current>1},EX=n=>{const t=q.useRef(null),e=q.useRef(null),i=q.useRef(null),a=_X(n),s=S9(),o=q.useRef(!1),c=f=>{const{forwardedRef:g}=n;g&&(typeof g=="function"?g(f):g.current=f)},d=AX();return q.useLayoutEffect(()=>o.current&&d?()=>{o.current=!1,c(null),Ph.updateContainer(null,i.current,null),e.current.destroy()}:(o.current=!0,e.current=new Fv.Stage({width:n.width,height:n.height,container:t.current}),c(e.current),i.current=Ph.createContainer(e.current,S1.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Ph.updateContainer(q.createElement(s,{},n.children),i.current,null,()=>{}),()=>{d||(c(null),Ph.updateContainer(null,i.current,null),e.current.destroy())}),[]),q.useLayoutEffect(()=>{c(e.current),_1(e.current,n,a),Ph.updateContainer(q.createElement(s,{},n.children),i.current,null)}),q.createElement("div",{ref:t,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},wX="Layer",um="Group",Iu="Rect",CX="Circle",Hv="Line",CA="Image",TX="Text",RX="Arrow",pl="Transformer",Ph=uY(vX);Ph.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:q.version,rendererPackageName:"react-konva"});const MX=q.forwardRef((n,t)=>q.createElement(x9,{},q.createElement(EX,{...n,forwardedRef:t})));var rS,Y6;function DX(){if(Y6)return rS;Y6=1;var n=bo();return rS=function(e,i,a){const s=n.useRef("loading"),o=n.useRef(),[c,d]=n.useState(0),f=n.useRef(),g=n.useRef(),m=n.useRef();return(f.current!==e||g.current!==i||m.current!==a)&&(s.current="loading",o.current=void 0,f.current=e,g.current=i,m.current=a),n.useLayoutEffect(function(){if(!e)return;var v=document.createElement("img");function x(){v.decode().catch(()=>{}).finally(()=>{s.current="loaded",o.current=v,d(Math.random())})}function S(){s.current="failed",o.current=void 0,d(Math.random())}return v.addEventListener("load",x),v.addEventListener("error",S),i&&(v.crossOrigin=i),a&&(v.referrerPolicy=a),v.src=e,function(){v.removeEventListener("load",x),v.removeEventListener("error",S)}},[e,i,a]),[o.current,s.current]},rS}var OX=DX();const TA=rr(OX);function NX(n,{zoom:t,setZoom:e,pan:i,setPan:a,tool:s}){X.useEffect(()=>{const o=n.current;if(!o)return;const c=d=>{d.evt.preventDefault();const f=1.02,g=t,m=o.getPointerPosition(),v={x:(m.x-o.x())/g,y:(m.y-o.y())/g},S=(d.evt.deltaY>0?-1:1)>0?g*f:g/f;e(S);const _={x:m.x-v.x*S,y:m.y-v.y*S};a(_)};return o.on("wheel",c),()=>{o.off("wheel",c)}},[t,e,a,n]),X.useEffect(()=>{const o=n.current;if(!o)return;o.draggable(s==="hand");const c=()=>{s==="hand"&&a({x:o.x(),y:o.y()})};return o.on("dragend",c),()=>{o.off("dragend",c)}},[s,a,n])}function LX({autoEditTextId:n,setAutoEditTextId:t,selectedShapeId:e,selectedShapeIds:i,clearSelection:a,copyShape:s,pasteShape:o,toggleGrid:c,toggleLayersPanel:d,removeSelectedShapes:f,tool:g}){X.useEffect(()=>{const m=v=>{if(!(v.target.tagName==="INPUT"||v.target.isContentEditable||n!==null)){if((v.key==="Delete"||v.key==="Backspace")&&g==="select"){i.length>0&&f();return}if(v.ctrlKey||v.metaKey){if(v.key.toLowerCase()==="c"&&e){v.preventDefault(),s(e);return}if(v.key.toLowerCase()==="v"){v.preventDefault(),o();return}return}if(v.shiftKey&&v.key.toLowerCase()==="l"){v.preventDefault(),d(),It.getState().setTool("select");return}switch(v.key){case"a":It.getState().setTool("arrow");break;case"v":It.getState().setTool("select");break;case"r":It.getState().setTool("rect");break;case"c":It.getState().setTool("circle");break;case"l":It.getState().setTool("line");break;case"f":It.getState().setTool("free");break;case"t":It.getState().setTool("text");break;case"i":It.getState().setTool("image");break;case"m":It.getState().setTool("marker");break;case"h":It.getState().setTool("hand");break;case"Escape":n?t(null):i.length>0&&a();break;case"g":c();break}}};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[n,t,e,i,a,s,o,c,d,f,g])}function PX({tool:n,layers:t,activeLayerId:e,strokeColor:i,fillColor:a,addShape:s,updateShape:o,setSelectedShape:c,saveToHistory:d,setAutoEditTextId:f,getCanvasPosition:g,useCanvasStoreRef:m}){const[v,x]=X.useState(!1),[S,_]=X.useState(null);return{isDrawing:v,currentId:S,handleMouseDown:w=>{const R=t.find(B=>B.id===e);if(R&&R.locked)return;x(!0);const O=g();let L={},I=null;switch(n){case"line":L={layerId:e,type:"line",props:{points:[O.x,O.y,O.x,O.y],stroke:i||"black",strokeWidth:2}},I=s(L),_(I);break;case"arrow":L={layerId:e,type:"arrow",props:{points:[O.x,O.y,O.x,O.y],stroke:i||"black",fill:i||"black",strokeWidth:4,pointerLength:20,pointerWidth:20}},I=s(L),_(I);break;case"rect":L={layerId:e,type:"rect",props:{x:O.x,y:O.y,width:0,height:0,fill:a||"transparent",stroke:i||"black",strokeWidth:2}},I=s(L),_(I);break;case"circle":L={layerId:e,type:"circle",props:{x:O.x,y:O.y,radius:0,fill:a||"transparent",stroke:i||"black",strokeWidth:2}},I=s(L),_(I);break;case"free":L={layerId:e,type:"free",props:{points:[O.x,O.y],stroke:i||"black",strokeWidth:2}},I=s(L),_(I);break;case"text":L={layerId:e,type:"text",props:{x:O.x,y:O.y,text:"Ingrese texto",fontSize:16,fontFamily:"Arial",fill:a||"#eee",stroke:i||"#222"}},I=s(L),f(I),setTimeout(()=>c(I),0),m&&m.getState().setTool("select");break;case"marker":L={layerId:e,type:"marker",props:{x:O.x,y:O.y,color:"red",title:"",description:"",images:[]}},I=s(L),_(I);break}},handleMouseMove:(w,R)=>{if(!v||!S)return;const O=g(),L=R?.find(z=>z.id===S);if(!L)return;const{x:I,y:B,points:F}=L.props;switch(L.type){case"free":o(S,{points:[...F,O.x,O.y]});break;case"line":o(S,{points:[F[0],F[1],O.x,O.y]});break;case"arrow":o(S,{points:[F[0],F[1],O.x,O.y]});break;case"rect":o(S,{width:O.x-I,height:O.y-B});break;case"circle":const z=Math.hypot(O.x-I,O.y-B);o(S,{radius:z});break}},handleMouseUp:()=>{v&&(x(!1),_(null),d())}}}function kX({getCanvasPosition:n,shapes:t,layers:e,setMultipleSelection:i}){const[a,s]=X.useState(null),[o,c]=X.useState(!1);return{selectBox:a,isSelecting:o,handleStart:()=>{const m=n();c(!0),s({startX:m.x,startY:m.y,endX:m.x,endY:m.y})},handleMove:()=>{if(!o||!a)return;const m=n();s(v=>({...v,endX:m.x,endY:m.y}))},handleEnd:()=>{if(!o||!a)return;if(Math.abs(a.endX-a.startX)+Math.abs(a.endY-a.startY)>5){const v=Math.min(a.startX,a.endX),x=Math.max(a.startX,a.endX),S=Math.min(a.startY,a.endY),_=Math.max(a.startY,a.endY),C=t.filter(D=>{const T=D.props;let w,R,O,L;const I=e.find(B=>B.id===D.layerId);if(I&&I.locked)return!1;switch(D.type){case"rect":case"image":case"text":case"marker":w=T.x,R=T.x+T.width,O=T.y,L=T.y+T.height;break;case"circle":w=T.x-T.radius,R=T.x+T.radius,O=T.y-T.radius,L=T.y+T.radius;break;case"line":case"free":case"arrow":if(T.points&&T.points.length>=2){const B=T.points.filter((z,j)=>j%2===0),F=T.points.filter((z,j)=>j%2===1);w=Math.min(...B),R=Math.max(...B),O=Math.min(...F),L=Math.max(...F)}else return!1;break;default:return!1}return R>=v&&w<=x&&L>=S&&O<=_});C.length>0&&i(C.map(D=>D.id))}c(!1),s(null)}}}function BX(){const[n,t]=X.useState(null);return{contextMenu:n,showContextMenu:(a,s)=>{const o=a.evt?a.evt.clientX:a.clientX,c=a.evt?a.evt.clientY:a.clientY;t({x:o,y:c,shapeId:s})},hideContextMenu:()=>t(null)}}function zX({fileInputRef:n,CANVAS_WIDTH:t,CANVAS_HEIGHT:e,layers:i,activeLayerId:a,addShape:s,setSelectedShape:o,setTool:c,saveToHistory:d}){return{handleImageUpload:m=>{const v=m.target.files?.[0];if(!v)return;const x=new FileReader;x.onload=()=>{const S=x.result,_=new window.Image;_.onload=()=>{const C=t,D=e;let T=_.width,w=_.height,R=1;(T>C||w>D)&&(R=Math.min(C/T,D/w),T=T*R,w=w*R);const O={x:t/2-T/2,y:e/2-w/2},L=i.find(B=>B.id===a);if(L&&L.locked)return;const I=s({layerId:a,type:"image",props:{x:O.x,y:O.y,src:S,width:T,height:w}});setTimeout(()=>o(I),0),c&&c("select")},_.src=S},x.readAsDataURL(v),d&&d()},openImageInput:()=>{n.current&&(n.current.value="",n.current.click())}}}function FX(n,t){if(!n.current)return{x:0,y:0};const e=n.current,i=e.getPointerPosition();if(!i)return{x:0,y:0};const a=e.getAbsoluteTransform().copy();a.invert();const s=a.point(i);return{x:s.x-(t?.x||0),y:s.y-(t?.y||0)}}function IX({width:n=1080,height:t=720,cellSize:e=20,stroke:i="#ddd",dash:a=[2,2],enabled:s=!0}){if(!s)return null;const o=[];for(let c=0;c<=n;c+=e)o.push(J.jsx(Hv,{points:[c,0,c,t],stroke:i,dash:a,listening:!1},`v-${c}`));for(let c=0;c<=t;c+=e)o.push(J.jsx(Hv,{points:[0,c,n,c],stroke:i,dash:a,listening:!1},`h-${c}`));return J.jsx(um,{children:o})}function HX({id:n,points:t,stroke:e,strokeWidth:i,tension:a=.5,lineCap:s="round",lineJoin:o="round",isSelected:c,isInMultiSelection:d,onSelect:f,onUpdate:g,onDragEnd:m,onContextMenu:v,draggable:x=!0,listening:S=!0,tool:_="select"}){const C=X.useRef(),D=X.useRef();X.useEffect(()=>{c&&C.current&&D.current&&(D.current.nodes([C.current]),D.current.getLayer().batchDraw())},[c]);const T=w=>{const R=C.current,O=R.scaleX(),L=R.scaleY(),I=R.rotation();if(O===0||L===0)return;const B=R.points().map((F,z)=>z%2===0?F*O:F*L);R.scaleX(1),R.scaleY(1),g({id:n,props:{points:B,x:R.x(),y:R.y(),rotation:I}})};return J.jsxs(J.Fragment,{children:[J.jsx(Hv,{id:n,ref:C,points:t,stroke:e,strokeWidth:d?i+1:i,tension:a,lineCap:s,lineJoin:o,draggable:x&&(c||d),listening:S,opacity:d?.8:1,onClick:f,onTap:f,onContextMenu:v,onDragEnd:m,onTransformEnd:T,onMouseEnter:w=>{const R=w.target.getStage();S&&(R.container().style.cursor="move")},onMouseLeave:w=>{const R=w.target.getStage(),O=_||"select";R.container().style.cursor=O==="hand"?"grab":O==="select"?"default":"crosshair"}}),c&&J.jsx(pl,{ref:D,rotateEnabled:!0,boundBoxFunc:(w,R)=>Math.abs(R.width)<10||Math.abs(R.height)<10?w:R})]})}function GX({id:n,x:t,y:e,width:i,height:a,stroke:s="#000",fill:o="transparent",strokeWidth:c=2,isSelected:d,isInMultiSelection:f,onSelect:g,onTransformEnd:m,onDragEnd:v,rotation:x,onDoubleClick:S,onContextMenu:_,listening:C=!0,tool:D="select"}){const T=X.useRef(),w=X.useRef();return X.useEffect(()=>{d&&T.current&&w.current&&(w.current.nodes([T.current]),w.current.getLayer().batchDraw())},[d]),J.jsxs(J.Fragment,{children:[J.jsx(Iu,{id:n,ref:T,x:t,y:e,width:i,height:a,stroke:s,fill:o,strokeWidth:f?c+1:c,draggable:d||f,rotation:x||0,opacity:f?.8:1,onClick:g,onTap:g,onDblClick:S,onDblTap:S,onDragEnd:v||m,onTransformEnd:m,onContextMenu:_,onMouseEnter:R=>{const O=R.target.getStage();C&&(O.container().style.cursor="move")},onMouseLeave:R=>{const O=R.target.getStage(),L=D||"select";O.container().style.cursor=L==="hand"?"grab":L==="select"?"default":"crosshair"}}),d&&J.jsx(pl,{ref:w,rotateEnabled:!0,boundBoxFunc:(R,O)=>Math.abs(O.width)<10||Math.abs(O.height)<10?R:O})]})}function jX({id:n,x:t,y:e,radius:i,stroke:a="#000",fill:s="transparent",strokeWidth:o=2,isSelected:c,isInMultiSelection:d,onSelect:f,onTransformEnd:g,onDragEnd:m,rotation:v,onDoubleClick:x,onContextMenu:S,listening:_=!0,tool:C="select"}){const D=X.useRef(),T=X.useRef();return X.useEffect(()=>{c&&D.current&&T.current&&(T.current.nodes([D.current]),T.current.getLayer().batchDraw())},[c]),J.jsxs(J.Fragment,{children:[J.jsx(CX,{id:n,ref:D,x:t,y:e,radius:i,stroke:a,fill:s,strokeWidth:d?o+1:o,draggable:c||d,rotation:v||0,opacity:d?.8:1,onClick:f,onTap:f,onDblClick:x,onDblTap:x,onDragEnd:m||g,onTransformEnd:g,onContextMenu:S,onMouseEnter:w=>{const R=w.target.getStage();_&&(R.container().style.cursor="move")},onMouseLeave:w=>{const R=w.target.getStage(),O=C||"select";R.container().style.cursor=O==="hand"?"grab":O==="select"?"default":"crosshair"}}),c&&J.jsx(pl,{ref:T,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],rotateEnabled:!0,boundBoxFunc:(w,R)=>Math.abs(R.width)<10||Math.abs(R.height)<10?w:R})]})}function UX({id:n,points:t=[0,0,100,100],x:e=0,y:i=0,stroke:a="#000",fill:s="#000",strokeWidth:o=2,tension:c=0,draggable:d=!0,rotation:f=0,isSelected:g=!1,isInMultiSelection:m=!1,onSelect:v,onDragEnd:x,onTransformEnd:S,onDoubleClick:_,onContextMenu:C,listening:D=!0,lineCap:T="round",lineJoin:w="round",tool:R="select"}){const O=X.useRef(),L=X.useRef();X.useEffect(()=>{g&&O.current&&L.current&&(L.current.nodes([O.current]),L.current.getLayer().batchDraw())},[g]);const I=Array.isArray(t)?t:[0,0,100,100];return J.jsxs(J.Fragment,{children:[J.jsx(Hv,{id:n,ref:O,x:e,y:i,points:I,stroke:a,fill:s,strokeWidth:m?o+1:o,lineCap:T,lineJoin:w,tension:c,draggable:d&&(g||m),rotation:f,listening:D,opacity:m?.8:1,onClick:v,onTap:v,onDragEnd:x,onTransformEnd:S,onDblClick:_,onDblTap:_,onContextMenu:C,onMouseEnter:B=>{const F=B.target.getStage();D&&(F.container().style.cursor="move")},onMouseLeave:B=>{const F=B.target.getStage(),z=R||"select";F.container().style.cursor=z==="hand"?"grab":z==="select"?"default":"crosshair"}}),g&&J.jsx(pl,{ref:L,rotateEnabled:!0,enabledAnchors:["middle-left","middle-right","top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"],boundBoxFunc:(B,F)=>Math.abs(F.width)<10?B:F})]})}var qX=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(e[i[a]]=n[i[a]]);return e};const VX=n=>{const t=window.getComputedStyle(n).position;return!(t==="absolute"||t==="relative")};function YX(n=()=>{}){const t=q.useRef(n);return t.current=n,q.useCallback((...e)=>t.current.apply(null,e),[])}const XX=({children:n,groupProps:t,divProps:e,transform:i,transformFunc:a,parentNodeFunc:s})=>{const o=S9(),c=q.useRef(null),[d]=q.useState(()=>document.createElement("div")),f=q.useMemo(()=>zM.createRoot(d),[d]),g=i??!0,m=YX(()=>{if(g&&c.current){let C=c.current.getAbsoluteTransform().decompose();a&&(C=a(C)),d.style.position="absolute",d.style.zIndex="10",d.style.top="0px",d.style.left="0px",d.style.transform=`translate(${C.x}px, ${C.y}px) rotate(${C.rotation}deg) scaleX(${C.scaleX}) scaleY(${C.scaleY})`,d.style.transformOrigin="top left"}else d.style.position="",d.style.zIndex="",d.style.top="",d.style.left="",d.style.transform="",d.style.transformOrigin="";const v=e||{},{style:x}=v,S=qX(v,["style"]);Object.assign(d.style,x),Object.assign(d,S)});return q.useLayoutEffect(()=>{var v;const x=c.current;if(!x)return;const S=s?s({stage:x.getStage()}):(v=x.getStage())===null||v===void 0?void 0:v.container();if(S)return S.appendChild(d),g&&VX(S)&&(S.style.position="relative"),x.on("absoluteTransformChange",m),m(),()=>{var _;x.off("absoluteTransformChange",m),(_=d.parentNode)===null||_===void 0||_.removeChild(d)}},[g,s]),q.useLayoutEffect(()=>{m()},[e,a]),q.useLayoutEffect(()=>{f.render(q.createElement(o,null,n))}),q.useLayoutEffect(()=>()=>{setTimeout(()=>{f.unmount()})},[]),q.createElement(um,Object.assign({ref:c},t))};function KX({id:n,x:t,y:e,text:i,fontSize:a,fontFamily:s,fill:o,stroke:c,isSelected:d,onSelect:f,onTransformEnd:g,onChangeText:m,rotation:v,autoEdit:x,onContextMenu:S}){const _=X.useRef(),C=X.useRef(),D=X.useRef(),[T,w]=X.useState(x||!1),[R,O]=X.useState(i);X.useEffect(()=>O(i),[i]),X.useEffect(()=>{x&&w(!0)},[x]),X.useEffect(()=>{d&&D.current&&_.current&&!T&&(D.current.nodes([_.current]),D.current.getLayer().batchDraw())},[d,T]);const[L,I]=X.useState({width:100,height:40});X.useEffect(()=>{const j=document.createElement("canvas").getContext("2d");j.font=`${a||16}px ${s||"Arial"}`;const Z=R.split(`
`),nt=Math.max(...Z.map(Q=>j.measureText(Q).width)),it=Math.max(nt+16,80),et=Math.max(Z.length*(a||16)*1.2+16,28);I({width:it,height:et})},[R,a,s]);const B=z=>{const j=_.current;C.current;const Z=j.scaleX(),nt=j.scaleY(),it=Math.max(8,(a||16)*nt),et=Math.max(50,L.width*Z),Q=Math.max(20,L.height*nt);g&&g({target:{id:()=>n,x:()=>j.x(),y:()=>j.y(),width:()=>et,height:()=>Q,rotation:()=>j.rotation(),scaleX:()=>1,scaleY:()=>1,fontSize:()=>it}}),j.scaleX(1),j.scaleY(1),j.rotation(0)},F=()=>{w(!1),m&&R!==i&&m(n,R)};return J.jsx(J.Fragment,{children:T?J.jsx(XX,{children:J.jsx("textarea",{name:"INPUT",autoFocus:!0,value:R,onChange:z=>{O(z.target.value),z.target.style.height="auto",z.target.style.height=z.target.scrollHeight+"px"},onBlur:F,onKeyDown:z=>{z.key==="Enter"&&!z.shiftKey&&F(),z.key==="Escape"&&w(!1)},style:{position:"absolute",top:0,left:0,transform:`translate(${t}px, ${e}px)`,fontSize:a,fontFamily:s,color:c,background:o,border:"1px solid #aaa",padding:4,borderRadius:4,resize:"none",minWidth:80,minHeight:28,maxHeight:300,overflow:"auto",zIndex:20,outline:"none",lineHeight:1.2},rows:3,spellCheck:!1})}):J.jsxs(J.Fragment,{children:[J.jsxs(um,{ref:_,x:t,y:e,rotation:v||0,draggable:d,onClick:f,onTap:f,onDblClick:()=>w(!0),onDblTap:()=>w(!0),onDragEnd:z=>{const j=z.target;g&&g({target:{id:()=>n,x:()=>j.x(),y:()=>j.y(),width:()=>L.width,height:()=>L.height,rotation:()=>j.rotation(),scaleX:()=>1,scaleY:()=>1,fontSize:()=>a}})},onContextMenu:S,children:[J.jsx(Iu,{width:L.width,height:L.height,fillEnabled:!1,strokeEnabled:!1,listening:!0,name:"resize-box"}),J.jsx(Iu,{width:L.width,height:L.height,fill:o,cornerRadius:6,listening:!1}),J.jsx(TX,{name:"INPUT",ref:C,text:R,fontSize:a,fontFamily:s,fill:c,width:L.width,height:L.height,align:"left",verticalAlign:"middle",onTransformEnd:B})]}),d&&!T&&J.jsx(pl,{ref:D,rotateEnabled:!0,boundBoxFunc:(z,j)=>Math.abs(j.width)<20||Math.abs(j.height)<20?z:j})]})})}function WX({id:n,src:t,x:e,y:i,width:a,height:s,isSelected:o,isInMultiSelection:c,onSelect:d,onTransformEnd:f,onDragEnd:g,onDoubleClick:m,onContextMenu:v,listening:x=!0,tool:S="select"}){const[_]=TA(t),C=q.useRef(),D=q.useRef();return q.useEffect(()=>{o&&C.current&&D.current&&(D.current.nodes([C.current]),D.current.getLayer().batchDraw())},[o]),J.jsxs(J.Fragment,{children:[J.jsx(Iu,{x:e,y:i,width:a,height:s,fillEnabled:!1,strokeEnabled:!1,listening:!0,onClick:d,onTap:d}),J.jsx(CA,{id:n,ref:C,image:_||void 0,x:e,y:i,width:a,height:s,draggable:o||c,opacity:c?.8:1,onClick:d,onTap:d,onDblClick:m,onDblTap:m,onDragEnd:g||f,onContextMenu:v,onTransformEnd:f,onMouseEnter:T=>{const w=T.target.getStage();x&&(w.container().style.cursor="move")},onMouseLeave:T=>{const w=T.target.getStage(),R=S||"select";w.container().style.cursor=R==="hand"?"grab":R==="select"?"default":"crosshair"}}),o&&J.jsx(pl,{ref:D,flipEnabled:!1,boundBoxFunc:(T,w)=>Math.abs(w.width)<5||Math.abs(w.height)<5?T:w})]})}function $X(n="red",t=32){return`
    <svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${t}" viewBox="0 0 24 24" fill="none" stroke="${n}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/>
      <circle cx="12" cy="10" r="3"/>
    </svg>
  `}function QX({id:n,x:t,y:e,color:i="red",isSelected:a,isInMultiSelection:s,onSelect:o,onTransformEnd:c,onDragEnd:d,onDoubleClick:f,onContextMenu:g}){const m=It(w=>w.zoom),v=32,x=$X(i,v),S="data:image/svg+xml;base64,"+btoa(x),[_]=TA(S),C=X.useRef(),D=X.useRef();X.useEffect(()=>{a&&C.current&&D.current&&(D.current.nodes([C.current]),D.current.getLayer().batchDraw())},[a]);const T=w=>{const R=w.target,O=R.x(),L=R.y(),I=(O+v/2)*m,B=(L+v)*m;d&&d({...w,target:{...w.target,id:()=>n,x:()=>I,y:()=>B}})};return J.jsxs(J.Fragment,{children:[J.jsx(Iu,{x:t-v/2,y:e-v,width:v,height:v,fillEnabled:!1,strokeEnabled:!1,listening:!0,onClick:o,onTap:o,onContextMenu:g,onDblClick:f,onDblTap:f}),J.jsx(CA,{id:n,ref:C,image:_||void 0,x:t-v/2,y:e-v,width:v,height:v,scaleX:1/m,scaleY:1/m,draggable:a||s,opacity:s?.8:1,onClick:o,onTap:o,onDblClick:f,onDblTap:f,onDragEnd:T,onContextMenu:g,onMouseEnter:w=>{const R=w.target.getStage();R.container().style.cursor="move"},onMouseLeave:w=>{const R=w.target.getStage();R.container().style.cursor="default"}}),a&&J.jsx(pl,{ref:D,enabledAnchors:[],rotateEnabled:!0})]})}function ZX({id:n,points:t=[0,0,100,100],x:e=0,y:i=0,stroke:a="#222",fill:s="#222",strokeWidth:o=4,pointerLength:c=20,pointerWidth:d=20,tension:f=0,draggable:g=!0,rotation:m=0,isSelected:v=!1,isInMultiSelection:x=!1,onSelect:S,onDragEnd:_,onTransformEnd:C,onDoubleClick:D,onContextMenu:T,listening:w=!0,tool:R="select"}){const O=X.useRef(),L=X.useRef();return X.useEffect(()=>{v&&O.current&&L.current&&(L.current.nodes([O.current]),L.current.getLayer().batchDraw())},[v]),J.jsxs(J.Fragment,{children:[J.jsx(RX,{id:n,ref:O,x:e,y:i,points:t,stroke:a,fill:s,strokeWidth:x?o+1:o,pointerLength:c,pointerWidth:d,tension:f,draggable:g&&(v||x),rotation:m,listening:w,opacity:x?.8:1,onClick:S,onTap:S,onDragEnd:_,onTransformEnd:C,onDblClick:D,onDblTap:D,onContextMenu:T,onMouseEnter:I=>{const B=I.target.getStage();w&&(B.container().style.cursor="move")},onMouseLeave:I=>{const B=I.target.getStage(),F=R||"select";B.container().style.cursor=F==="hand"?"grab":F==="select"?"default":"crosshair"}}),v&&J.jsx(pl,{ref:L,rotateEnabled:!0,enabledAnchors:["middle-left","middle-right"],boundBoxFunc:(I,B)=>B})]})}function JX({layers:n,shapes:t,selectedShapeIds:e,tool:i,toggleSelection:a,setSelectedShape:s,handleTransformEnd:o,handleShapeDragEnd:c,handleShapeDoubleClick:d,setContextMenu:f,autoEditTextId:g,updateShape:m}){return J.jsx(J.Fragment,{children:n.map(v=>{if(!v.visible)return null;const x=v.locked,S=t.filter(_=>_.layerId===v.id&&_.visible!==!1);return S.length===0?null:J.jsx(um,{opacity:v.opacity??1,listening:!x,children:S.map(_=>{const C=x;let D=null;const T=O=>{i!=="select"||C||(D=setTimeout(()=>{f(O,_.id)},420))},w=()=>clearTimeout(D),R={id:_.id,..._.props,tool:i,isSelected:e.includes(_.id)&&e.length===1,isInMultiSelection:e.includes(_.id)&&e.length>1,onSelect:O=>{i==="select"&&!C&&(O&&(O.evt.ctrlKey||O.evt.metaKey)?a(_.id):s(_.id))},onTransformEnd:o,onDragEnd:c,onDoubleClick:()=>d(_.id),draggable:!C&&e.includes(_.id),listening:i==="select"&&!C,isLocked:C,onContextMenu:O=>{i==="select"&&(O.evt.preventDefault(),f(O,_.id))},onTouchStart:T,onTouchEnd:w,onTouchMove:w};switch(_.type){case"free":return J.jsx(HX,{onUpdate:({id:O,props:L})=>m(O,L),...R},_.id);case"line":return J.jsx(UX,{...R},_.id);case"arrow":return J.jsx(ZX,{...R},_.id);case"rect":return J.jsx(GX,{...R},_.id);case"circle":return J.jsx(jX,{...R},_.id);case"text":return J.jsx(KX,{...R,autoEdit:_.id===g,onChangeText:(O,L)=>{m(O,{text:L})}},_.id);case"image":return J.jsx(WX,{...R},_.id);case"marker":return J.jsx(QX,{...R},_.id);default:return null}})},v.id)})})}function tK({contextMenu:n,onBringToFront:t,onSendToBack:e,onBringForward:i,onSendBackward:a,onCopy:s,onPaste:o,onDelete:c,clipboardShape:d,onClose:f,onReplace:g}){const m=X.useRef(null),[v,x]=X.useState({top:0,left:0});if(X.useEffect(()=>{n&&setTimeout(()=>{const C=m.current;if(!C)return;const{innerWidth:D,innerHeight:T}=window,w=C.getBoundingClientRect();let R=n.x,O=n.y;R+w.width>D-8&&(R=D-w.width-8),O+w.height>T-8&&(O=T-w.height-8),O<8&&(O=8),R<8&&(R=8),x({top:O,left:R})},0)},[n]),X.useEffect(()=>{const C=D=>{D.key==="Escape"&&f()};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[f]),X.useEffect(()=>{const C=D=>{m.current&&!m.current.contains(D.target)&&f()};return window.addEventListener("mousedown",C),window.addEventListener("touchstart",C),window.addEventListener("scroll",f,!0),()=>{window.removeEventListener("mousedown",C),window.removeEventListener("touchstart",C),window.removeEventListener("scroll",f,!0)}},[f]),X.useEffect(()=>{m.current?.focus()},[n]),!n)return null;const S="animate-fade-in duration-150 transition-all ease-in-out",_=[{label:"Copiar",icon:jT,action:()=>s(n.shapeId),shortcut:"Ctrl+C"},d?{label:"Pegar",icon:qE,action:()=>o(n.shapeId),shortcut:"Ctrl+V"}:null,d?{label:"Reemplazar",icon:qE,action:()=>g(n.shapeId),shortcut:"Ctrl+R",disabled:!d}:null,{label:"Eliminar",icon:o_,action:()=>c(n.shapeId),shortcut:"Del",className:"text-red-600 dark:text-red-400"},{type:"divider"},{label:"Traer al frente",icon:$M,action:()=>t(n.shapeId)},{label:"Enviar al fondo",icon:qM,action:()=>e(n.shapeId)},{label:"Subir",icon:ZM,action:()=>i(n.shapeId)},{label:"Bajar",icon:YM,action:()=>a(n.shapeId)}].filter(Boolean);return J.jsx("div",{ref:m,tabIndex:-1,className:`
        fixed z-[9999] min-w-48 px-2 py-2 rounded-2xl
        border border-slate-200 dark:border-slate-700
        bg-white/90 dark:bg-slate-900/90
        shadow-xl shadow-black/10
        ring-1 ring-slate-300/70 dark:ring-slate-800/50
        backdrop-blur-md
        ${S}
        select-none
      `,style:{top:v.top,left:v.left,outline:"none",position:"fixed"},children:J.jsx("div",{className:"flex flex-col gap-0.5",children:_.map((C,D)=>C.type==="divider"?J.jsx("div",{className:"my-1 border-t border-slate-200 dark:border-slate-700"},"divider-"+D):J.jsxs("button",{className:`
                w-full text-left flex items-center gap-2
                px-4 py-2
                rounded-lg
                text-[15px] font-medium
                hover:bg-blue-50 dark:hover:bg-slate-500
                focus:bg-blue-100 dark:focus:bg-blue-900
                transition-colors
                ${C.className||"text-slate-700 dark:text-slate-200"}
              `,onMouseDown:T=>{T.preventDefault(),C.disabled||(C.action(),f())},disabled:C.disabled,children:[J.jsx(C.icon,{size:18,className:"opacity-80"}),J.jsx("span",{className:"flex-1",children:C.label}),C.shortcut&&J.jsx("span",{className:"text-xs opacity-60",children:C.shortcut})]},C.label))})})}if(typeof window<"u"&&!window.__contextmenu_fadein_css){const n=document.createElement("style");n.textContent=`
    @keyframes fade-in {
      from { opacity: 0; transform: scale(0.96);}
      to   { opacity: 1; transform: scale(1);}
    }
    .animate-fade-in { animation: fade-in 0.18s cubic-bezier(.4,0,.2,1) both; }
  `,document.head.appendChild(n),window.__contextmenu_fadein_css=!0}function eK({selectBox:n}){if(!n)return null;const t=Math.min(n.startX,n.endX),e=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),a=Math.abs(n.endY-n.startY);return J.jsx(Iu,{x:t,y:e,width:i,height:a,fill:"rgba(173, 216, 230, 0.2)",stroke:"rgba(70, 130, 180, 0.8)",strokeWidth:1,dash:[2,2],listening:!1})}function nK({transformerRef:n,enabled:t=!0,...e}){return t?J.jsx(pl,{ref:n,rotateEnabled:!0,enabledAnchors:["top-left","top-center","top-right","middle-right","bottom-right","bottom-center","bottom-left","middle-left"],boundBoxFunc:(i,a)=>Math.abs(a.width)<10||Math.abs(a.height)<10?i:a,...e}):null}var iK=Object.defineProperty,aK=(n,t,e)=>t in n?iK(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,sS=(n,t,e)=>(aK(n,typeof t!="symbol"?t+"":t,e),e);let rK=class{constructor(){sS(this,"current",this.detect()),sS(this,"handoffState","pending"),sS(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Bu=new rK;function A1(n){var t,e;return Bu.isServer?null:n?"ownerDocument"in n?n.ownerDocument:"current"in n?(e=(t=n.current)==null?void 0:t.ownerDocument)!=null?e:document:null:document}function E1(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(t=>setTimeout(()=>{throw t}))}function gl(){let n=[],t={addEventListener(e,i,a,s){return e.addEventListener(i,a,s),t.add(()=>e.removeEventListener(i,a,s))},requestAnimationFrame(...e){let i=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(i))},nextFrame(...e){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...e))},setTimeout(...e){let i=setTimeout(...e);return t.add(()=>clearTimeout(i))},microTask(...e){let i={current:!0};return E1(()=>{i.current&&e[0]()}),t.add(()=>{i.current=!1})},style(e,i,a){let s=e.style.getPropertyValue(i);return Object.assign(e.style,{[i]:a}),this.add(()=>{Object.assign(e.style,{[i]:s})})},group(e){let i=gl();return e(i),this.add(()=>i.dispose())},add(e){return n.includes(e)||n.push(e),()=>{let i=n.indexOf(e);if(i>=0)for(let a of n.splice(i,1))a()}},dispose(){for(let e of n.splice(0))e()}};return t}function RA(){let[n]=X.useState(gl);return X.useEffect(()=>()=>n.dispose(),[n]),n}let na=(n,t)=>{Bu.isServer?X.useEffect(n,t):X.useLayoutEffect(n,t)};function $u(n){let t=X.useRef(n);return na(()=>{t.current=n},[n]),t}let xn=function(n){let t=$u(n);return q.useCallback((...e)=>t.current(...e),[t])},sK=X.createContext(void 0);function oK(){return X.useContext(sK)}function zS(...n){return Array.from(new Set(n.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function ul(n,t,...e){if(n in t){let a=t[n];return typeof a=="function"?a(...e):a}let i=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,ul),i}var Gv=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(Gv||{}),mc=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(mc||{});function Hr(){let n=cK();return X.useCallback(t=>lK({mergeRefs:n,...t}),[n])}function lK({ourProps:n,theirProps:t,slot:e,defaultTag:i,features:a,visible:s=!0,name:o,mergeRefs:c}){c=c??uK;let d=_9(t,n);if(s)return av(d,e,i,o,c);let f=a??0;if(f&2){let{static:g=!1,...m}=d;if(g)return av(m,e,i,o,c)}if(f&1){let{unmount:g=!0,...m}=d;return ul(g?0:1,{0(){return null},1(){return av({...m,hidden:!0,style:{display:"none"}},e,i,o,c)}})}return av(d,e,i,o,c)}function av(n,t={},e,i,a){let{as:s=e,children:o,refName:c="ref",...d}=oS(n,["unmount","static"]),f=n.ref!==void 0?{[c]:n.ref}:{},g=typeof o=="function"?o(t):o;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(t)),d["aria-labelledby"]&&d["aria-labelledby"]===d.id&&(d["aria-labelledby"]=void 0);let m={};if(t){let v=!1,x=[];for(let[S,_]of Object.entries(t))typeof _=="boolean"&&(v=!0),_===!0&&x.push(S.replace(/([A-Z])/g,C=>`-${C.toLowerCase()}`));if(v){m["data-headlessui-state"]=x.join(" ");for(let S of x)m[`data-${S}`]=""}}if(s===X.Fragment&&(Object.keys(Ru(d)).length>0||Object.keys(Ru(m)).length>0))if(!X.isValidElement(g)||Array.isArray(g)&&g.length>1){if(Object.keys(Ru(d)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ru(d)).concat(Object.keys(Ru(m))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=g.props,x=v?.className,S=typeof x=="function"?(...D)=>zS(x(...D),d.className):zS(x,d.className),_=S?{className:S}:{},C=_9(g.props,Ru(oS(d,["ref"])));for(let D in m)D in C&&delete m[D];return X.cloneElement(g,Object.assign({},C,m,f,{ref:a(dK(g),f.ref)},_))}return X.createElement(s,Object.assign({},oS(d,["ref"]),s!==X.Fragment&&f,s!==X.Fragment&&m),g)}function cK(){let n=X.useRef([]),t=X.useCallback(e=>{for(let i of n.current)i!=null&&(typeof i=="function"?i(e):i.current=e)},[]);return(...e)=>{if(!e.every(i=>i==null))return n.current=e,t}}function uK(...n){return n.every(t=>t==null)?void 0:t=>{for(let e of n)e!=null&&(typeof e=="function"?e(t):e.current=t)}}function _9(...n){if(n.length===0)return{};if(n.length===1)return n[0];let t={},e={};for(let i of n)for(let a in i)a.startsWith("on")&&typeof i[a]=="function"?(e[a]!=null||(e[a]=[]),e[a].push(i[a])):t[a]=i[a];if(t.disabled||t["aria-disabled"])for(let i in e)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(e[i]=[a=>{var s;return(s=a?.preventDefault)==null?void 0:s.call(a)}]);for(let i in e)Object.assign(t,{[i](a,...s){let o=e[i];for(let c of o){if((a instanceof Event||a?.nativeEvent instanceof Event)&&a.defaultPrevented)return;c(a,...s)}}});return t}function Ga(n){var t;return Object.assign(X.forwardRef(n),{displayName:(t=n.displayName)!=null?t:n.name})}function Ru(n){let t=Object.assign({},n);for(let e in t)t[e]===void 0&&delete t[e];return t}function oS(n,t=[]){let e=Object.assign({},n);for(let i of t)i in e&&delete e[i];return e}function dK(n){return q.version.split(".")[0]>="19"?n.props.ref:n.ref}let hK="span";var jv=(n=>(n[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n))(jv||{});function fK(n,t){var e;let{features:i=1,...a}=n,s={ref:t,"aria-hidden":(i&2)===2?!0:(e=a["aria-hidden"])!=null?e:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return Hr()({ourProps:s,theirProps:a,slot:{},defaultTag:hK,name:"Hidden"})}let FS=Ga(fK);function A9(n){return typeof n!="object"||n===null?!1:"nodeType"in n}function xc(n){return A9(n)&&"tagName"in n}function Hu(n){return xc(n)&&"accessKey"in n}function vc(n){return xc(n)&&"tabIndex"in n}function pK(n){return xc(n)&&"style"in n}function gK(n){return Hu(n)&&n.nodeName==="IFRAME"}function mK(n){return Hu(n)&&n.nodeName==="INPUT"}let E9=Symbol();function vK(n,t=!0){return Object.assign(n,{[E9]:t})}function So(...n){let t=X.useRef(n);X.useEffect(()=>{t.current=n},[n]);let e=xn(i=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(i):a.current=i)});return n.every(i=>i==null||i?.[E9])?void 0:e}let MA=X.createContext(null);MA.displayName="DescriptionContext";function w9(){let n=X.useContext(MA);if(n===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,w9),t}return n}function yK(){let[n,t]=X.useState([]);return[n.length>0?n.join(" "):void 0,X.useMemo(()=>function(e){let i=xn(s=>(t(o=>[...o,s]),()=>t(o=>{let c=o.slice(),d=c.indexOf(s);return d!==-1&&c.splice(d,1),c}))),a=X.useMemo(()=>({register:i,slot:e.slot,name:e.name,props:e.props,value:e.value}),[i,e.slot,e.name,e.props,e.value]);return q.createElement(MA.Provider,{value:a},e.children)},[t])]}let bK="p";function xK(n,t){let e=X.useId(),i=oK(),{id:a=`headlessui-description-${e}`,...s}=n,o=w9(),c=So(t);na(()=>o.register(a),[a,o.register]);let d=i||!1,f=X.useMemo(()=>({...o.slot,disabled:d}),[o.slot,d]),g={ref:c,...o.props,id:a};return Hr()({ourProps:g,theirProps:s,slot:f,defaultTag:bK,name:o.name||"Description"})}let SK=Ga(xK),_K=Object.assign(SK,{});var C9=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))(C9||{});let AK=X.createContext(()=>{});function EK({value:n,children:t}){return q.createElement(AK.Provider,{value:n},t)}let T9=class extends Map{constructor(t){super(),this.factory=t}get(t){let e=super.get(t);return e===void 0&&(e=this.factory(t),this.set(t,e)),e}};var wK=Object.defineProperty,CK=(n,t,e)=>t in n?wK(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,TK=(n,t,e)=>(CK(n,t+"",e),e),R9=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},Pr=(n,t,e)=>(R9(n,t,"read from private field"),e?e.call(n):t.get(n)),lS=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},X6=(n,t,e,i)=>(R9(n,t,"write to private field"),t.set(n,e),e),po,Lg,Pg;let RK=class{constructor(t){lS(this,po,{}),lS(this,Lg,new T9(()=>new Set)),lS(this,Pg,new Set),TK(this,"disposables",gl()),X6(this,po,t)}dispose(){this.disposables.dispose()}get state(){return Pr(this,po)}subscribe(t,e){let i={selector:t,callback:e,current:t(Pr(this,po))};return Pr(this,Pg).add(i),this.disposables.add(()=>{Pr(this,Pg).delete(i)})}on(t,e){return Pr(this,Lg).get(t).add(e),this.disposables.add(()=>{Pr(this,Lg).get(t).delete(e)})}send(t){let e=this.reduce(Pr(this,po),t);if(e!==Pr(this,po)){X6(this,po,e);for(let i of Pr(this,Pg)){let a=i.selector(Pr(this,po));M9(i.current,a)||(i.current=a,i.callback(a))}for(let i of Pr(this,Lg).get(t.type))i(Pr(this,po),t)}}};po=new WeakMap,Lg=new WeakMap,Pg=new WeakMap;function M9(n,t){return Object.is(n,t)?!0:typeof n!="object"||n===null||typeof t!="object"||t===null?!1:Array.isArray(n)&&Array.isArray(t)?n.length!==t.length?!1:cS(n[Symbol.iterator](),t[Symbol.iterator]()):n instanceof Map&&t instanceof Map||n instanceof Set&&t instanceof Set?n.size!==t.size?!1:cS(n.entries(),t.entries()):K6(n)&&K6(t)?cS(Object.entries(n)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function cS(n,t){do{let e=n.next(),i=t.next();if(e.done&&i.done)return!0;if(e.done||i.done||!Object.is(e.value,i.value))return!1}while(!0)}function K6(n){if(Object.prototype.toString.call(n)!=="[object Object]")return!1;let t=Object.getPrototypeOf(n);return t===null||Object.getPrototypeOf(t)===null}var MK=Object.defineProperty,DK=(n,t,e)=>t in n?MK(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,W6=(n,t,e)=>(DK(n,typeof t!="symbol"?t+"":t,e),e),OK=(n=>(n[n.Push=0]="Push",n[n.Pop=1]="Pop",n))(OK||{});let NK={0(n,t){let e=t.id,i=n.stack,a=n.stack.indexOf(e);if(a!==-1){let s=n.stack.slice();return s.splice(a,1),s.push(e),i=s,{...n,stack:i}}return{...n,stack:[...n.stack,e]}},1(n,t){let e=t.id,i=n.stack.indexOf(e);if(i===-1)return n;let a=n.stack.slice();return a.splice(i,1),{...n,stack:a}}},LK=class D9 extends RK{constructor(){super(...arguments),W6(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),W6(this,"selectors",{isTop:(t,e)=>t.stack[t.stack.length-1]===e,inStack:(t,e)=>t.stack.includes(e)})}static new(){return new D9({stack:[]})}reduce(t,e){return ul(e.type,NK,t,e)}};const O9=new T9(()=>LK.new());function N9(n,t,e=M9){return rH.useSyncExternalStoreWithSelector(xn(i=>n.subscribe(PK,i)),xn(()=>n.state),xn(()=>n.state),xn(t),e)}function PK(n){return n}function dm(n,t){let e=X.useId(),i=O9.get(t),[a,s]=N9(i,X.useCallback(o=>[i.selectors.isTop(o,e),i.selectors.inStack(o,e)],[i,e]));return na(()=>{if(n)return i.actions.push(e),()=>i.actions.pop(e)},[i,n,e]),n?s?a:!0:!1}let IS=new Map,jg=new Map;function $6(n){var t;let e=(t=jg.get(n))!=null?t:0;return jg.set(n,e+1),e!==0?()=>Q6(n):(IS.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0,()=>Q6(n))}function Q6(n){var t;let e=(t=jg.get(n))!=null?t:1;if(e===1?jg.delete(n):jg.set(n,e-1),e!==1)return;let i=IS.get(n);i&&(i["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",i["aria-hidden"]),n.inert=i.inert,IS.delete(n))}function kK(n,{allowed:t,disallowed:e}={}){let i=dm(n,"inert-others");na(()=>{var a,s;if(!i)return;let o=gl();for(let d of(a=e?.())!=null?a:[])d&&o.add($6(d));let c=(s=t?.())!=null?s:[];for(let d of c){if(!d)continue;let f=A1(d);if(!f)continue;let g=d.parentElement;for(;g&&g!==f.body;){for(let m of g.children)c.some(v=>m.contains(v))||o.add($6(m));g=g.parentElement}}return o.dispose},[i,t,e])}function BK(n,t,e){let i=$u(a=>{let s=a.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&e()});X.useEffect(()=>{if(!n)return;let a=t===null?null:Hu(t)?t:t.current;if(!a)return;let s=gl();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>i.current(a));o.observe(a),s.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>i.current(a));o.observe(a),s.add(()=>o.disconnect())}return()=>s.dispose()},[t,i,n])}let Uv=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(","),zK=["[data-autofocus]"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var ll=(n=>(n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n[n.AutoFocus=64]="AutoFocus",n))(ll||{}),HS=(n=>(n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n))(HS||{}),FK=(n=>(n[n.Previous=-1]="Previous",n[n.Next=1]="Next",n))(FK||{});function IK(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(Uv)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}function HK(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(zK)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}var L9=(n=>(n[n.Strict=0]="Strict",n[n.Loose=1]="Loose",n))(L9||{});function GK(n,t=0){var e;return n===((e=A1(n))==null?void 0:e.body)?!1:ul(t,{0(){return n.matches(Uv)},1(){let i=n;for(;i!==null;){if(i.matches(Uv))return!0;i=i.parentElement}return!1}})}var jK=(n=>(n[n.Keyboard=0]="Keyboard",n[n.Mouse=1]="Mouse",n))(jK||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",n=>{n.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:n.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function cl(n){n?.focus({preventScroll:!0})}let UK=["textarea","input"].join(",");function qK(n){var t,e;return(e=(t=n?.matches)==null?void 0:t.call(n,UK))!=null?e:!1}function VK(n,t=e=>e){return n.slice().sort((e,i)=>{let a=t(e),s=t(i);if(a===null||s===null)return 0;let o=a.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ug(n,t,{sorted:e=!0,relativeTo:i=null,skipElements:a=[]}={}){let s=Array.isArray(n)?n.length>0?n[0].ownerDocument:document:n.ownerDocument,o=Array.isArray(n)?e?VK(n):n:t&64?HK(n):IK(n);a.length>0&&o.length>1&&(o=o.filter(x=>!a.some(S=>S!=null&&"current"in S?S?.current===x:S===x))),i=i??s.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(i))-1;if(t&4)return Math.max(0,o.indexOf(i))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},g=0,m=o.length,v;do{if(g>=m||g+m<=0)return 0;let x=d+g;if(t&16)x=(x+m)%m;else{if(x<0)return 3;if(x>=m)return 1}v=o[x],v?.focus(f),g+=c}while(v!==s.activeElement);return t&6&&qK(v)&&v.select(),2}function P9(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function YK(){return/Android/gi.test(window.navigator.userAgent)}function Z6(){return P9()||YK()}function rv(n,t,e,i){let a=$u(e);X.useEffect(()=>{if(!n)return;function s(o){a.current(o)}return document.addEventListener(t,s,i),()=>document.removeEventListener(t,s,i)},[n,t,i])}function k9(n,t,e,i){let a=$u(e);X.useEffect(()=>{if(!n)return;function s(o){a.current(o)}return window.addEventListener(t,s,i),()=>window.removeEventListener(t,s,i)},[n,t,i])}const J6=30;function XK(n,t,e){let i=$u(e),a=X.useCallback(function(c,d){if(c.defaultPrevented)return;let f=d(c);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let g=function m(v){return typeof v=="function"?m(v()):Array.isArray(v)||v instanceof Set?v:[v]}(t);for(let m of g)if(m!==null&&(m.contains(f)||c.composed&&c.composedPath().includes(m)))return;return!GK(f,L9.Loose)&&f.tabIndex!==-1&&c.preventDefault(),i.current(c,f)},[i,t]),s=X.useRef(null);rv(n,"pointerdown",c=>{var d,f;Z6()||(s.current=((f=(d=c.composedPath)==null?void 0:d.call(c))==null?void 0:f[0])||c.target)},!0),rv(n,"pointerup",c=>{if(Z6()||!s.current)return;let d=s.current;return s.current=null,a(c,()=>d)},!0);let o=X.useRef({x:0,y:0});rv(n,"touchstart",c=>{o.current.x=c.touches[0].clientX,o.current.y=c.touches[0].clientY},!0),rv(n,"touchend",c=>{let d={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(d.x-o.current.x)>=J6||Math.abs(d.y-o.current.y)>=J6))return a(c,()=>vc(c.target)?c.target:null)},!0),k9(n,"blur",c=>a(c,()=>gK(window.document.activeElement)?window.document.activeElement:null),!0)}function w1(...n){return X.useMemo(()=>A1(...n),[...n])}function B9(n,t,e,i){let a=$u(e);X.useEffect(()=>{n=n??window;function s(o){a.current(o)}return n.addEventListener(t,s,i),()=>n.removeEventListener(t,s,i)},[n,t,i])}function KK(n){return X.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot)}function WK(n,t){let e=n(),i=new Set;return{getSnapshot(){return e},subscribe(a){return i.add(a),()=>i.delete(a)},dispatch(a,...s){let o=t[a].call(e,...s);o&&(e=o,i.forEach(c=>c()))}}}function $K(){let n;return{before({doc:t}){var e;let i=t.documentElement,a=(e=t.defaultView)!=null?e:window;n=Math.max(0,a.innerWidth-i.clientWidth)},after({doc:t,d:e}){let i=t.documentElement,a=Math.max(0,i.clientWidth-i.offsetWidth),s=Math.max(0,n-a);e.style(i,"paddingRight",`${s}px`)}}}function QK(){return P9()?{before({doc:n,d:t,meta:e}){function i(a){return e.containers.flatMap(s=>s()).some(s=>s.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(n.documentElement).scrollBehavior!=="auto"){let c=gl();c.style(n.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let s=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(n,"click",c=>{if(vc(c.target))try{let d=c.target.closest("a");if(!d)return;let{hash:f}=new URL(d.href),g=n.querySelector(f);vc(g)&&!i(g)&&(o=g)}catch{}},!0),t.addEventListener(n,"touchstart",c=>{if(vc(c.target)&&pK(c.target))if(i(c.target)){let d=c.target;for(;d.parentElement&&i(d.parentElement);)d=d.parentElement;t.style(d,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(n,"touchmove",c=>{if(vc(c.target)){if(mK(c.target))return;if(i(c.target)){let d=c.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),t.add(()=>{var c;let d=(c=window.scrollY)!=null?c:window.pageYOffset;s!==d&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function ZK(){return{before({doc:n,d:t}){t.style(n.documentElement,"overflow","hidden")}}}function JK(n){let t={};for(let e of n)Object.assign(t,e(t));return t}let Ou=WK(()=>new Map,{PUSH(n,t){var e;let i=(e=this.get(n))!=null?e:{doc:n,count:0,d:gl(),meta:new Set};return i.count++,i.meta.add(t),this.set(n,i),this},POP(n,t){let e=this.get(n);return e&&(e.count--,e.meta.delete(t)),this},SCROLL_PREVENT({doc:n,d:t,meta:e}){let i={doc:n,d:t,meta:JK(e)},a=[QK(),$K(),ZK()];a.forEach(({before:s})=>s?.(i)),a.forEach(({after:s})=>s?.(i))},SCROLL_ALLOW({d:n}){n.dispose()},TEARDOWN({doc:n}){this.delete(n)}});Ou.subscribe(()=>{let n=Ou.getSnapshot(),t=new Map;for(let[e]of n)t.set(e,e.documentElement.style.overflow);for(let e of n.values()){let i=t.get(e.doc)==="hidden",a=e.count!==0;(a&&!i||!a&&i)&&Ou.dispatch(e.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",e),e.count===0&&Ou.dispatch("TEARDOWN",e)}});function tW(n,t,e=()=>({containers:[]})){let i=KK(Ou),a=t?i.get(t):void 0,s=a?a.count>0:!1;return na(()=>{if(!(!t||!n))return Ou.dispatch("PUSH",t,e),()=>Ou.dispatch("POP",t,e)},[n,t]),s}function eW(n,t,e=()=>[document.body]){let i=dm(n,"scroll-lock");tW(i,t,a=>{var s;return{containers:[...(s=a.containers)!=null?s:[],e]}})}function nW(n=0){let[t,e]=X.useState(n),i=X.useCallback(d=>e(d),[t]),a=X.useCallback(d=>e(f=>f|d),[t]),s=X.useCallback(d=>(t&d)===d,[t]),o=X.useCallback(d=>e(f=>f&~d),[e]),c=X.useCallback(d=>e(f=>f^d),[e]);return{flags:t,setFlag:i,addFlag:a,hasFlag:s,removeFlag:o,toggleFlag:c}}var iW={},tT,eT;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((tT=process==null?void 0:iW)==null?void 0:tT.NODE_ENV)==="test"&&typeof((eT=Element?.prototype)==null?void 0:eT.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var aW=(n=>(n[n.None=0]="None",n[n.Closed=1]="Closed",n[n.Enter=2]="Enter",n[n.Leave=4]="Leave",n))(aW||{});function rW(n){let t={};for(let e in n)n[e]===!0&&(t[`data-${e}`]="");return t}function sW(n,t,e,i){let[a,s]=X.useState(e),{hasFlag:o,addFlag:c,removeFlag:d}=nW(n&&a?3:0),f=X.useRef(!1),g=X.useRef(!1),m=RA();return na(()=>{var v;if(n){if(e&&s(!0),!t){e&&c(3);return}return(v=i?.start)==null||v.call(i,e),oW(t,{inFlight:f,prepare(){g.current?g.current=!1:g.current=f.current,f.current=!0,!g.current&&(e?(c(3),d(4)):(c(4),d(2)))},run(){g.current?e?(d(3),c(4)):(d(4),c(3)):e?d(1):c(1)},done(){var x;g.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,d(7),e||s(!1),(x=i?.end)==null||x.call(i,e))}})}},[n,e,t,m]),n?[a,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[e,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function oW(n,{prepare:t,run:e,done:i,inFlight:a}){let s=gl();return cW(n,{prepare:t,inFlight:a}),s.nextFrame(()=>{e(),s.requestAnimationFrame(()=>{s.add(lW(n,i))})}),s.dispose}function lW(n,t){var e,i;let a=gl();if(!n)return a.dispose;let s=!1;a.add(()=>{s=!0});let o=(i=(e=n.getAnimations)==null?void 0:e.call(n).filter(c=>c instanceof CSSTransition))!=null?i:[];return o.length===0?(t(),a.dispose):(Promise.allSettled(o.map(c=>c.finished)).then(()=>{s||t()}),a.dispose)}function cW(n,{inFlight:t,prepare:e}){if(t!=null&&t.current){e();return}let i=n.style.transition;n.style.transition="none",e(),n.offsetHeight,n.style.transition=i}function DA(n,t){let e=X.useRef([]),i=xn(n);X.useEffect(()=>{let a=[...e.current];for(let[s,o]of t.entries())if(e.current[s]!==o){let c=i(t,a);return e.current=t,c}},[i,...t])}let C1=X.createContext(null);C1.displayName="OpenClosedContext";var Ss=(n=>(n[n.Open=1]="Open",n[n.Closed=2]="Closed",n[n.Closing=4]="Closing",n[n.Opening=8]="Opening",n))(Ss||{});function T1(){return X.useContext(C1)}function uW({value:n,children:t}){return q.createElement(C1.Provider,{value:n},t)}function dW({children:n}){return q.createElement(C1.Provider,{value:null},n)}function hW(n){function t(){document.readyState!=="loading"&&(n(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let fc=[];hW(()=>{function n(t){if(!vc(t.target)||t.target===document.body||fc[0]===t.target)return;let e=t.target;e=e.closest(Uv),fc.unshift(e??t.target),fc=fc.filter(i=>i!=null&&i.isConnected),fc.splice(10)}window.addEventListener("click",n,{capture:!0}),window.addEventListener("mousedown",n,{capture:!0}),window.addEventListener("focus",n,{capture:!0}),document.body.addEventListener("click",n,{capture:!0}),document.body.addEventListener("mousedown",n,{capture:!0}),document.body.addEventListener("focus",n,{capture:!0})});function z9(n){let t=xn(n),e=X.useRef(!1);X.useEffect(()=>(e.current=!1,()=>{e.current=!0,E1(()=>{e.current&&t()})}),[t])}function fW(){let n=typeof document>"u";return"useSyncExternalStore"in BE?(t=>t.useSyncExternalStore)(BE)(()=>()=>{},()=>!1,()=>!n):!1}function hm(){let n=fW(),[t,e]=X.useState(Bu.isHandoffComplete);return t&&Bu.isHandoffComplete===!1&&e(!1),X.useEffect(()=>{t!==!0&&e(!0)},[t]),X.useEffect(()=>Bu.handoff(),[]),n?!1:t}let F9=X.createContext(!1);function pW(){return X.useContext(F9)}function nT(n){return q.createElement(F9.Provider,{value:n.force},n.children)}function gW(n){let t=pW(),e=X.useContext(H9),[i,a]=X.useState(()=>{var s;if(!t&&e!==null)return(s=e.current)!=null?s:null;if(Bu.isServer)return null;let o=n?.getElementById("headlessui-portal-root");if(o)return o;if(n===null)return null;let c=n.createElement("div");return c.setAttribute("id","headlessui-portal-root"),n.body.appendChild(c)});return X.useEffect(()=>{i!==null&&(n!=null&&n.body.contains(i)||n==null||n.body.appendChild(i))},[i,n]),X.useEffect(()=>{t||e!==null&&a(e.current)},[e,a,t]),i}let I9=X.Fragment,mW=Ga(function(n,t){let{ownerDocument:e=null,...i}=n,a=X.useRef(null),s=So(vK(x=>{a.current=x}),t),o=w1(a),c=e??o,d=gW(c),[f]=X.useState(()=>{var x;return Bu.isServer?null:(x=c?.createElement("div"))!=null?x:null}),g=X.useContext(GS),m=hm();na(()=>{!d||!f||d.contains(f)||(f.setAttribute("data-headlessui-portal",""),d.appendChild(f))},[d,f]),na(()=>{if(f&&g)return g.register(f)},[g,f]),z9(()=>{var x;!d||!f||(A9(f)&&d.contains(f)&&d.removeChild(f),d.childNodes.length<=0&&((x=d.parentElement)==null||x.removeChild(d)))});let v=Hr();return m?!d||!f?null:im.createPortal(v({ourProps:{ref:s},theirProps:i,slot:{},defaultTag:I9,name:"Portal"}),f):null});function vW(n,t){let e=So(t),{enabled:i=!0,ownerDocument:a,...s}=n,o=Hr();return i?q.createElement(mW,{...s,ownerDocument:a,ref:e}):o({ourProps:{ref:e},theirProps:s,slot:{},defaultTag:I9,name:"Portal"})}let yW=X.Fragment,H9=X.createContext(null);function bW(n,t){let{target:e,...i}=n,a={ref:So(t)},s=Hr();return q.createElement(H9.Provider,{value:e},s({ourProps:a,theirProps:i,defaultTag:yW,name:"Popover.Group"}))}let GS=X.createContext(null);function xW(){let n=X.useContext(GS),t=X.useRef([]),e=xn(s=>(t.current.push(s),n&&n.register(s),()=>i(s))),i=xn(s=>{let o=t.current.indexOf(s);o!==-1&&t.current.splice(o,1),n&&n.unregister(s)}),a=X.useMemo(()=>({register:e,unregister:i,portals:t}),[e,i,t]);return[t,X.useMemo(()=>function({children:s}){return q.createElement(GS.Provider,{value:a},s)},[a])]}let SW=Ga(vW),G9=Ga(bW),_W=Object.assign(SW,{Group:G9});function AW(n,t=typeof document<"u"?document.defaultView:null,e){let i=dm(n,"escape");B9(t,"keydown",a=>{i&&(a.defaultPrevented||a.key===C9.Escape&&e(a))})}function EW(){var n;let[t]=X.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[e,i]=X.useState((n=t?.matches)!=null?n:!1);return na(()=>{if(!t)return;function a(s){i(s.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),e}function wW({defaultContainers:n=[],portals:t,mainTreeNode:e}={}){let i=w1(e),a=xn(()=>{var s,o;let c=[];for(let d of n)d!==null&&(xc(d)?c.push(d):"current"in d&&xc(d.current)&&c.push(d.current));if(t!=null&&t.current)for(let d of t.current)c.push(d);for(let d of(s=i?.querySelectorAll("html > *, body > *"))!=null?s:[])d!==document.body&&d!==document.head&&xc(d)&&d.id!=="headlessui-portal-root"&&(e&&(d.contains(e)||d.contains((o=e?.getRootNode())==null?void 0:o.host))||c.some(f=>d.contains(f))||c.push(d));return c});return{resolveContainers:a,contains:xn(s=>a().some(o=>o.contains(s)))}}let j9=X.createContext(null);function iT({children:n,node:t}){let[e,i]=X.useState(null),a=U9(t??e);return q.createElement(j9.Provider,{value:a},n,a===null&&q.createElement(FS,{features:jv.Hidden,ref:s=>{var o,c;if(s){for(let d of(c=(o=A1(s))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?c:[])if(d!==document.body&&d!==document.head&&xc(d)&&d!=null&&d.contains(s)){i(d);break}}}}))}function U9(n=null){var t;return(t=X.useContext(j9))!=null?t:n}function OA(){let n=X.useRef(!1);return na(()=>(n.current=!0,()=>{n.current=!1}),[]),n}var kg=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(kg||{});function CW(){let n=X.useRef(0);return k9(!0,"keydown",t=>{t.key==="Tab"&&(n.current=t.shiftKey?1:0)},!0),n}function q9(n){if(!n)return new Set;if(typeof n=="function")return new Set(n());let t=new Set;for(let e of n.current)xc(e.current)&&t.add(e.current);return t}let TW="div";var Mu=(n=>(n[n.None=0]="None",n[n.InitialFocus=1]="InitialFocus",n[n.TabLock=2]="TabLock",n[n.FocusLock=4]="FocusLock",n[n.RestoreFocus=8]="RestoreFocus",n[n.AutoFocus=16]="AutoFocus",n))(Mu||{});function RW(n,t){let e=X.useRef(null),i=So(e,t),{initialFocus:a,initialFocusFallback:s,containers:o,features:c=15,...d}=n;hm()||(c=0);let f=w1(e);NW(c,{ownerDocument:f});let g=LW(c,{ownerDocument:f,container:e,initialFocus:a,initialFocusFallback:s});PW(c,{ownerDocument:f,container:e,containers:o,previousActiveElement:g});let m=CW(),v=xn(T=>{if(!Hu(e.current))return;let w=e.current;(R=>R())(()=>{ul(m.current,{[kg.Forwards]:()=>{Ug(w,ll.First,{skipElements:[T.relatedTarget,s]})},[kg.Backwards]:()=>{Ug(w,ll.Last,{skipElements:[T.relatedTarget,s]})}})})}),x=dm(!!(c&2),"focus-trap#tab-lock"),S=RA(),_=X.useRef(!1),C={ref:i,onKeyDown(T){T.key=="Tab"&&(_.current=!0,S.requestAnimationFrame(()=>{_.current=!1}))},onBlur(T){if(!(c&4))return;let w=q9(o);Hu(e.current)&&w.add(e.current);let R=T.relatedTarget;vc(R)&&R.dataset.headlessuiFocusGuard!=="true"&&(V9(w,R)||(_.current?Ug(e.current,ul(m.current,{[kg.Forwards]:()=>ll.Next,[kg.Backwards]:()=>ll.Previous})|ll.WrapAround,{relativeTo:T.target}):vc(T.target)&&cl(T.target)))}},D=Hr();return q.createElement(q.Fragment,null,x&&q.createElement(FS,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:jv.Focusable}),D({ourProps:C,theirProps:d,defaultTag:TW,name:"FocusTrap"}),x&&q.createElement(FS,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:jv.Focusable}))}let MW=Ga(RW),DW=Object.assign(MW,{features:Mu});function OW(n=!0){let t=X.useRef(fc.slice());return DA(([e],[i])=>{i===!0&&e===!1&&E1(()=>{t.current.splice(0)}),i===!1&&e===!0&&(t.current=fc.slice())},[n,fc,t]),xn(()=>{var e;return(e=t.current.find(i=>i!=null&&i.isConnected))!=null?e:null})}function NW(n,{ownerDocument:t}){let e=!!(n&8),i=OW(e);DA(()=>{e||t?.activeElement===t?.body&&cl(i())},[e]),z9(()=>{e&&cl(i())})}function LW(n,{ownerDocument:t,container:e,initialFocus:i,initialFocusFallback:a}){let s=X.useRef(null),o=dm(!!(n&1),"focus-trap#initial-focus"),c=OA();return DA(()=>{if(n===0)return;if(!o){a!=null&&a.current&&cl(a.current);return}let d=e.current;d&&E1(()=>{if(!c.current)return;let f=t?.activeElement;if(i!=null&&i.current){if(i?.current===f){s.current=f;return}}else if(d.contains(f)){s.current=f;return}if(i!=null&&i.current)cl(i.current);else{if(n&16){if(Ug(d,ll.First|ll.AutoFocus)!==HS.Error)return}else if(Ug(d,ll.First)!==HS.Error)return;if(a!=null&&a.current&&(cl(a.current),t?.activeElement===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=t?.activeElement})},[a,o,n]),s}function PW(n,{ownerDocument:t,container:e,containers:i,previousActiveElement:a}){let s=OA(),o=!!(n&4);B9(t?.defaultView,"focus",c=>{if(!o||!s.current)return;let d=q9(i);Hu(e.current)&&d.add(e.current);let f=a.current;if(!f)return;let g=c.target;Hu(g)?V9(d,g)?(a.current=g,cl(g)):(c.preventDefault(),c.stopPropagation(),cl(f)):cl(a.current)},!0)}function V9(n,t){for(let e of n)if(e.contains(t))return!0;return!1}function Y9(n){var t;return!!(n.enter||n.enterFrom||n.enterTo||n.leave||n.leaveFrom||n.leaveTo)||((t=n.as)!=null?t:K9)!==X.Fragment||q.Children.count(n.children)===1}let R1=X.createContext(null);R1.displayName="TransitionContext";var kW=(n=>(n.Visible="visible",n.Hidden="hidden",n))(kW||{});function BW(){let n=X.useContext(R1);if(n===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return n}function zW(){let n=X.useContext(M1);if(n===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return n}let M1=X.createContext(null);M1.displayName="NestingContext";function D1(n){return"children"in n?D1(n.children):n.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function X9(n,t){let e=$u(n),i=X.useRef([]),a=OA(),s=RA(),o=xn((x,S=mc.Hidden)=>{let _=i.current.findIndex(({el:C})=>C===x);_!==-1&&(ul(S,{[mc.Unmount](){i.current.splice(_,1)},[mc.Hidden](){i.current[_].state="hidden"}}),s.microTask(()=>{var C;!D1(i)&&a.current&&((C=e.current)==null||C.call(e))}))}),c=xn(x=>{let S=i.current.find(({el:_})=>_===x);return S?S.state!=="visible"&&(S.state="visible"):i.current.push({el:x,state:"visible"}),()=>o(x,mc.Unmount)}),d=X.useRef([]),f=X.useRef(Promise.resolve()),g=X.useRef({enter:[],leave:[]}),m=xn((x,S,_)=>{d.current.splice(0),t&&(t.chains.current[S]=t.chains.current[S].filter(([C])=>C!==x)),t?.chains.current[S].push([x,new Promise(C=>{d.current.push(C)})]),t?.chains.current[S].push([x,new Promise(C=>{Promise.all(g.current[S].map(([D,T])=>T)).then(()=>C())})]),S==="enter"?f.current=f.current.then(()=>t?.wait.current).then(()=>_(S)):_(S)}),v=xn((x,S,_)=>{Promise.all(g.current[S].splice(0).map(([C,D])=>D)).then(()=>{var C;(C=d.current.shift())==null||C()}).then(()=>_(S))});return X.useMemo(()=>({children:i,register:c,unregister:o,onStart:m,onStop:v,wait:f,chains:g}),[c,o,i,m,v,g,f])}let K9=X.Fragment,W9=Gv.RenderStrategy;function FW(n,t){var e,i;let{transition:a=!0,beforeEnter:s,afterEnter:o,beforeLeave:c,afterLeave:d,enter:f,enterFrom:g,enterTo:m,entered:v,leave:x,leaveFrom:S,leaveTo:_,...C}=n,[D,T]=X.useState(null),w=X.useRef(null),R=Y9(n),O=So(...R?[w,t,T]:t===null?[]:[t]),L=(e=C.unmount)==null||e?mc.Unmount:mc.Hidden,{show:I,appear:B,initial:F}=BW(),[z,j]=X.useState(I?"visible":"hidden"),Z=zW(),{register:nt,unregister:it}=Z;na(()=>nt(w),[nt,w]),na(()=>{if(L===mc.Hidden&&w.current){if(I&&z!=="visible"){j("visible");return}return ul(z,{hidden:()=>it(w),visible:()=>nt(w)})}},[z,w,nt,it,I,L]);let et=hm();na(()=>{if(R&&et&&z==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,z,et,R]);let Q=F&&!B,k=B&&I&&F,U=X.useRef(!1),$=X9(()=>{U.current||(j("hidden"),it(w))},Z),H=xn(tt=>{U.current=!0;let ct=tt?"enter":"leave";$.onStart(w,ct,At=>{At==="enter"?s?.():At==="leave"&&c?.()})}),V=xn(tt=>{let ct=tt?"enter":"leave";U.current=!1,$.onStop(w,ct,At=>{At==="enter"?o?.():At==="leave"&&d?.()}),ct==="leave"&&!D1($)&&(j("hidden"),it(w))});X.useEffect(()=>{R&&a||(H(I),V(I))},[I,R,a]);let at=!(!a||!R||!et||Q),[,K]=sW(at,D,I,{start:H,end:V}),ut=Ru({ref:O,className:((i=zS(C.className,k&&f,k&&g,K.enter&&f,K.enter&&K.closed&&g,K.enter&&!K.closed&&m,K.leave&&x,K.leave&&!K.closed&&S,K.leave&&K.closed&&_,!K.transition&&I&&v))==null?void 0:i.trim())||void 0,...rW(K)}),xt=0;z==="visible"&&(xt|=Ss.Open),z==="hidden"&&(xt|=Ss.Closed),I&&z==="hidden"&&(xt|=Ss.Opening),!I&&z==="visible"&&(xt|=Ss.Closing);let ot=Hr();return q.createElement(M1.Provider,{value:$},q.createElement(uW,{value:xt},ot({ourProps:ut,theirProps:C,defaultTag:K9,features:W9,visible:z==="visible",name:"Transition.Child"})))}function IW(n,t){let{show:e,appear:i=!1,unmount:a=!0,...s}=n,o=X.useRef(null),c=Y9(n),d=So(...c?[o,t]:t===null?[]:[t]);hm();let f=T1();if(e===void 0&&f!==null&&(e=(f&Ss.Open)===Ss.Open),e===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,m]=X.useState(e?"visible":"hidden"),v=X9(()=>{e||m("hidden")}),[x,S]=X.useState(!0),_=X.useRef([e]);na(()=>{x!==!1&&_.current[_.current.length-1]!==e&&(_.current.push(e),S(!1))},[_,e]);let C=X.useMemo(()=>({show:e,appear:i,initial:x}),[e,i,x]);na(()=>{e?m("visible"):!D1(v)&&o.current!==null&&m("hidden")},[e,v]);let D={unmount:a},T=xn(()=>{var O;x&&S(!1),(O=n.beforeEnter)==null||O.call(n)}),w=xn(()=>{var O;x&&S(!1),(O=n.beforeLeave)==null||O.call(n)}),R=Hr();return q.createElement(M1.Provider,{value:v},q.createElement(R1.Provider,{value:C},R({ourProps:{...D,as:X.Fragment,children:q.createElement($9,{ref:d,...D,...s,beforeEnter:T,beforeLeave:w})},theirProps:{},defaultTag:X.Fragment,features:W9,visible:g==="visible",name:"Transition"})))}function HW(n,t){let e=X.useContext(R1)!==null,i=T1()!==null;return q.createElement(q.Fragment,null,!e&&i?q.createElement(jS,{ref:t,...n}):q.createElement($9,{ref:t,...n}))}let jS=Ga(IW),$9=Ga(FW),NA=Ga(HW),GW=Object.assign(jS,{Child:NA,Root:jS});var jW=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(jW||{}),UW=(n=>(n[n.SetTitleId=0]="SetTitleId",n))(UW||{});let qW={0(n,t){return n.titleId===t.id?n:{...n,titleId:t.id}}},LA=X.createContext(null);LA.displayName="DialogContext";function O1(n){let t=X.useContext(LA);if(t===null){let e=new Error(`<${n} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,O1),e}return t}function VW(n,t){return ul(t.type,qW,n,t)}let aT=Ga(function(n,t){let e=X.useId(),{id:i=`headlessui-dialog-${e}`,open:a,onClose:s,initialFocus:o,role:c="dialog",autoFocus:d=!0,__demoMode:f=!1,unmount:g=!1,...m}=n,v=X.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(v.current||(v.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let x=T1();a===void 0&&x!==null&&(a=(x&Ss.Open)===Ss.Open);let S=X.useRef(null),_=So(S,t),C=w1(S),D=a?0:1,[T,w]=X.useReducer(VW,{titleId:null,descriptionId:null,panelRef:X.createRef()}),R=xn(()=>s(!1)),O=xn(K=>w({type:0,id:K})),L=hm()?D===0:!1,[I,B]=xW(),F={get current(){var K;return(K=T.panelRef.current)!=null?K:S.current}},z=U9(),{resolveContainers:j}=wW({mainTreeNode:z,portals:I,defaultContainers:[F]}),Z=x!==null?(x&Ss.Closing)===Ss.Closing:!1;kK(f||Z?!1:L,{allowed:xn(()=>{var K,ut;return[(ut=(K=S.current)==null?void 0:K.closest("[data-headlessui-portal]"))!=null?ut:null]}),disallowed:xn(()=>{var K;return[(K=z?.closest("body > *:not(#headlessui-portal-root)"))!=null?K:null]})});let nt=O9.get(null);na(()=>{if(L)return nt.actions.push(i),()=>nt.actions.pop(i)},[nt,i,L]);let it=N9(nt,X.useCallback(K=>nt.selectors.isTop(K,i),[nt,i]));XK(it,j,K=>{K.preventDefault(),R()}),AW(it,C?.defaultView,K=>{K.preventDefault(),K.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),R()}),eW(f||Z?!1:L,C,j),BK(L,S,R);let[et,Q]=yK(),k=X.useMemo(()=>[{dialogState:D,close:R,setTitleId:O,unmount:g},T],[D,T,R,O,g]),U=X.useMemo(()=>({open:D===0}),[D]),$={ref:_,id:i,role:c,tabIndex:-1,"aria-modal":f?void 0:D===0?!0:void 0,"aria-labelledby":T.titleId,"aria-describedby":et,unmount:g},H=!EW(),V=Mu.None;L&&!f&&(V|=Mu.RestoreFocus,V|=Mu.TabLock,d&&(V|=Mu.AutoFocus),H&&(V|=Mu.InitialFocus));let at=Hr();return q.createElement(dW,null,q.createElement(nT,{force:!0},q.createElement(_W,null,q.createElement(LA.Provider,{value:k},q.createElement(G9,{target:S},q.createElement(nT,{force:!1},q.createElement(Q,{slot:U},q.createElement(B,null,q.createElement(DW,{initialFocus:o,initialFocusFallback:S,containers:j,features:V},q.createElement(EK,{value:R},at({ourProps:$,theirProps:m,slot:U,defaultTag:YW,features:XW,visible:D===0,name:"Dialog"})))))))))))}),YW="div",XW=Gv.RenderStrategy|Gv.Static;function KW(n,t){let{transition:e=!1,open:i,...a}=n,s=T1(),o=n.hasOwnProperty("open")||s!==null,c=n.hasOwnProperty("onClose");if(!o&&!c)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!c)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof n.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${n.open}`);if(typeof n.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${n.onClose}`);return(i!==void 0||e)&&!a.static?q.createElement(iT,null,q.createElement(GW,{show:i,transition:e,unmount:a.unmount},q.createElement(aT,{ref:t,...a}))):q.createElement(iT,null,q.createElement(aT,{ref:t,open:i,...a}))}let WW="div";function $W(n,t){let e=X.useId(),{id:i=`headlessui-dialog-panel-${e}`,transition:a=!1,...s}=n,[{dialogState:o,unmount:c},d]=O1("Dialog.Panel"),f=So(t,d.panelRef),g=X.useMemo(()=>({open:o===0}),[o]),m=xn(C=>{C.stopPropagation()}),v={ref:f,id:i,onClick:m},x=a?NA:X.Fragment,S=a?{unmount:c}:{},_=Hr();return q.createElement(x,{...S},_({ourProps:v,theirProps:s,slot:g,defaultTag:WW,name:"Dialog.Panel"}))}let QW="div";function ZW(n,t){let{transition:e=!1,...i}=n,[{dialogState:a,unmount:s}]=O1("Dialog.Backdrop"),o=X.useMemo(()=>({open:a===0}),[a]),c={ref:t,"aria-hidden":!0},d=e?NA:X.Fragment,f=e?{unmount:s}:{},g=Hr();return q.createElement(d,{...f},g({ourProps:c,theirProps:i,slot:o,defaultTag:QW,name:"Dialog.Backdrop"}))}let JW="h2";function t$(n,t){let e=X.useId(),{id:i=`headlessui-dialog-title-${e}`,...a}=n,[{dialogState:s,setTitleId:o}]=O1("Dialog.Title"),c=So(t);X.useEffect(()=>(o(i),()=>o(null)),[i,o]);let d=X.useMemo(()=>({open:s===0}),[s]),f={ref:c,id:i};return Hr()({ourProps:f,theirProps:a,slot:d,defaultTag:JW,name:"Dialog.Title"})}let e$=Ga(KW),Q9=Ga($W),n$=Ga(ZW),Z9=Ga(t$),i$=Object.assign(e$,{Panel:Q9,Title:Z9,Description:_K});function J9({isOpen:n,onClose:t,title:e,children:i,panelClassName:a=""}){return J.jsxs(i$,{open:n,onClose:t,className:"fixed inset-0 z-50 flex items-center justify-center",children:[J.jsx(n$,{className:"fixed inset-0 bg-black opacity-30"}),J.jsxs(Q9,{className:`bg-white rounded-lg shadow-lg p-6 z-10 w-full max-w-[95%] md:max-w-2xl ${a}`,children:[e&&J.jsx(Z9,{as:"h2",className:"text-xl font-semibold mb-4",children:e}),i]})]})}function Qu(n,t,e,i){function a(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function c(g){try{f(i.next(g))}catch(m){o(m)}}function d(g){try{f(i.throw(g))}catch(m){o(m)}}function f(g){g.done?s(g.value):a(g.value).then(c,d)}f((i=i.apply(n,t||[])).next())})}const a$=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Xh(n,t,e){const i=r$(n),{webkitRelativePath:a}=n,s=typeof t=="string"?t:typeof a=="string"&&a.length>0?a:`./${n.name}`;return typeof i.path!="string"&&rT(i,"path",s),rT(i,"relativePath",s),i}function r$(n){const{name:t}=n;if(t&&t.lastIndexOf(".")!==-1&&!n.type){const i=t.split(".").pop().toLowerCase(),a=a$.get(i);a&&Object.defineProperty(n,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return n}function rT(n,t,e){Object.defineProperty(n,t,{value:e,writable:!1,configurable:!1,enumerable:!0})}const s$=[".DS_Store","Thumbs.db"];function o$(n){return Qu(this,void 0,void 0,function*(){return qv(n)&&l$(n.dataTransfer)?h$(n.dataTransfer,n.type):c$(n)?u$(n):Array.isArray(n)&&n.every(t=>"getFile"in t&&typeof t.getFile=="function")?d$(n):[]})}function l$(n){return qv(n)}function c$(n){return qv(n)&&qv(n.target)}function qv(n){return typeof n=="object"&&n!==null}function u$(n){return US(n.target.files).map(t=>Xh(t))}function d$(n){return Qu(this,void 0,void 0,function*(){return(yield Promise.all(n.map(e=>e.getFile()))).map(e=>Xh(e))})}function h$(n,t){return Qu(this,void 0,void 0,function*(){if(n.items){const e=US(n.items).filter(a=>a.kind==="file");if(t!=="drop")return e;const i=yield Promise.all(e.map(f$));return sT(t7(i))}return sT(US(n.files).map(e=>Xh(e)))})}function sT(n){return n.filter(t=>s$.indexOf(t.name)===-1)}function US(n){if(n===null)return[];const t=[];for(let e=0;e<n.length;e++){const i=n[e];t.push(i)}return t}function f$(n){if(typeof n.webkitGetAsEntry!="function")return oT(n);const t=n.webkitGetAsEntry();return t&&t.isDirectory?e7(t):oT(n,t)}function t7(n){return n.reduce((t,e)=>[...t,...Array.isArray(e)?t7(e):[e]],[])}function oT(n,t){return Qu(this,void 0,void 0,function*(){var e;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const s=yield n.getAsFileSystemHandle();if(s===null)throw new Error(`${n} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Xh(o)}}const i=n.getAsFile();if(!i)throw new Error(`${n} is not a File`);return Xh(i,(e=t?.fullPath)!==null&&e!==void 0?e:void 0)})}function p$(n){return Qu(this,void 0,void 0,function*(){return n.isDirectory?e7(n):g$(n)})}function e7(n){const t=n.createReader();return new Promise((e,i)=>{const a=[];function s(){t.readEntries(o=>Qu(this,void 0,void 0,function*(){if(o.length){const c=Promise.all(o.map(p$));a.push(c),s()}else try{const c=yield Promise.all(a);e(c)}catch(c){i(c)}}),o=>{i(o)})}s()})}function g$(n){return Qu(this,void 0,void 0,function*(){return new Promise((t,e)=>{n.file(i=>{const a=Xh(i,n.fullPath);t(a)},i=>{e(i)})})})}var sv={},lT;function m$(){return lT||(lT=1,sv.__esModule=!0,sv.default=function(n,t){if(n&&t){var e=Array.isArray(t)?t:t.split(",");if(e.length===0)return!0;var i=n.name||"",a=(n.type||"").toLowerCase(),s=a.replace(/\/.*$/,"");return e.some(function(o){var c=o.trim().toLowerCase();return c.charAt(0)==="."?i.toLowerCase().endsWith(c):c.endsWith("/*")?s===c.replace(/\/.*$/,""):a===c})}return!0}),sv}var v$=m$();const uS=rr(v$);function cT(n){return x$(n)||b$(n)||i7(n)||y$()}function y$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function x$(n){if(Array.isArray(n))return qS(n)}function uT(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,i)}return e}function dT(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(e),!0).forEach(function(i){n7(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):uT(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function n7(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tm(n,t){return A$(n)||_$(n,t)||i7(n,t)||S$()}function S$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i7(n,t){if(n){if(typeof n=="string")return qS(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return qS(n,t)}}function qS(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function _$(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i=[],a=!0,s=!1,o,c;try{for(e=e.call(n);!(a=(o=e.next()).done)&&(i.push(o.value),!(t&&i.length===t));a=!0);}catch(d){s=!0,c=d}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw c}}return i}}function A$(n){if(Array.isArray(n))return n}var E$=typeof uS=="function"?uS:uS.default,w$="file-invalid-type",C$="file-too-large",T$="file-too-small",R$="too-many-files",M$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=t.split(","),i=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:w$,message:"File type must be ".concat(i)}},hT=function(t){return{code:C$,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},fT=function(t){return{code:T$,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},D$={code:R$,message:"Too many files"};function a7(n,t){var e=n.type==="application/x-moz-file"||E$(n,t);return[e,e?null:M$(t)]}function r7(n,t,e){if(Du(n.size))if(Du(t)&&Du(e)){if(n.size>e)return[!1,hT(e)];if(n.size<t)return[!1,fT(t)]}else{if(Du(t)&&n.size<t)return[!1,fT(t)];if(Du(e)&&n.size>e)return[!1,hT(e)]}return[!0,null]}function Du(n){return n!=null}function O$(n){var t=n.files,e=n.accept,i=n.minSize,a=n.maxSize,s=n.multiple,o=n.maxFiles,c=n.validator;return!s&&t.length>1||s&&o>=1&&t.length>o?!1:t.every(function(d){var f=a7(d,e),g=tm(f,1),m=g[0],v=r7(d,i,a),x=tm(v,1),S=x[0],_=c?c(d):null;return m&&S&&!_})}function Vv(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function ov(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!n.target&&!!n.target.files}function pT(n){n.preventDefault()}function N$(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function L$(n){return n.indexOf("Edge/")!==-1}function P$(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return N$(n)||L$(n)}function uo(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return t.some(function(c){return!Vv(i)&&c&&c.apply(void 0,[i].concat(s)),Vv(i)})}}function k$(){return"showOpenFilePicker"in window}function B$(n){if(Du(n)){var t=Object.entries(n).filter(function(e){var i=tm(e,2),a=i[0],s=i[1],o=!0;return s7(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(o7))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(e,i){var a=tm(i,2),s=a[0],o=a[1];return dT(dT({},e),{},n7({},s,o))},{});return[{description:"Files",accept:t}]}return n}function z$(n){if(Du(n))return Object.entries(n).reduce(function(t,e){var i=tm(e,2),a=i[0],s=i[1];return[].concat(cT(t),[a],cT(s))},[]).filter(function(t){return s7(t)||o7(t)}).join(",")}function F$(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function I$(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function s7(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function o7(n){return/^.*\.[\w]+$/.test(n)}var H$=["children"],G$=["open"],j$=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],U$=["refKey","onChange","onClick"];function q$(n){return X$(n)||Y$(n)||l7(n)||V$()}function V$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function X$(n){if(Array.isArray(n))return VS(n)}function dS(n,t){return $$(n)||W$(n,t)||l7(n,t)||K$()}function K$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l7(n,t){if(n){if(typeof n=="string")return VS(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return VS(n,t)}}function VS(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function W$(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i=[],a=!0,s=!1,o,c;try{for(e=e.call(n);!(a=(o=e.next()).done)&&(i.push(o.value),!(t&&i.length===t));a=!0);}catch(d){s=!0,c=d}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw c}}return i}}function $$(n){if(Array.isArray(n))return n}function gT(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,i)}return e}function Bn(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?gT(Object(e),!0).forEach(function(i){YS(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):gT(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function YS(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Yv(n,t){if(n==null)return{};var e=Q$(n,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function Q$(n,t){if(n==null)return{};var e={},i=Object.keys(n),a,s;for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&(e[a]=n[a]);return e}var PA=X.forwardRef(function(n,t){var e=n.children,i=Yv(n,H$),a=u7(i),s=a.open,o=Yv(a,G$);return X.useImperativeHandle(t,function(){return{open:s}},[s]),q.createElement(X.Fragment,null,e(Bn(Bn({},o),{},{open:s})))});PA.displayName="Dropzone";var c7={disabled:!1,getFilesFromEvent:o$,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};PA.defaultProps=c7;PA.propTypes={children:St.func,accept:St.objectOf(St.arrayOf(St.string)),multiple:St.bool,preventDropOnDocument:St.bool,noClick:St.bool,noKeyboard:St.bool,noDrag:St.bool,noDragEventsBubbling:St.bool,minSize:St.number,maxSize:St.number,maxFiles:St.number,disabled:St.bool,getFilesFromEvent:St.func,onFileDialogCancel:St.func,onFileDialogOpen:St.func,useFsAccessApi:St.bool,autoFocus:St.bool,onDragEnter:St.func,onDragLeave:St.func,onDragOver:St.func,onDrop:St.func,onDropAccepted:St.func,onDropRejected:St.func,onError:St.func,validator:St.func};var XS={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function u7(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Bn(Bn({},c7),n),e=t.accept,i=t.disabled,a=t.getFilesFromEvent,s=t.maxSize,o=t.minSize,c=t.multiple,d=t.maxFiles,f=t.onDragEnter,g=t.onDragLeave,m=t.onDragOver,v=t.onDrop,x=t.onDropAccepted,S=t.onDropRejected,_=t.onFileDialogCancel,C=t.onFileDialogOpen,D=t.useFsAccessApi,T=t.autoFocus,w=t.preventDropOnDocument,R=t.noClick,O=t.noKeyboard,L=t.noDrag,I=t.noDragEventsBubbling,B=t.onError,F=t.validator,z=X.useMemo(function(){return z$(e)},[e]),j=X.useMemo(function(){return B$(e)},[e]),Z=X.useMemo(function(){return typeof C=="function"?C:mT},[C]),nt=X.useMemo(function(){return typeof _=="function"?_:mT},[_]),it=X.useRef(null),et=X.useRef(null),Q=X.useReducer(Z$,XS),k=dS(Q,2),U=k[0],$=k[1],H=U.isFocused,V=U.isFileDialogActive,at=X.useRef(typeof window<"u"&&window.isSecureContext&&D&&k$()),K=function(){!at.current&&V&&setTimeout(function(){if(et.current){var Ht=et.current.files;Ht.length||($({type:"closeDialog"}),nt())}},300)};X.useEffect(function(){return window.addEventListener("focus",K,!1),function(){window.removeEventListener("focus",K,!1)}},[et,V,nt,at]);var ut=X.useRef([]),xt=function(Ht){it.current&&it.current.contains(Ht.target)||(Ht.preventDefault(),ut.current=[])};X.useEffect(function(){return w&&(document.addEventListener("dragover",pT,!1),document.addEventListener("drop",xt,!1)),function(){w&&(document.removeEventListener("dragover",pT),document.removeEventListener("drop",xt))}},[it,w]),X.useEffect(function(){return!i&&T&&it.current&&it.current.focus(),function(){}},[it,T,i]);var ot=X.useCallback(function(Dt){B?B(Dt):console.error(Dt)},[B]),tt=X.useCallback(function(Dt){Dt.preventDefault(),Dt.persist(),sn(Dt),ut.current=[].concat(q$(ut.current),[Dt.target]),ov(Dt)&&Promise.resolve(a(Dt)).then(function(Ht){if(!(Vv(Dt)&&!I)){var ee=Ht.length,Xt=ee>0&&O$({files:Ht,accept:z,minSize:o,maxSize:s,multiple:c,maxFiles:d,validator:F}),ie=ee>0&&!Xt;$({isDragAccept:Xt,isDragReject:ie,isDragActive:!0,type:"setDraggedFiles"}),f&&f(Dt)}}).catch(function(Ht){return ot(Ht)})},[a,f,ot,I,z,o,s,c,d,F]),ct=X.useCallback(function(Dt){Dt.preventDefault(),Dt.persist(),sn(Dt);var Ht=ov(Dt);if(Ht&&Dt.dataTransfer)try{Dt.dataTransfer.dropEffect="copy"}catch{}return Ht&&m&&m(Dt),!1},[m,I]),At=X.useCallback(function(Dt){Dt.preventDefault(),Dt.persist(),sn(Dt);var Ht=ut.current.filter(function(Xt){return it.current&&it.current.contains(Xt)}),ee=Ht.indexOf(Dt.target);ee!==-1&&Ht.splice(ee,1),ut.current=Ht,!(Ht.length>0)&&($({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ov(Dt)&&g&&g(Dt))},[it,g,I]),Mt=X.useCallback(function(Dt,Ht){var ee=[],Xt=[];Dt.forEach(function(ie){var Me=a7(ie,z),Ze=dS(Me,2),yn=Ze[0],si=Ze[1],En=r7(ie,o,s),Rt=dS(En,2),qt=Rt[0],$e=Rt[1],Sn=F?F(ie):null;if(yn&&qt&&!Sn)ee.push(ie);else{var sr=[si,$e];Sn&&(sr=sr.concat(Sn)),Xt.push({file:ie,errors:sr.filter(function(Gr){return Gr})})}}),(!c&&ee.length>1||c&&d>=1&&ee.length>d)&&(ee.forEach(function(ie){Xt.push({file:ie,errors:[D$]})}),ee.splice(0)),$({acceptedFiles:ee,fileRejections:Xt,isDragReject:Xt.length>0,type:"setFiles"}),v&&v(ee,Xt,Ht),Xt.length>0&&S&&S(Xt,Ht),ee.length>0&&x&&x(ee,Ht)},[$,c,z,o,s,d,v,x,S,F]),Pt=X.useCallback(function(Dt){Dt.preventDefault(),Dt.persist(),sn(Dt),ut.current=[],ov(Dt)&&Promise.resolve(a(Dt)).then(function(Ht){Vv(Dt)&&!I||Mt(Ht,Dt)}).catch(function(Ht){return ot(Ht)}),$({type:"reset"})},[a,Mt,ot,I]),Bt=X.useCallback(function(){if(at.current){$({type:"openDialog"}),Z();var Dt={multiple:c,types:j};window.showOpenFilePicker(Dt).then(function(Ht){return a(Ht)}).then(function(Ht){Mt(Ht,null),$({type:"closeDialog"})}).catch(function(Ht){F$(Ht)?(nt(Ht),$({type:"closeDialog"})):I$(Ht)?(at.current=!1,et.current?(et.current.value=null,et.current.click()):ot(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ot(Ht)});return}et.current&&($({type:"openDialog"}),Z(),et.current.value=null,et.current.click())},[$,Z,nt,D,Mt,ot,j,c]),Gt=X.useCallback(function(Dt){!it.current||!it.current.isEqualNode(Dt.target)||(Dt.key===" "||Dt.key==="Enter"||Dt.keyCode===32||Dt.keyCode===13)&&(Dt.preventDefault(),Bt())},[it,Bt]),de=X.useCallback(function(){$({type:"focus"})},[]),Nt=X.useCallback(function(){$({type:"blur"})},[]),we=X.useCallback(function(){R||(P$()?setTimeout(Bt,0):Bt())},[R,Bt]),kt=function(Ht){return i?null:Ht},Ae=function(Ht){return O?null:kt(Ht)},rn=function(Ht){return L?null:kt(Ht)},sn=function(Ht){I&&Ht.stopPropagation()},vn=X.useMemo(function(){return function(){var Dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ht=Dt.refKey,ee=Ht===void 0?"ref":Ht,Xt=Dt.role,ie=Dt.onKeyDown,Me=Dt.onFocus,Ze=Dt.onBlur,yn=Dt.onClick,si=Dt.onDragEnter,En=Dt.onDragOver,Rt=Dt.onDragLeave,qt=Dt.onDrop,$e=Yv(Dt,j$);return Bn(Bn(YS({onKeyDown:Ae(uo(ie,Gt)),onFocus:Ae(uo(Me,de)),onBlur:Ae(uo(Ze,Nt)),onClick:kt(uo(yn,we)),onDragEnter:rn(uo(si,tt)),onDragOver:rn(uo(En,ct)),onDragLeave:rn(uo(Rt,At)),onDrop:rn(uo(qt,Pt)),role:typeof Xt=="string"&&Xt!==""?Xt:"presentation"},ee,it),!i&&!O?{tabIndex:0}:{}),$e)}},[it,Gt,de,Nt,we,tt,ct,At,Pt,O,L,i]),$t=X.useCallback(function(Dt){Dt.stopPropagation()},[]),Ce=X.useMemo(function(){return function(){var Dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ht=Dt.refKey,ee=Ht===void 0?"ref":Ht,Xt=Dt.onChange,ie=Dt.onClick,Me=Yv(Dt,U$),Ze=YS({accept:z,multiple:c,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:kt(uo(Xt,Pt)),onClick:kt(uo(ie,$t)),tabIndex:-1},ee,et);return Bn(Bn({},Ze),Me)}},[et,e,c,Pt,i]);return Bn(Bn({},U),{},{isFocused:H&&!i,getRootProps:vn,getInputProps:Ce,rootRef:it,inputRef:et,open:kt(Bt)})}function Z$(n,t){switch(t.type){case"focus":return Bn(Bn({},n),{},{isFocused:!0});case"blur":return Bn(Bn({},n),{},{isFocused:!1});case"openDialog":return Bn(Bn({},XS),{},{isFileDialogActive:!0});case"closeDialog":return Bn(Bn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return Bn(Bn({},n),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Bn(Bn({},n),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Bn({},XS);default:return n}}function mT(){}function J$({shapeId:n,onClose:t}){const e=It(D=>D.updateShape),a=It(D=>D.shapes).find(D=>D.id===n&&D.type==="marker"),[s,o]=X.useState(""),[c,d]=X.useState(""),[f,g]=X.useState([]),[m,v]=X.useState("#FF4D4F");X.useEffect(()=>{a&&(o(a.props.title||""),d(a.props.description||""),g(a.props.images||[]),v(a.props.color||"#FF4D4F"))},[a]);const x=D=>{D.forEach(T=>{const w=new FileReader;w.onload=()=>{g(R=>[...R,w.result])},w.readAsDataURL(T)})},{getRootProps:S,getInputProps:_}=u7({onDrop:x}),C=()=>{e(n,{props:{...a.props,title:s,description:c,images:f,color:m}}),t()};return a?J.jsx(J9,{isOpen:!!a,onClose:t,title:"Editar Marcador",children:J.jsxs("div",{className:"space-y-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium",children:"Color del marcador"}),J.jsx(Rv,{icon:r_,color:m,onChange:v,label:"Color del marcador"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium",children:"Ttulo"}),J.jsx("input",{value:s,onChange:D=>o(D.target.value),className:"w-full border rounded p-2"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),J.jsx("textarea",{value:c,onChange:D=>d(D.target.value),className:"w-full border rounded p-2",rows:3})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium",children:"Imgenes"}),J.jsxs("div",{...S(),className:"border-dashed border-2 border-gray-300 rounded p-4 text-center cursor-pointer",children:[J.jsx("input",{..._()}),J.jsx("p",{children:"Arrastra o haz click para subir imgenes"})]}),J.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:f.map((D,T)=>J.jsx("img",{src:D,alt:`preview-${T}`,className:"w-full h-24 object-cover rounded"},T))})]}),J.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[J.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 rounded",children:"Cancelar"}),J.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Guardar"})]})]})}):null}function tQ(){const n=X.useRef(null),t=X.useRef(null),e=X.useRef(null),i=X.useRef(null),[a,s]=X.useState({width:0,height:0}),[o,c]=X.useState(null),[d,f]=X.useState(null),{zoom:g,pan:m,setZoom:v,setPan:x,gridEnabled:S,strokeColor:_,fillColor:C,shapes:D,layers:T,activeLayerId:w,tool:R,backgroundColor:O,setSelectedShape:L,addShape:I,updateShape:B,toggleGrid:F,toggleLayersPanel:z,saveToHistory:j,backgroundImage:Z,canvasWidth:nt,canvasHeight:it}=It(),et=It(Rt=>Rt.selectedShapeId),Q=It(Rt=>Rt.selectedShapeIds),k=It(Rt=>Rt.toggleSelection),U=It(Rt=>Rt.clearSelection),$=It(Rt=>Rt.setMultipleSelection),H=It(Rt=>Rt.removeSelectedShapes),V=It(Rt=>Rt.copyShape),at=It(Rt=>Rt.pasteShape),K=It(Rt=>Rt.removeShape),ut=It(Rt=>Rt.clipboardShape),xt=It(Rt=>Rt.replaceShape),{contextMenu:ot,showContextMenu:tt,hideContextMenu:ct}=BX(),At={x:(a.width-nt)/2,y:(a.height-it)/2},[Mt]=TA(Z||""),Pt=()=>FX(t,At);NX(t,{zoom:g,setZoom:v,pan:m,setPan:x,tool:R});const{handleImageUpload:Bt,openImageInput:Gt}=zX({fileInputRef:e,CANVAS_WIDTH:nt,CANVAS_HEIGHT:it,layers:T,activeLayerId:w,addShape:I,setSelectedShape:L,setTool:It.getState().setTool,saveToHistory:j});LX({autoEditTextId:o,setAutoEditTextId:c,selectedShapeId:et,selectedShapeIds:Q,clearSelection:U,copyShape:V,pasteShape:at,toggleGrid:F,toggleLayersPanel:z,removeSelectedShapes:H,tool:R});const{isDrawing:de,handleMouseDown:Nt,handleMouseMove:we,handleMouseUp:kt}=PX({tool:R,layers:T,activeLayerId:w,strokeColor:_,fillColor:C,addShape:I,updateShape:B,setSelectedShape:L,saveToHistory:j,setAutoEditTextId:c,getCanvasPosition:Pt,useCanvasStoreRef:It}),{selectBox:Ae,isSelecting:rn,handleStart:sn,handleMove:vn,handleEnd:$t}=kX({getCanvasPosition:Pt,shapes:D,layers:T,setMultipleSelection:$});X.useEffect(()=>{if(!(!t.current||!i.current))if(Q.length>1){const Rt=Q.map(qt=>t.current.findOne(`#${qt}`)).filter(Boolean);Rt.length>1&&(i.current.nodes(Rt),i.current.getLayer().batchDraw())}else i.current.nodes([])},[Q]),X.useEffect(()=>{const Rt=()=>{if(!n.current)return;const qt=n.current.clientWidth,$e=n.current.clientHeight;s({width:qt,height:$e}),x({x:0,y:0}),v(1)};return Rt(),window.addEventListener("resize",Rt),()=>window.removeEventListener("resize",Rt)},[x,v]),X.useEffect(()=>{const Rt=n.current;if(!Rt)return;const qt=$e=>$e.preventDefault();return Rt.addEventListener("touchmove",qt,{passive:!1}),()=>Rt.removeEventListener("touchmove",qt)},[]),X.useEffect(()=>{R==="image"&&Gt()},[R,Gt]),X.useEffect(()=>{d&&!D.find(Rt=>Rt.id===d)&&f(null)},[D,d]);const Ce=Rt=>{ot&&ct();const qt=["Arrow","Rect","Circle","Line","Text","Image","FreeDraw","Marker","Group"],$e=Rt.target.getClassName&&(qt.includes(Rt.target.getClassName())||Rt.target.getParent()?.getClassName()==="Group");if(R==="select"&&$e)return;const Sn=Rt.target===Rt.target.getStage()||Rt.target.id&&Rt.target.id()==="background-rect";R==="select"&&Sn?!Rt.evt.ctrlKey&&!Rt.evt.metaKey&&(U(),sn()):R!=="select"&&Nt(Rt)},Dt=Rt=>{R==="select"?vn():de&&we(Rt,D)},Ht=()=>{R==="select"&&$t(),de&&kt()},ee=Rt=>{const qt=Rt.target;if(!qt||typeof qt.id!="function")return;const $e=qt.id(),Sn=D.find(Ur=>Ur.id===$e);if(!Sn)return;const sr=T.find(Ur=>Ur.id===Sn.layerId);if(sr&&sr.locked)return;const Ci=qt.scaleX(),or=qt.scaleY(),Ti=qt.rotation(),jr=qt.x(),_a=qt.y();switch(Sn.type){case"arrow":const Ur={x:jr,y:_a,points:Sn.props.points.map((qn,on)=>on%2===0?qn*Ci:qn*or),rotation:Ti};B($e,Ur),qt.scaleX(1),qt.scaleY(1),qt.rotation(0);break;case"line":const ml={x:jr,y:_a,points:Sn.props.points.map((qn,on)=>on%2===0?qn*Ci:qn*or),rotation:Ti};B($e,ml),qt.scaleX(1),qt.scaleY(1),qt.rotation(0);break;case"freeDraw":const vl={x:jr,y:_a,points:Sn.props.points.map((qn,on)=>on%2===0?qn*Ci:qn*or),rotation:Ti};B($e,vl),qt.scaleX(1),qt.scaleY(1),qt.rotation(0);break;case"rect":case"image":case"marker":const _o={x:jr,y:_a,width:Math.max(5,qt.width()*Ci),height:Math.max(5,qt.height()*or),rotation:Ti};B($e,_o),qt.scaleX(1),qt.scaleY(1),qt.rotation(0);break;case"text":const yl={x:jr,y:_a,width:Math.max(50,qt.width()*Ci),height:Math.max(20,qt.height()*or),fontSize:Math.max(8,(Sn.props.fontSize||16)*Ci),rotation:Ti};B($e,yl),qt.scaleX(1),qt.scaleY(1),qt.rotation(0);break;case"circle":B($e,{x:jr,y:_a,radius:Math.max(5,Sn.props.radius*Ci),rotation:Ti}),qt.scaleX(1),qt.scaleY(1),qt.rotation(0);break}j()},Xt=Rt=>{const qt=Rt.target,$e=qt.id();if(!D.find(Ci=>Ci.id===$e))return;const sr=qt.x(),Gr=qt.y();B($e,{x:sr,y:Gr}),j()},ie=Rt=>{D.find($e=>$e.id===Rt)?.type==="marker"?f(Rt):L(Rt)},Me=Rt=>{const qt=["Arrow","Rect","Circle","Line","Text","Image","FreeDraw","Marker","Group"];if(!(Rt.target.getClassName&&(qt.includes(Rt.target.getClassName())||Rt.target.getParent()?.getClassName()==="Group"))){const{setTool:Sn}=It.getState();Sn("select")}},Ze=Rt=>It.getState().bringShapeToFront(Rt),yn=Rt=>It.getState().sendShapeToBack(Rt),si=Rt=>It.getState().bringShapeForward(Rt),En=Rt=>It.getState().sendShapeBackward(Rt);return J.jsxs("div",{ref:n,className:"flex-1 bg-slate-900 overflow-hidden p-0 m-0",children:[J.jsx("input",{type:"file",accept:"image/*",ref:e,style:{display:"none",position:"absolute",left:"-9999px"},onChange:Bt}),J.jsx(MX,{ref:Rt=>{t.current=Rt,window.__konvaStageRef=Rt},width:a.width,height:a.height,scaleX:g,scaleY:g,x:m.x,y:m.y,draggable:R==="hand",onDragEnd:R==="hand"?Rt=>x({x:Rt.target.x(),y:Rt.target.y()}):void 0,style:{cursor:R==="hand"?"grab":R==="select"?rn?"crosshair":"default":"crosshair"},onMouseDown:Ce,onMouseMove:Dt,onMouseUp:Ht,onDblClick:Me,onTouchStart:Ce,onTouchMove:Dt,onTouchEnd:Ht,children:J.jsxs(wX,{children:[J.jsxs(um,{x:At.x,y:At.y,children:[J.jsx(Iu,{id:"background-rect",x:0,y:0,fill:O,width:nt,height:it,listening:!1}),Z&&Mt&&J.jsx(CA,{image:Mt,x:0,y:0,width:nt,height:it,listening:!1}),S&&J.jsx(IX,{width:nt,height:it,cellSize:gO}),J.jsx(JX,{layers:T,shapes:D,selectedShapeIds:Q,tool:R,toggleSelection:k,setSelectedShape:L,handleTransformEnd:ee,handleShapeDragEnd:Xt,handleShapeDoubleClick:ie,setContextMenu:tt,autoEditTextId:o,updateShape:B}),J.jsx(eK,{selectBox:Ae})]}),J.jsx(nK,{transformerRef:i,enabled:Q.length>1})]})}),J.jsx(tK,{contextMenu:ot,onBringToFront:Ze,onSendToBack:yn,onBringForward:si,onSendBackward:En,onClose:ct,onCopy:V,onPaste:at,onDelete:K,clipboardShape:ut,onReplace:xt}),d&&J.jsx(J$,{shapeId:d,onClose:()=>f(null)})]})}const ya=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),KS=[.001,0,0,.001,0,0],hS=1.35,Ja={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},pc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},d7="pdfjs_internal_editor_",fe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},eQ={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ea={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},bv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ii={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},kh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},N1={ERRORS:0,WARNINGS:1,INFOS:5},Xv={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},lv={moveTo:0,lineTo:1,curveTo:2,closePath:3},nQ={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let L1=N1.WARNINGS;function iQ(n){Number.isInteger(n)&&(L1=n)}function aQ(){return L1}function P1(n){L1>=N1.INFOS&&console.log(`Info: ${n}`)}function pe(n){L1>=N1.WARNINGS&&console.log(`Warning: ${n}`)}function mn(n){throw new Error(n)}function ri(n,t){n||mn(t)}function rQ(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function h7(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=uQ(n)}catch{}const i=t?URL.parse(n,t):URL.parse(n);return rQ(i)?i:null}function f7(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&h7(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function ze(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Zu=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class vT extends Zu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class fS extends Zu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class WS extends Zu{constructor(t){super(t,"InvalidPDFException")}}class Kv extends Zu{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class sQ extends Zu{constructor(t){super(t,"FormatError")}}class Ec extends Zu{constructor(t){super(t,"AbortException")}}function p7(n){(typeof n!="object"||n?.length===void 0)&&mn("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let a=0;a<t;a+=e){const s=Math.min(a+e,t),o=n.subarray(a,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function fm(n){typeof n!="string"&&mn("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function oQ(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function lQ(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function cQ(){try{return new Function(""),!0}catch{return!1}}class Ui{static get isLittleEndian(){return ze(this,"isLittleEndian",lQ())}static get isEvalSupported(){return ze(this,"isEvalSupported",cQ())}static get isOffscreenCanvasSupported(){return ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ze(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return ze(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return ze(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const pS=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Qt{static makeHexColor(t,e,i){return`#${pS[t]}${pS[e]}${pS[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,i=0){const a=t[i],s=t[i+1];t[i]=a*e[0]+s*e[2]+e[4],t[i+1]=a*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],s=e[1],o=e[2],c=e[3],d=e[4],f=e[5];for(let g=0;g<6;g+=2){const m=t[i+g],v=t[i+g+1];t[i+g]=m*a+v*o+d,t[i+g+1]=m*s+v*c+f}}static applyInverseTransform(t,e){const i=t[0],a=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,i){const a=e[0],s=e[1],o=e[2],c=e[3],d=e[4],f=e[5],g=t[0],m=t[1],v=t[2],x=t[3];let S=a*g+d,_=S,C=a*v+d,D=C,T=c*m+f,w=T,R=c*x+f,O=R;if(s!==0||o!==0){const L=s*g,I=s*v,B=o*m,F=o*x;S+=B,D+=B,C+=F,_+=F,T+=L,O+=L,R+=I,w+=I}i[0]=Math.min(i[0],S,C,_,D),i[1]=Math.min(i[1],T,R,w,O),i[2]=Math.max(i[2],S,C,_,D),i[3]=Math.max(i[3],T,R,w,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],s=t[2],o=t[3],c=i**2+a**2,d=i*s+a*o,f=s**2+o**2,g=(c+f)/2,m=Math.sqrt(g**2-(c*f-d**2));e[0]=Math.sqrt(g+m||1),e[1]=Math.sqrt(g-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>o?null:[i,s,a,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,s){s[0]=Math.min(s[0],t,i),s[1]=Math.min(s[1],e,a),s[2]=Math.max(s[2],t,i),s[3]=Math.max(s[3],e,a)}static#t(t,e,i,a,s,o,c,d,f,g){if(f<=0||f>=1)return;const m=1-f,v=f*f,x=v*f,S=m*(m*(m*t+3*f*e)+3*v*i)+x*a,_=m*(m*(m*s+3*f*o)+3*v*c)+x*d;g[0]=Math.min(g[0],S),g[1]=Math.min(g[1],_),g[2]=Math.max(g[2],S),g[3]=Math.max(g[3],_)}static#e(t,e,i,a,s,o,c,d,f,g,m,v){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,e,i,a,s,o,c,d,-m/g,v);return}const x=g**2-4*m*f;if(x<0)return;const S=Math.sqrt(x),_=2*f;this.#t(t,e,i,a,s,o,c,d,(-g+S)/_,v),this.#t(t,e,i,a,s,o,c,d,(-g-S)/_,v)}static bezierBoundingBox(t,e,i,a,s,o,c,d,f){f[0]=Math.min(f[0],t,c),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,c),f[3]=Math.max(f[3],e,d),this.#e(t,i,s,c,e,a,o,d,3*(-t+3*(i-s)+c),6*(t-2*i+s),3*(i-t),f),this.#e(t,i,s,c,e,a,o,d,3*(-e+3*(a-o)+d),6*(e-2*a+o),3*(a-e),f)}}function uQ(n){return decodeURIComponent(escape(n))}let gS=null,yT=null;function dQ(n){return gS||(gS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,yT=new Map([["","t"]])),n.replaceAll(gS,(t,e,i)=>e?e.normalize("NFKC"):yT.get(i))}function g7(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),p7(n)}const kA="pdfjs_internal_id_";function hQ(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...s]=e;if(!n(i)&&!Number.isInteger(i)||!t(a))return!1;const o=s.length;let c=!0;switch(a.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const d of s)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function ba(n,t,e){return Math.min(Math.max(n,t),e)}function m7(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(p7(n))}function fQ(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):fm(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});const rl="http://www.w3.org/2000/svg";class Kh{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function pm(n,t="text"){if(Bg(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class gm{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:s=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=s,this.offsetY=o,i*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,m,v,x;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,m=0,v=0,x=1;break;case 90:g=0,m=1,v=1,x=0;break;case 270:g=0,m=-1,v=-1,x=0;break;case 0:g=1,m=0,v=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,x=-x);let S,_,C,D;g===0?(S=Math.abs(f-t[1])*i+s,_=Math.abs(d-t[0])*i+o,C=(t[3]-t[1])*i,D=(t[2]-t[0])*i):(S=Math.abs(d-t[0])*i+s,_=Math.abs(f-t[1])*i+o,C=(t[2]-t[0])*i,D=(t[3]-t[1])*i),this.transform=[g*i,m*i,v*i,x*i,S-g*i*d-v*i*f,_-m*i*d-x*i*f],this.width=C,this.height=D}get rawDims(){const t=this.viewBox;return ze(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:s=!1}={}){return new gm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:s})}convertToViewportPoint(t,e){const i=[t,e];return Qt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];Qt.applyTransform(e,this.transform);const i=[t[2],t[3]];return Qt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return Qt.applyInverseTransform(i,this.transform),i}}class BA extends Zu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function k1(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function zA(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function pQ(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function gQ(n,t="document.pdf"){if(typeof n!="string")return t;if(k1(n))return pe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;const a=c=>{try{let d=decodeURIComponent(c);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:c):d}catch{return c}},s=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(s.test(o))return a(o);if(i.searchParams.size>0){const c=Array.from(i.searchParams.values()).reverse();for(const f of c)if(s.test(f))return a(f);const d=Array.from(i.searchParams.keys()).reverse();for(const f of d)if(s.test(f))return a(f)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return a(d[0])}return t}class bT{started=Object.create(null);times=[];time(t){t in this.started&&pe(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||pe(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-a}ms
`);return t.join("")}}function Bg(n,t){const e=t?URL.parse(n,t):URL.parse(n);return e?.protocol==="http:"||e?.protocol==="https:"}function _s(n){n.preventDefault()}function ai(n){n.preventDefault(),n.stopPropagation()}function mQ(n){console.log("Deprecated API usage: "+n)}class v7{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(o+=g,c+=m):f==="+"&&(o-=g,c-=m),new Date(Date.UTC(i,a,s,o,c,d))}}function vQ(n,{scale:t=1,rotation:e=0}){const{width:i,height:a}=n.attributes.style,s=[0,0,parseInt(i),parseInt(a)];return new gm({viewBox:s,userUnit:1,scale:t,rotation:e})}function FA(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pe(`Not a valid color format: "${n}"`),[0,0,0])}function yQ(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,FA(i))}t.remove()}function kn(n){const{a:t,b:e,c:i,d:a,e:s,f:o}=n.getTransform();return[t,e,i,a,s,o]}function ho(n){const{a:t,b:e,c:i,d:a,e:s,f:o}=n.getTransform().invertSelf();return[t,e,i,a,s,o]}function Gu(n,t,e=!1,i=!0){if(t instanceof gm){const{pageWidth:a,pageHeight:s}=t.rawDims,{style:o}=n,c=Ui.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${s}px`,g=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=c?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(o.width=g,o.height=m):(o.width=m,o.height=g)}i&&n.setAttribute("data-main-rotation",t.rotation)}class yo{constructor(){const{pixelRatio:t}=yo;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,s=-1){let o=1/0,c=1/0,d=1/0;i=yo.capPixels(i,s),i>0&&(o=Math.sqrt(i/(t*e))),a!==-1&&(c=a/t,d=a/e);const f=Math.min(o,c,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const $S=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class qg{#t=null;#e=null;#n;#i=null;#r=null;#a=null;static#o=null;constructor(t){this.#n=t,qg.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",_s,{signal:e}),t.addEventListener("pointerdown",qg.#s,{signal:e});const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const a=this.#n.toolbarPosition;if(a){const{style:s}=t,o=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#s(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ai(t)}#l(t){this.#n._focusEventsAllowed=!0,ai(t)}#h(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#l.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",_s,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",qg.#o[t]),this.#h(i),i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#u(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#h(e),this.#i.append(e,this.#u),this.#r=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#h(e),this.#i.append(e,this.#u)}async addEditSignatureButton(t){const e=this.#a=await t.renderEditButton(this.#n);this.#h(e),this.#i.append(e,this.#u)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(t){this.#a&&(this.#a.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class bQ{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",_s,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#a(),t}#r(t,e){let i=0,a=0;for(const s of t){const o=s.y+s.height;if(o<i)continue;const c=s.x+(e?s.width:0);if(o>i){a=c,i=o;continue}e?c>a&&(a=c):c<a&&(a=c)}return[e?1-a:a,i]}show(t,e,i){const[a,s]=this.#r(e,i),{style:o}=this.#e||=this.#i();t.append(this.#e),o.insetInlineEnd=`${100*a}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#n._signal;t.addEventListener("contextmenu",_s,{signal:i}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#t.append(t)}}function y7(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}class xQ{#t=0;get id(){return`${d7}${this.#t++}`}}class IA{#t=g7();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const s=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ze(this,"_isSVGFittingCanvas",s)}async#i(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await pm(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const s=IA._isSVGFittingCanvas,o=new FileReader,c=new Image,d=new Promise((f,g)=>{c.onload=()=>{i.bitmap=c,i.isSvg=!0,f()},o.onload=async()=>{const m=i.svgUrl=o.result;c.src=await s?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=o.onerror=g});o.readAsDataURL(a),await d}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){pe(a),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:s}=t;return this.#i(`${e}_${i}_${a}_${s}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const i=await e;return this.#i(t,i)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class SQ{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:a,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:s};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(o&&this.#t[this.#i].type===s){c&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class mm{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ui.platform;for(const[i,a,s={}]of t)for(const o of i){const c=o.startsWith("mac+");e&&c?(this.callbacks.set(o.slice(4),{callback:a,options:s}),this.allKeys.add(o.split("+").at(-1))):!e&&!c&&(this.callbacks.set(o,{callback:a,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:s=!1,args:o=[],checker:c=null}}=i;c&&!c(t,e)||(a.bind(t,...o,e)(),s||ai(e))}}class HA{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return yQ(t),ze(this,"_colors",t)}convert(t){const e=FA(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((s,o)=>s===e[o]))return HA._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Qt.makeHexColor(...e):t}}class wc{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#r=null;#a=null;#o=null;#s=new SQ;#d=null;#l=null;#h=0;#u=new Set;#f=null;#p=null;#g=new Set;_editorUndoBar=null;#c=!1;#m=!1;#v=!1;#y=null;#x=null;#S=null;#_=null;#w=!1;#T=null;#M=new xQ;#A=!1;#R=!1;#C=null;#O=null;#N=null;#L=null;#H=null;#E=fe.NONE;#b=new Set;#z=null;#F=null;#U=null;#q=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#G=[0,0];#P=null;#k=null;#j=null;#W=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=wc.prototype,e=o=>o.#k.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ze(this,"_keyboardManager",new mm([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#k.contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#k.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}constructor(t,e,i,a,s,o,c,d,f,g,m,v,x,S,_){const C=this._signal=this.#t.signal;this.#k=t,this.#j=e,this.#W=i,this.#r=a,this.#F=s,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:C}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),o._on("setpreference",this.onSetPreference.bind(this),{signal:C}),o._on("switchannotationeditorparams",D=>this.updateParams(D.type,D.value),{signal:C}),this.#at(),this.#lt(),this.#Q(),this.#a=c.annotationStorage,this.#y=c.filterFactory,this.#U=d,this.#_=f||null,this.#c=g,this.#m=m,this.#v=v,this.#H=x||null,this.viewParameters={realScale:Kh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1}destroy(){this.#B?.resolve(),this.#B=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#g.clear(),this.#L?.clear(),this.#e=null,this.#b.clear(),this.#s.destroy(),this.#r?.destroy(),this.#F?.destroy(),this.#T?.hide(),this.#T=null,this.#N?.destroy(),this.#N=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#H}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return ze(this,"hcmFilter",this.#U?this.#y.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return ze(this,"direction",getComputedStyle(this.#k).direction)}get highlightColors(){return ze(this,"highlightColors",this.#_?new Map(this.#_.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColorNames(){return ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=t}setMainHighlightColorPicker(t){this.#N=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}getSignature(t){this.#F?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#F}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#h=t-1}focusMainContainer(){this.#k.focus()}findParent(t,e){for(const i of this.#i.values()){const{x:a,y:s,width:o,height:c}=i.div.getBoundingClientRect();if(t>=a&&t<=a+o&&e>=s&&e<=s+c)return i}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Kh.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#X({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#$(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#i.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o}=e,c=e.toString(),f=this.#X(e).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;e.empty();const m=this.#$(f),v=this.#E===fe.NONE,x=()=>{m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o,text:c}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(fe.HIGHLIGHT,x);return}x()}#nt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#X(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#T||=new bQ(this),this.#T.show(i,a,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#W;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#it(){const t=document.getSelection();if(!t||t.isCollapsed){this.#z&&(this.#T?.hide(),this.#z=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#z)return;const a=this.#X(t).closest(".textLayer");if(!a){this.#z&&(this.#T?.hide(),this.#z=null,this.#D({hasSelectedText:!1}));return}if(this.#T?.hide(),this.#z=e,this.#D({hasSelectedText:!0}),!(this.#E!==fe.HIGHLIGHT&&this.#E!==fe.NONE)&&(this.#E===fe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#E===fe.HIGHLIGHT?this.#$(a):null;s?.toggleDrawing();const o=new AbortController,c=this.combinedSignal(o),d=f=>{f.type==="pointerup"&&f.button!==0||(o.abort(),s?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}}#K(t=""){this.#E===fe.HIGHLIGHT?this.highlightSelection(t):this.#c&&this.#nt()}#at(){document.addEventListener("selectionchange",this.#it.bind(this),{signal:this._signal})}#rt(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#st(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#b)if(e.div.contains(t)){this.#O=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,e]=this.#O;this.#O=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Q(){if(this.#C)return;this.#C=new AbortController;const t=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ot(){this.#C?.abort(),this.#C=null}#Z(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#J(){this.#d?.abort(),this.#d=null}#lt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Q(),this.#Z()}removeEditListeners(){this.#ot(),this.#J()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#p)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#p)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#b){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const o of this.#p)if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){pe(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const s=[];for(const d of i){const f=await a.deserialize(d);if(!f)return;s.push(f)}const o=()=>{for(const d of s)this.#tt(d);this.#et(s)},c=()=>{for(const d of s)d.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(s){pe(`paste: "${s.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==fe.NONE&&!this.isEditorHandlingKeyboard&&wc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([i,a])=>this.#V[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#E===fe.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#I([[Ue.HIGHLIGHT_FREE,!0]]))}#I(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#rt(),this.#Z(),this.#D({isEditing:this.#E!==fe.NONE,isEmpty:this.#Y(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#st(),this.#J(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(const e of this.#p)this.#I(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#i.get(this.#h)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#h}addLayer(t){this.#i.set(t.pageIndex,t),this.#A?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1){if(this.#E!==t&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#l?.commitOrRemove(),this.#E=t,t===fe.NONE){this.setEditingState(!1),this.#ut(),this._editorUndoBar?.hide(),this.#B.resolve();return}t===fe.SIGNATURE&&await this.#F?.loadSignatures(),this.setEditingState(!0),await this.#ct(),this.unselectAll();for(const s of this.#i.values())s.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const s of this.#n.values())s.annotationElementId===e||s.id===e?(this.setSelected(s),a&&s.enterInEditMode()):s.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#p){switch(t){case Ue.CREATE:this.currentLayer.addNewEditor(e);return;case Ue.HIGHLIGHT_DEFAULT_COLOR:this.#N?.updateColor(e);break;case Ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const i of this.#b)i.updateParams(t,e);for(const i of this.#p)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const s of this.#n.values())s.editorType===t&&s.show(e);(this.#q?.get(Ue.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#I([[Ue.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#R!==t){this.#R=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ct(){if(!this.#A){this.#A=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ut(){if(this.unselectAll(),this.#A){this.#A=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#n.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#u.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#u.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#u.has(t)}removeDeletedAnnotationElement(t){this.#u.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#tt(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#I(t.propertiesToUpdate))}get#dt(){let t=null;for(t of this.#b);return t}updateUI(t){this.#dt===t&&this.#I(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#I(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#b.has(t)){this.#b.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#b.add(t),t.select(),this.#I(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#l?.commitOrRemove();for(const e of this.#b)e!==t&&e.unselect();this.#b.clear(),this.#b.add(t),t.select(),this.#I(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#b.has(t)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(t){t.unselect(),this.#b.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#s.undo(),this.#D({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Y()}),this._editorUndoBar?.hide()}redo(){this.#s.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#Y()})}addCommands(t){this.#s.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Y()})}cleanUndoStack(t){this.#s.cleanType(t)}#Y(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#b],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const s of e)s.remove()},a=()=>{for(const s of e)this.#tt(s)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#et(t){for(const e of this.#b)e.unselect();this.#b.clear();for(const e of t)e.isEmpty()||(this.#b.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#b)t.commit();this.#et(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#E!==fe.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const t of this.#b)t.unselect();this.#b.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#G[0]+=t,this.#G[1]+=e;const[a,s]=this.#G,o=[...this.#b],c=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#G[0]=this.#G[1]=0,this.addCommands({cmd:()=>{for(const d of o)this.#n.has(d.id)&&(d.translateInPage(a,s),d.translationDone())},undo:()=>{for(const d of o)this.#n.has(d.id)&&(d.translateInPage(-a,-s),d.translationDone())},mustExec:!1})},c);for(const d of o)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#b)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let e=!1;for(const[{x:a,y:s,pageIndex:o},c]of t)c.newX=a,c.newY=s,c.newPageIndex=o,e||=a!==c.savedX||s!==c.savedY||o!==c.savedPageIndex;if(!e)return!1;const i=(a,s,o,c)=>{if(this.#n.has(a.id)){const d=this.#i.get(c);d?a._setParentAndPosition(d,s,o):(a.pageIndex=c,a.x=s,a.y=o)}};return this.addCommands({cmd:()=>{for(const[a,{newX:s,newY:o,newPageIndex:c}]of t)i(a,s,o,c)},undo:()=>{for(const[a,{savedX:s,savedY:o,savedPageIndex:c}]of t)i(a,s,o,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#f)for(const i of this.#f.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#E}get imageManager(){return ze(this,"imageManager",new IA)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:s,height:o}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(f,g,m,v)=>({x:(g-a)/o,y:1-(f+m-i)/s,width:v/o,height:m/s});break;case"180":c=(f,g,m,v)=>({x:1-(f+m-i)/s,y:1-(g+v-a)/o,width:m/s,height:v/o});break;case"270":c=(f,g,m,v)=>({x:1-(g+v-a)/o,y:(f-i)/s,width:v/o,height:m/s});break;default:c=(f,g,m,v)=>({x:(f-i)/s,y:(g-a)/o,width:m/s,height:v/o});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const m=e.getRangeAt(f);if(!m.collapsed)for(const{x:v,y:x,width:S,height:_}of m.getClientRects())S===0||_===0||d.push(c(v,x,S,_))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#a.getRawValue(e);i&&(this.#E===fe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#L?.get(t);a&&(a.setCanvas(e,i),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class mo{#t=null;#e=!1;#n=null;#i=null;#r=null;#a=null;#o=!1;#s=null;#d=null;#l=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#d=t,this.#u=t._uiManager.useNewAltTextFlow,mo.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){mo._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",mo.#f.missing),e.setAttribute("data-l10n-id",mo.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#d._uiManager._signal;t.addEventListener("contextmenu",_s,{signal:i}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const a=s=>{s.preventDefault(),this.#d._uiManager.editAltText(this.#d),this.#u&&this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#o=!0,a(s))},{signal:i}),await this.#g(),t}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#h=await mo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#s?.remove(),this.#s=null;return}if(!this.#s){const e=this.#s=document.createElement("div");e.className="noAltTextBadge",this.#d.div.append(e)}this.#s.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#h),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:s=!1}){i&&(this.#l=i,this.#h=a),!(this.#t===t&&this.#e===e)&&(s||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#s?.remove(),this.#s=null}async#g(){const t=this.#n;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",mo.#f[this.#p]),this.#i?.setAttribute("data-l10n-id",mo.#f[`${this.#p}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#d.id}`;const a=100,s=this.#d._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#d._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:s}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:s})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#d.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class B1{#t;#e=!1;#n=null;#i;#r;#a;#o;#s=null;#d;#l=null;#h;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:s=null,onPinchEnd:o=null,signal:c}){this.#t=t,this.#n=i,this.#i=e,this.#r=a,this.#a=s,this.#o=o,this.#h=new AbortController,this.#d=AbortSignal.any([c,this.#h.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#d})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/yo.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#s)return;const a=this.#s=new AbortController,s=AbortSignal.any([this.#d,a.signal]),o=this.#t,c={capture:!0,signal:s,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#s?.abort(),this.#s=null)};o.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ai(f),d(f))},c),o.addEventListener("pointerup",d,c),o.addEventListener("pointercancel",d,c);return}if(!this.#u){this.#u=new AbortController;const a=AbortSignal.any([this.#d,this.#u.signal]),s=this.#t,o={signal:a,capture:!1,passive:!1};s.addEventListener("touchmove",this.#p.bind(this),o);const c=this.#g.bind(this);s.addEventListener("touchend",c,o),s.addEventListener("touchcancel",c,o),o.capture=!0,s.addEventListener("pointerdown",ai,o),s.addEventListener("pointermove",ai,o),s.addEventListener("pointercancel",ai,o),s.addEventListener("pointerup",ai,o),this.#r?.()}if(ai(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#p(t){if(!this.#l||t.touches.length!==2)return;ai(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:s}=e,{screenX:o,screenY:c}=i,d=this.#l,{touch0X:f,touch0Y:g,touch1X:m,touch1Y:v}=d,x=m-f,S=v-g,_=o-a,C=c-s,D=Math.hypot(_,C)||1,T=Math.hypot(x,S)||1;if(!this.#e&&Math.abs(T-D)<=B1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=s,d.touch1X=o,d.touch1Y=c,!this.#e){this.#e=!0;return}const w=[(a+o)/2,(s+c)/2];this.#a?.(w,T,D)}#g(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#o?.()),this.#l&&(ai(t),this.#l=null,this.#e=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#s?.abort(),this.#s=null}}class te{#t=null;#e=null;#n=null;#i=!1;#r=null;#a="";#o=!1;#s=null;#d=null;#l=null;#h=null;#u="";#f=!1;#p=null;#g=!1;#c=!1;#m=!1;#v=null;#y=0;#x=0;#S=null;#_=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#T=te._zIndex++;static _borderLineWidth=-1;static _colorManager=new HA;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=te.prototype._resizeWithKeyboard,e=wc.TRANSLATE_SMALL,i=wc.TRANSLATE_BIG;return ze(this,"_resizerKeyboardManager",new mm([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],te.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[s,o];const[c,d]=this.parentDimensions;this.x=t.x/c,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new _Q({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(te._l10n??=t,te._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),te._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);te._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){mn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#T}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#j(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[s,o]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/s,this.y=(e+a)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#M([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,s]}=this;if(this.x+=t/a,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[d,f]=this.getBaseTranslation();o+=d,c+=f;const{style:g}=i;g.left=`${(100*o).toFixed(2)}%`,g.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=te,a=i/t,s=i/e;switch(this.rotation){case 90:return[-a,s];case 180:return[a,s];case 270:return[a,-s];default:return[-a,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:s,y:o,width:c,height:d}=this;if(c*=i,d*=a,s*=i,o*=a,this._mustFixPosition)switch(t){case 0:s=ba(s,0,i-c),o=ba(o,0,a-d);break;case 90:s=ba(s,0,i-d),o=ba(o,c,a);break;case 180:s=ba(s,c,i),o=ba(o,d,a);break;case 270:s=ba(s,d,i),o=ba(o,0,a-c);break}this.x=s/=i,this.y=o/=a;const[f,g]=this.getBaseTranslation();s+=f,o+=g,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#A(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return te.#A(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return te.#A(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,a]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*t/i).toFixed(2)}%`,this.#o||(s.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,a=i.endsWith("%"),s=!this.#o&&e.endsWith("%");if(a&&s)return;const[o,c]=this.parentDimensions;a||(t.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!this.#o&&!s&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#C(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#s.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#O.bind(this,i),{signal:e}),a.addEventListener("contextmenu",_s,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#s)}#O(t,e){e.preventDefault();const{isMac:i}=Ui.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#d=[e.screenX,e.screenY];const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#H.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ai,{passive:!1,signal:o}),window.addEventListener("contextmenu",_s,{signal:o}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#L()};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}#N(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e;const[s,o]=this.parentDimensions;this.setDims(s*i,o*a),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#l)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#l;this.#l=null;const s=this.x,o=this.y,c=this.width,d=this.height;s===t&&o===e&&c===i&&d===a||this.addCommands({cmd:this.#N.bind(this,s,o,c,d),undo:this.#N.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#H(t,e){const[i,a]=this.parentDimensions,s=this.x,o=this.y,c=this.width,d=this.height,f=te.MIN_SIZE/i,g=te.MIN_SIZE/a,m=this.#R(this.rotation),v=(Q,k)=>[m[0]*Q+m[2]*k,m[1]*Q+m[3]*k],x=this.#R(360-this.rotation),S=(Q,k)=>[x[0]*Q+x[2]*k,x[1]*Q+x[3]*k];let _,C,D=!1,T=!1;switch(t){case"topLeft":D=!0,_=(Q,k)=>[0,0],C=(Q,k)=>[Q,k];break;case"topMiddle":_=(Q,k)=>[Q/2,0],C=(Q,k)=>[Q/2,k];break;case"topRight":D=!0,_=(Q,k)=>[Q,0],C=(Q,k)=>[0,k];break;case"middleRight":T=!0,_=(Q,k)=>[Q,k/2],C=(Q,k)=>[0,k/2];break;case"bottomRight":D=!0,_=(Q,k)=>[Q,k],C=(Q,k)=>[0,0];break;case"bottomMiddle":_=(Q,k)=>[Q/2,k],C=(Q,k)=>[Q/2,0];break;case"bottomLeft":D=!0,_=(Q,k)=>[0,k],C=(Q,k)=>[Q,0];break;case"middleLeft":T=!0,_=(Q,k)=>[0,k/2],C=(Q,k)=>[Q,k/2];break}const w=_(c,d),R=C(c,d);let O=v(...R);const L=te._round(s+O[0]),I=te._round(o+O[1]);let B=1,F=1,z,j;if(e.fromKeyboard)({deltaX:z,deltaY:j}=e);else{const{screenX:Q,screenY:k}=e,[U,$]=this.#d;[z,j]=this.screenToPageTranslation(Q-U,k-$),this.#d[0]=Q,this.#d[1]=k}if([z,j]=S(z/i,j/a),D){const Q=Math.hypot(c,d);B=F=Math.max(Math.min(Math.hypot(R[0]-w[0]-z,R[1]-w[1]-j)/Q,1/c,1/d),f/c,g/d)}else T?B=ba(Math.abs(R[0]-w[0]-z),f,1)/c:F=ba(Math.abs(R[1]-w[1]-j),g,1)/d;const Z=te._round(c*B),nt=te._round(d*F);O=v(...C(Z,nt));const it=L-O[0],et=I-O[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=Z,this.height=nt,this.x=it,this.y=et,this.setDims(i*Z,a*nt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#c)return this._editToolbar;this._editToolbar=new qg(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(mo.initialize(te._l10n),this.#n=new mo(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#q();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,s]=this.getInitialTranslation();return this.translate(a,s),y7(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#_||=new B1({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#E.bind(this),onPinching:this.#b.bind(this),onPinchEnd:this.#z.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#E(){this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#b(t,e,i){let s=.7*(i/e)+1-.7;if(s===1)return;const o=this.#R(this.rotation),c=(L,I)=>[o[0]*L+o[2]*I,o[1]*L+o[3]*I],[d,f]=this.parentDimensions,g=this.x,m=this.y,v=this.width,x=this.height,S=te.MIN_SIZE/d,_=te.MIN_SIZE/f;s=Math.max(Math.min(s,1/v,1/x),S/v,_/x);const C=te._round(v*s),D=te._round(x*s);if(C===v&&D===x)return;this.#p||=[g,m,v,x];const T=c(v/2,x/2),w=te._round(g+T[0]),R=te._round(m+T[1]),O=c(C/2,D/2);this.x=w-O[0],this.y=R-O[1],this.width=C,this.height=D,this.setDims(d*C,f*D),this.fixAndSetPosition(),this._onResizing()}#z(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(t){const{isMac:e}=Ui.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#U(t);return}this.#F(t)}#F(t){const{isMac:e}=Ui.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,s=this._uiManager.combinedSignal(a),o={capture:!0,passive:!1,signal:s},c=f=>{a.abort(),this.#r=null,this.#f=!1,this._uiManager.endDragSession()||this.#F(f),i&&this._onStopDragging()};e&&(this.#y=t.clientX,this.#x=t.clientY,this.#r=t.pointerId,this.#a=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._onStartDragging());const{clientX:g,clientY:m,pointerId:v}=f;if(v!==this.#r){ai(f);return}const[x,S]=this.screenToPageTranslation(g-this.#y,m-this.#x);this.#y=g,this.#x=m,this._uiManager.dragSelectedEditors(x,S)},o),window.addEventListener("touchmove",ai,o),window.addEventListener("pointerdown",f=>{f.pointerType===this.#a&&(this.#_||f.isPrimary)&&c(f),ai(f)},o));const d=f=>{if(!this.#r||this.#r===f.pointerId){c(f);return}ai(f)};window.addEventListener("pointerup",d,{signal:s}),window.addEventListener("blur",d,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[s,o]=this.pageDimensions,[c,d]=this.pageTranslation,f=t/a,g=e/a,m=this.x*s,v=this.y*o,x=this.width*s,S=this.height*o;switch(i){case 0:return[m+f+c,o-v-g-S+d,m+f+x+c,o-v-g+d];case 90:return[m+g+c,o-v+f+d,m+g+S+c,o-v+f+x+d];case 180:return[m-f-x+c,o-v+g+d,m-f+c,o-v+g+S+d];case 270:return[m-g-S+c,o-v-f-x+d,m-g+c,o-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,s,o]=t,c=s-i,d=o-a;switch(this.rotation){case 0:return[i,e-o,c,d];case 90:return[i,e-a,d,c];case 180:return[s,e-a,c,d];case 270:return[s,e-o,d,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#c=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#c=!1,!0):!1}isInEditMode(){return this.#c}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return e<o&&a>0&&t<s&&i>0}#q(){if(this.#h||!this.div)return;this.#h=new AbortController;const t=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#q()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){mn("An editor must be serializable")}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[s,o]=a.pageDimensions,[c,d,f,g]=a.getRectInCurrentCoords(t.rect,o);return a.x=c/s,a.y=d/o,a.width=f/s,a.height=g/o,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#j(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#_?.destroy(),this.#_=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#C(),this.#s.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#s.children;if(!this.#e){this.#e=Array.from(e);const o=this.#V.bind(this),c=this.#G.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",o,{signal:d}),f.addEventListener("blur",c,{signal:d}),f.addEventListener("focus",this.#P.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",te._l10nResizer[g])}}const i=this.#e[0];let a=0;for(const o of e){if(o===i)break;a++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(s!==a){if(s<a)for(let c=0;c<a-s;c++)this.#s.append(this.#s.firstChild);else if(s>a)for(let c=0;c<s-a;c++)this.#s.firstChild.before(this.#s.lastChild);let o=0;for(const c of e){const f=this.#e[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",te._l10nResizer[f])}}this.#k(0),this.#m=!0,this.#s.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){te._resizerKeyboardManager.exec(this,t)}#G(t){this.#m&&t.relatedTarget?.parentNode!==this.#s&&this.#j()}#P(t){this.#u=this.#m?t:""}#k(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#m&&this.#H(this.#u,{deltaX:t,deltaY:e,fromKeyboard:!0})}#j(){this.#m=!1,this.#k(-1),this.#L()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const i=t/e,{style:a}=this.div;a.aspectRatio=i,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#S||=new Map;const{action:i}=t;let a=this.#S.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(i),this.#S.size===0&&(this.#S=null)},te._telemetryTimeout),this.#S.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class _Q extends te{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const xT=3285377520,kr=4294901760,fo=65535;class b7{constructor(t){this.h1=t?t&4294967295:xT,this.h2=t?t&4294967295:xT}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let _=0,C=t.length;_<C;_++){const D=t.charCodeAt(_);D<=255?e[i++]=D:(e[i++]=D>>>8,e[i++]=D&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,s=i-a*4,o=new Uint32Array(e.buffer,0,a);let c=0,d=0,f=this.h1,g=this.h2;const m=3432918353,v=461845907,x=m&fo,S=v&fo;for(let _=0;_<a;_++)_&1?(c=o[_],c=c*m&kr|c*x&fo,c=c<<15|c>>>17,c=c*v&kr|c*S&fo,f^=c,f=f<<13|f>>>19,f=f*5+3864292196):(d=o[_],d=d*m&kr|d*x&fo,d=d<<15|d>>>17,d=d*v&kr|d*S&fo,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(c=0,s){case 3:c^=e[a*4+2]<<16;case 2:c^=e[a*4+1]<<8;case 1:c^=e[a*4],c=c*m&kr|c*x&fo,c=c<<15|c>>>17,c=c*v&kr|c*S&fo,a&1?f^=c:g^=c}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&kr|t*36045&fo,e=e*4283543511&kr|((e<<16|t>>>16)*2950163797&kr)>>>16,t^=e>>>1,t=t*444984403&kr|t*60499&fo,e=e*3301882366&kr|((e<<16|t>>>16)*3120437893&kr)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const QS=Object.freeze({map:null,hash:"",transfer:void 0});class GA{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof te)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[s,o]of Object.entries(e))i[s]!==o&&(a=!0,i[s]=o);else a=!0,this.#n.set(t,e);a&&this.#i(),e instanceof te&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new x7(this)}get serializable(){if(this.#n.size===0)return QS;const t=new Map,e=new b7,i=[],a=Object.create(null);let s=!1;for(const[o,c]of this.#n){const d=c instanceof te?c.serialize(!1,a):c;d&&(t.set(o,d),e.update(`${o}:${JSON.stringify(d)}`),s||=!!d.bitmap)}if(s)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:QS}get editorStats(){let t=null;const e=new Map;for(const i of this.#n.values()){if(!(i instanceof te))continue;const a=i.telemetryFinalData;if(!a)continue;const{type:s}=a;e.has(s)||e.set(s,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const o=t[s]||=new Map;for(const[c,d]of Object.entries(a)){if(c==="type")continue;let f=o.get(c);f||(f=new Map,o.set(c,f));const g=f.get(d)??0;f.set(d,g+1)}}for(const[i,a]of e)t[i]=a.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof te)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class x7 extends GA{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,s=structuredClone(e,a?{transfer:a}:null);this.#t={map:s,hash:i,transfer:a}}get print(){mn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return ze(this,"modifiedIds",{ids:new Set,hash:""})}}class AQ{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(ri(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:s,style:o}=t,c=new FontFace(a,s,o);this.addNativeFontFace(c);try{await c.load(),this.#t.add(a),i?.(t)}catch{pe(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}mn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw pe(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return ze(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return ze(this,"isSyncFontLoadingSupported",ya||Ui.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ri(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ze(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(R,O){return R.charCodeAt(O)<<24|R.charCodeAt(O+1)<<16|R.charCodeAt(O+2)<<8|R.charCodeAt(O+3)&255}function a(R,O,L,I){const B=R.substring(0,O),F=R.substring(O+L);return B+I+F}let s,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let f=0;function g(R,O){if(++f>30){pe("Load test font never loaded."),O();return}if(d.font="30px "+R,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(g.bind(null,R,O))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,m.length,m);const S=16,_=1482184792;let C=i(v,S);for(s=0,o=m.length-3;s<o;s+=4)C=C-_+i(m,s)|0;s<m.length&&(C=C-_+i(m+"XXX",s)|0),v=a(v,S,4,oQ(C));const D=`url(data:font/opentype;base64,${btoa(v)});`,T=`@font-face {font-family:"${m}";src:${D}}`;this.insertRule(T);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const R of[t.loadedName,m]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=R,w.append(O)}this._document.body.append(w),g(m,()=>{w.remove(),e.complete()})}}class EQ{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${m7(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(o){pe(`getPathGenerator - ignoring character: "${o}".`)}const s=new Path2D(a||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=s}}function wQ(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(ya)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function CQ(n){if(ya&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return fm(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function cv(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const ZS=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,TQ=n=>typeof n=="object"&&typeof n?.name=="string",RQ=hQ.bind(null,ZS,TQ);class MQ{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted){pe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);a=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const uv={DATA:1,ERROR:2},ni={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ST(){}function za(n){if(n instanceof Ec||n instanceof WS||n instanceof vT||n instanceof Kv||n instanceof fS)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||mn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ec(n.message);case"InvalidPDFException":return new WS(n.message);case"PasswordException":return new vT(n.message,n.code);case"ResponseException":return new Kv(n.message,n.status,n.missing);case"UnknownErrorException":return new fS(n.message,n.details)}return new fS(n.message,n.toString())}class zg{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===uv.DATA)a.resolve(t.data);else if(t.callback===uv.ERROR)a.reject(za(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(o){s.postMessage({sourceName:i,targetName:a,callback:uv.DATA,callbackId:t.callbackId,data:o})},function(o){s.postMessage({sourceName:i,targetName:a,callback:uv.ERROR,callbackId:t.callbackId,reason:za(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[a]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(o){s.reject(o)}return s.promise}sendWithStream(t,e,i,a){const s=this.streamId++,o=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[s]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:c,action:t,streamId:s,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[s].pullCall=g,d.postMessage({sourceName:o,targetName:c,stream:ni.PULL,streamId:s,desiredSize:f.desiredSize}),g.promise},cancel:f=>{ri(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[s].cancelCall=g,this.streamControllers[s].isClosed=!0,d.postMessage({sourceName:o,targetName:c,stream:ni.CANCEL,streamId:s,reason:za(f)}),g.promise}},i)}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,s=this.comObj,o=this,c=this.actionHandler[t.action],d={enqueue(f,g=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=g,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:a,stream:ni.ENQUEUE,streamId:e,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:a,stream:ni.CLOSE,streamId:e}),delete o.streamSinks[e])},error(f){ri(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:a,stream:ni.ERROR,streamId:e,reason:za(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(c,t.data,d).then(function(){s.postMessage({sourceName:i,targetName:a,stream:ni.START_COMPLETE,streamId:e,success:!0})},function(f){s.postMessage({sourceName:i,targetName:a,stream:ni.START_COMPLETE,streamId:e,reason:za(f)})})}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,s=this.comObj,o=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case ni.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(za(t.reason));break;case ni.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(za(t.reason));break;case ni.PULL:if(!c){s.postMessage({sourceName:i,targetName:a,stream:ni.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||ST).then(function(){s.postMessage({sourceName:i,targetName:a,stream:ni.PULL_COMPLETE,streamId:e,success:!0})},function(f){s.postMessage({sourceName:i,targetName:a,stream:ni.PULL_COMPLETE,streamId:e,reason:za(f)})});break;case ni.ENQUEUE:if(ri(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ni.CLOSE:if(ri(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#r(o,e);break;case ni.ERROR:ri(o,"error should have stream controller"),o.controller.error(za(t.reason)),this.#r(o,e);break;case ni.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(za(t.reason)),this.#r(o,e);break;case ni.CANCEL:if(!c)break;const d=za(t.reason);Promise.try(c.onCancel||ST,d).then(function(){s.postMessage({sourceName:i,targetName:a,stream:ni.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){s.postMessage({sourceName:i,targetName:a,stream:ni.CANCEL_COMPLETE,streamId:e,reason:za(f)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class S7{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){mn("Abstract method `_createCanvas` called.")}}class DQ extends S7{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class _7{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){mn("Abstract method `_fetch` called.")}}class _T extends _7{async _fetch(t){const e=await pm(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):fm(e)}}class A7{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,s){return"none"}destroy(t=!1){}}class OQ extends A7{#t;#e;#n;#i;#r;#a;#o=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#r=e}get#s(){return this.#e||=new Map}get#d(){return this.#a||=new Map}get#l(){if(!this.#n){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(rl,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#r.createElementNS(rl,"defs"),t.append(i),i.append(this.#n),this.#r.body.append(t)}return this.#n}#h(t){if(t.length===1){const d=t[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=d[m]/255;const g=f.join(",");return[g,g,g]}const[e,i,a]=t,s=new Array(256),o=new Array(256),c=new Array(256);for(let d=0;d<256;d++)s[d]=e[d]/255,o[d]=i[d]/255,c[d]=a[d]/255;return[s.join(","),o.join(","),c.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(k1(e)?pe('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=f7(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#s.get(t);if(e)return e;const[i,a,s]=this.#h(t),o=t.length===1?i:`${i}${a}${s}`;if(e=this.#s.get(o),e)return this.#s.set(t,e),e;const c=`g_${this.#i}_transfer_map_${this.#o++}`,d=this.#u(c);this.#s.set(t,d),this.#s.set(o,d);const f=this.#g(c);return this.#m(i,a,s,f),d}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let s=this.#d.get(a);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#d.set(a,s)),!t||!e))return s.url;const o=this.#y(t);t=Qt.makeHexColor(...o);const c=this.#y(e);if(e=Qt.makeHexColor(...c),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return s.url;const d=new Array(256);for(let x=0;x<=255;x++){const S=x/255;d[x]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#i}_hcm_filter`,m=s.filter=this.#g(g);this.#m(f,f,f,m),this.#p(m);const v=(x,S)=>{const _=o[x]/255,C=c[x]/255,D=new Array(S+1);for(let T=0;T<=S;T++)D[T]=_+T/S*(C-_);return D.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),m),s.url=this.#u(g),s.url}addAlphaFilter(t){let e=this.#s.get(t);if(e)return e;const[i]=this.#h([t]),a=`alpha_${i}`;if(e=this.#s.get(a),e)return this.#s.set(t,e),e;const s=`g_${this.#i}_alpha_map_${this.#o++}`,o=this.#u(s);this.#s.set(t,o),this.#s.set(a,o);const c=this.#g(s);return this.#v(i,c),o}addLuminosityFilter(t){let e=this.#s.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#h([t]),a=`luminosity_${i}`):a="luminosity",e=this.#s.get(a),e)return this.#s.set(t,e),e;const s=`g_${this.#i}_luminosity_map_${this.#o++}`,o=this.#u(s);this.#s.set(t,o),this.#s.set(a,o);const c=this.#g(s);return this.#f(c),t&&this.#v(i,c),o}addHighlightHCMFilter(t,e,i,a,s){const o=`${e}-${i}-${a}-${s}`;let c=this.#d.get(t);if(c?.key===o||(c?(c.filter?.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},this.#d.set(t,c)),!e||!i))return c.url;const[d,f]=[e,i].map(this.#y.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,x]=[a,s].map(this.#y.bind(this));m<g&&([g,m,v,x]=[m,g,x,v]),this.#l.style.color="";const S=(D,T,w)=>{const R=new Array(256),O=(m-g)/w,L=D/255,I=(T-D)/(255*w);let B=0;for(let F=0;F<=w;F++){const z=Math.round(g+F*O),j=L+F*I;for(let Z=B;Z<=z;Z++)R[Z]=j;B=z+1}for(let F=B;F<256;F++)R[F]=R[B-1];return R.join(",")},_=`g_${this.#i}_hcm_${t}_filter`,C=c.filter=this.#g(_);return this.#p(C),this.#m(S(v[0],x[0],5),S(v[1],x[1],5),S(v[2],x[2],5),C),c.url=this.#u(_),c.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#o=0)}#f(t){const e=this.#r.createElementNS(rl,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(rl,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(rl,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#c(t,e,i){const a=this.#r.createElementNS(rl,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#m(t,e,i,a){const s=this.#r.createElementNS(rl,"feComponentTransfer");a.append(s),this.#c(s,"feFuncR",t),this.#c(s,"feFuncG",e),this.#c(s,"feFuncB",i)}#v(t,e){const i=this.#r.createElementNS(rl,"feComponentTransfer");e.append(i),this.#c(i,"feFuncA",t)}#y(t){return this.#l.style.color=t,FA(getComputedStyle(this.#l).getPropertyValue("color"))}}class E7{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){mn("Abstract method `_fetch` called.")}}class AT extends E7{async _fetch(t){const e=await pm(t,"arraybuffer");return new Uint8Array(e)}}class w7{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){mn("Abstract method `_fetch` called.")}}class ET extends w7{async _fetch(t){const e=await pm(t,"arraybuffer");return new Uint8Array(e)}}ya&&pe("Please use the `legacy` build in Node.js environments.");async function jA(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class NQ extends A7{}class LQ extends S7{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class PQ extends _7{async _fetch(t){return jA(t)}}class kQ extends E7{async _fetch(t){return jA(t)}}class BQ extends w7{async _fetch(t){return jA(t)}}const Gi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function JS(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),n.clip(a)}class UA{isModifyingCurrentTransform(){return!1}getPattern(){mn("Abstract method `getPattern` called.")}}class zQ extends UA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,a){let s;if(a===Gi.STROKE||a===Gi.FILL){const o=e.current.getClippedPathBoundingBox(a,kn(t))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,f=e.cachedCanvases.getCanvas("pattern",c,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-o[0],-o[1]),i=Qt.transform(i,[1,0,0,1,o[0],o[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),JS(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),s=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(i);s.setTransform(m)}else JS(t,this._bbox),s=this._createGradient(t);return s}}function mS(n,t,e,i,a,s,o,c){const d=t.coords,f=t.colors,g=n.data,m=n.width*4;let v;d[e+1]>d[i+1]&&(v=e,e=i,i=v,v=s,s=o,o=v),d[i+1]>d[a+1]&&(v=i,i=a,a=v,v=o,o=c,c=v),d[e+1]>d[i+1]&&(v=e,e=i,i=v,v=s,s=o,o=v);const x=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,_=(d[i]+t.offsetX)*t.scaleX,C=(d[i+1]+t.offsetY)*t.scaleY,D=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(S>=T)return;const w=f[s],R=f[s+1],O=f[s+2],L=f[o],I=f[o+1],B=f[o+2],F=f[c],z=f[c+1],j=f[c+2],Z=Math.round(S),nt=Math.round(T);let it,et,Q,k,U,$,H,V;for(let at=Z;at<=nt;at++){if(at<C){const tt=at<S?0:(S-at)/(S-C);it=x-(x-_)*tt,et=w-(w-L)*tt,Q=R-(R-I)*tt,k=O-(O-B)*tt}else{let tt;at>T?tt=1:C===T?tt=0:tt=(C-at)/(C-T),it=_-(_-D)*tt,et=L-(L-F)*tt,Q=I-(I-z)*tt,k=B-(B-j)*tt}let K;at<S?K=0:at>T?K=1:K=(S-at)/(S-T),U=x-(x-D)*K,$=w-(w-F)*K,H=R-(R-z)*K,V=O-(O-j)*K;const ut=Math.round(Math.min(it,U)),xt=Math.round(Math.max(it,U));let ot=m*at+ut*4;for(let tt=ut;tt<=xt;tt++)K=(it-tt)/(it-U),K<0?K=0:K>1&&(K=1),g[ot++]=et-(et-$)*K|0,g[ot++]=Q-(Q-H)*K|0,g[ot++]=k-(k-V)*K|0,g[ot++]=255}}function FQ(n,t,e){const i=t.coords,a=t.colors;let s,o;switch(t.type){case"lattice":const c=t.verticesPerRow,d=Math.floor(i.length/c)-1,f=c-1;for(s=0;s<d;s++){let g=s*c;for(let m=0;m<f;m++,g++)mS(n,e,i[g],i[g+1],i[g+c],a[g],a[g+1],a[g+c]),mS(n,e,i[g+c+1],i[g+1],i[g+c],a[g+c+1],a[g+1],a[g+c])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)mS(n,e,i[s],i[s+1],i[s+2],a[s],a[s+1],a[s+2]);break;default:throw new Error("illegal figure")}}class IQ extends UA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-c,g=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),x=f/m,S=g/v,_={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/x,scaleY:1/S},C=m+2*2,D=v+2*2,T=i.getCanvas("mesh",C,D),w=T.context,R=w.createImageData(m,v);if(e){const L=R.data;for(let I=0,B=L.length;I<B;I+=4)L[I]=e[0],L[I+1]=e[1],L[I+2]=e[2],L[I+3]=255}for(const L of this._figures)FQ(R,L,_);return w.putImageData(R,2,2),{canvas:T.canvas,offsetX:c-2*x,offsetY:d-2*S,scaleX:x,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){JS(t,this._bbox);const s=new Float32Array(2);if(a===Gi.SHADING)Qt.singularValueDecompose2dScale(kn(t),s);else if(this.matrix){Qt.singularValueDecompose2dScale(this.matrix,s);const[c,d]=s;Qt.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=c,s[1]*=d}else Qt.singularValueDecompose2dScale(e.baseTransform,s);const o=this._createMeshCanvas(s,a===Gi.SHADING?null:this._background,e.cachedCanvases);return a!==Gi.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class HQ extends UA{getPattern(){return"hotpink"}}function GQ(n){switch(n[0]){case"RadialAxial":return new zQ(n);case"Mesh":return new IQ(n);case"Dummy":return new HQ}throw new Error(`Unknown IR type: ${n[0]}`)}const wT={COLORED:1,UNCOLORED:2};class qA{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:a,tilingType:s,color:o,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),P1("TilingType: "+s);const g=e[0],m=e[1],v=e[2],x=e[3],S=v-g,_=x-m,C=new Float32Array(2);Qt.singularValueDecompose2dScale(this.matrix,C);const[D,T]=C;Qt.singularValueDecompose2dScale(this.baseTransform,C);const w=D*C[0],R=T*C[1];let O=S,L=_,I=!1,B=!1;const F=Math.ceil(d*w),z=Math.ceil(f*R),j=Math.ceil(S*w),Z=Math.ceil(_*R);F>=j?O=d:I=!0,z>=Z?L=f:B=!0;const nt=this.getSizeAndScale(O,this.ctx.canvas.width,w),it=this.getSizeAndScale(L,this.ctx.canvas.height,R),et=t.cachedCanvases.getCanvas("pattern",nt.size,it.size),Q=et.context,k=c.createCanvasGraphics(Q);if(k.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(k,a,o),Q.translate(-nt.scale*g,-it.scale*m),k.transform(nt.scale,0,0,it.scale,0,0),Q.save(),this.clipBbox(k,g,m,v,x),k.baseTransform=kn(k.ctx),k.executeOperatorList(i),k.endDrawing(),Q.restore(),I||B){const U=et.canvas;I&&(O=d),B&&(L=f);const $=this.getSizeAndScale(O,this.ctx.canvas.width,w),H=this.getSizeAndScale(L,this.ctx.canvas.height,R),V=$.size,at=H.size,K=t.cachedCanvases.getCanvas("pattern-workaround",V,at),ut=K.context,xt=I?Math.floor(S/d):0,ot=B?Math.floor(_/f):0;for(let tt=0;tt<=xt;tt++)for(let ct=0;ct<=ot;ct++)ut.drawImage(U,V*tt,at*ct,V,at,0,0,V,at);return{canvas:K.canvas,scaleX:$.scale,scaleY:H.scale,offsetX:g,offsetY:m}}return{canvas:et.canvas,scaleX:nt.scale,scaleY:it.scale,offsetX:g,offsetY:m}}getSizeAndScale(t,e,i){const a=Math.max(qA.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*i);return s>=a?s=a:i=s/t,{scale:i,size:s}}clipBbox(t,e,i,a,s){const o=a-e,c=s-i;t.ctx.rect(e,i,o,c),Qt.axialAlignedBoundingBox([e,i,a,s],kn(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,s=t.current;switch(e){case wT.COLORED:const{fillStyle:o,strokeStyle:c}=this.ctx;a.fillStyle=s.fillColor=o,a.strokeStyle=s.strokeColor=c;break;case wT.UNCOLORED:a.fillStyle=a.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new sQ(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a){let s=i;a!==Gi.SHADING&&(s=Qt.transform(s,e.baseTransform),this.matrix&&(s=Qt.transform(s,this.matrix)));const o=this.createPatternCanvas(e);let c=new DOMMatrix(s);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const d=t.createPattern(o.canvas,"repeat");return d.setTransform(c),d}}function jQ({src:n,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const c=Ui.isLittleEndian?4278190080:255,[d,f]=o?[s,c]:[c,s],g=i>>3,m=i&7,v=n.length;e=new Uint32Array(e.buffer);let x=0;for(let S=0;S<a;S++){for(const C=t+g;t<C;t++){const D=t<v?n[t]:255;e[x++]=D&128?f:d,e[x++]=D&64?f:d,e[x++]=D&32?f:d,e[x++]=D&16?f:d,e[x++]=D&8?f:d,e[x++]=D&4?f:d,e[x++]=D&2?f:d,e[x++]=D&1?f:d}if(m===0)continue;const _=t<v?n[t++]:255;for(let C=0;C<m;C++)e[x++]=_&1<<7-C?f:d}return{srcPos:t,destPos:x}}const CT=16,TT=100,UQ=15,RT=10,Fa=16,vS=new DOMMatrix,tr=new Float32Array(2),Ih=new Float32Array([1/0,1/0,-1/0,-1/0]);function qQ(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,a,s,o,c){t.transform(e,i,a,s,o,c),this.__originalTransform(e,i,a,s,o,c)},n.setTransform=function(e,i,a,s,o,c){t.setTransform(e,i,a,s,o,c),this.__originalSetTransform(e,i,a,s,o,c)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,a,s,o,c){t.bezierCurveTo(e,i,a,s,o,c),this.__originalBezierCurveTo(e,i,a,s,o,c)},n.rect=function(e,i,a,s){t.rect(e,i,a,s),this.__originalRect(e,i,a,s)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class VQ{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function dv(n,t,e,i,a,s,o,c,d,f){const[g,m,v,x,S,_]=kn(n);if(m===0&&v===0){const T=o*g+S,w=Math.round(T),R=c*x+_,O=Math.round(R),L=(o+d)*g+S,I=Math.abs(Math.round(L)-w)||1,B=(c+f)*x+_,F=Math.abs(Math.round(B)-O)||1;return n.setTransform(Math.sign(g),0,0,Math.sign(x),w,O),n.drawImage(t,e,i,a,s,0,0,I,F),n.setTransform(g,m,v,x,S,_),[I,F]}if(g===0&&x===0){const T=c*v+S,w=Math.round(T),R=o*m+_,O=Math.round(R),L=(c+f)*v+S,I=Math.abs(Math.round(L)-w)||1,B=(o+d)*m+_,F=Math.abs(Math.round(B)-O)||1;return n.setTransform(0,Math.sign(m),Math.sign(v),0,w,O),n.drawImage(t,e,i,a,s,0,0,F,I),n.setTransform(g,m,v,x,S,_),[F,I]}n.drawImage(t,e,i,a,s,o,c,d,f);const C=Math.hypot(g,m),D=Math.hypot(v,x);return[C*d,D*f]}class MT{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=KS;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ea.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ih.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Gi.FILL,e=null){const i=this.minMax.slice();if(t===Gi.STROKE){e||mn("Stroke bounding box must include transform."),Qt.singularValueDecompose2dScale(e,tr);const a=tr[0]*this.lineWidth/2,s=tr[1]*this.lineWidth/2;i[0]-=a,i[1]-=s,i[2]+=a,i[3]+=s}return i}updateClipFromPath(){const t=Qt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ih,0)}getClippedPathBoundingBox(t=Gi.FILL,e=null){return Qt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function DT(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%Fa,s=(e-a)/Fa,o=a===0?s:s+1,c=n.createImageData(i,Fa);let d=0,f;const g=t.data,m=c.data;let v,x,S,_;if(t.kind===bv.GRAYSCALE_1BPP){const C=g.byteLength,D=new Uint32Array(m.buffer,0,m.byteLength>>2),T=D.length,w=i+7>>3,R=4294967295,O=Ui.isLittleEndian?4278190080:255;for(v=0;v<o;v++){for(S=v<s?Fa:a,f=0,x=0;x<S;x++){const L=C-d;let I=0;const B=L>w?i:L*8-7,F=B&-8;let z=0,j=0;for(;I<F;I+=8)j=g[d++],D[f++]=j&128?R:O,D[f++]=j&64?R:O,D[f++]=j&32?R:O,D[f++]=j&16?R:O,D[f++]=j&8?R:O,D[f++]=j&4?R:O,D[f++]=j&2?R:O,D[f++]=j&1?R:O;for(;I<B;I++)z===0&&(j=g[d++],z=128),D[f++]=j&z?R:O,z>>=1}for(;f<T;)D[f++]=0;n.putImageData(c,0,v*Fa)}}else if(t.kind===bv.RGBA_32BPP){for(x=0,_=i*Fa*4,v=0;v<s;v++)m.set(g.subarray(d,d+_)),d+=_,n.putImageData(c,0,x),x+=Fa;v<o&&(_=i*a*4,m.set(g.subarray(d,d+_)),n.putImageData(c,0,x))}else if(t.kind===bv.RGB_24BPP)for(S=Fa,_=i*S,v=0;v<o;v++){for(v>=s&&(S=a,_=i*S),f=0,x=_;x--;)m[f++]=g[d++],m[f++]=g[d++],m[f++]=g[d++],m[f++]=255;n.putImageData(c,0,v*Fa)}else throw new Error(`bad image kind: ${t.kind}`)}function OT(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%Fa,s=(e-a)/Fa,o=a===0?s:s+1,c=n.createImageData(i,Fa);let d=0;const f=t.data,g=c.data;for(let m=0;m<o;m++){const v=m<s?Fa:a;({srcPos:d}=jQ({src:f,srcPos:d,dest:g,width:i,height:v,nonBlackColor:0})),n.putImageData(c,0,m*Fa)}}function Ag(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function hv(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function NT(n,t){if(t)return!0;Qt.singularValueDecompose2dScale(n,tr);const e=Math.fround(yo.pixelRatio*Kh.PDF_TO_CSS_UNITS);return tr[0]<=e&&tr[1]<=e}const YQ=["butt","round","square"],XQ=["miter","round","bevel"],KQ={},LT={};class Gh{constructor(t,e,i,a,s,{optionalContentConfig:o,markedContentStack:c=null},d,f){this.ctx=t,this.current=new MT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new VQ(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=c,i){const d=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...kn(this.compositeCtx))}this.ctx.save(),hv(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=kn(this.ctx)}executeOperatorList(t,e,i,a){const s=t.argsArray,o=t.fnArray;let c=e||0;const d=s.length;if(d===c)return c;const f=d-c>RT&&typeof i=="function",g=f?Date.now()+UQ:0;let m=0;const v=this.commonObjs,x=this.objs;let S;for(;;){if(a!==void 0&&c===a.nextBreakPoint)return a.breakIt(c,i),c;if(S=o[c],S!==Xv.dependency)this[S].apply(this,s[c]);else for(const _ of s[c]){const C=_.startsWith("g_")?v:x;if(!C.has(_))return C.get(_,i),c}if(c++,c===d)return c;if(f&&++m>RT){if(Date.now()>g)return i(),c;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let s=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),c=i,d=a,f="prescale1",g,m;for(;s>2&&c>1||o>2&&d>1;){let v=c,x=d;s>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),s/=c/v),o>2&&d>1&&(x=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/x),g=this.cachedCanvases.getCanvas(f,v,x),m=g.context,m.clearRect(0,0,v,x),m.drawImage(t,0,0,c,d,0,0,v,x),t=g.canvas,c=v,d=x,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:a}=t,s=this.current.fillColor,o=this.current.patternFill,c=kn(e);let d,f,g,m;if((t.bitmap||t.data)&&t.count>1){const F=t.bitmap||t.data.buffer;f=JSON.stringify(o?c:[c.slice(0,4),s]),d=this._cachedBitmapsMap.get(F),d||(d=new Map,this._cachedBitmapsMap.set(F,d));const z=d.get(f);if(z&&!o){const j=Math.round(Math.min(c[0],c[2])+c[4]),Z=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:z,offsetX:j,offsetY:Z}}g=z}g||(m=this.cachedCanvases.getCanvas("maskCanvas",i,a),OT(m.context,t));let v=Qt.transform(c,[1/i,0,0,-1/a,0,0]);v=Qt.transform(v,[1,0,0,1,0,-a]);const x=Ih.slice();Qt.axialAlignedBoundingBox([0,0,i,a],v,x);const[S,_,C,D]=x,T=Math.round(C-S)||1,w=Math.round(D-_)||1,R=this.cachedCanvases.getCanvas("fillCanvas",T,w),O=R.context,L=S,I=_;O.translate(-L,-I),O.transform(...v),g||(g=this._scaleImage(m.canvas,ho(O)),g=g.img,d&&o&&d.set(f,g)),O.imageSmoothingEnabled=NT(kn(O),t.interpolate),dv(O,g,0,0,g.width,g.height,0,0,i,a),O.globalCompositeOperation="source-in";const B=Qt.transform(ho(O),[1,0,0,1,-L,-I]);return O.fillStyle=o?s.getPattern(e,this,B,Gi.FILL):s,O.fillRect(0,0,i,a),d&&!o&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,R.canvas)),{canvas:R.canvas,offsetX:Math.round(L),offsetY:Math.round(I)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=YQ[t]}setLineJoin(t){this.ctx.lineJoin=XQ[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),Ag(this.suspendedCtx,s),qQ(s,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ag(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const s=a[0],o=a[1],c=a[2]-s,d=a[3]-o;c===0||d===0||(this.genericComposeSMask(e.context,i,c,d,e.subtype,e.backdrop,e.transferMap,s,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,s,o,c,d,f,g,m){let v=t.canvas,x=d-g,S=f-m;if(o)if(x<0||S<0||x+i>v.width||S+a>v.height){const C=this.cachedCanvases.getCanvas("maskExtension",i,a),D=C.context;D.drawImage(v,-x,-S),D.globalCompositeOperation="destination-atop",D.fillStyle=o,D.fillRect(0,0,i,a),D.globalCompositeOperation="source-over",v=C.canvas,x=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(x,S,i,a),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(x,S,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const _=new Path2D;_.rect(d,f,i,a),e.clip(_),e.globalCompositeOperation="destination-in",e.drawImage(v,x,S,i,a,d,f,i,a),e.restore()}save(){this.inSMaskMode&&Ag(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ag(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,s,o){this.ctx.transform(t,e,i,a,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let[a]=e;if(!i){a||=e[0]=new Path2D,this[t](a);return}if(!(a instanceof Path2D)){const s=e[0]=new Path2D;for(let o=0,c=a.length;o<c;)switch(a[o++]){case lv.moveTo:s.moveTo(a[o++],a[o++]);break;case lv.lineTo:s.lineTo(a[o++],a[o++]);break;case lv.curveTo:s.bezierCurveTo(a[o++],a[o++],a[o++],a[o++],a[o++],a[o++]);break;case lv.closePath:s.closePath();break;default:pe(`Unrecognized drawing path operator: ${a[o-1]}`);break}a=s}Qt.axialAlignedBoundingBox(i,kn(this.ctx),this.current.minMax),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const s=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,ho(i),Gi.STROKE),s){const o=new Path2D;o.addPath(t,i.getTransform().invertSelf().multiplySelf(s)),t=o}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Gi.STROKE,kn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let o=!1;if(s){const d=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=a.getPattern(i,this,ho(i),Gi.FILL),d){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(d)),t=f}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),o&&i.restore(),e&&this.consumePath(t,c)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=KQ}eoClip(){this.pendingClip=LT}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const i=new Path2D,a=e.getTransform().invertSelf();for(const{transform:s,x:o,y:c,fontSize:d,path:f}of t)i.addPath(f,new DOMMatrix(s).preMultiplySelf(a).translate(o,c).scale(d,-d));e.clip(i),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||KS,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&pe("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const d=i.italic?"italic":"normal";let f=e;e<CT?f=CT:e>TT&&(f=TT),this.current.fontSizeScale=e/f,this.ctx.font=`${d} ${c} ${f}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,s){const o=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,m=f&ea.FILL_STROKE_MASK,v=!!(f&ea.ADD_TO_PATH_FLAG),x=c.patternFill&&!d.missingFile,S=c.patternStroke&&!d.missingFile;let _;if((d.disableFontFace||v||x||S)&&(_=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||x||S){o.save(),o.translate(e,i),o.scale(g,-g);let C;if((m===ea.FILL||m===ea.FILL_STROKE)&&(a?(C=o.getTransform(),o.setTransform(...a),o.fill(this.#n(_,C,a))):o.fill(_)),m===ea.STROKE||m===ea.FILL_STROKE)if(s){C||=o.getTransform(),o.setTransform(...s);const{a:D,b:T,c:w,d:R}=C,O=Qt.inverseTransform(s),L=Qt.transform([D,T,w,R,0,0],O);Qt.singularValueDecompose2dScale(L,tr),o.lineWidth*=Math.max(tr[0],tr[1])/g,o.stroke(this.#n(_,C,s))}else o.lineWidth/=g,o.stroke(_);o.restore()}else(m===ea.FILL||m===ea.FILL_STROKE)&&o.fillText(t,e,i),(m===ea.STROKE||m===ea.FILL_STROKE)&&o.strokeText(t,e,i);v&&(this.pendingTextPaths||=[]).push({transform:kn(o),x:e,y:i,fontSize:g,path:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return ze(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const s=this.ctx,o=e.fontSizeScale,c=e.charSpacing,d=e.wordSpacing,f=e.fontDirection,g=e.textHScale*f,m=t.length,v=i.vertical,x=v?1:-1,S=i.defaultVMetrics,_=a*e.fontMatrix[0],C=e.textRenderingMode===ea.FILL&&!i.disableFontFace&&!e.patternFill;s.save(),e.textMatrix&&s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),f>0?s.scale(g,-1):s.scale(g,1);let D,T;if(e.patternFill){s.save();const I=e.fillColor.getPattern(s,this,ho(s),Gi.FILL);D=kn(s),s.restore(),s.fillStyle=I}if(e.patternStroke){s.save();const I=e.strokeColor.getPattern(s,this,ho(s),Gi.STROKE);T=kn(s),s.restore(),s.strokeStyle=I}let w=e.lineWidth;const R=e.textMatrixScale;if(R===0||w===0){const I=e.textRenderingMode&ea.FILL_STROKE_MASK;(I===ea.STROKE||I===ea.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=R;if(o!==1&&(s.scale(o,o),w/=o),s.lineWidth=w,i.isInvalidPDFjsFont){const I=[];let B=0;for(const F of t)I.push(F.unicode),B+=F.width;s.fillText(I.join(""),0,0),e.x+=B*_*g,s.restore(),this.compose();return}let O=0,L;for(L=0;L<m;++L){const I=t[L];if(typeof I=="number"){O+=x*I*a/1e3;continue}let B=!1;const F=(I.isSpace?d:0)+c,z=I.fontChar,j=I.accent;let Z,nt,it=I.width;if(v){const Q=I.vmetric||S,k=-(I.vmetric?Q[1]:it*.5)*_,U=Q[2]*_;it=Q?-Q[0]:it,Z=k/o,nt=(O+U)/o}else Z=O/o,nt=0;if(i.remeasure&&it>0){const Q=s.measureText(z).width*1e3/a*o;if(it<Q&&this.isFontSubpixelAAEnabled){const k=it/Q;B=!0,s.save(),s.scale(k,1),Z/=k}else it!==Q&&(Z+=(it-Q)/2e3*a/o)}if(this.contentVisible&&(I.isInFont||i.missingFile)){if(C&&!j)s.fillText(z,Z,nt);else if(this.paintChar(z,Z,nt,D,T),j){const Q=Z+a*j.offset.x/o,k=nt-a*j.offset.y/o;this.paintChar(j.fontChar,Q,k,D,T)}}const et=v?it*_-F*f:it*_+F*f;O+=et,B&&s.restore()}v?e.y-=O:e.x+=O*g,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,a=i.font,s=i.fontSize,o=i.fontDirection,c=a.vertical?1:-1,d=i.charSpacing,f=i.wordSpacing,g=i.textHScale*o,m=i.fontMatrix||KS,v=t.length,x=i.textRenderingMode===ea.INVISIBLE;let S,_,C,D;if(!(x||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),i.textMatrix&&e.transform(...i.textMatrix),e.translate(i.x,i.y+i.textRise),e.scale(g,o),S=0;S<v;++S){if(_=t[S],typeof _=="number"){D=c*_*s/1e3,this.ctx.translate(D,0),i.x+=D*g;continue}const T=(_.isSpace?f:0)+d,w=a.charProcOperatorList[_.operatorListId];w?this.contentVisible&&(this.save(),e.scale(s,s),e.transform(...m),this.executeOperatorList(w),this.restore()):pe(`Type3 character "${_.operatorListId}" is not available.`);const R=[_.width,0];Qt.applyTransform(R,m),C=R[0]*s+T,e.translate(C,0),i.x+=C*g}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,a,s,o){const c=new Path2D;c.rect(i,a,s-i,o-a),this.ctx.clip(c),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=this.baseTransform||kn(this.ctx),a={createCanvasGraphics:s=>new Gh(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new qA(t,this.ctx,a,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=GQ(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,ho(e),Gi.SHADING);const a=ho(e);if(a){const{width:s,height:o}=e.canvas,c=Ih.slice();Qt.axialAlignedBoundingBox([0,0,s,o],a,c);const[d,f,g,m]=c;this.ctx.fillRect(d,f,g-d,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){mn("Should not call beginInlineImage")}beginImageData(){mn("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=kn(this.ctx),e)){Qt.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[i,a,s,o]=e,c=new Path2D;c.rect(i,a,s-i,o-a),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||P1("TODO: Support non-isolated groups."),t.knockout&&pe("Knockout groups not supported.");const i=kn(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=Ih.slice();Qt.axialAlignedBoundingBox(t.bbox,kn(e),a);const s=[0,0,e.canvas.width,e.canvas.height];a=Qt.intersect(a,s)||[0,0,0,0];const o=Math.floor(a[0]),c=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-o,1),f=Math.max(Math.ceil(a[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(g,d,f),v=m.context;v.translate(-o,-c),v.transform(...i);let x=new Path2D;const[S,_,C,D]=t.bbox;if(x.rect(S,_,C-S,D-_),t.matrix){const T=new Path2D;T.addPath(x,new DOMMatrix(t.matrix)),x=T}v.clip(x),t.smask?this.smaskStack.push({canvas:m.canvas,context:v,offsetX:o,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,c),e.save()),Ag(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=kn(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const s=Ih.slice();Qt.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a,s),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(t,e,i,a,s){if(this.#t(),hv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],c=e[3]-e[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=c,Qt.singularValueDecompose2dScale(kn(this.ctx),tr);const{viewportScale:d}=this,f=Math.ceil(o*this.outputScaleX*d),g=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:m,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(tr[0],0,0,-tr[1],0,c*tr[1]),hv(this.ctx)}else{hv(this.ctx),this.endPath();const d=new Path2D;d.rect(e[0],e[1],o,c),this.ctx.clip(d)}}this.current=new MT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,a=this._createMaskCanvas(t),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,a=0,s,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const d=kn(c);c.transform(e,i,a,s,0,0);const f=this._createMaskCanvas(t);c.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let g=0,m=o.length;g<m;g+=2){const v=Qt.transform(d,[e,i,a,s,o[g],o[g+1]]);c.drawImage(f.canvas,v[4],v[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,a=this.current.patternFill;for(const s of t){const{data:o,width:c,height:d,transform:f}=s,g=this.cachedCanvases.getCanvas("maskCanvas",c,d),m=g.context;m.save();const v=this.getObject(o,s);OT(m,v),m.globalCompositeOperation="source-in",m.fillStyle=a?i.getPattern(m,this,ho(e),Gi.FILL):i,m.fillRect(0,0,c,d),m.restore(),e.save(),e.transform(...f),e.scale(1,-1),dv(e,g.canvas,0,0,c,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){pe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,a){if(!this.contentVisible)return;const s=this.getObject(t);if(!s){pe("Dependent image isn't ready yet");return}const o=s.width,c=s.height,d=[];for(let f=0,g=a.length;f<g;f+=2)d.push({transform:[e,0,0,i,a[f],a[f+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(s,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,a),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,a=this.ctx;this.save();const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/e,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",e,i).context;DT(f,t),o=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(o,ho(a));a.imageSmoothingEnabled=NT(kn(a),t.interpolate),dv(a,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const s=t.width,o=t.height,d=this.cachedCanvases.getCanvas("inlineImage",s,o).context;DT(d,t),a=this.applyTransferMapsToCanvas(d)}for(const s of e)i.save(),i.transform(...s.transform),i.scale(1,-1),dv(i,a,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const a=this.ctx;this.pendingClip&&(i||(this.pendingClip===LT?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=kn(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:s}=this.ctx.getTransform();let o,c;if(i===0&&a===0){const d=Math.abs(e),f=Math.abs(s);if(d===f)if(t===0)o=c=1/d;else{const g=d*t;o=c=g<1?1/g:1}else if(t===0)o=1/d,c=1/f;else{const g=d*t,m=f*t;o=g<1?1/g:1,c=m<1?1/m:1}}else{const d=Math.abs(e*s-i*a),f=Math.hypot(e,i),g=Math.hypot(a,s);if(t===0)o=g/d,c=f/d;else{const m=t*d;o=g>m?g/m:1,c=f>m?f/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[s,o]=this.getScaleForStroking();if(s===o){i.lineWidth=(a||1)*s,i.stroke(t);return}const c=i.getLineDash();e&&i.save(),i.scale(s,o),vS.a=1/s,vS.d=1/o;const d=new Path2D;if(d.addPath(t,vS),c.length>0){const f=Math.max(s,o);i.setLineDash(c.map(g=>g/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const n in Xv)Gh.prototype[n]!==void 0&&(Gh.prototype[Xv[n]]=Gh.prototype[n]);class jh{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class WQ{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Bh=Symbol("INTERNAL");class $Q{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:s}){this.#t=!!(t&Ja.DISPLAY),this.#e=!!(t&Ja.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==Bh&&mn("Internal method `_setVisible` called."),this.#n=i,this.#i=e}}class QQ{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=Ja.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new $Q(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(Bh,!1);for(const i of t.on)this.#e.get(i)._setVisible(Bh,!0);for(const i of t.off)this.#e.get(i)._setVisible(Bh,!1);this.#n=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const s=t[a];let o;if(Array.isArray(s))o=this.#r(s);else if(this.#e.has(s))o=this.#e.get(s).visible;else return pe(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return P1("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(pe(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return pe(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return pe(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return pe(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return pe(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return pe(`Unknown optional content policy ${t.policy}.`),!0}return pe(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){pe(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const s of a.rbGroups)for(const o of s)o!==t&&this.#e.get(o)?._setVisible(Bh,!1,!0);a._setVisible(Bh,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const s=this.#e.get(a);if(s)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!s.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new b7;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class ZQ{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ri(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:s,progressiveDone:o,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,s?.length>0){const d=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(i),!0)});ri(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ri(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new JQ(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new tZ(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class JQ{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=zA(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tZ{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function eZ(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let g=c(e);return g=unescape(g),g=d(g),g=f(g),s(g)}if(e=o(n),e){const g=f(e);return s(g)}if(e=i("filename","i").exec(n),e){e=e[1];let g=c(e);return g=f(g),s(g)}function i(g,m){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function a(g,m){if(g){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(g,{fatal:!0}),x=fm(m);m=v.decode(x),t=!1}catch{}}return m}function s(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function o(g){const m=[];let v;const x=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=x.exec(g))!==null;){let[,_,C,D]=v;if(_=parseInt(_,10),_ in m){if(_===0)break;continue}m[_]=[C,D]}const S=[];for(let _=0;_<m.length&&_ in m;++_){let[C,D]=m[_];D=c(D),C&&(D=unescape(D),_===0&&(D=d(D))),S.push(D)}return S.join("")}function c(g){if(g.startsWith('"')){const m=g.slice(1).split('\\"');for(let v=0;v<m.length;++v){const x=m[v].indexOf('"');x!==-1&&(m[v]=m[v].slice(0,x),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}g=m.join('"')}return g}function d(g){const m=g.indexOf("'");if(m===-1)return g;const v=g.slice(0,m),S=g.slice(m+1).replace(/^[^']*'/,"");return a(v,S)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,x,S){if(x==="q"||x==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,C){return String.fromCharCode(parseInt(C,16))}),a(v,S);try{S=atob(S)}catch{}return a(v,S)})}return""}function C7(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function z1(n){return URL.parse(n)?.origin??null}function T7({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(a.suggestedLength=s,s<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function R7(n){const t=n.get("Content-Disposition");if(t){let e=eZ(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(zA(e))return e}return null}function vm(n,t){return new Kv(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function M7(n){return n===200||n===206}function D7(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function O7(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(pe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class nZ{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=C7(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ri(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new iZ(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new aZ(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class iZ{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,D7(i,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=z1(s.url),!M7(s.status))throw vm(s.status,a);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:c,suggestedLength:d}=T7({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=R7(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ec("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:O7(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class aZ{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${i-1}`);const o=a.url;fetch(o,D7(s,this._withCredentials,this._abortController)).then(c=>{const d=z1(c.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!M7(c.status))throw vm(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:O7(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const yS=200,bS=206;function rZ(n){const t=n.response;return typeof t!="string"?t:fm(t).buffer}class sZ{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=C7(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,o]of this.headers)e.setRequestHeader(s,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=bS):a.expectedStatus=yS,e.responseType="arraybuffer",ri(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const s=a.status||yS;if(!(s===yS&&i.expectedStatus===bS)&&s!==i.expectedStatus){i.onError(a.status);return}const c=rZ(a);if(s===bS){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?i.onDone({begin:parseInt(f[1],10),chunk:c}):(pe('Missing or invalid "Content-Range" header.'),i.onError(0))}else c?i.onDone({begin:0,chunk:c}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class oZ{constructor(t){this._source=t,this._manager=new sZ(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ri(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new lZ(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new cZ(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class lZ{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=z1(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...f]=c.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=T7({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=R7(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=vm(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class cZ{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=z1(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=vm(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const uZ=/^[a-z][a-z0-9\-+.]+:/i;function dZ(n){if(uZ.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class hZ{constructor(t){this.source=t,this.url=dZ(t.url),ri(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ri(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new fZ(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new pZ(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class fZ{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=vm(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ec("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class pZ{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Eg=Symbol("INITIAL_DATA");class N7{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Eg}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===Eg)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Eg}delete(t){const e=this.#t[t];return!e||e.data===Eg?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Eg&&(yield[t,e])}}}const gZ=1e5,PT=30;class ma{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#o=0;#s=0;#d=null;#l=null;#h=0;#u=0;#f=Object.create(null);#p=[];#g=null;#c=[];#m=new WeakMap;#v=null;static#y=new Map;static#x=new Map;static#S=new WeakMap;static#_=null;static#w=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#u=i.scale*yo.pixelRatio,this.#h=i.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:s,pageX:o,pageY:c}=i.rawDims;this.#v=[1,0,0,-1,-o,c+s],this.#s=a,this.#o=s,ma.#O(),Gu(e,i),this.#t.promise.finally(()=>{ma.#w.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ui.platform;return ze(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#d.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#d=this.#g.getReader(),ma.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*yo.pixelRatio,a=t.rotation;if(a!==this.#h&&(e?.(),this.#h=a,Gu(this.#l,{rotation:a})),i!==this.#u){e?.(),this.#u=i;const s={div:null,properties:null,ctx:ma.#R(this.#r)};for(const o of this.#c)s.properties=this.#m.get(o),s.div=o,this.#A(s)}}cancel(){const t=new Ec("TextLayer task cancelled.");this.#d?.cancel(t).catch(()=>{}),this.#d=null,this.#t.reject(t)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#p}#T(t){if(this.#n)return;this.#a.ctx??=ma.#R(this.#r);const e=this.#c,i=this.#p;for(const a of t){if(e.length>gZ){pe("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const s=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id!==null&&this.#e.setAttribute("id",`${a.id}`),s.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#M(a)}}#M(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#c.push(e);const a=Qt.transform(this.#v,t.transform);let s=Math.atan2(a[1],a[0]);const o=this.#f[t.fontName];o.vertical&&(s+=Math.PI/2);let c=this.#i&&o.fontSubstitution||o.fontFamily;c=ma.fontFamilyMap.get(c)||c;const d=Math.hypot(a[2],a[3]),f=d*ma.#N(c,o,this.#r);let g,m;s===0?(g=a[4],m=a[5]-f):(g=a[4]+f*Math.sin(s),m=a[5]-f*Math.cos(s));const v="calc(var(--total-scale-factor) *",x=e.style;this.#e===this.#l?(x.left=`${(100*g/this.#s).toFixed(2)}%`,x.top=`${(100*m/this.#o).toFixed(2)}%`):(x.left=`${v}${g.toFixed(2)}px)`,x.top=`${v}${m.toFixed(2)}px)`),x.fontSize=`${v}${(ma.#_*d).toFixed(2)}px)`,x.fontFamily=c,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),s!==0&&(i.angle=s*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);_!==C&&Math.max(_,C)/Math.min(_,C)>1.5&&(S=!0)}if(S&&(i.canvasWidth=o.vertical?t.height:t.width),this.#m.set(e,i),this.#a.div=e,this.#a.properties=i,this.#A(this.#a),i.hasText&&this.#e.append(e),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#e.append(_)}}#A(t){const{div:e,properties:i,ctx:a}=t,{style:s}=e;let o="";if(ma.#_>1&&(o=`scale(${1/ma.#_})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=s,{canvasWidth:d,fontSize:f}=i;ma.#C(a,f*this.#u,c);const{width:g}=a.measureText(e.textContent);g>0&&(o=`scaleX(${d*this.#u/g}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(s.transform=o)}static cleanup(){if(!(this.#w.size>0)){this.#y.clear();for(const{canvas:t}of this.#x.values())t.remove();this.#x.clear()}}static#R(t=null){let e=this.#x.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#x.set(t,e),this.#S.set(e,{size:0,family:""})}return e}static#C(t,e,i){const a=this.#S.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#O(){if(this.#_!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#N(t,e,i){const a=this.#y.get(t);if(a)return a;const s=this.#R(i);s.canvas.width=s.canvas.height=PT,this.#C(s,PT,t);const o=s.measureText(""),c=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let f=.8;return c?f=c/(c+d):(Ui.platform.isFirefox&&pe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#y.set(t,f),f}}class em{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(s){if(!s)return;let o=null;const c=s.name;if(c==="#text")o=s.value;else if(em.shouldBuildText(c))s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&e.push({str:o}),!!s.children)for(const d of s.children)a(d)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const mZ=100;function L7(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new VA,{docId:e}=t,i=n.url?wQ(n.url):null,a=n.data?CQ(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,c=n.password??null,d=n.range instanceof P7?n.range:null,f=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let g=n.worker instanceof nm?n.worker:null;const m=n.verbosity,v=typeof n.docBaseUrl=="string"&&!k1(n.docBaseUrl)?n.docBaseUrl:null,x=cv(n.cMapUrl),S=n.cMapPacked!==!1,_=n.CMapReaderFactory||(ya?PQ:_T),C=cv(n.iccUrl),D=cv(n.standardFontDataUrl),T=n.StandardFontDataFactory||(ya?kQ:AT),w=cv(n.wasmUrl),R=n.WasmFactory||(ya?BQ:ET),O=n.stopAtErrors!==!0,L=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,I=n.isEvalSupported!==!1,B=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!ya,F=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!ya&&(Ui.platform.isFirefox||!globalThis.chrome),z=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,j=typeof n.disableFontFace=="boolean"?n.disableFontFace:ya,Z=n.fontExtraProperties===!0,nt=n.enableXfa===!0,it=n.ownerDocument||globalThis.document,et=n.disableRange===!0,Q=n.disableStream===!0,k=n.disableAutoFetch===!0,U=n.pdfBug===!0,$=n.CanvasFactory||(ya?LQ:DQ),H=n.FilterFactory||(ya?NQ:OQ),V=n.enableHWA===!0,at=n.useWasm!==!1,K=d?d.length:n.length??NaN,ut=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!ya&&!j,xt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(_===_T&&T===AT&&R===ET&&x&&D&&w&&Bg(x,document.baseURI)&&Bg(D,document.baseURI)&&Bg(w,document.baseURI)),ot=null;iQ(m);const tt={canvasFactory:new $({ownerDocument:it,enableHWA:V}),filterFactory:new H({docId:e,ownerDocument:it}),cMapReaderFactory:xt?null:new _({baseUrl:x,isCompressed:S}),standardFontDataFactory:xt?null:new T({baseUrl:D}),wasmFactory:xt?null:new R({baseUrl:w})};g||(g=nm.create({verbosity:m,port:jh.workerPort}),t._worker=g);const ct={docId:e,apiVersion:"5.3.93",data:a,password:c,disableAutoFetch:k,rangeChunkSize:f,length:K,docBaseUrl:v,enableXfa:nt,evaluatorOptions:{maxImageSize:L,disableFontFace:j,ignoreErrors:O,isEvalSupported:I,isOffscreenCanvasSupported:B,isImageDecoderSupported:F,canvasMaxAreaInBytes:z,fontExtraProperties:Z,useSystemFonts:ut,useWasm:at,useWorkerFetch:xt,cMapUrl:x,iccUrl:C,standardFontDataUrl:D,wasmUrl:w}},At={ownerDocument:it,pdfBug:U,styleElement:ot,loadingParams:{disableAutoFetch:k,enableXfa:nt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Mt=g.messageHandler.sendWithPromise("GetDocRequest",ct,a?[a.buffer]:null);let Pt;if(d)Pt=new ZQ(d,{disableRange:et,disableStream:Q});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Bt=Bg(i)?nZ:ya?hZ:oZ;Pt=new Bt({url:i,length:K,httpHeaders:s,withCredentials:o,rangeChunkSize:f,disableRange:et,disableStream:Q})}return Mt.then(Bt=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Gt=new zg(e,Bt,g.port),de=new bZ(Gt,t,Pt,At,tt);t._transport=de,Gt.send("Ready",null)})}).catch(t._capability.reject),t}class VA{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${VA.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class P7{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#r)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#i)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){mn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class vZ{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class yZ{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new bT:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new N7,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:s=!1}={}){return new gm({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:a=pc.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:m=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(i,a,g,m),{renderingIntent:x,cacheKey:S}=v;this.#t=!1,c||=this._transport.getOptionalContentConfig(x);let _=this._intentStates.get(S);_||(_=Object.create(null),this._intentStates.set(S,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const C=!!(x&Ja.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const D=R=>{_.renderTasks.delete(T),C&&(this.#t=!0),this.#e(),R?(T.capability.reject(R),this._abortOperatorList({intentState:_,reason:R instanceof Error?R:new Error(R)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new Hh({callback:D,params:{canvasContext:t,viewport:e,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:f});(_.renderTasks||=new Set).add(T);const w=T.task;return Promise.all([_.displayReadyCapability.promise,c]).then(([R,O])=>{if(this.destroyed){D();return}if(this._stats?.time("Rendering"),!(O.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:R,optionalContentConfig:O}),T.operatorListChanged()}).catch(D),w}getOperatorList({intent:t="display",annotationMode:e=pc.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function s(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(t,e,i,a,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=s,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>em.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function s(){o.read().then(function({value:d,done:f}){if(f){i(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),s()},a)}const o=e.getReader(),c={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new bT),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:s,transfer:o}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:a},o).getReader(),f=this._intentStates.get(e);f.streamReader=d;const g=()=>{d.read().then(({value:m,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),g())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};g()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof BA){let a=mZ;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Ec(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,s]of this._intentStates)if(s===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var gc,ys,ol,Lu,$v,Pu,ku,Sa,xv,k7,B7,Fg,Uh,Sv;const On=class On{constructor({name:t=null,port:e=null,verbosity:i=aQ()}={}){lo(this,Sa);lo(this,gc,Promise.withResolvers());lo(this,ys,null);lo(this,ol,null);lo(this,Lu,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(Dn(On,ku).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Dn(On,ku).set(e,this),co(this,Sa,k7).call(this,e)}else co(this,Sa,B7).call(this)}get promise(){return Dn(this,gc).promise}get port(){return Dn(this,ol)}get messageHandler(){return Dn(this,ys)}destroy(){this.destroyed=!0,Dn(this,Lu)?.terminate(),La(this,Lu,null),Dn(On,ku).delete(Dn(this,ol)),La(this,ol,null),Dn(this,ys)?.destroy(),La(this,ys,null)}static create(t){const e=Dn(this,ku).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new On(t)}static get workerSrc(){if(jh.workerSrc)return jh.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ze(this,"_setupFakeWorkerGlobal",(async()=>Dn(this,Uh,Sv)?Dn(this,Uh,Sv):(await import(this.workerSrc)).WorkerMessageHandler)())}};gc=new WeakMap,ys=new WeakMap,ol=new WeakMap,Lu=new WeakMap,$v=new WeakMap,Pu=new WeakMap,ku=new WeakMap,Sa=new WeakSet,xv=function(){Dn(this,gc).resolve(),Dn(this,ys).send("configure",{verbosity:this.verbosity})},k7=function(t){La(this,ol,t),La(this,ys,new zg("main","worker",t)),Dn(this,ys).on("ready",()=>{}),co(this,Sa,xv).call(this)},B7=function(){if(Dn(On,Pu)||Dn(On,Uh,Sv)){co(this,Sa,Fg).call(this);return}let{workerSrc:t}=On;try{On._isSameOrigin(window.location,t)||(t=On._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new zg("main","worker",e),a=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?Dn(this,gc).reject(new Error("Worker was destroyed")):co(this,Sa,Fg).call(this)},s=new AbortController;e.addEventListener("error",()=>{Dn(this,Lu)||a()},{signal:s.signal}),i.on("test",c=>{if(s.abort(),this.destroyed||!c){a();return}La(this,ys,i),La(this,ol,e),La(this,Lu,e),co(this,Sa,xv).call(this)}),i.on("ready",c=>{if(s.abort(),this.destroyed){a();return}try{o()}catch{co(this,Sa,Fg).call(this)}});const o=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};o();return}catch{P1("The worker has been disabled.")}co(this,Sa,Fg).call(this)},Fg=function(){Dn(On,Pu)||(pe("Setting up fake worker."),La(On,Pu,!0)),On._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Dn(this,gc).reject(new Error("Worker was destroyed"));return}const e=new MQ;La(this,ol,e);const i=`fake${OE(On,$v)._++}`,a=new zg(i+"_worker",i,e);t.setup(a,e),La(this,ys,new zg(i,i+"_worker",e)),co(this,Sa,xv).call(this)}).catch(t=>{Dn(this,gc).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Uh=new WeakSet,Sv=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},lo(On,Uh),lo(On,$v,0),lo(On,Pu,!1),lo(On,ku,new WeakMap),ya&&(La(On,Pu,!0),jh.workerSrc||="./pdf.worker.mjs"),On._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},On._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},On.fromPort=t=>{if(mQ("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return On.create(t)};let nm=On;class bZ{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,e,i,a,s){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new N7,this.fontLoader=new AQ({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#a(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return ze(this,"annotationStorage",new GA)}getRenderingIntent(t,e=pc.ENABLE,i=null,a=!1,s=!1){let o=Ja.DISPLAY,c=QS;switch(t){case"any":o=Ja.ANY;break;case"display":break;case"print":o=Ja.PRINT;break;default:pe(`getRenderingIntent - invalid intent: ${t}`)}const d=o&Ja.PRINT&&i instanceof x7?i:this.annotationStorage;switch(e){case pc.DISABLE:o+=Ja.ANNOTATIONS_DISABLE;break;case pc.ENABLE:break;case pc.ENABLE_FORMS:o+=Ja.ANNOTATIONS_FORMS;break;case pc.ENABLE_STORAGE:o+=Ja.ANNOTATIONS_STORAGE,c=d.serializable;break;default:pe(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(o+=Ja.IS_EDITING),s&&(o+=Ja.OPLIST);const{ids:f,hash:g}=d.modifiedIds,m=[o,c.hash,g];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ma.cleanup(),this._networkStream?.cancelAllRequests(new Ec("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{ri(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},a.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){a.close();return}ri(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{a.error(s)})},a.onCancel=s=>{this._fullReader.cancel(s),a.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:s,contentLength:o}=this._fullReader;return(!a||!s)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:a,isRangeSupported:s,contentLength:o}}),t.on("GetRangeReader",(i,a)=>{ri(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){a.close();return}a.onPull=()=>{s.read().then(function({value:o,done:c}){if(c){a.close();return}ri(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{s.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new vZ(i,this))}),t.on("DocException",i=>{e._capability.reject(za(i))}),t.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw za(i);const a=s=>{s instanceof Error?this.#r.reject(s):this.#r.resolve({password:s})};e.onPassword(a,i.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in s){const f=s.error;pe(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,c=new EQ(s,o);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)});break;case"CopyLocalImage":const{imageRef:d}=s;ri(d,"The imageRef must be defined.");for(const f of this.#e.values())for(const[,g]of f.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(i,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,s,o])=>{if(this.destroyed)return;const c=this.#e.get(a);if(!c.objs.has(i)){if(c._intentStates.size===0){o?.bitmap?.close();return}switch(s){case"Image":case"Pattern":c.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&pe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#n.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,t);const o=new yZ(e,s,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#n.set(e,a),a}getPageIndex(t){return ZS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(e=>new QQ(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new WQ(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ma.cleanup()}}cachedPageNumber(t){if(!ZS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class xZ{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Hh{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:s,operatorList:o,pageIndex:c,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:m=!1,pageColors:v=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xZ(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Hh.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Hh.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:a,transform:s,background:o}=this.params;this.gfx=new Gh(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:a,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Hh.#e.delete(this._canvas),t||=new BA(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Hh.#e.delete(this._canvas),this.callback())))}}const SZ="5.3.93",_Z="cbeef3233";function kT(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function wg(n){return Math.max(0,Math.min(255,255*n))}class BT{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=wg(t),[t,t,t]}static G_HTML([t]){const e=kT(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(wg)}static RGB_HTML(t){return`#${t.map(kT).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[wg(1-Math.min(1,t+a)),wg(1-Math.min(1,i+a)),wg(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,s=1-e,o=1-i,c=Math.min(a,s,o);return["CMYK",a,s,o,c]}}class AZ{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){mn("Abstract method `_createSVG` called.")}}class Wv extends AZ{_createSVG(t){return document.createElementNS(rl,t)}}class z7{static setupStorage(t,e,i,a,s){const o=a.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),s==="print")break;t.addEventListener("input",c=>{a.setValue(e,{value:c.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",c=>{a.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),s==="print")break;t.addEventListener("input",c=>{a.setValue(e,{value:c.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const c of i.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const d=c.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:s}){const{attributes:o}=e,c=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${a}`);for(const[d,f]of Object.entries(o))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!c||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}c&&s.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,s=t.intent||"display",o=document.createElement(a.name);a.attributes&&this.setAttributes({html:o,element:a,intent:s,linkService:i});const c=s!=="richText",d=t.div;if(d.append(o),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=m}c&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const m=document.createTextNode(a.value);o.append(m),c&&em.shouldBuildText(a.name)&&f.push(m)}return{textDivs:f}}const g=[[a,-1,o]];for(;g.length>0;){const[m,v,x]=g.at(-1);if(v+1===m.children.length){g.pop();continue}const S=m.children[++g.at(-1)[1]];if(S===null)continue;const{name:_}=S;if(_==="#text"){const D=document.createTextNode(S.value);f.push(D),x.append(D);continue}const C=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,_):document.createElement(_);if(x.append(C),S.attributes&&this.setAttributes({html:C,element:S,storage:e,intent:s,linkService:i}),S.children?.length>0)g.push([S,-1,C]);else if(S.value){const D=document.createTextNode(S.value);c&&em.shouldBuildText(_)&&f.push(D),C.append(D)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const EZ=9,ju=new WeakSet;class zT{static create(t){switch(t.data.annotationType){case ii.LINK:return new F7(t);case ii.TEXT:return new wZ(t);case ii.WIDGET:switch(t.data.fieldType){case"Tx":return new CZ(t);case"Btn":return t.data.radioButton?new I7(t):t.data.checkBox?new RZ(t):new MZ(t);case"Ch":return new DZ(t);case"Sig":return new TZ(t)}return new Ju(t);case ii.POPUP:return new t_(t);case ii.FREETEXT:return new H7(t);case ii.LINE:return new NZ(t);case ii.SQUARE:return new LZ(t);case ii.CIRCLE:return new PZ(t);case ii.POLYLINE:return new G7(t);case ii.CARET:return new BZ(t);case ii.INK:return new YA(t);case ii.POLYGON:return new kZ(t);case ii.HIGHLIGHT:return new j7(t);case ii.UNDERLINE:return new zZ(t);case ii.SQUIGGLY:return new FZ(t);case ii.STRIKEOUT:return new IZ(t);case ii.STAMP:return new U7(t);case ii.FILEATTACHMENT:return new HZ(t);default:return new $n(t)}}}class $n{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return $n._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#i(e),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:c,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-c)/s}%`,e.top=`${100*(o-t[3]+d)/o}%`,a===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof Ju||(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof t_){const{rotation:_}=e;return!e.hasOwnCanvas&&_!==0&&this.setRotation(_,s),s}const{width:c,height:d}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const _=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(_>0||C>0){const T=`calc(${_}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;o.borderRadius=T}else if(this instanceof I7){const T=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;o.borderRadius=T}switch(e.borderStyle.style){case kh.SOLID:o.borderStyle="solid";break;case kh.DASHED:o.borderStyle="dashed";break;case kh.BEVELED:pe("Unimplemented border style: beveled");break;case kh.INSET:pe("Unimplemented border style: inset");break;case kh.UNDERLINE:o.borderBottomStyle="solid";break}const D=e.borderColor||null;D?(this.#e=!0,o.borderColor=Qt.makeHexColor(D[0]|0,D[1]|0,D[2]|0)):o.borderWidth=0}const f=Qt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:m,pageX:v,pageY:x}=a.rawDims;o.left=`${100*(f[0]-v)/g}%`,o.top=`${100*(f[1]-x)/m}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(o.width=`${100*c/g}%`,o.height=`${100*d/m}%`):this.setRotation(S,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:s,height:o}=this;t%180!==0&&([s,o]=[o,s]),e.style.width=`${100*s/i}%`,e.style.height=`${100*o/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const s=a.detail[e],o=s[0],c=s.slice(1);a.target.style[i]=BT[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[i]:BT[`${o}_rgb`](c)})};return ze(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,s]of Object.entries(e)){const o=i[a];if(o){const c={detail:{[a]:s},target:t};o(c),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,s]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,C,D,T]=t.subarray(2,6);if(a===_&&s===C&&e===D&&i===T)return}const{style:o}=this.container;let c;if(this.#e){const{borderColor:_,borderWidth:C}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=a-e,f=s-i,{svgFactory:g}=this,m=g.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const v=g.createElement("defs");m.append(v);const x=g.createElement("clipPath"),S=`clippath_${this.data.id}`;x.setAttribute("id",S),x.setAttribute("clipPathUnits","objectBoundingBox"),v.append(x);for(let _=2,C=t.length;_<C;_+=8){const D=t[_],T=t[_+1],w=t[_+2],R=t[_+3],O=g.createElement("rect"),L=(w-e)/d,I=(s-T)/f,B=(D-w)/d,F=(T-R)/f;O.setAttribute("x",L),O.setAttribute("y",I),O.setAttribute("width",B),O.setAttribute("height",F),x.append(O),c?.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${I}" width="${B}" height="${F}"/>`)}this.#e&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:t}=this,e=this.#n=new t_({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){mn("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:s,id:o,exportValues:c}of a){if(s===-1||o===e)continue;const d=typeof c=="string"?c:null,f=document.querySelector(`[data-element-id="${o}"]`);if(f&&!ju.has(f)){pe(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:d,domElement:f})}return i}for(const a of document.getElementsByName(t)){const{exportValue:s}=a,o=a.getAttribute("data-element-id");o!==e&&ju.has(a)&&i.push({id:o,exportValue:s,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class F7 extends $n{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action),a=!0):t.attachment?(this.#e(i,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(this.#n(i,t.setOCGState),a=!0):t.dest?(this._bindLink(i,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#n(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const s=i.get(a);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){pe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:s,include:o}=e,c=[];if(a.length!==0||s.length!==0){const g=new Set(s);for(const m of a){const v=this._fieldObjects[m]||[];for(const{id:x}of v)g.add(x)}for(const m of Object.values(this._fieldObjects))for(const v of m)g.has(v.id)===o&&c.push(v)}else for(const g of Object.values(this._fieldObjects))c.push(...g);const d=this.annotationStorage,f=[];for(const g of c){const{id:m}=g;switch(f.push(m),g.type){case"text":{const x=g.defaultValue||"";d.setValue(m,{value:x});break}case"checkbox":case"radiobutton":{const x=g.defaultValue===g.exportValues;d.setValue(m,{value:x});break}case"combobox":case"listbox":{const x=g.defaultValue||"";d.setValue(m,{value:x});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!ju.has(v)){pe(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class wZ extends $n{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ju extends $n{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ui.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,s){i.includes("mouse")?t.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:s(o)}})})}_setEventListeners(t,e,i,a){for(const[s,o]of i)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,s,o,a),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Qt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||EZ,s=t.style;let o;const c=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c),g=Math.round(f/(hS*a))||1,m=f/g;o=Math.min(a,d(m/hS))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(a,d(f/hS))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=Qt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class CZ extends Ju{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const s=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),s.setValue(o.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let s=a.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let c=a.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:s,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",c??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),ju.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const f=this.data.dateFormat||this.data.timeFormat;f&&(i.title=f),this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",m=>{t.setValue(e,{value:m.target.value}),this.setPropertyOnSiblings(i,"value",m.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue??"";i.value=d.userValue=v,d.formattedValue=null});let g=m=>{const{formattedValue:v}=d;v!=null&&(m.target.value=v),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",v=>{if(d.focused)return;const{target:x}=v;d.userValue&&(x.value=d.userValue),d.lastCommittedValue=x.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(S){d.userValue=S.detail.value??"",t.setValue(e,{value:d.userValue.toString()}),S.target.value=d.userValue},formattedValue(S){const{formattedValue:_}=S.detail;d.formattedValue=_,_!=null&&S.target!==document.activeElement&&(S.target.value=_),t.setValue(e,{formattedValue:_})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{const{charLimit:_}=S.detail,{target:C}=S;if(_===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",_);let D=d.userValue;!D||D.length<=_||(D=D.slice(0,_),C.value=d.userValue=D,t.setValue(e,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),i.addEventListener("keydown",v=>{d.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:S}=v.target;d.lastCommittedValue!==S&&(d.lastCommittedValue=S,d.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const m=g;g=null,i.addEventListener("blur",v=>{if(!d.focused||!v.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:x}=v.target;d.userValue=x,d.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),m(v)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",v=>{d.lastCommittedValue=null;const{data:x,target:S}=v,{value:_,selectionStart:C,selectionEnd:D}=S;let T=C,w=D;switch(v.inputType){case"deleteWordBackward":{const R=_.substring(0,C).match(/\w*[^\w]*$/);R&&(T-=R[0].length);break}case"deleteWordForward":{const R=_.substring(C).match(/^[^\w]*\w*/);R&&(w+=R[0].length);break}case"deleteContentBackward":C===D&&(T-=1);break;case"deleteContentForward":C===D&&(w+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,change:x||"",willCommit:!1,selStart:T,selEnd:w}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&i.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class TZ extends Ju{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class RZ extends Ju{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return ju.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,a&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:c,checked:d}=o.target;for(const f of this._getElementsByName(c,i)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(i,{value:d})}),s.addEventListener("resetform",o=>{const c=e.defaultFieldValue||"Off";o.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const c={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class I7 extends Ju{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const s=document.createElement("input");if(ju.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,a&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:c,checked:d}=o.target;for(const f of this._getElementsByName(c,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:d})}),s.addEventListener("resetform",o=>{const c=e.defaultFieldValue;o.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;s.addEventListener("updatefromsandbox",c=>{const d={value:f=>{const g=o===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const v=g&&m.id===i;m.domElement&&(m.domElement.checked=v),t.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class MZ extends F7{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class DZ extends Ju{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");ju.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const m=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===m});for(const g of this.data.options){const m=document.createElement("option");m.textContent=g.displayValue,m.value=g.exportValue,i.value.includes(g.exportValue)&&(m.setAttribute("selected",!0),s=!1),a.append(m)}let o=null;if(s){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),o=()=>{g.remove(),a.removeEventListener("input",o),o=null},a.addEventListener("input",o)}const c=g=>{const m=g?"value":"textContent",{options:v,multiple:x}=a;return x?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let d=c(!1);const f=g=>{const m=g.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const m={value(v){o?.();const x=v.detail.value,S=new Set(Array.isArray(x)?x:[x]);for(const _ of a.options)_.selected=S.has(_.value);t.setValue(e,{value:c(!0)}),d=c(!1)},multipleSelection(v){a.multiple=!0},remove(v){const x=a.options,S=v.detail.remove;x[S].selected=!1,a.remove(S),x.length>0&&Array.prototype.findIndex.call(x,C=>C.selected)===-1&&(x[0].selected=!0),t.setValue(e,{value:c(!0),items:f(v)}),d=c(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=c(!1)},insert(v){const{index:x,displayValue:S,exportValue:_}=v.detail.insert,C=a.children[x],D=document.createElement("option");D.textContent=S,D.value=_,C?C.before(D):a.append(D),t.setValue(e,{value:c(!0),items:f(v)}),d=c(!1)},items(v){const{items:x}=v.detail;for(;a.length!==0;)a.remove(0);for(const S of x){const{displayValue:_,exportValue:C}=S,D=document.createElement("option");D.textContent=_,D.value=C,a.append(D)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:c(!0),items:f(v)}),d=c(!1)},indices(v){const x=new Set(v.detail.indices);for(const S of v.target.options)S.selected=x.has(S.index);t.setValue(e,{value:c(!0)}),d=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,g)}),a.addEventListener("input",g=>{const m=c(!0),v=c(!1);t.setValue(e,{value:m}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class t_ extends $n{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:$n._hasPopupData(e)}),this.elements=i,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new OZ({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${kA}${a}`).join(",")),this.container}}class OZ{#t=this.#T.bind(this);#e=this.#C.bind(this);#n=this.#R.bind(this);#i=this.#A.bind(this);#r=null;#a=null;#o=null;#s=null;#d=null;#l=null;#h=null;#u=!1;#f=null;#p=null;#g=null;#c=null;#m=null;#v=null;#y=!1;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:s,contentsObj:o,richText:c,parent:d,rect:f,parentRect:g,open:m}){this.#a=t,this.#m=a,this.#o=o,this.#c=c,this.#l=d,this.#r=e,this.#g=f,this.#h=g,this.#d=i,this.#s=v7.toDateObject(s),this.trigger=i.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#i),v.addEventListener("mouseenter",this.#n),v.addEventListener("mouseleave",this.#e),v.classList.add("popupTriggerArea");for(const v of i)v.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,m&&this.#A()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#r){const s=t.style.outlineColor=Qt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=this.#m,t.append(e),this.#s){const s=document.createElement("time");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#s.valueOf()})),s.dateTime=this.#s.toISOString(),e.append(s)}const a=this.#x;if(a)z7.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#o);t.append(s)}this.#a.append(t)}get#x(){const t=this.#c,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#c.html||null}get#S(){return this.#x?.attributes?.style?.fontSize||0}get#_(){return this.#x?.attributes?.style?.color||null}#w(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#_,fontSize:this.#S?`calc(${this.#S}px * var(--total-scale-factor))`:""}};for(const s of t.split(`
`))e.push({name:"span",value:s,attributes:a});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let s=0,o=a.length;s<o;++s){const c=a[s];i.append(document.createTextNode(c)),s<o-1&&i.append(document.createElement("br"))}return i}#T(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#u)&&this.#A()}updateEdited({rect:t,popupContent:e}){this.#v||={contentsObj:this.#o,richText:this.#c},t&&(this.#p=null),e&&(this.#c=this.#w(e),this.#o=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#v&&({contentsObj:this.#o,richText:this.#c}=this.#v,this.#v=null,this.#f?.remove(),this.#f=null,this.#p=null)}#M(){if(this.#p!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:s}}}=this.#l;let o=!!this.#h,c=o?this.#h:this.#g;for(const S of this.#d)if(!c||Qt.intersect(S.data.rect,c)!==null){c=S.data.rect,o=!0;break}const d=Qt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),g=o?c[2]-c[0]+5:0,m=d[0]+g,v=d[1];this.#p=[100*(m-a)/e,100*(v-s)/i];const{style:x}=this.#a;x.left=`${this.#p[0]}%`,x.top=`${this.#p[1]}%`}#A(){this.#u=!this.#u,this.#u?(this.#R(),this.#a.addEventListener("click",this.#i),this.#a.addEventListener("keydown",this.#t)):(this.#C(),this.#a.removeEventListener("click",this.#i),this.#a.removeEventListener("keydown",this.#t))}#R(){this.#f||this.render(),this.isVisible?this.#u&&this.#a.classList.add("focused"):(this.#M(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#C(){this.#a.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#a.hidden=!0)}maybeShow(){this.#y&&(this.#f||this.#R(),this.#y=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class H7 extends $n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=fe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class NZ extends $n{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),s=this.#t=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class LZ extends $n{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",e-s),o.setAttribute("height",i-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class PZ extends $n{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",i/2),o.setAttribute("rx",e/2-s/2),o.setAttribute("ry",i/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class G7 extends $n{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:s,height:o}=this;if(!e)return this.container;const c=this.svgFactory.create(s,o,!0);let d=[];for(let g=0,m=e.length;g<m;g+=2){const v=e[g]-t[0],x=t[3]-e[g+1];d.push(`${v},${x}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),c.append(f),this.container.append(c),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class kZ extends G7{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class BZ extends $n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class YA extends $n{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?fe.HIGHLIGHT:fe.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:s}}=this,{transform:o,width:c,height:d}=this.#n(e,t),f=this.svgFactory.create(c,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",o);for(let m=0,v=i.length;m<v;m++){const x=this.svgFactory.createElement(this.svgElementName);this.#e.push(x),x.setAttribute("points",i[m].join(",")),g.append(x)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,s=this.#t;if(e>=0&&s.setAttribute("stroke-width",e||1),i)for(let o=0,c=this.#e.length;o<c;o++)this.#e[o].setAttribute("points",i[o].join(","));if(a){const{transform:o,width:c,height:d}=this.#n(this.data.rotation,a);s.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class j7 extends $n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=fe.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class zZ extends $n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class FZ extends $n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class IZ extends $n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class U7 extends $n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=fe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class HZ extends $n{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=Ui.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(a?s.metaKey:s.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class XA{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:s,viewport:o,structTreeLayer:c}){this.div=t,this.#t=e,this.#e=i,this.#i=c||null,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}async#r(t,e,i){const a=t.firstChild||t,s=a.id=`${kA}${e}`,o=await this.#i?.getAriaAttributes(s);if(o)for(const[c,d]of o)a.setAttribute(c,d);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,i=this.div;Gu(i,this.viewport);const a=new Map,s={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Wv,annotationStorage:t.annotationStorage||new GA,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const c=o.annotationType===ii.POPUP;if(c){const g=a.get(o.id);if(!g)continue;s.elements=g}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;s.data=o;const d=zT.create(s);if(!d.isRenderable)continue;if(!c&&o.popupRef){const g=a.get(o.popupRef);g?g.push(d):a.set(o.popupRef,[d])}const f=d.render();o.hidden&&(f.style.visibility="hidden"),await this.#r(f,o.id,s.elements),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#a()}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new Wv,parent:this};for(const a of t){a.borderStyle||=XA._defaultBorderStyle,i.data=a;const s=zT.create(i);if(!s.isRenderable)continue;const o=s.render();await this.#r(o,a.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Gu(e,{rotation:t.rotation}),this.#a(),e.hidden=!1}#a(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:s}=a;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):a.append(i);const o=this.#n.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),o._hasNoCanvas=!1):o.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return ze(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:kh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const fv=/\r\n?|\n/g;class di extends te{#t;#e="";#n=`${this.id}-editor`;#i=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=di.prototype,e=s=>s.isEmpty(),i=wc.TRANSLATE_SMALL,a=wc.TRANSLATE_BIG;return ze(this,"_keyboardManager",new mm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=fe.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||di._defaultColor||te._defaultLineColor,this.#r=t.fontSize||di._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){te.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ue.FREETEXT_SIZE:di._defaultFontSize=e;break;case Ue.FREETEXT_COLOR:di._defaultColor=e;break}}updateParams(t,e){switch(t){case Ue.FREETEXT_SIZE:this.#a(e);break;case Ue.FREETEXT_COLOR:this.#o(e);break}}static get defaultPropertiesToUpdate(){return[[Ue.FREETEXT_SIZE,di._defaultFontSize],[Ue.FREETEXT_COLOR,di._defaultColor||te._defaultLineColor]]}get propertiesToUpdate(){return[[Ue.FREETEXT_SIZE,this.#r],[Ue.FREETEXT_COLOR,this.#t]]}#a(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#r)*this.parentScale),this.#r=a,this.#d()},i=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const e=a=>{this.#t=this.editorDiv.style.color=a},i=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-di._internalPadding*t,-(di._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(di.#l(i)),e=i);return t.join(`
`)}#d(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:s}=this,o=s.style.display,c=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",a.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#s().trimEnd();if(t===e)return;const i=a=>{if(this.#e=a,!a){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){di._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[f,g]=this.pageDimensions,[m,v]=this.pageTranslation;let x,S;switch(this.rotation){case 0:x=t+(o[0]-m)/f,S=e+this.height-(o[1]-v)/g;break;case 90:x=t+(o[0]-m)/f,S=e-(o[1]-v)/g,[c,d]=[d,-c];break;case 180:x=t-this.width+(o[0]-m)/f,S=e-(o[1]-v)/g,[c,d]=[-c,-d];break;case 270:x=t+(o[0]-m-this.height*g)/f,S=e+(o[1]-v-this.width*f)/g,[c,d]=[-d,c];break}this.setAt(x*a,S*s,c,d)}else this._moveAfterPaste(t,e);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(fv,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=di.#f(e.getData("text")||"").replaceAll(fv,`
`);if(!a)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!a.includes(`
`)){o.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:c,startOffset:d}=o,f=[],g=[];if(c.nodeType===Node.TEXT_NODE){const x=c.parentElement;if(g.push(c.nodeValue.slice(d).replaceAll(fv,"")),x!==this.editorDiv){let S=f;for(const _ of this.editorDiv.childNodes){if(_===x){S=g;continue}S.push(di.#l(_))}}f.push(c.nodeValue.slice(0,d).replaceAll(fv,""))}else if(c===this.editorDiv){let x=f,S=0;for(const _ of this.editorDiv.childNodes)S++===d&&(x=g),x.push(di.#l(_))}this.#e=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#h();const m=new Range;let v=Math.sumPrecise(f.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const S=x.nodeValue.length;if(v<=S){m.setStart(x,v),m.setEnd(x,v);break}v-=S}s.removeAllRanges(),s.addRange(m)}#h(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,i){let a=null;if(t instanceof H7){const{data:{defaultAppearanceData:{fontSize:o,fontColor:c},rect:d,rotation:f,id:g,popupRef:m},textContent:v,textPosition:x,parent:{page:{pageNumber:S}}}=t;if(!v||v.length===0)return null;a=t={annotationType:fe.FREETEXT,color:Array.from(c),fontSize:o,value:v.join(`
`),position:x,pageIndex:S-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:m}}const s=await super.deserialize(t,e,i);return s.#r=t.fontSize,s.#t=Qt.makeHexColor(...t.color),s.#e=di.#f(t.value),s._initialData=a,s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=di._internalPadding*this.parentScale,i=this.getRect(e,e),a=te._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),s={annotationType:fe.FREETEXT,color:a,fontSize:this.#r,value:this.#u(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(s.isCopy=!0,s):this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(t){const{value:e,fontSize:i,color:a,pageIndex:s}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((o,c)=>o!==a[c])||t.pageIndex!==s}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,i.color=this.#t,e.replaceChildren();for(const s of this.#e.split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),e.append(o)}const a=di._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Ut{static PRECISION=1e-4;toSVGPath(){mn("Abstract method `toSVGPath` must be implemented.")}get box(){mn("Abstract getter `box` must be implemented.")}serialize(t,e){mn("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,s,o){o||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)o[c]=e+t[c]*a,o[c+1]=i+t[c+1]*s;return o}static _rescaleAndSwap(t,e,i,a,s,o){o||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)o[c]=e+t[c+1]*a,o[c+1]=i+t[c]*s;return o}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s+=2)a[s]=e+t[s],a[s+1]=i+t[s+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,s){switch(s){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,s,o){return[(t+5*i)/6,(e+5*a)/6,(5*i+s)/6,(5*a+o)/6,(i+s)/2,(a+o)/2]}}class Nu{#t;#e=[];#n;#i;#r=[];#a=new Float32Array(18);#o;#s;#d;#l;#h;#u;#f=[];static#p=8;static#g=2;static#c=Nu.#p+Nu.#g;constructor({x:t,y:e},i,a,s,o,c=0){this.#t=i,this.#u=s*a,this.#i=o,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=c,this.#l=Nu.#p*a,this.#d=Nu.#c*a,this.#h=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#m(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[i,a,s,o]=this.#t;return[(this.#o+(t[0]-e[0])/2-i)/s,(this.#s+(t[1]-e[1])/2-a)/o,(this.#o+(e[0]-t[0])/2-i)/s,(this.#s+(e[1]-t[1])/2-a)/o]}add({x:t,y:e}){this.#o=t,this.#s=e;const[i,a,s,o]=this.#t;let[c,d,f,g]=this.#a.subarray(8,12);const m=t-f,v=e-g,x=Math.hypot(m,v);if(x<this.#d)return!1;const S=x-this.#l,_=S/x,C=_*m,D=_*v;let T=c,w=d;c=f,d=g,f+=C,g+=D,this.#f?.push(t,e);const R=-D/S,O=C/S,L=R*this.#u,I=O*this.#u;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+L,g+I],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-L,g-I],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([c+L,d+I],2),this.#r.push(NaN,NaN,NaN,NaN,(c+L-i)/s,(d+I-a)/o),this.#a.set([c-L,d-I],14),this.#e.push(NaN,NaN,NaN,NaN,(c-L-i)/s,(d-I-a)/o)),this.#a.set([T,w,c,d,f,g],6),!this.isEmpty()):(this.#a.set([T,w,c,d,f,g],6),Math.abs(Math.atan2(w-d,T-c)-Math.atan2(D,C))<Math.PI/2?([c,d,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+f)/2-i)/s,((d+g)/2-a)/o),[c,d,T,w]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+c)/2-i)/s,((w+d)/2-a)/o),!0):([T,w,c,d,f,g]=this.#a.subarray(0,6),this.#r.push(((T+5*c)/6-i)/s,((w+5*d)/6-a)/o,((5*c+f)/6-i)/s,((5*d+g)/6-a)/o,((c+f)/2-i)/s,((d+g)/2-a)/o),[f,g,c,d,T,w]=this.#a.subarray(12,18),this.#e.push(((T+5*c)/6-i)/s,((w+5*d)/6-a)/o,((5*c+f)/6-i)/s,((5*d+g)/6-a)/o,((c+f)/2-i)/s,((d+g)/2-a)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#x(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#y(i),i.join(" ")}#v(){const[t,e,i,a]=this.#t,[s,o,c,d]=this.#m();return`M${(this.#a[2]-t)/i} ${(this.#a[3]-e)/a} L${(this.#a[4]-t)/i} ${(this.#a[5]-e)/a} L${s} ${o} L${c} ${d} L${(this.#a[16]-t)/i} ${(this.#a[17]-e)/a} L${(this.#a[14]-t)/i} ${(this.#a[15]-e)/a} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#x(t){const[e,i,a,s]=this.#t,o=this.#a.subarray(4,6),c=this.#a.subarray(16,18),[d,f,g,m]=this.#m();t.push(`L${(o[0]-e)/a} ${(o[1]-i)/s} L${d} ${f} L${g} ${m} L${(c[0]-e)/a} ${(c[1]-i)/s}`)}newFreeDrawOutline(t,e,i,a,s,o){return new q7(t,e,i,a,s,o)}getOutlines(){const t=this.#r,e=this.#e,i=this.#a,[a,s,o,c]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,v=d.length-2;m<v;m+=2)d[m]=(this.#f[m]-a)/o,d[m+1]=(this.#f[m+1]-s)/c;if(d[d.length-2]=(this.#o-a)/o,d[d.length-1]=(this.#s-s)/c,isNaN(i[6])&&!this.isEmpty())return this.#S(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let m=0;m<g;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}g=this.#w(f,g);for(let m=e.length-6;m>=6;m-=6)for(let v=0;v<6;v+=2){if(isNaN(e[m+v])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=e[m+v],f[g+1]=e[m+v+1],g+=2}return this.#_(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#h,this.#n,this.#i)}#S(t){const e=this.#a,[i,a,s,o]=this.#t,[c,d,f,g]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-i)/s,(e[3]-a)/o,NaN,NaN,NaN,NaN,(e[4]-i)/s,(e[5]-a)/o,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(e[16]-i)/s,(e[17]-a)/o,NaN,NaN,NaN,NaN,(e[14]-i)/s,(e[15]-a)/o],0),this.newFreeDrawOutline(m,t,this.#t,this.#h,this.#n,this.#i)}#_(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#w(t,e){const i=this.#a.subarray(4,6),a=this.#a.subarray(16,18),[s,o,c,d]=this.#t,[f,g,m,v]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-s)/c,(i[1]-o)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(a[0]-s)/c,(a[1]-o)/d],e),e+=24}}class q7 extends Ut{#t;#e=new Float32Array(4);#n;#i;#r;#a;#o;constructor(t,e,i,a,s,o){super(),this.#o=t,this.#r=e,this.#t=i,this.#a=a,this.#n=s,this.#i=o,this.lastPoint=[NaN,NaN],this.#s(o);const[c,d,f,g]=this.#e;for(let m=0,v=t.length;m<v;m+=2)t[m]=(t[m]-c)/f,t[m+1]=(t[m+1]-d)/g;for(let m=0,v=e.length;m<v;m+=2)e[m]=(e[m]-c)/f,e[m+1]=(e[m+1]-d)/g}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let e=6,i=this.#o.length;e<i;e+=6){if(isNaN(this.#o[e])){t.push(`L${this.#o[e+4]} ${this.#o[e+5]}`);continue}t.push(`C${this.#o[e]} ${this.#o[e+1]} ${this.#o[e+2]} ${this.#o[e+3]} ${this.#o[e+4]} ${this.#o[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],s){const o=i-t,c=a-e;let d,f;switch(s){case 0:d=Ut._rescale(this.#o,t,a,o,-c),f=Ut._rescale(this.#r,t,a,o,-c);break;case 90:d=Ut._rescaleAndSwap(this.#o,t,e,o,c),f=Ut._rescaleAndSwap(this.#r,t,e,o,c);break;case 180:d=Ut._rescale(this.#o,i,e,-o,c),f=Ut._rescale(this.#r,i,e,-o,c);break;case 270:d=Ut._rescaleAndSwap(this.#o,i,a,-o,-c),f=Ut._rescaleAndSwap(this.#r,i,a,-o,-c);break}return{outline:Array.from(d),points:[Array.from(f)]}}#s(t){const e=this.#o;let i=e[4],a=e[5];const s=[i,a,i,a];let o=i,c=a;const d=t?Math.max:Math.min;for(let g=6,m=e.length;g<m;g+=6){const v=e[g+4],x=e[g+5];if(isNaN(e[g]))Qt.pointBoundingBox(v,x,s),c<x?(o=v,c=x):c===x&&(o=d(o,v));else{const S=[1/0,1/0,-1/0,-1/0];Qt.bezierBoundingBox(i,a,...e.slice(g,g+6),S),Qt.rectBoundingBox(...S,s),c<S[3]?(o=S[2],c=S[3]):c===S[3]&&(o=d(o,S[2]))}i=v,a=x}const f=this.#e;f[0]=s[0]-this.#n,f[1]=s[1]-this.#n,f[2]=s[2]-s[0]+2*this.#n,f[3]=s[3]-s[1]+2*this.#n,this.lastPoint=[o,c]}get box(){return this.#e}newOutliner(t,e,i,a,s,o=0){return new Nu(t,e,i,a,s,o)}getNewOutline(t,e){const[i,a,s,o]=this.#e,[c,d,f,g]=this.#t,m=s*f,v=o*g,x=i*f+c,S=a*g+d,_=this.newOutliner({x:this.#r[0]*m+x,y:this.#r[1]*v+S},this.#t,this.#a,t,this.#i,e??this.#n);for(let C=2;C<this.#r.length;C+=2)_.add({x:this.#r[C]*m+x,y:this.#r[C+1]*v+S});return _.getOutlines()}}class e_{#t;#e;#n=[];#i=[];constructor(t,e=0,i=0,a=!0){const s=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x,y:S,width:_,height:C}of t){const D=Math.floor((x-e)/o)*o,T=Math.ceil((x+_+e)/o)*o,w=Math.floor((S-e)/o)*o,R=Math.ceil((S+C+e)/o)*o,O=[D,w,R,!0],L=[T,w,R,!1];this.#n.push(O,L),Qt.rectBoundingBox(D,w,T,R,s)}const c=s[2]-s[0]+2*i,d=s[3]-s[1]+2*i,f=s[0]-i,g=s[1]-i,m=this.#n.at(a?-1:-2),v=[m[0],m[2]];for(const x of this.#n){const[S,_,C]=x;x[0]=(S-f)/c,x[1]=(_-g)/d,x[2]=(C-g)/d}this.#t=new Float32Array([f,g,c,d]),this.#e=v}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#d(e)),this.#o(e)):(this.#s(e),t.push(...this.#d(e)));return this.#r(t)}#r(t){const e=[],i=new Set;for(const o of t){const[c,d,f]=o;e.push([c,d,o],[c,f,o])}e.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=e.length;o<c;o+=2){const d=e[o][2],f=e[o+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}const a=[];let s;for(;i.size>0;){const o=i.values().next().value;let[c,d,f,g,m]=o;i.delete(o);let v=c,x=d;for(s=[c,f],a.push(s);;){let S;if(i.has(g))S=g;else if(i.has(m))S=m;else break;i.delete(S),[c,d,f,g,m]=S,v!==c&&(s.push(v,x,c,x===d?d:f),v=c),x=x===d?f:d}s.push(v,x)}return new GZ(a,this.#t,this.#e)}#a(t){const e=this.#i;let i=0,a=e.length-1;for(;i<=a;){const s=i+a>>1,o=e[s][0];if(o===t)return s;o<t?i=s+1:a=s-1}return a+1}#o([,t,e]){const i=this.#a(t);this.#i.splice(i,0,[t,e])}#s([,t,e]){const i=this.#a(t);for(let a=i;a<this.#i.length;a++){const[s,o]=this.#i[a];if(s!==t)break;if(s===t&&o===e){this.#i.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[s,o]=this.#i[a];if(s!==t)break;if(s===t&&o===e){this.#i.splice(a,1);return}}}#d(t){const[e,i,a]=t,s=[[e,i,a]],o=this.#a(a);for(let c=0;c<o;c++){const[d,f]=this.#i[c];for(let g=0,m=s.length;g<m;g++){const[,v,x]=s[g];if(!(f<=v||x<=d)){if(v>=d){if(x>f)s[g][1]=f;else{if(m===1)return[];s.splice(g,1),g--,m--}continue}s[g][2]=d,x>f&&s.push([e,f,x])}}}return s}}class GZ extends Ut{#t;#e;constructor(t,e,i){super(),this.#e=t,this.#t=e,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let s=2;s<e.length;s+=2){const o=e[s],c=e[s+1];o===i?(t.push(`V${c}`),a=c):c===a&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],s){const o=[],c=i-t,d=a-e;for(const f of this.#e){const g=new Array(f.length);for(let m=0;m<f.length;m+=2)g[m]=t+f[m]*c,g[m+1]=a-f[m+1]*d;o.push(g)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class n_ extends Nu{newFreeDrawOutline(t,e,i,a,s,o){return new jZ(t,e,i,a,s,o)}}class jZ extends q7{newOutliner(t,e,i,a,s,o=0){return new n_(t,e,i,a,s,o)}}class Br{#t=null;#e=null;#n;#i=null;#r=!1;#a=!1;#o=null;#s;#d=null;#l=null;#h;static#u=null;static get _keyboardManager(){return ze(this,"_keyboardManager",new mm([[["Escape","mac+Escape"],Br.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Br.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Br.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Br.prototype._moveToPrevious],[["Home","mac+Home"],Br.prototype._moveToBeginning],[["End","mac+End"],Br.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#h=Ue.HIGHLIGHT_COLOR,this.#o=t):(this.#a=!0,this.#h=Ue.HIGHLIGHT_DEFAULT_COLOR),this.#l=t?._uiManager||e,this.#s=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Br.#u||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#o&&(t.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#c.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#f();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#f(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",_s,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(t.id=`${this.#o.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",a),s.title=i,s.setAttribute("data-l10n-id",Br.#u[i]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=a,s.ariaSelected=a===this.#n,s.addEventListener("click",this.#p.bind(this,a),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#s.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#c(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#v){this.#c(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#c(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#v){this.#c(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#v){this.#c(t);return}this.#i.lastChild?.focus()}#g(t){Br._keyboardManager.exec(this,t)}#c(t){if(this.#v){this.hideDropdown();return}if(this.#r=t.detail===0,this.#d||(this.#d=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#d)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#f();this.#t.append(e)}#m(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#d?.abort(),this.#d=null}get#v(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#v){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const i of this.#i.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Wn extends te{#t=null;#e=0;#n;#i=null;#r=null;#a=null;#o=null;#s=0;#d=null;#l=null;#h=null;#u=!1;#f=null;#p;#g=null;#c="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=fe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Wn.prototype;return ze(this,"_keyboardManager",new mm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Wn._defaultColor,this.#m=t.thickness||Wn._defaultThickness,this.#p=t.opacity||Wn._defaultOpacity,this.#n=t.boxes||null,this.#v=t.methodOfCreation||"",this.#c=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#x(t),this.#M()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#s=t.focusOffset,this.#y(),this.#M(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new e_(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new e_(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{lastPoint:i}=this.#a;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#x({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const a=1.5;if(this.#a=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#h=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Wn.#A(this.#l.box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Wn.#A(this.#a.box,g),path:{d:this.#a.toSVGPath()}})}const[s,o,c,d]=t.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=c,this.height=d;break;case 90:{const[g,m]=this.parentDimensions;this.x=o,this.y=1-s,this.width=c*m/g,this.height=d*g/m;break}case 180:this.x=1-s,this.y=1-o,this.width=c,this.height=d;break;case 270:{const[g,m]=this.parentDimensions;this.x=1-o,this.y=s,this.width=c*m/g,this.height=d*g/m;break}}const{lastPoint:f}=this.#a;this.#f=[(f[0]-s)/c,(f[1]-o)/d]}static initialize(t,e){te.initialize(t,e),Wn._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ue.HIGHLIGHT_DEFAULT_COLOR:Wn._defaultColor=e;break;case Ue.HIGHLIGHT_THICKNESS:Wn._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Ue.HIGHLIGHT_COLOR:this.#S(e);break;case Ue.HIGHLIGHT_THICKNESS:this.#_(e);break}}static get defaultPropertiesToUpdate(){return[[Ue.HIGHLIGHT_DEFAULT_COLOR,Wn._defaultColor],[Ue.HIGHLIGHT_THICKNESS,Wn._defaultThickness]]}get propertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,this.color||Wn._defaultColor],[Ue.HIGHLIGHT_THICKNESS,this.#m||Wn._defaultThickness],[Ue.HIGHLIGHT_FREE,this.#u]]}#S(t){const e=(s,o)=>{this.color=s,this.#p=o,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:s,"fill-opacity":o}}),this.#r?.updateColor(s)},i=this.color,a=this.#p;this.addCommands({cmd:e.bind(this,t,Wn._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#_(t){const e=this.#m,i=a=>{this.#m=a,this.#w(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Br({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#O())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#O())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#M(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#w(t){if(!this.#u)return;this.#x({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#M(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#u),this.#d&&(this.#d.style.clipPath=this.#i))}static#A([t,e,i,a],s){switch(s){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#u?(t=(t-this.rotation+360)%360,i=Wn.#A(this.#l.box,t)):i=Wn.#A([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#h,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:Wn.#A(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#c&&(t.setAttribute("aria-label",this.#c),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#d=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),y7(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(t){Wn._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#o,this.#s)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#u||this.#C(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#O(){return this.#u?this.rotation:0}#N(){if(this.#u)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,s=this.#n,o=new Float32Array(s.length*8);let c=0;for(const{x:d,y:f,width:g,height:m}of s){const v=d*t+i,x=(1-f)*e+a;o[c]=o[c+4]=v,o[c+1]=o[c+3]=x,o[c+2]=o[c+6]=v+g*t,o[c+5]=o[c+7]=x-m*e,c+=8}return o}#L(t){return this.#l.serialize(t,this.#O())}static startHighlighting(t,e,{target:i,x:a,y:s}){const{x:o,y:c,width:d,height:f}=i.getBoundingClientRect(),g=new AbortController,m=t.combinedSignal(g),v=x=>{g.abort(),this.#E(t,x)};window.addEventListener("blur",v,{signal:m}),window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("pointerdown",ai,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",_s,{signal:m}),i.addEventListener("pointermove",this.#H.bind(this,t),{signal:m}),this._freeHighlight=new n_({x:a,y:s},[o,c,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#H(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#E(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof j7){const{data:{quadPoints:S,rect:_,rotation:C,id:D,color:T,opacity:w,popupRef:R},parent:{page:{pageNumber:O}}}=t;a=t={annotationType:fe.HIGHLIGHT,color:Array.from(T),opacity:w,quadPoints:S,boxes:null,pageIndex:O-1,rect:_.slice(0),rotation:C,annotationElementId:D,id:D,deleted:!1,popupRef:R}}else if(t instanceof YA){const{data:{inkLists:S,rect:_,rotation:C,id:D,color:T,borderStyle:{rawWidth:w},popupRef:R},parent:{page:{pageNumber:O}}}=t;a=t={annotationType:fe.HIGHLIGHT,color:Array.from(T),thickness:w,inkLists:S,boxes:null,pageIndex:O-1,rect:_.slice(0),rotation:C,annotationElementId:D,id:D,deleted:!1,popupRef:R}}const{color:s,quadPoints:o,inkLists:c,opacity:d}=t,f=await super.deserialize(t,e,i);f.color=Qt.makeHexColor(...s),f.#p=d||1,c&&(f.#m=t.thickness),f._initialData=a;const[g,m]=f.pageDimensions,[v,x]=f.pageTranslation;if(o){const S=f.#n=[];for(let _=0;_<o.length;_+=8)S.push({x:(o[_]-v)/g,y:1-(o[_+1]-x)/m,width:(o[_+2]-o[_])/g,height:(o[_+1]-o[_+5])/m});f.#y(),f.#M(),f.rotate(f.rotation)}else if(c){f.#u=!0;const S=c[0],_={x:S[0]-v,y:m-(S[1]-x)},C=new n_(_,[0,0,g,m],1,f.#m/2,!0,.001);for(let w=0,R=S.length;w<R;w+=2)_.x=S[w]-v,_.y=m-(S[w+1]-x),C.add(_);const{id:D,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);f.#x({highlightOutlines:C.getOutlines(),highlightId:D,clipPathId:T}),f.#M(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),i=te._colorManager.convert(this.color),a={annotationType:fe.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#m,quadPoints:this.#N(),outlines:this.#L(e),pageIndex:this.pageIndex,rect:e,rotation:this.#O(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#b(a)?null:(a.id=this.annotationElementId,a)}#b(t){const{color:e}=this._initialData;return t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class V7{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){mn("Not implemented")}}class se extends te{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#a=NaN;static#o=null;static#s=null;static#d=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#h(t,this.parent),this.#c(t.box)}#h(t,e){const{id:i}=e.drawLayer.draw(se._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,s]of Object.entries(e))i.has(a)?Object.assign(t[a],s):t[a]=s;return t}static getDefaultDrawingOptions(t){mn("Not implemented")}static get typesMap(){mn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(se.#n.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,s=a[e],o=c=>{a.updateProperty(e,c);const d=this.#t.updateProperty(e,c);d&&this.#c(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#c(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#t,t)}}#p([t,e,i,a]){const{parentDimensions:[s,o],rotation:c}=this;switch(c){case 90:return[e,1-t,i*(o/s),a*(s/o)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(o/s),a*(s/o)];default:return[t,e,i,a]}}#g(){const{x:t,y:e,width:i,height:a,parentDimensions:[s,o],rotation:c}=this;switch(c){case 90:return[1-e,t,i*(s/o),a*(o/s)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(s/o),a*(o/s)];default:return[t,e,i,a]}}#c(t){if([this.x,this.y,this.width,this.height]=this.#p(t),this.div){this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}this._onResized()}#m(){const{x:t,y:e,width:i,height:a,rotation:s,parentRotation:o,parentDimensions:[c,d]}=this;switch((s*4+o)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(c/d),a*(d/c),i*(c/d)];case 5:return[1-e,t,i*(c/d),a*(d/c)];case 6:return[1-t-a*(d/c),1-e,a*(d/c),i*(c/d)];case 7:return[e-i*(c/d),1-t-a*(d/c),i*(c/d),a*(d/c)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(d/c),e,a*(d/c),i*(c/d)];case 13:return[1-e-i*(c/d),t-a*(d/c),i*(c/d),a*(d/c)];case 14:return[1-t,1-e-i*(c/d),a*(d/c),i*(c/d)];case 15:return[e,1-t,i*(c/d),a*(d/c)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#c(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[s,o]=this.parentDimensions;return this.setDims(this.width*s,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,s){mn("Not implemented")}static startDrawing(t,e,i,a){const{target:s,offsetX:o,offsetY:c,pointerId:d,pointerType:f}=a;if(se.#o&&se.#o!==f)return;const{viewport:{rotation:g}}=t,{width:m,height:v}=s.getBoundingClientRect(),x=se.#i=new AbortController,S=t.combinedSignal(x);if(se.#a||=d,se.#o??=f,window.addEventListener("pointerup",_=>{se.#a===_.pointerId?this._endDraw(_):se.#s?.delete(_.pointerId)},{signal:S}),window.addEventListener("pointercancel",_=>{se.#a===_.pointerId?this._currentParent.endDrawingSession():se.#s?.delete(_.pointerId)},{signal:S}),window.addEventListener("pointerdown",_=>{se.#o===_.pointerType&&((se.#s||=new Set).add(_.pointerId),se.#n.isCancellable()&&(se.#n.removeLastElement(),se.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",_s,{signal:S}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),s.addEventListener("touchmove",_=>{_.timeStamp===se.#d&&ai(_)},{signal:S}),t.toggleDrawing(),e._editorUndoBar?.hide(),se.#n){t.drawLayer.updateProperties(this._currentDrawId,se.#n.startNew(o,c,m,v,g));return}e.updateUIForDefaultProperties(this),se.#n=this.createDrawerInstance(o,c,m,v,g),se.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(se.#r.toSVGProperties(),se.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(se.#d=-1,!se.#n)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(se.#a===a){if(se.#s?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,se.#n.add(e,i)),se.#d=t.timeStamp,ai(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,se.#n=null,se.#r=null,se.#o=null,se.#d=NaN),se.#i&&(se.#i.abort(),se.#i=null,se.#a=NaN,se.#s=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,se.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=se.#n,a=this._currentDrawId,s=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(s))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Ue.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ue.DRAW_STEP),!se.#n.isEmpty()){const{pageDimensions:[i,a],scale:s}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:se.#n.getOutlines(i*s,a*s,s,this._INNER_MARGIN),drawingOptions:se.#r,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,s,o){mn("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:c}}=e.viewport,d=this.deserializeDraw(o,c,a,s,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#l({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[a,s]=this.pageDimensions;return this.#t.serialize([e,i,a,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class UZ{#t=new Float64Array(6);#e;#n;#i;#r;#a;#o="";#s=0;#d=new ym;#l;#h;constructor(t,e,i,a,s,o){this.#l=i,this.#h=a,this.#i=s,this.#r=o,[t,e]=this.#u(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#n=[{line:c,points:this.#a}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#u(t,e){return Ut._normalizePoint(t,e,this.#l,this.#h,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#u(t,e);const[i,a,s,o]=this.#t.subarray(2,6),c=t-s,d=e-o;return Math.hypot(this.#l*c,this.#h*d)<=2?null:(this.#a.push(t,e),isNaN(i)?(this.#t.set([s,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,s,o,t,e],0),this.#e.push(...Ut.createBezierPoints(i,a,s,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,s){this.#l=i,this.#h=a,this.#i=s,[t,e]=this.#u(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const c=this.#n.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#n.push({line:o,points:this.#a}),this.#t.set(o,0),this.#s=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#s=0,{path:{d:this.toSVGPath()}}):this.#d.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#d.removeLastElement();this.#n.pop(),this.#o="";for(let t=0,e=this.#n.length;t<e;t++){const{line:i,points:a}=this.#n[t];this.#e=i,this.#a=a,this.#s=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const t=Ut.svgRound(this.#e[4]),e=Ut.svgRound(this.#e[5]);if(this.#a.length===2)return this.#o=`${this.#o} M ${t} ${e} Z`,this.#o;if(this.#a.length<=6){const a=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,a)} M ${t} ${e}`,this.#s=6}if(this.#a.length===4){const a=Ut.svgRound(this.#e[10]),s=Ut.svgRound(this.#e[11]);return this.#o=`${this.#o} L ${a} ${s}`,this.#s=12,this.#o}const i=[];this.#s===0&&(i.push(`M ${t} ${e}`),this.#s=6);for(let a=this.#s,s=this.#e.length;a<s;a+=6){const[o,c,d,f,g,m]=this.#e.slice(a,a+6).map(Ut.svgRound);i.push(`C${o} ${c} ${d} ${f} ${g} ${m}`)}return this.#o+=i.join(" "),this.#s=this.#e.length,this.#o}getOutlines(t,e,i,a){const s=this.#n.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#d.build(this.#n,t,e,i,this.#i,this.#r,a),this.#t=null,this.#e=null,this.#n=null,this.#o=null,this.#d}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class ym extends Ut{#t;#e=0;#n;#i;#r;#a;#o;#s;#d;build(t,e,i,a,s,o,c){this.#r=e,this.#a=i,this.#o=a,this.#s=s,this.#d=o,this.#n=c??0,this.#i=t,this.#u()}get thickness(){return this.#d}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${Ut.svgRound(e[4])} ${Ut.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Ut.svgRound(e[10])} ${Ut.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[s,o,c,d,f,g]=e.subarray(i,i+6).map(Ut.svgRound);t.push(`C${s} ${o} ${c} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,e,i,a],s){const o=[],c=[],[d,f,g,m]=this.#h();let v,x,S,_,C,D,T,w,R;switch(this.#s){case 0:R=Ut._rescale,v=t,x=e+a,S=i,_=-a,C=t+d*i,D=e+(1-f-m)*a,T=t+(d+g)*i,w=e+(1-f)*a;break;case 90:R=Ut._rescaleAndSwap,v=t,x=e,S=i,_=a,C=t+f*i,D=e+d*a,T=t+(f+m)*i,w=e+(d+g)*a;break;case 180:R=Ut._rescale,v=t+i,x=e,S=-i,_=a,C=t+(1-d-g)*i,D=e+f*a,T=t+(1-d)*i,w=e+(f+m)*a;break;case 270:R=Ut._rescaleAndSwap,v=t+i,x=e+a,S=-i,_=-a,C=t+(1-f-m)*i,D=e+(1-d-g)*a,T=t+(1-f)*i,w=e+(1-d)*a;break}for(const{line:O,points:L}of this.#i)o.push(R(O,v,x,S,_,s?new Array(O.length):null)),c.push(R(L,v,x,S,_,s?new Array(L.length):null));return{lines:o,points:c,rect:[C,D,T,w]}}static deserialize(t,e,i,a,s,{paths:{lines:o,points:c},rotation:d,thickness:f}){const g=[];let m,v,x,S,_;switch(d){case 0:_=Ut._rescale,m=-t/i,v=e/a+1,x=1/i,S=-1/a;break;case 90:_=Ut._rescaleAndSwap,m=-e/a,v=-t/i,x=1/a,S=1/i;break;case 180:_=Ut._rescale,m=t/i+1,v=-e/a,x=-1/i,S=1/a;break;case 270:_=Ut._rescaleAndSwap,m=e/a+1,v=t/i+1,x=-1/a,S=-1/i;break}if(!o){o=[];for(const D of c){const T=D.length;if(T===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1]]));continue}if(T===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1],NaN,NaN,NaN,NaN,D[2],D[3]]));continue}const w=new Float32Array(3*(T-2));o.push(w);let[R,O,L,I]=D.subarray(0,4);w.set([NaN,NaN,NaN,NaN,R,O],0);for(let B=4;B<T;B+=2){const F=D[B],z=D[B+1];w.set(Ut.createBezierPoints(R,O,L,I,F,z),(B-2)*3),[R,O,L,I]=[L,I,F,z]}}}for(let D=0,T=o.length;D<T;D++)g.push({line:_(o[D].map(w=>w??NaN),m,v,x,S),points:_(c[D].map(w=>w??NaN),m,v,x,S)});const C=new this.prototype.constructor;return C.build(g,i,a,1,d,f,s),C}#l(t=this.#d){const e=this.#n+t/2*this.#o;return this.#s%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#h(){const[t,e,i,a]=this.#t,[s,o]=this.#l(0);return[t+s,e+o,i-2*s,a-2*o]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#i){if(a.length<=12){for(let c=4,d=a.length;c<d;c+=6)Qt.pointBoundingBox(a[c],a[c+1],t);continue}let s=a[4],o=a[5];for(let c=6,d=a.length;c<d;c+=6){const[f,g,m,v,x,S]=a.subarray(c,c+6);Qt.bezierBoundingBox(s,o,f,g,m,v,x,S,t),s=x,o=S}}const[e,i]=this.#l();t[0]=ba(t[0]-e,0,1),t[1]=ba(t[1]-i,0,1),t[2]=ba(t[2]+e,0,1),t[3]=ba(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#d=t;const[a,s]=this.#l(),[o,c]=[a-e,s-i],d=this.#t;return d[0]-=o,d[1]-=c,d[2]+=2*o,d[3]+=2*c,d}updateParentDimensions([t,e],i){const[a,s]=this.#l();this.#r=t,this.#a=e,this.#o=i;const[o,c]=this.#l(),d=o-a,f=c-s,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Ut.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ut.svgRound(t)} ${Ut.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,s=0,o=0,c=0,d=0;switch(this.#e){case 90:a=e/t,s=-t/e,c=t;break;case 180:i=-1,o=-1,c=t,d=e;break;case 270:a=-e/t,s=t/e,d=e;break;default:return""}return`matrix(${i} ${a} ${s} ${o} ${Ut.svgRound(c)} ${Ut.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,a]){const[s,o]=this.#l(),[c,d,f,g]=this.#t;if(Math.abs(f-s)<=Ut.PRECISION||Math.abs(g-o)<=Ut.PRECISION){const _=t+i/2-(c+f/2),C=e+a/2-(d+g/2);return{path:{"transform-origin":`${Ut.svgRound(t)} ${Ut.svgRound(e)}`,transform:`${this.rotationTransform} translate(${_} ${C})`}}}const m=(i-2*s)/(f-2*s),v=(a-2*o)/(g-2*o),x=f/i,S=g/a;return{path:{"transform-origin":`${Ut.svgRound(c)} ${Ut.svgRound(d)}`,transform:`${this.rotationTransform} scale(${x} ${S}) translate(${Ut.svgRound(s)} ${Ut.svgRound(o)}) scale(${m} ${v}) translate(${Ut.svgRound(-s)} ${Ut.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[s,o]=this.#l(),c=this.#t,[d,f,g,m]=c;if(c[0]=t,c[1]=e,c[2]=i,c[3]=a,Math.abs(g-s)<=Ut.PRECISION||Math.abs(m-o)<=Ut.PRECISION){const C=t+i/2-(d+g/2),D=e+a/2-(f+m/2);for(const{line:T,points:w}of this.#i)Ut._translate(T,C,D,T),Ut._translate(w,C,D,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ut.svgRound(t)} ${Ut.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(i-2*s)/(g-2*s),x=(a-2*o)/(m-2*o),S=-v*(d+s)+t+s,_=-x*(f+o)+e+o;if(v!==1||x!==1||S!==0||_!==0)for(const{line:C,points:D}of this.#i)Ut._rescale(C,S,_,v,x,C),Ut._rescale(D,S,_,v,x,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ut.svgRound(t)} ${Ut.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,s]=i,o=this.#t,c=t-o[0],d=e-o[1];if(this.#r===a&&this.#a===s)for(const{line:f,points:g}of this.#i)Ut._translate(f,c,d,f),Ut._translate(g,c,d,g);else{const f=this.#r/a,g=this.#a/s;this.#r=a,this.#a=s;for(const{line:m,points:v}of this.#i)Ut._rescale(m,c,d,f,g,m),Ut._rescale(v,c,d,f,g,v);o[2]*=f,o[3]*=g}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ut.svgRound(t)} ${Ut.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ut.svgRound(t[0])} ${Ut.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class F1 extends V7{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:te._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new F1(this._viewParameters);return t.updateAll(this),t}}class KA extends se{static _type="ink";static _editorType=fe.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){te.initialize(t,e),this._defaultDrawingOptions=new F1(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return ze(this,"typesMap",new Map([[Ue.INK_THICKNESS,"stroke-width"],[Ue.INK_COLOR,"stroke"],[Ue.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,s){return new UZ(t,e,i,a,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,s,o){return ym.deserialize(t,e,i,a,s,o)}static async deserialize(t,e,i){let a=null;if(t instanceof YA){const{data:{inkLists:o,rect:c,rotation:d,id:f,color:g,opacity:m,borderStyle:{rawWidth:v},popupRef:x},parent:{page:{pageNumber:S}}}=t;a=t={annotationType:fe.INK,color:Array.from(g),thickness:v,opacity:m,paths:{points:o},boxes:null,pageIndex:S-1,rect:c.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:x}}const s=await super.deserialize(t,e,i);return s._initialData=a,s}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=KA.getDefaultDrawingOptions({stroke:Qt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":c}}=this,d={annotationType:fe.INK,color:te._colorManager.convert(s),opacity:o,thickness:c,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(d.isCopy=!0,d):this.annotationElementId&&!this.#t(d)?null:(d.id=this.annotationElementId,d)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:s}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==e[c])||t.thickness!==i||t.opacity!==a||t.pageIndex!==s}renderAnnotationElement(t){const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class i_ extends ym{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const pv=8,Cg=3;class zh{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,i,a,s,o,c){const d=this.#e(i,a,s,o);for(let f=0;f<8;f++){const g=(-f+d-c+16)%8,m=this.#n[2*g],v=this.#n[2*g+1];if(t[(i+m)*e+(a+v)]!==0)return g}return-1}static#r(t,e,i,a,s,o,c){const d=this.#e(i,a,s,o);for(let f=0;f<8;f++){const g=(f+d+c+16)%8,m=this.#n[2*g],v=this.#n[2*g+1];if(t[(i+m)*e+(a+v)]!==0)return g}return-1}static#a(t,e,i,a){const s=t.length,o=new Int32Array(s);for(let g=0;g<s;g++)o[g]=t[g]<=a?1:0;for(let g=1;g<i-1;g++)o[g*e]=o[g*e+e-1]=0;for(let g=0;g<e;g++)o[g]=o[e*i-1-g]=0;let c=1,d;const f=[];for(let g=1;g<i-1;g++){d=1;for(let m=1;m<e-1;m++){const v=g*e+m,x=o[v];if(x===0)continue;let S=g,_=m;if(x===1&&o[v-1]===0)c+=1,_-=1;else if(x>=1&&o[v+1]===0)c+=1,_+=1,x>1&&(d=x);else{x!==1&&(d=Math.abs(x));continue}const C=[m,g],D=_===m+1,T={isHole:D,points:C,id:c,parent:0};f.push(T);let w;for(const j of f)if(j.id===d){w=j;break}w?w.isHole?T.parent=D?w.parent:d:T.parent=D?d:w.parent:T.parent=D?d:0;const R=this.#i(o,e,g,m,S,_,0);if(R===-1){o[v]=-c,o[v]!==1&&(d=Math.abs(o[v]));continue}let O=this.#n[2*R],L=this.#n[2*R+1];const I=g+O,B=m+L;S=I,_=B;let F=g,z=m;for(;;){const j=this.#r(o,e,F,z,S,_,1);O=this.#n[2*j],L=this.#n[2*j+1];const Z=F+O,nt=z+L;C.push(nt,Z);const it=F*e+z;if(o[it+1]===0?o[it]=-c:o[it]===1&&(o[it]=c),Z===g&&nt===m&&F===I&&z===B){o[v]!==1&&(d=Math.abs(o[v]));break}else S=F,_=z,F=Z,z=nt}}}return f}static#o(t,e,i,a){if(i-e<=4){for(let I=e;I<i-2;I+=2)a.push(t[I],t[I+1]);return}const s=t[e],o=t[e+1],c=t[i-4]-s,d=t[i-3]-o,f=Math.hypot(c,d),g=c/f,m=d/f,v=g*o-m*s,x=d/c,S=1/f,_=Math.atan(x),C=Math.cos(_),D=Math.sin(_),T=S*(Math.abs(C)+Math.abs(D)),w=S*(1-T+T**2),R=Math.max(Math.atan(Math.abs(D+C)*w),Math.atan(Math.abs(D-C)*w));let O=0,L=e;for(let I=e+2;I<i-2;I+=2){const B=Math.abs(v-g*t[I+1]+m*t[I]);B>O&&(L=I,O=B)}O>(f*R)**2?(this.#o(t,e,L+2,a),this.#o(t,L,i,a)):a.push(s,o)}static#s(t){const e=[],i=t.length;return this.#o(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#d(t,e,i,a,s,o){const c=new Float32Array(o**2),d=-2*a**2,f=o>>1;for(let _=0;_<o;_++){const C=(_-f)**2;for(let D=0;D<o;D++)c[_*o+D]=Math.exp((C+(D-f)**2)/d)}const g=new Float32Array(256),m=-2*s**2;for(let _=0;_<256;_++)g[_]=Math.exp(_**2/m);const v=t.length,x=new Uint8Array(v),S=new Uint32Array(256);for(let _=0;_<i;_++)for(let C=0;C<e;C++){const D=_*e+C,T=t[D];let w=0,R=0;for(let L=0;L<o;L++){const I=_+L-f;if(!(I<0||I>=i))for(let B=0;B<o;B++){const F=C+B-f;if(F<0||F>=e)continue;const z=t[I*e+F],j=c[L*o+B]*g[Math.abs(z-T)];w+=z*j,R+=j}}const O=x[D]=Math.round(w/R);S[O]++}return[x,S]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#h(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,s=1/0;for(let c=0,d=i.length;c<d;c++){if(t[(c<<2)+3]===0){a=i[c]=255;continue}const g=i[c]=t[c<<2];g>a&&(a=g),g<s&&(s=g)}const o=255/(a-s);for(let c=0;c<e;c++)i[c]=(i[c]-s)*o;return i}static#u(t){let e,i=-1/0,a=-1/0;const s=t.findIndex(d=>d!==0);let o=s,c=s;for(e=s;e<256;e++){const d=t[e];d>i&&(e-o>a&&(a=e-o,c=e-1),i=d,o=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:s}=this.#t;let o=i,c=a;if(i>s||a>s){let v=i,x=a,S=Math.log2(Math.max(i,a)/s);const _=Math.floor(S);S=S===_?_-1:_;for(let D=0;D<S;D++){o=Math.ceil(v/2),c=Math.ceil(x/2);const T=new OffscreenCanvas(o,c);T.getContext("2d").drawImage(t,0,0,v,x,0,0,o,c),v=o,x=c,t!==e&&t.close(),t=T.transferToImageBitmap()}const C=Math.min(s/o,s/c);o=Math.round(o*C),c=Math.round(c*C)}const f=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,o,c);const g=f.getImageData(0,0,o,c).data;return[this.#h(g),o,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},s,o,c,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const m=200,v=g.font=`${i} ${a} ${m}px ${e}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:S,actualBoundingBoxAscent:_,actualBoundingBoxDescent:C,fontBoundingBoxAscent:D,fontBoundingBoxDescent:T,width:w}=g.measureText(t),R=1.5,O=Math.ceil(Math.max(Math.abs(x)+Math.abs(S)||0,w)*R),L=Math.ceil(Math.max(Math.abs(_)+Math.abs(C)||m,Math.abs(D)+Math.abs(T)||m)*R);f=new OffscreenCanvas(O,L),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=v,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,O,L),g.fillStyle="black",g.fillText(t,O*(R-1)/2,L*(3-R)/2);const I=this.#h(g.getImageData(0,0,O,L).data),B=this.#l(I),F=this.#u(B),z=this.#a(I,O,L,F);return this.processDrawnLines({lines:{curves:z,width:O,height:L},pageWidth:s,pageHeight:o,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,s){const[o,c,d]=this.#f(t),[f,g]=this.#d(o,c,d,Math.hypot(c,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#u(g),v=this.#a(f,c,d,m);return this.processDrawnLines({lines:{curves:v,width:c,height:d},pageWidth:e,pageHeight:i,rotation:a,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:s,mustSmooth:o,areContours:c}){a%180!==0&&([e,i]=[i,e]);const{curves:d,width:f,height:g}=t,m=t.thickness??0,v=[],x=Math.min(e/f,i/g),S=x/e,_=x/i,C=[];for(const{points:T}of d){const w=o?this.#s(T):T;if(!w)continue;C.push(w);const R=w.length,O=new Float32Array(R),L=new Float32Array(3*(R===2?2:R-2));if(v.push({line:L,points:O}),R===2){O[0]=w[0]*S,O[1]=w[1]*_,L.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[I,B,F,z]=w;I*=S,B*=_,F*=S,z*=_,O.set([I,B,F,z],0),L.set([NaN,NaN,NaN,NaN,I,B],0);for(let j=4;j<R;j+=2){const Z=O[j]=w[j]*S,nt=O[j+1]=w[j+1]*_;L.set(Ut.createBezierPoints(I,B,F,z,Z,nt),(j-2)*3),[I,B,F,z]=[F,z,Z,nt]}}if(v.length===0)return null;const D=c?new i_:new ym;return D.build(v,e,i,1,a,c?0:m,s),{outline:D,newCurves:C,areContours:c,thickness:m,width:f,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:s}){let o=1/0,c=-1/0,d=0;for(const w of t){d+=w.length;for(let R=2,O=w.length;R<O;R++){const L=w[R]-w[R-2];o=Math.min(o,L),c=Math.max(c,L)}}let f;o>=-128&&c<=127?f=Int8Array:o>=-32768&&c<=32767?f=Int16Array:f=Int32Array;const g=t.length,m=pv+Cg*g,v=new Uint32Array(m);let x=0;v[x++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,v[x++]=0,v[x++]=a,v[x++]=s,v[x++]=e?0:1,v[x++]=Math.max(0,Math.floor(i??0)),v[x++]=g,v[x++]=f.BYTES_PER_ELEMENT;for(const w of t)v[x++]=w.length-2,v[x++]=w[0],v[x++]=w[1];const S=new CompressionStream("deflate-raw"),_=S.writable.getWriter();await _.ready,_.write(v);const C=f.prototype.constructor;for(const w of t){const R=new C(w.length-2);for(let O=2,L=w.length;O<L;O++)R[O-2]=w[O]-w[O-2];_.write(R)}_.close();const D=await new Response(S.readable).arrayBuffer(),T=new Uint8Array(D);return m7(T)}static async decompressSignature(t){try{const e=fQ(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),s=a.getWriter();await s.ready,s.write(e).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let o=null,c=0;for await(const w of i)o||=new Uint8Array(new Uint32Array(w.buffer,0,4)[0]),o.set(w,c),c+=w.length;const d=new Uint32Array(o.buffer,0,o.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],m=d[3],v=d[4]===0,x=d[5],S=d[6],_=d[7],C=[],D=(pv+Cg*S)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(_){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(o.buffer,D);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(o.buffer,D);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(o.buffer,D);break}c=0;for(let w=0;w<S;w++){const R=d[Cg*w+pv],O=new Float32Array(R+2);C.push(O);for(let L=0;L<Cg-1;L++)O[L]=d[Cg*w+pv+L+1];for(let L=0;L<R;L++)O[L+2]=O[L]+T[c++]}return{areContours:v,thickness:x,outlines:C,width:g,height:m}}catch(e){return pe(`decompressSignature: ${e}`),null}}}class WA extends V7{constructor(){super(),super.updateProperties({fill:te._defaultLineColor,"stroke-width":0})}clone(){const t=new WA;return t.updateAll(this),t}}class $A extends F1{constructor(t){super(t),super.updateProperties({stroke:te._defaultLineColor,"stroke-width":1})}clone(){const t=new $A(this._viewParameters);return t.updateAll(this),t}}class go extends se{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=fe.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){te.initialize(t,e),this._defaultDrawingOptions=new WA,this._defaultDrawnSignatureOptions=new $A(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return ze(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:s,areContours:o,description:c,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:m},rotation:v}=this.parent.viewport,x=zh.processDrawnLines({lines:a,pageWidth:g,pageHeight:m,rotation:v,innerMargin:go._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(x,f,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:s}=this.#n,o=Math.max(a,s),c=zh.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:s,y:o}=this,{outline:c}=this.#n=t;this.#t=c instanceof i_,this.description=i,this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let d;this.#t?d=go.getDefaultDrawingOptions():(d=go._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[f,g]=this.parentDimensions,[,m]=this.pageDimensions;let v=e/m;v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(f*this.width,g*this.height),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return zh.process(t,e,i,a,go._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:s}=this.parent.viewport;return zh.extractContoursFromText(t,e,i,a,s,go._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return zh.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:go._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=go.getDefaultDrawingOptions():(this._drawingOptions=go._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,o={annotationType:fe.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:s,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.paths={lines:e,points:i},o.uuid=this.#i,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,i,a,s,o){return o.areContours?i_.deserialize(t,e,i,a,s,o):ym.deserialize(t,e,i,a,s,o)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.#e=t.accessibilityData?.alt||"",a.#i=t.uuid,a}}class qZ extends te{#t=null;#e=null;#n=null;#i=null;#r=null;#a="";#o=null;#s=!1;#d=null;#l=!1;#h=!1;static _type="stamp";static _editorType=fe.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){te.initialize(t,e)}static isHandlingMimeForPasting(t){return $S.includes(t)}static paste(t,e){e.pasteEditor({mode:fe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:s,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:a,width:s,height:o,channels:a.length/(s*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#u(i,!0)).finally(()=>this.#f());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#u(a)).finally(()=>this.#f());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(a=>this.#u(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=$S.join(",");const e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#s)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#s||(this.#t?this.#g():this.#p()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#s=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#d!==null&&clearTimeout(this.#d);const t=200;this.#d=setTimeout(()=>{this.#d=null,this.#m()},t)}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,s]=this.pageDimensions,o=.75;if(this.width)e=this.width*a,i=this.height*s;else if(e>o*a||i>o*s){const g=Math.min(o*a/e,o*s/i);e*=g,i*=g}const[c,d]=this.parentDimensions;this.setDims(e*c/a,i*d/s),this._uiManager.enableWaiting(!1);const f=this.#o=document.createElement("canvas");f.setAttribute("role","img"),this.addContainer(f),this.width=e/a,this.height=i/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:s}=this.#t,o=new yo;let c=this.#t,d=a,f=s,g=null;if(e){if(a>e||s>e){const L=Math.min(e/a,e/s);d=Math.floor(a*L),f=Math.floor(s*L)}g=document.createElement("canvas");const v=g.width=Math.ceil(d*o.sx),x=g.height=Math.ceil(f*o.sy);this.#l||(c=this.#c(v,x));const S=g.getContext("2d");S.filter=this._uiManager.hcmFilter;let _="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(_="#8f8f9d",C="#42414d");const D=15,T=D*o.sx,w=D*o.sy,R=new OffscreenCanvas(T*2,w*2),O=R.getContext("2d");O.fillStyle=_,O.fillRect(0,0,T*2,w*2),O.fillStyle=C,O.fillRect(0,0,T,w),O.fillRect(T,w,T,w),S.fillStyle=S.createPattern(R,"repeat"),S.fillRect(0,0,v,x),S.drawImage(c,0,0,c.width,c.height,0,0,v,x)}let m=null;if(i){let v,x;if(o.symmetric&&c.width<t&&c.height<t)v=c.width,x=c.height;else if(c=this.#t,a>t||s>t){const C=Math.min(t/a,t/s);v=Math.floor(a*C),x=Math.floor(s*C),this.#l||(c=this.#c(v,x))}const _=new OffscreenCanvas(v,x).getContext("2d",{willReadFrequently:!0});_.drawImage(c,0,0,c.width,c.height,0,0,v,x),m={width:v,height:x,data:_.getImageData(0,0,v,x).data}}return{canvas:g,width:d,height:f,imageData:m}}#c(t,e){const{width:i,height:a}=this.#t;let s=i,o=a,c=this.#t;for(;s>2*t||o>2*e;){const d=s,f=o;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const g=new OffscreenCanvas(s,o);g.getContext("2d").drawImage(c,0,0,d,f,0,0,s,o),c=g.transferToImageBitmap()}return c}#m(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,s=new yo,o=Math.ceil(i*t*s.sx),c=Math.ceil(a*e*s.sy),d=this.#o;if(!d||d.width===o&&d.height===c)return;d.width=o,d.height=c;const f=this.#l?this.#t:this.#c(o,c),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,o,c)}#v(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*Kh.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*Kh.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(a,s);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,s),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,s=!1;if(t instanceof U7){const{data:{rect:_,rotation:C,id:D,structParent:T,popupRef:w},container:R,parent:{page:{pageNumber:O}},canvas:L}=t;let I,B;L?(delete t.canvas,{id:I,bitmap:B}=i.imageManager.getFromCanvas(R.id,L),L.remove()):(s=!0,t._hasNoCanvas=!0);const F=(await e._structTree.getAriaAttributes(`${kA}${D}`))?.get("aria-label")||"";a=t={annotationType:fe.STAMP,bitmapId:I,bitmap:B,pageIndex:O-1,rect:_.slice(0),rotation:C,annotationElementId:D,id:D,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:T,popupRef:w}}const o=await super.deserialize(t,e,i),{rect:c,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:m,accessibilityData:v}=t;s?(i.addMissingCanvas(t.id,o),o.#s=!0):g&&i.imageManager.isValidId(g)?(o.#e=g,d&&(o.#t=d)):o.#i=f,o.#l=m;const[x,S]=o.pageDimensions;return o.width=(c[2]-c[0])/x,o.height=(c[3]-c[1])/S,v&&(o.altTextData=v),o._initialData=a,o.#h=!!a,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:fe.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:s}=this.serializeAltText(!1);if(!a&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const c=this.#y(i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;const o=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:i}),i.bitmap=this.#v(!1);else if(this.#l){const c=e.stamps.get(this.#e);o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=this.#v(!1))}return i}#y(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,s=(t.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&s,isSameAltText:s}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class sl{#t;#e=!1;#n=null;#i=null;#r=null;#a=new Map;#o=!1;#s=!1;#d=!1;#l=null;#h=null;#u=null;#f=null;#p=null;#g=-1;#c;static _initialized=!1;static#m=new Map([di,KA,qZ,Wn,go].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:s,annotationLayer:o,drawLayer:c,textLayer:d,viewport:f,l10n:g}){const m=[...sl.#m.values()];if(!sl._initialized){sl._initialized=!0;for(const v of m)v.initialize(g,t)}t.registerEditorTypes(m),this.#c=t,this.pageIndex=e,this.div=i,this.#t=s,this.#n=o,this.viewport=f,this.#u=d,this.drawLayer=c,this._structTree=a,this.#c.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===fe.NONE}updateToolbar(t){this.#c.updateToolbar(t)}updateMode(t=this.#c.getMode()){switch(this.#_(),t){case fe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case fe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case fe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of sl.#m.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#c.setEditingState(t)}addCommands(t){this.#c.addCommands(t)}cleanUndoStack(t){this.#c.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#d=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#p?.abort(),this.#p=null;const t=new Set;for(const i of this.#a.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#c.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#n){this.#d=!1;return}const e=this.#n.getEditableAnnotations();for(const i of e){if(i.hide(),this.#c.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#d=!1}disable(){if(this.#s=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#p){this.#p=new AbortController;const a=this.#c.combinedSignal(this.#p);this.#u.div.addEventListener("pointerdown",s=>{const{clientX:c,clientY:d,timeStamp:f}=s,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const v=document.elementsFromPoint(c,d);if(m.toggle("getElements",!1),!this.div.contains(v[0]))return;let x;const S=new RegExp(`^${d7}[0-9]+$`);for(const C of v)if(S.test(C.id)){x=C.id;break}if(!x)return;const _=this.#a.get(x);_?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),_.dblclick())},{signal:a,capture:!0})}const t=new Map,e=new Map;for(const a of this.#a.values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}if(this.#n){const a=this.#n.getEditableAnnotations();for(const s of a){const{id:o}=s.data;if(this.#c.isDeletedAnnotationElement(o))continue;let c=e.get(o);if(c){c.resetAnnotationElement(s),c.show(!1),s.show();continue}c=t.get(o),c&&(this.#c.addChangedExistingAnnotation(c),c.renderAnnotationElement(s)&&c.show(!1)),s.show()}}this.#_(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of sl.#m.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#s=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#c.getActive()!==t&&this.#c.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#c.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#v(t){this.#c.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:i}=Ui.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#c.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),Wn.startHighlighting(this,this.#c.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#c.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#c.isDeletedAnnotationElement(e)&&this.#c.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#s&&t.annotationElementId&&this.#c.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#c.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#c.addDeletedAnnotationElement(t.annotationElementId),te.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#c.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#d),this.#c.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#c.getId()}get#y(){return sl.#m.get(this.#c.getMode())}combinedSignal(t){return this.#c.combinedSignal(t)}#x(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#c.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#S(),s=this.getNextId(),o=this.#x({parent:this,id:s,x:i,y:a,uiManager:this.#c,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await sl.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#c)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),s=this.#x({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#c,isCentered:e,...i});return s&&this.add(s),s}#S(){const{x:t,y:e,width:i,height:a}=this.div.getBoundingClientRect(),s=Math.max(0,t),o=Math.max(0,e),c=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+a),f=(s+c)/2-t,g=(o+d)/2-e,[m,v]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:m,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#c.setSelected(t)}toggleSelected(t){this.#c.toggleSelected(t)}unselect(t){this.#c.unselect(t)}pointerup(t){const{isMac:e}=Ui.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#o||(this.#o=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#c.getMode();if(i===fe.STAMP||i===fe.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#c.getMode()===fe.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:e}=Ui.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#o=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const i=this.#c.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#c,!1,t);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#h=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#c,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#h=e);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(t=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#c.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#c.removeLayer(this)}#_(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Gu(this.div,t);for(const e of this.#c.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#c.commitOrRemove(),this.#_();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Gu(this.div,{rotation:i}),e!==i)for(const a of this.#a.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#c.viewParameters.realScale}}class Hi{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return ze(this,"_svgFactory",new Wv)}static#r(t,[e,i,a,s]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*a}%`,o.height=`${100*s}%`}#a(){const t=Hi._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,e){const i=Hi._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Hi._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),a}#s(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=Hi.#i++,s=this.#a(),o=Hi._svgFactory.createElement("defs");s.append(o);const c=Hi._svgFactory.createElement("path");o.append(c);const d=`path_p${this.pageIndex}_${a}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(a,c);const f=i?this.#o(o,d):null,g=Hi._svgFactory.createElement("use");return s.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(s,t),this.#e.set(a,s),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Hi.#i++,a=this.#a(),s=Hi._svgFactory.createElement("defs");a.append(s);const o=Hi._svgFactory.createElement("path");s.append(o);const c=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const m=Hi._svgFactory.createElement("mask");s.append(m),d=`mask_p${this.pageIndex}_${i}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const v=Hi._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const x=Hi._svgFactory.createElement("use");m.append(x),x.setAttribute("href",`#${c}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const f=Hi._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:s,path:o}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(i&&this.#s(c,i),a&&Hi.#r(c,a),s){const{classList:d}=c;for(const[f,g]of Object.entries(s))d.toggle(f,g)}if(o){const f=c.firstChild.firstChild;this.#s(f,o)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:e_};globalThis.pdfjsLib={AbortException:Ec,AnnotationEditorLayer:sl,AnnotationEditorParamsType:Ue,AnnotationEditorType:fe,AnnotationEditorUIManager:wc,AnnotationLayer:XA,AnnotationMode:pc,AnnotationType:ii,build:_Z,ColorPicker:Br,createValidAbsoluteUrl:h7,DOMSVGFactory:Wv,DrawLayer:Hi,FeatureTest:Ui,fetchData:pm,getDocument:L7,getFilenameFromUrl:pQ,getPdfFilenameFromUrl:gQ,getUuid:g7,getXfaPageViewport:vQ,GlobalWorkerOptions:jh,ImageKind:bv,InvalidPDFException:WS,isDataScheme:k1,isPdfFile:zA,isValidExplicitDest:RQ,MathClamp:ba,noContextMenu:_s,normalizeUnicode:dQ,OPS:Xv,OutputScale:yo,PasswordResponses:nQ,PDFDataRangeTransport:P7,PDFDateString:v7,PDFWorker:nm,PermissionFlag:eQ,PixelsPerInch:Kh,RenderingCancelledException:BA,ResponseException:Kv,setLayerDimensions:Gu,shadow:ze,SignatureExtractor:zh,stopEvent:ai,SupportedImageMimeTypes:$S,TextLayer:ma,TouchManager:B1,updateUrlHash:f7,Util:Qt,VerbosityLevel:N1,version:SZ,XfaLayer:z7};jh.workerSrc="/ntropia/pdf.worker.js";async function VZ(n,t=2){return new Promise((e,i)=>{const a=new FileReader;a.onload=async function(){const s=new Uint8Array(this.result),c=await(await L7({data:s}).promise).getPage(1),d=c.getViewport({scale:t}),f=document.createElement("canvas"),g=f.getContext("2d");f.width=d.width,f.height=d.height,await c.render({canvasContext:g,viewport:d}).promise;const m=f.toDataURL("image/png");e({dataUrl:m,width:d.width,height:d.height})},a.onerror=i,a.readAsArrayBuffer(n)})}const YZ=[{key:"canvas",label:"Canvas",icon:J.jsx(s_,{size:18})},{key:"export",label:"Exportar",icon:J.jsx(gv,{size:18})},{key:"about",label:"About",icon:J.jsx(VT,{size:18})}];function XZ({isOpen:n,onClose:t}){const[e,i]=X.useState("canvas"),{canvasWidth:a,canvasHeight:s,setCanvasSize:o,backgroundColor:c,setBackgroundColor:d,resetView:f,setBackgroundImage:g,clearBackgroundImage:m,backgroundImage:v}=It(),[x,S]=X.useState({width:a,height:s,backgroundColor:c,backgroundImage:v});X.useEffect(()=>{n&&S({width:a,height:s,backgroundColor:c,backgroundImage:v})},[n,a,s,c,v]);const _=window.__konvaStageRef,C=O=>{if(!_)return;const L=_.toDataURL({x:0,y:0,width:x.width,height:x.height,pixelRatio:3,mimeType:O==="jpg"?"image/jpeg":"image/png"}),I=document.createElement("a");I.download=`canvas.${O}`,I.href=L,I.click()};function D(){o({width:Math.max(100,parseInt(x.width)),height:Math.max(100,parseInt(x.height))}),d(x.backgroundColor),x.backgroundImage!==v&&g(x.backgroundImage),t()}function T(){S({width:a,height:s,backgroundColor:c,backgroundImage:v}),t()}function w(O){const L=O.target.files[0];if(!L)return;const I=new window.Image;I.src=URL.createObjectURL(L),I.onload=()=>{S(B=>({...B,width:Math.round(I.width),height:Math.round(I.height),backgroundImage:I.src}))}}async function R(O){const L=O.target.files[0];if(!L)return;const{dataUrl:I,width:B,height:F}=await VZ(L,2);S(z=>({...z,width:Math.round(B),height:Math.round(F),backgroundImage:I}))}return J.jsx(J9,{isOpen:n,onClose:t,title:J.jsxs("span",{className:"flex gap-2 items-center",children:[J.jsx(XT,{size:20}),"Menu"]}),children:J.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-[90vw] md:max-w-2xl min-h-[650px] md:min-h-[500px]",children:[J.jsx("aside",{className:"flex md:flex-col gap-1 md:pr-2 mb-2 md:mb-0 border-b md:border-b-0 md:border-r border-slate-200 md:min-w-[110px]",children:YZ.map(O=>J.jsxs("button",{className:xa("flex items-center gap-2 px-3 py-2 rounded transition-colors font-medium w-full md:w-auto",e===O.key?"bg-blue-100 text-blue-800":"hover:bg-slate-100 text-slate-700"),onClick:()=>i(O.key),children:[O.icon," ",O.label]},O.key))}),J.jsxs("section",{className:"flex-1 pl-0 md:pl-6 overflow-y-auto relative",children:[e==="canvas"&&J.jsxs("form",{className:"flex flex-col gap-y-8 md:gap-y-6 h-full",onSubmit:O=>{O.preventDefault(),D()},children:[J.jsxs("div",{children:[J.jsxs("h3",{className:"font-bold md:text-lg mb-2 flex items-center gap-2",children:[J.jsx(s_,{size:18})," Canvas Size"]}),J.jsxs("div",{className:"flex sm:flex-row gap-3 sm:gap-4",children:[J.jsxs("div",{className:"flex flex-col gap-1 w-full sm:w-32",children:[J.jsx("span",{className:"text-xs font-semibold",children:"Width"}),J.jsx("input",{type:"number",min:100,max:6e3,step:1,pattern:"\\d*",value:x.width,inputMode:"numeric",onKeyDown:O=>{(O.key==="."||O.key===","||O.key==="e")&&O.preventDefault()},onChange:O=>{const L=O.target.value.replace(/[^\d]/g,"");S(I=>({...I,width:L}))},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-base text-center font-medium shadow-sm focus:ring-2 focus:ring-blue-400"})]}),J.jsxs("div",{className:"flex flex-col gap-1 w-full sm:w-32",children:[J.jsx("span",{className:"text-xs font-semibold",children:"Height"}),J.jsx("input",{type:"number",min:100,max:6e3,step:1,pattern:"\\d*",value:x.height,inputMode:"numeric",onChange:O=>{const L=O.target.value.replace(/[^\d]/g,"");S(I=>({...I,height:L}))},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-base text-center font-medium shadow-sm focus:ring-2 focus:ring-blue-400"})]})]})]}),J.jsxs("div",{children:[J.jsxs("h3",{className:"font-bold md:text-lg mb-2 flex items-center gap-2",children:[J.jsx(YT,{size:18})," Canvas Background"]}),J.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[J.jsx(Rv,{icon:r_,color:x.backgroundColor,onChange:O=>S(L=>({...L,backgroundColor:O})),label:"Color de fondo",size:32}),J.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-1 rounded bg-blue-50 text-blue-700 text-xs font-medium ml-2 hover:bg-blue-100 border border-blue-300 transition",onClick:()=>S(O=>({...O,backgroundColor:"#FFFFFF"})),children:[J.jsx(XE,{size:16,className:"mr-1"}),"Restablecer"]})]})]}),J.jsxs("div",{children:[J.jsxs("label",{className:"text-xs font-semibold mb-1 flex items-center gap-2",children:[J.jsx(VE,{size:18})," Fondo con Imagen:"]}),J.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center",children:[J.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-slate-100 rounded-md cursor-pointer border border-slate-200 hover:bg-blue-50 transition w-full",children:[J.jsx(VE,{size:18}),J.jsx("span",{className:"text-xs font-medium",children:"Seleccionar Imagen"}),J.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:w})]}),x.backgroundImage&&J.jsxs("div",{className:"flex items-center gap-1 mt-2 sm:mt-0 flex-nowrap text-nowrap w-full",children:[J.jsx("img",{src:x.backgroundImage,alt:"Fondo",className:"h-9 w-9 object-cover rounded"}),J.jsxs("button",{type:"button",className:"px-2 py-1 text-xs flex gap-2 h-9 items-center rounded bg-red-100 hover:bg-red-200 transition",onClick:()=>S(O=>({...O,backgroundImage:null})),children:[J.jsx(l_,{size:20})," Quitar imagen"]})]})]})]}),J.jsxs("div",{className:"w-full",children:[J.jsxs("label",{className:"text-xs font-semibold mb-1 flex items-center gap-2",children:[J.jsx(YE,{size:18})," Fondo desde PDF:"]}),J.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-slate-100 rounded-md cursor-pointer border border-slate-200 hover:bg-blue-50 transition w-full",children:[J.jsx(YE,{size:18}),J.jsx("span",{className:"text-xs font-medium",children:"Seleccionar PDF"}),J.jsx("input",{type:"file",accept:"application/pdf",className:"hidden",onChange:R})]})]}),J.jsx("div",{children:J.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 hover:bg-red-100 transition w-full sm:w-auto",onClick:f,children:[J.jsx(XE,{size:16})," Reiniciar Vista del Canvas"]})}),J.jsxs("div",{className:"flex sm:flex-row gap-3 justify-end items-center mt-2 pt-2 border-t",children:[J.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium transition w-full sm:w-auto",onClick:T,children:[J.jsx(ZD,{size:18})," Descartar"]}),J.jsxs("button",{type:"submit",className:"flex items-center text-center gap-2 px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow w-full sm:w-auto",children:[J.jsx(jD,{size:18})," Guardar"]})]})]}),e==="export"&&J.jsxs("div",{className:"space-y-6",children:[J.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center gap-2",children:[J.jsx(gv,{size:18})," Exportar Canvas"]}),J.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[J.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded bg-blue-600 text-white font-semibold w-full sm:w-auto",onClick:()=>C("png"),children:[J.jsx(gv,{size:16})," PNG"]}),J.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded bg-green-600 text-white font-semibold w-full sm:w-auto",onClick:()=>C("jpg"),children:[J.jsx(gv,{size:16})," JPG"]})]}),J.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Solo se exportar la zona de trabajo actual. Las figuras fuera del rea se recortan."})]}),e==="about"&&J.jsxs("div",{className:"space-y-3",children:[J.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center gap-2",children:[J.jsx(VT,{size:18})," About"]}),J.jsxs("p",{className:"text-sm",children:[J.jsx("b",{children:"Desarrollado por Raul Belloso"})," ",J.jsx("br",{}),J.jsxs("span",{className:"text-xs text-gray-500",children:["Cualquier sugerencia o contacto en"," ",J.jsx("a",{className:"text-blue-500 underline",href:"https://racoondevs.com",children:"racoondevs.com"})]}),J.jsx("br",{}),"Esta aplicacin es un editor de canvas simple para crear dibujos y diseos. Puedes usar herramientas bsicas como lpiz, borrador y formas geomtricas.",J.jsx("br",{}),J.jsx("br",{})]})]})]})]})})}function KZ(){const{zoom:n,zoomIn:t,zoomOut:e,resetView:i,gridEnabled:a,toggleGrid:s}=It(),o=It(m=>m.undo),c=It(m=>m.redo),d=Z_({maxWidth:768}),[f,g]=X.useState(!1);return J.jsxs("div",{className:xa("fixed z-50 right-4 bottom-4 transition-all duration-200",{"right-1 left-1 flex justify-center":d}),children:[J.jsxs("nav",{className:xa("flex items-center gap-2 overflow-x-auto p-2 bg-blue-900/50 backdrop-blur-lg rounded-xl shadow-2xl",{"w-auto":!d}),style:{maxWidth:d?"95vw":"unset"},children:[J.jsx("button",{onClick:o,title:"Deshacer",className:"p-2 rounded transition-colors text-white hover:bg-blue-500/90 duration-150",children:J.jsx(tO,{size:20})}),J.jsx("button",{onClick:c,title:"Rehacer",className:"p-2 rounded transition-colors text-white hover:bg-blue-500/90 duration-150",children:J.jsx(ID,{size:20})}),J.jsx("button",{onClick:e,title:"Alejar",className:"p-2 rounded transition-colors text-white hover:bg-blue-500/90 duration-150",children:J.jsx(rO,{size:20})}),J.jsxs("span",{className:"whitespace-nowrap text-white w-12 text-center select-none",children:[Math.round(n*100),"%"]}),J.jsx("button",{onClick:t,title:"Acercar",className:"p-2 rounded text-white hover:bg-blue-500/90 transition-colors duration-150",children:J.jsx(iO,{size:20})}),J.jsx("button",{onClick:i,title:"Centrar vista",className:"p-2 rounded text-white hover:bg-blue-500/90 transition-colors duration-150",children:J.jsx(CD,{size:20})}),J.jsx("button",{onClick:s,title:"Mostrar/Ocultar cuadrcula",className:xa("p-2 rounded transition-colors duration-150",{"bg-blue-100 text-black":a,"text-white hover:bg-blue-500/90":!a}),children:J.jsx(yD,{size:20})}),J.jsx("button",{className:"p-2 rounded text-white hover:bg-blue-500/90 transition-colors duration-150",title:"Configuracin del lienzo",onClick:()=>g(!0),children:J.jsx(XT,{size:24})})]}),J.jsx(XZ,{isOpen:f,onClose:()=>g(!1)})]})}function WZ(){return J.jsxs("div",{className:"h-[100dvh] flex flex-col relative",children:[J.jsx(ZI,{}),J.jsx(KZ,{}),J.jsx(bV,{}),J.jsx("div",{className:"flex flex-1 overflow-hidden",children:J.jsx(tQ,{})})]})}IT.createRoot(document.getElementById("root")).render(J.jsx(X.StrictMode,{children:J.jsx(WZ,{})}));
